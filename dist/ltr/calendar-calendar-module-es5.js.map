{"version":3,"sources":["webpack:///node_modules/@fullcalendar/list/main.esm.js","webpack:///src/app/calendar/calendar.component.ts","webpack:///src/app/calendar/calendar.component.html","webpack:///node_modules/@fullcalendar/interaction/main.esm.js","webpack:///node_modules/@fullcalendar/angular/__ivy_ngcc__/fesm2015/fullcalendar-angular.js","webpack:///src/app/calendar/calendar-routing.module.ts","webpack:///src/app/calendar/calendar.module.ts","webpack:///node_modules/@fullcalendar/core/main.esm.js","webpack:///src/app/calendar/calendar.service.ts","webpack:///node_modules/fast-deep-equal/index.js","webpack:///src/app/calendar/dialogs/form-dialog/form-dialog.component.ts","webpack:///src/app/calendar/dialogs/form-dialog/form-dialog.component.html","webpack:///node_modules/@fullcalendar/daygrid/main.esm.js","webpack:///src/app/calendar/calendar.model.ts","webpack:///node_modules/@fullcalendar/timegrid/main.esm.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","ListEventRenderer","_super","listView","_this","call","attachSegs","segs","length","renderEmptyMessage","renderSegList","detachSegs","renderSegHtml","seg","_a","context","theme","options","eventRange","eventDef","def","eventInstance","instance","eventUi","ui","url","classes","concat","classNames","bgColor","backgroundColor","timeHtml","allDay","range","isStart","_getTimeText","start","end","isEnd","getTimeText","push","join","displayEventTime","getClass","title","computeEventTimeFormat","hour","minute","meridiem","ListView","viewSpec","parentEl","computeDateVars","eventStoreToSegs","_eventStoreToSegs","renderSkeleton","_renderSkeleton","_unrenderSkeleton","eventRenderer","renderContent","renderSegs","bind","unrender","firstContext","calendar","registerInteractiveComponent","el","render","props","dateProfile","dayDates","dayRanges","eventStore","eventUiBases","destroy","unregisterInteractiveComponent","classList","add","listViewClassNames","split","_i","listViewClassNames_1","listViewClassName","scroller","appendChild","contentEl","updateSize","isResize","viewHeight","isAuto","computeSizes","assignSizes","clear","setHeight","computeScrollerHeight","eventRangesToSegs","activeRange","nextDayThreshold","fg","eventRanges","eventRanges_1","apply","eventRangeToSegs","dateEnv","dayIndex","segRange","component","valueOf","innerHTML","noEventsMessage","allSegs","segsByDay","groupSegsByDay","daySegs","i","tableEl","tbodyEl","querySelector","buildDayHeaderRow","sortEventSegs","dayDate","mainFormat","listDayFormat","altFormat","listDayAltFormat","className","formatIso","omitTime","format","fgSegSelector","dayStart","renderRange","viewEnd","main","views","list","buttonTextKey","month","day","year","listDay","type","duration","days","weekday","listWeek","weeks","listMonth","listYear","Date","getDate","getMonth","getFullYear","CalendarComponent","fb","dialog","calendarService","snackBar","filterOptions","filters","name","value","checked","calendarVisible","calendarPlugins","calendarWeekends","dialogTitle","addCusForm","createContactForm","calendarEvents","events","tempEvents","group","id","required","pattern","category","startDate","endDate","details","dialogRef","open","data","action","afterClosed","subscribe","result","calendarData","getDialogData","groupId","reset","showNotification","row","event","extendedProps","forEach","element","index","editEvent","filterEvent","eventIndex","slice","singleEvent","assign","getClassNameValue","info","e","toLowerCase","filter","item","colorName","text","placementFrom","placementAlign","verticalPosition","horizontalPosition","panelClass","chars","Math","round","random","addNewEvent","handleEventRender","eventClick","selector","templateUrl","styleUrls","callAPIDialog","__assign","t","s","n","arguments","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","containerEl","subjectEl","downEl","handleSelector","shouldIgnoreMove","shouldWatchScroll","isDragging","isTouchDragging","wasTouchScroll","handleMouseDown","ev","shouldIgnoreMouse","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","trigger","initScrollWatch","document","addEventListener","handleMouseMove","handleMouseUp","recordCoords","removeEventListener","cleanup","handleTouchStart","createEventFromTouch","target","handleTouchMove","handleTouchEnd","window","handleTouchScroll","startIgnoringMouse","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","passive","listenerCreated","listenerDestroyed","querySubjectEl","destroyScrollWatch","cancelTouchScroll","isFirst","touches","button","ctrlKey","setTimeout","onWindowTouchMove","preventDefault","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","parentNode","body","zIndex","revertDuration","getBoundingClientRect","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","style","display","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","left","top","getMirrorEl","cloneNode","position","visibility","boxSizing","width","right","height","bottom","margin","ScrollGeomCache","scrollController","doesListening","scrollTop","getScrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","clientWidth","getClientWidth","clientHeight","getClientHeight","clientRect","computeClientRect","getEventTarget","setScrollTop","max","min","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ElementScrollGeomCache","WindowScrollGeomCache","getTime","performance","now","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","animate","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","buildCaches","yDelta","xDelta","scrollCache","requestAnimationFrame","seconds","invDistance","distance","velocity","sign","bestSide","rect","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","map","els","query","querySelectorAll","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","distanceSq","autoScroller","onPointerUp","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","OffsetTracker","origRect","computeLeft","computeTop","isWithinClipping","point","isIgnoredClipping","node","tagName","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","prepareHits","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","origPoint","adjustedPoint","subjectRect","queryHitForOffset","slicedSubjectRect","coordAdjust","forceHandle","hit","isHitsEqual","offsetTrackers","interactionSettings","buildPositionCaches","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","positionLeft","positionTop","queryHit","dateSpan","layer","hit0","hit1","Boolean","DateClicking","settings","isValidDateDownEl","view","_b","hitDragging","triggerDateClick","dayEl","DateSelecting","dragSelection","canSelect","selectable","getComponentTouchDelay","unselect","handleHitUpdate","isFinal","isInvalid","joinHitsIntoSelection","pluginSystem","hooks","dateSelectionTransformers","isDateSelectionValid","dispatch","selection","triggerDateSelect","selectMinDistance","dragScroll","selectLongPressDelay","longPressDelay","dateSpan0","dateSpan1","ms","sort","dateSelectionTransformers_1","transformer","res","EventDragging","subjectSeg","relevantEvents","receivingCalendar","validMutation","mutatedRelevantEvents","origTarget","initialCalendar","eventInstanceId","instanceId","state","eventDragMinDistance","eventSelection","getComponentTouchDelay$1","dragRevertDuration","isValid","isValidSegDownEl","contains","publiclyTrigger","jsEvent","mutation","interaction","affectedEvents","mutatedEvents","isEvent","origSeg","receivingComponent","receivingOptions","editable","droppable","computeEventMutation","eventDragMutationMassagers","isInteractionValid","displayDrag","initialCalendar_1","initialView","eventApi","relevantEvents_1","clearDrag","transformed","eventDropTransformers","eventDropArg","delta","datesDelta","oldEvent","defs","defId","instances","revert","draggedEl","dropArg","buildDatePointApi","SELECTOR","useEventCenter","nextCalendar","prevCalendar","massagers","date0","date1","standardProps","hasEnd","allDayMaintainDuration","largeUnit","milliseconds","massagers_1","massager","eventLongPressDelay","EventDragging$1","draggingSeg","querySeg","computeMutation","eventResizeJoinTransforms","startDelta","endDelta","prevEvent","isFromStart","instanceRange","transforms","transforms_1","transform","UnselectAuto","isRecentPointerDateSelect","onSelect","selectInfo","onDocumentPointerUp","documentPointer","dateSelection","unselectAuto","viewOpt","unselectCancel","off","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","canDropElOnCalendar","computeEventForDateSpan","finalView","arg","getDragMetaFromEl","dropAccept","opt","defProps","leftoverProps","externalDefTransforms","sourceId","startTime","getDefaultEventEnd","str","getEmbeddedElData","obj","JSON","parse","dataAttrPrefix","prefix","prefixedName","getAttribute","ExternalDraggable","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","componentInteractions","calendarInteractions","elementDraggingImpl","deepCopy","input","isArray","mapHash","func","output","key","INPUT_NAMES","INPUT_IS_DEEP","header","footer","eventSources","resources","OUTPUT_NAMES","FullCalendarComponent","dirtyProps","deepCopies","windowResize","dateClick","eventMouseEnter","eventMouseLeave","select","loading","eventPositioned","eventDragStart","eventDragStop","eventDrop","eventResizeStart","eventResizeStop","eventResize","drop","eventReceive","eventLeave","_destroyed","navLinkDayClick","navLinkWeekClick","viewSkeletonRender","viewSkeletonDestroy","datesRender","datesDestroy","dayRender","eventRender","eventDestroy","resourceRender","nativeElement","buildOptions","outputName","emit","inputName","inputVal","undefined","deepChangeDetection","copy","changes","currentValue","keys","mutateOptions","ɵfac","FullCalendarComponent_Factory","ɵcmp","selectors","inputs","customButtons","buttonIcons","themeSystem","bootstrapFontAwesome","firstDay","dir","weekends","hiddenDays","fixedWeekCount","weekNumbers","weekNumbersWithinDays","weekNumberCalculation","businessHours","showNonCurrentDates","contentHeight","aspectRatio","handleWindowResize","windowResizeDelay","eventLimit","eventLimitClick","timeZone","defaultView","allDaySlot","allDayText","slotDuration","slotLabelFormat","slotLabelInterval","snapDuration","scrollTime","minTime","maxTime","slotEventOverlap","defaultDate","nowIndicator","visibleRange","validRange","dateIncrement","dateAlignment","dayCount","locales","locale","eventTimeFormat","columnHeader","columnHeaderFormat","columnHeaderText","columnHeaderHtml","titleFormat","weekLabel","displayEventEnd","eventLimitText","dayPopoverFormat","navLinks","selectMirror","defaultAllDayEventDuration","defaultTimedEventDuration","cmdFormatter","defaultRangeSeparator","selectConstraint","selectOverlap","selectAllow","eventStartEditable","eventDurationEditable","eventConstraint","eventOverlap","eventAllow","eventClassName","eventClassNames","eventBackgroundColor","eventBorderColor","eventTextColor","eventColor","allDayDefault","startParam","endParam","lazyFetching","eventOrder","rerenderDelay","eventDataTransform","eventResizableFromStart","timeGridEventMinHeight","allDayHtml","eventSourceFailure","eventSourceSuccess","forceEventDuration","progressiveEventRendering","timeZoneParam","titleRangeSeparator","buttonText","plugins","schedulerLicenseKey","resourceLabelText","resourceOrder","filterResourcesWithEvents","resourceText","resourceGroupField","resourceGroupText","resourceAreaWidth","resourceColumns","resourcesInitiallyExpanded","slotWidth","datesAboveResources","googleCalendarApiKey","refetchResourcesOnNavigate","eventResourceEditable","outputs","features","decls","vars","template","FullCalendarComponent_Template","rf","ctx","encapsulation","ctorParameters","String","Number","FullCalendarModule","ɵmod","ɵinj","factory","FullCalendarModule_Factory","imports","args","ngJitMode","declarations","exports","routes","path","CalendarRoutingModule","forChild","CalendarsModule","providers","elementPropHash","colSpan","rowSpan","containerTagHash","createElement","attrs","content","attrName","applyStyle","setAttribute","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","htmlToNodeList","childNodes","substr","normalizeContent","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","Node","removeElement","removeChild","matchesMethod","matches","matchesSelector","msMatchesSelector","closestMethod","closest","documentElement","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","j","findChildren","parents","children","childNode","forceClassName","remove","PIXEL_PROP_RE","propName","applyStyleProp","val","test","pointInsideRect","intersectRects","rect1","rect2","translateRect","constrainPoint","getRectCenter","diffPoints","point1","point2","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","computeIsRtlScrollbarOnLeft","outerEl","border","padding","overflow","direction","innerEl","sanitizeScrollbarWidth","computeEdges","getPadding","computedStyle","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","scrollbarBottom","offsetHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeInnerRect","goWithinPadding","outerRect","computeRect","edges","computeViewportRect","computeHeightAndMargins","computeVMargins","computed","marginTop","marginBottom","getClippingParents","overflowY","overflowX","computeClippingRect","reduce","rect0","listenBySelector","eventType","handler","realHandler","matchedChild","listenToHoverBySelector","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","transitionEventNames","whenTransitionDone","realCallback","eventName","DAY_IDS","addWeeks","m","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","diffHours","diffMinutes","diffSeconds","diffDayAndTime","m0day","startOfDay","m1day","years","months","diffWholeWeeks","diffWholeDays","timeAsMs","getUTCFullYear","getUTCMonth","getUTCDate","startOfHour","getUTCHours","startOfMinute","getUTCMinutes","startOfSecond","getUTCSeconds","weekOfYear","marker","dow","doy","y","w","weekOfGivenYear","nextW","firstWeekStart","firstWeekOffset","floor","fwd","fwdlw","getUTCDay","dateToLocalArray","date","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","getUTCMilliseconds","UTC","isValidDate","isNaN","INTERNAL_UNITS","PARSE_RE","createDuration","unit","parseString","normalizeObject","exec","getWeeksFromInput","hours","minutes","second","millisecond","week","durationsEqual","d0","d1","isSingleDay","dur","addDurations","subtractDurations","multiplyDuration","asRoughYears","asRoughDays","asRoughMonths","asRoughMs","asRoughMinutes","asRoughSeconds","wholeDivideDurations","numerator","denominator","localRes","isInt","greatestDurationDenominator","dontReturnWeeks","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","disableCursor","enableCursor","distributeHeight","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","minOffset","naturalHeight","naturalOffset","newHeight","matchCellWidths","maxInnerWidth","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","preventSelection","allowSelection","preventContextMenu","allowContextMenu","parseFieldSpecs","specs","tokens","token","charAt","field","substring","order","compareByFieldSpecs","obj0","obj1","fieldSpecs","cmp","compareByFieldSpec","fieldSpec","flexibleCompare","localeCompare","capitaliseFirstLetter","toUpperCase","padStart","len","compareNumbers","applyAll","functions","thisObj","ret","firstDefined","debounce","wait","timeout","timestamp","later","last","refineProps","rawProps","processors","defaults","refined","processor","Function","computeAlignedDayRange","timedRange","dayCnt","computeVisibleDayRange","startDay","endDay","endTimeMS","isMultiDayRange","diffDates","diffWholeYears","diffWholeMonths","parseRecurring","eventInput","recurringTypes","leftovers","localLeftovers","parsed","allDayGuess","typeData","typeId","expandRecurringRanges","framingRange","typeDef","recurringDef","markers","expand","subtract","mergeProps","propObjs","complexProps","dest","complexObjs","unshift","filterHash","hash","filtered","newHash","arrayToHash","a_1","hashValuesToArray","isPropsEqual","parseEvents","rawEvents","allowOpenRange","createEmptyEventStore","rawEvents_1","rawEvent","tuple","parseEvent","eventTupleToStore","expandRecurring","starts","starts_1","createEventInstance","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","isEventDefsGrouped","def0","def1","transformRawEvents","eventSource","calEachTransform","sourceEachTransform","transformEachRawEvent","refinedEvents","rawEvents_2","refinedEvent","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","invertedRanges","dateRange","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","constrainMarkerToRange","removeExact","array","exactVal","removeCnt","splice","isArraysEqual","a0","a1","memoize","workerFunc","memoizeOutput","equalityFunc","cachedRes","newRes","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","formatRange","diffSeverity","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialDateProps","computePartialFormattingOptions","partialFormattingFunc","partial0","partial1","insertion","findCommonInsertion","before","after","getLargestUnit","standardDatePropCnt","formatTimeZoneOffset","timeZoneOffset","formatWeekNumber","computeWeekNumber","buildNativeFormattingFunc","sanitizeSettings","normalFormat","Intl","DateTimeFormat","codes","zeroFormat","zeroProps","postProcess","replace","injectTzoStr","toLocaleLowerCase","tzoStr","replaced","num","parts","simpleNumberFormat","isRtl","reverse","ca","getMarkerYear","getMarkerMonth","getMarkerDay","biggestUnit","partialOptions","name_2","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","CmdFormatter","cmdStr","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","buildIsoString","stripZeroTime","toISOString","formatIsoTimeString","doIso","abs","mins","startInfo","expandZonedMarker","endInfo","localeCodes","dateInfo","markerToArray","EventSourceApi","internalEventSource","refetch","sourceIds","defineProperty","get","publicId","enumerable","configurable","meta","EventApi","_calendar","_def","_instance","setProp","DATE_PROPS","NON_DATE_PROPS","mutate","UNSCOPED_EVENT_UI_PROPS","borderColor","startEditable","durationEditable","setExtendedProp","setStart","startInput","granularity","maintainDuration","setEnd","endInput","setDates","moveStart","deltaInput","moveEnd","moveDates","setAllDay","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","fromApi","toDate","rendering","constraints","overlap","allows","textColor","sliceEventStore","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","invertedRanges_1","invertedRange","invertedRanges_2","bg","hasBgRendering","filterSegsViaEls","isMirror","hasPublicHandlers","custom","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","triggerRenderedSegs","isMirrors","segs_2","publiclyTriggerAfterSizing","eventSourceLoadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_3","segs_4","computeEventDraggable","transformers","isDraggableTransformers","transformers_1","computeEventStartResizable","computeEventEndResizable","applyMutationToEventStore","eventConfigBase","eventConfigs","applyMutationToEventDef","eventDefMutationAppliers","applyMutationToEventInstance","eventConfig","appliers","appliers_1","applier","forceAllDay","clearEnd","reduceEventStore","receiveRawEvents","fetchId","fetchRange","addEvent","rezoneDates","oldDateEnv","applyMutationToRelated","excludeInstances","excludeEventsBySourceId","latestFetchId","subset","expandRange","newDateEnv","canComputeOffset","relevant","removals","isNewPropsValid","eventDrag","newProps","isPropsValid","dateSpanMeta","filterConfig","isInteractionPropsValid","isDateSelectionPropsValid","subjectEventStore","subjectDefs","subjectInstances","subjectConfigs","selectionConfig","otherEventStore","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","otherOverlap","calendarEventStore","subjectAllow","subjectDateSpan","origDef","origInstance","buildDateSpanApi","relevantEventStore","relevantDefs","relevantInstances","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","businessHoursUnexpanded","constraints_1","constraint","anyRangesContainRange","constraintToRanges","eventStoreToRanges","outerRanges","outerRanges_1","normalizeConstraint","htmlEscape","cssToStr","cssProps","statements","attrsToStr","parseClassName","raw","allow","color","processUnscopedUiProps","processScopedUiProps","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","uid","computeIsAllDayDefault","leftovers0","recurringRes","parseEventDef","leftovers1","singleRes","parseSingle","pluckNonDateProps","eventDefParsers","eventDefParser","newLeftovers","freeze","pluckDateProps","startMeta","startMarker","endMeta","endMarker","createMarkerMeta","isTimeUnspecified","preLeftovers","source","DEF_DEFAULTS","endTime","daysOfWeek","parseBusinessHours","refineInputs","rawDefs","rawDef","memoizeRendering","renderFunc","unrenderFunc","dependencies","dependents","thisContext","prevArgs","dependents_1","dependent","dependencies_1","dependency","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","buildEventUiForKey","keyInfo","buildEventUi","dateSpans","getKeysForDateSpan","keys_1","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","allOptions","gotoOptions","innerHtml","forceOff","finalOptions","stringify","getAllDayHtml","getDayClasses","noThemeHighlight","todayStart","todayEnd","monthMode","currentRange","getNow","unpromisify","success","failure","isResolved","wrappedSuccess","wrappedFailure","then","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","EmitterMixin","addToHash","_handlers","one","_oneHandlers","removeFromHash","triggerWith","hasHandlers","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","canScrollVertically","canScrollHorizontally","ElementScrollController","WindowScrollController","scroll","ScrollComponent","applyOverflow","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","ComponentContext","eventOrderSpecs","extend","Component","everRendered","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","receiveContext","recycleProps","anyChanges","comboProps","beforeUpdate","afterUpdate","oldContext","oldProps","DateComponent","elWidth","elHeight","isPopover","isInPopover","segEl","bgSegSelector","uid$1","createPlugin","deps","reducers","datePointTransforms","dateSpanTransforms","viewPropsTransformers","viewContainerModifiers","themeClasses","eventSourceDefs","namedTimeZonedImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","combineHooks","hooks0","hooks1","eventSourceDef","ignoreRange","parseMeta","fetch","ArrayEventSourcePlugin","eventSourceDef$1","startStr","endStr","FuncEventSourcePlugin","requestJson","method","params","successCallback","failureCallback","injectQueryStringParams","encodeParams","xhr","XMLHttpRequest","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","eventSourceDef$2","extraParams","requestParams","buildRequestParams","errorMessage","message","JsonFeedEventSourcePlugin","customRequestParams","recurring","startRecur","endRecur","anyValid","clippedFramingRange","expandRanges","SimpleRecurrencePlugin","dowHash","dayMarker","instanceStarts","instanceStart","DefaultOptionChangeHandlers","deepEqual","handleEventSources","handlePlugins","unfoundSources","newInputs","inputs_1","inputFound","_raw","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","addPluginInputs","config","globalDefaults","center","rtlDefaults","prev","next","prevYear","nextYear","complexOptions","mergeOptions","optionObjs","INTERNAL_PLUGINS","refinePluginDefs","pluginInputs","pluginInputs_1","pluginInput","globalName","console","warn","RAW_EN_LOCALE","code","today","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","parseLocale","queryLocale","codeArg","queryRawLocale","simpleId","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","updates","isDynamic","overrideHash","removals_1","localeDefaults","dirDefaults","calendarSystemClassMap","registerCalendarSystem","theClass","createCalendarSystem","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","isNamedTimeZone","namedTimeZoneImpl","weekDow","weekDoy","weekNumberFunc","createNowMarker","timestampToMarker","getYear","addYears","addMonths","greatestWholeUnit","countDurationsBetween","startOf","startOfYear","startOfMonth","startOfWeek","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","addSources","sources","removeSource","fetchDirtySources","fetchSourcesByIds","excludeStaticSources","receiveResponse","uid$3","eventSourceHash","sources_1","sourceHash","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccess","calSuccessRes","sourceSuccessRes","error","callFailure","DateProfileGenerator","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","usesMinMaxTime","alignment","dateIncrementInput","dateIncrementDuration","isHiddenDay","skipHiddenDays","computeRes","customAlignment","runningCount","fallback","otherArgs","isHiddenDayHash","Error","inc","isExclusive","isDateProfilesEqual","p0","p1","viewType","reduceViewType","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","computeLoadingLevel","loadingLevel","reducerFunc","currentViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","newDate","currentSelection","currentInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","span","parseOpenDateSpan","isDateSpansEqual","span0","span1","isSpanPropsEqual","dateStr","fabricateEventRange","compileViewDefs","defaultConfigs","overrideConfigs","ensureViewDef","viewDef","buildViewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","viewSubclass","configs","superProto","getPrototypeOf","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","viewDefs","buildViewSpec","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextOverride","buttonTextDefault","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupChildren","isOnlyButtons","groupEl","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","disabled","elClassNames","renderToolbars","_renderToolbars","_unrenderToolbars","buildComponentContext","buildViewPropTransformers","computeTitle","freezeHeight","renderView","thawHeight","updateElClassNames","modifyViewContainer","savedScroll","queryScroll","removeElClassNames","headerLayout","footerLayout","dateProfileGenerator","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","viewProps","isHeightAuto","computeHeightVars","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","viewOptions","computeTitleFormat","theClasses","Interaction","parseInteractionSettings","interactionSettingsToStore","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","href","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","close","Calendar","buildComponentContext$1","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginDefs","pluginDefs_1","pluginDef","renderableEventStore","bindHandlers","executeRender","requestRerender","unbindHandlers","removeNavLinkListener","anchorEl","customAction","zoomTo","windowResizeProxy","buildInitialState","rawSources","singleRawSource","rawSources_1","rawSource","batchRendering","getInitialDate","oldState","shift","newState","delayedRerender","tryRerender","renderComponent","eventUiSingleBase","eventUiBySource","releaseAfterSizingTriggers","setOption","getOption","viewOpts","changeHandlers","normalUpdates","specialUpdates","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_3","pluginHooks","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_4","isValidViewType","dateOrRange","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","settingsInput","DEFAULT_INTERACTIONS","interactionClasses","interactions","interactionClass","listener","dateOrObj","selectionInput","triggerDateUnselect","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","scrollToDuration","themeClass","View","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","initialize","updateBaseSize","renderDates","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","startNowIndicator","update","initialNowDate","getNowIndicatorUnit","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearInterval","isForced","queuedScroll","applyQueuedScroll","applyScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","mirrorInfo","rangeUpdated","renderSegEls","_segs","computeDisplayEventTime","computeDisplayEventEnd","getSegClasses","isDraggable","isResizable","isResizing","displayEnd","getSkinCss","objs","buildSegCompareObj","c","_seg","force","computeSegSizes","assignSegSizes","hideByHash","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","NamedTimeZoneImpl","ElementDragging","dateInput","buildDateEnv$1","dateMeta","DRAG_META_PROPS","DRAG_META_DEFAULTS","parseDragMeta","computeFallbackHeaderFormat","datesRepDistinctDays","renderDateCell","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","DayHeader","dates","renderIntroHtml","dates_1","thead","DaySeries","indices","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","col","buildCell","seriesSeg","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","sliceEventRange","isComponentAllDay","version","CalendarService","httpClient","API_URL","httpOptions","headers","dataChange","dialogData","pipe","errorHandler","ErrorEvent","log","module","equal","RegExp","flags","toString","FormDialogComponent","showDeleteBtn","formControl","calendarForm","hasError","deleteCalendar","getRawValue","addUpdateCalendar","confirmAdd","DayGridDateProfileGenerator","endOfWeek","Popover","isHidden","documentMousedown","hide","show","autoHide","elDims","origin","offsetParent","clippingRect","SimpleDayGridEventRenderer","isResizableFromStart","isResizableFromEnd","skinCss","timeText","titleHtml","DayGridEventRenderer","dayGrid","rowStructs","renderSegRows","rowEls","rowNode","removeSegPopover","rowStruct","pop","segRows","groupSegRows","renderSegRow","rowSegs","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","tr","td","emptyCellsUntil","endCol","leftCol","rightCol","introHtml","renderProps","levels","isDaySegCollision","level","compareDaySegCols","otherSegs","otherSeg","DayGridMirrorRenderer","skeletonEl","skeletonTopEl","skeletonTop","EMPTY_CELL_HTML","DayGridFillRenderer","renderFillRow","startCol","trEl","getElementsByTagName","DayTile","DayTileEventRenderer","renderFrame","_renderFrame","renderFgEvents","fgSegs","eventDragInstances","eventResizeInstances","segContainerEl","dayTile","DayBgRow","renderHtml","cell","renderCellHtml","htmlAttrs","DAY_NUM_FORMAT","WEEK_NUM_FORMAT","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","renderDayRowHtml","cellEls","rowPositions","colPositions","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","buildColPositions","buildRowPositions","positionToHit","relativeRect","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowBottom","trEls","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","moreEls","limitedEls","limitedEl","hiddenSegs","getMoreLinkText","clickOption","_col","moreEl","currentTarget","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","showSegPopover","topEl","dayEnd","dayRange","newSegs","startLevel","WEEK_NUM_FORMAT$1","AbstractDayGridView","processOptions","_processOptions","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","headRowEl","scrollerHeight","setGridHeight","SimpleDayGrid","slicer","DayGridSlicer","dayTable","rawHit","DayGridView","buildDayTable","simpleDayGrid","dayGridDay","dayGridWeek","dayGridMonth","getRandomID","S4","TimeGridEventRenderer","timeGrid","fullTimeFormat","segsByCol","groupSegsByCol","attachSegsByCol","fgContainerEls","computeSegVerticals","computeSegHorizontals","assignSegVerticals","assignSegCss","fullTimeText","startTimeText","unzonedStart","unzonedEnd","level0","buildSlotSegLevels","computeForwardSlotSegs","computeSlotSegPressures","computeSegForwardBack","seriesBackwardPressure","seriesBackwardCoord","forwardSegs","forwardCoord","sortForwardSegs","backwardCoord","buildTimeGridSegCompareObj","generateSegCss","shouldOverlap","generateSegVerticalCss","forwardPressure","computeSlotSegCollisions","k","forwardSeg","results","isSlotSegCollision","seg1","seg2","TimeGridMirrorRenderer","mirrorContainerEls","sourceSegProps","TimeGridFillRenderer","bgContainerEls","businessContainerEls","highlightContainerEls","AGENDA_STOCK_SUB_DURATIONS","TimeGrid","isSlatSizesDirty","isColSizesDirty","renderSlats","_renderSlats","renderColumns","_renderColumns","_unrenderColumns","_renderDateSelection","_unrenderDateSelection","snapsPerSlot","labelFormat","labelInterval","computeLabelInterval","slotsPerLabel","buildSlatPositions","rootBgContainerEl","slatContainerEl","bottomRuleEl","renderSlatRowHtml","slatEls","slatPositions","slotTime","slotIterator","slotDate","isLabeled","axisHtml","colEls","renderContentSkeleton","unrenderContentSkeleton","contentSkeletonEl","colContainerEls","computeDateTop","nodes","lineEl","arrowEl","nowIndicatorEls","getTotalSlatHeight","when","startOfDayDate","computeTimeTop","slatCoverage","slatIndex","slatRemainder","eventMinHeight","colIndex","slatTop","slatHeight","partial","localSnapIndex","snapIndex","time","isSelecting","AllDaySplitter","timed","TIMEGRID_ALL_DAY_EVENT_LIMIT","WEEK_HEADER_FORMAT","AbstractTimeGridView","splitter","weekText","axisStyleAttr","renderTimeGridBgIntroHtml","renderTimeGridIntroHtml","timeGridWrapEl","timeGridEl","dividerEl","axisWidth","noScrollRowEls","SimpleTimeGrid","buildDayRanges","TimeGridSlicer","TimeGridView","simpleTimeGrid","timeGridDay","timeGridWeek"],"mappings":"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EAAE,CAAC,kEAAD;AAxBH,W;AA0BkB,U;;;;;;;;;;;;;;;;;;AChD5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;AAMA;AACA;;;AACA,UAAIC,eAAe,GAAG;AAClBztB,iBAAS,EAAE,IADO;AAElB0tB,eAAO,EAAE,IAFS;AAGlBC,eAAO,EAAE;AAHS,OAAtB;AAKA,UAAIC,gBAAgB,GAAG;AACnB,eAAO,OADY;AAEnB,eAAO;AAFY,OAAvB;;AAIA,eAASC,aAAT,CAAuBzZ,OAAvB,EAAgC0Z,KAAhC,EAAuCC,OAAvC,EAAgD;AAC5C,YAAI1xB,EAAE,GAAG+L,QAAQ,CAACylB,aAAT,CAAuBzZ,OAAvB,CAAT;;AACA,YAAI0Z,KAAJ,EAAW;AACP,eAAK,IAAIE,QAAT,IAAqBF,KAArB,EAA4B;AACxB,gBAAIE,QAAQ,KAAK,OAAjB,EAA0B;AACtBC,wBAAU,CAAC5xB,EAAD,EAAKyxB,KAAK,CAACE,QAAD,CAAV,CAAV;AACH,aAFD,MAGK,IAAIP,eAAe,CAACO,QAAD,CAAnB,EAA+B;AAChC3xB,gBAAE,CAAC2xB,QAAD,CAAF,GAAeF,KAAK,CAACE,QAAD,CAApB;AACH,aAFI,MAGA;AACD3xB,gBAAE,CAAC6xB,YAAH,CAAgBF,QAAhB,EAA0BF,KAAK,CAACE,QAAD,CAA/B;AACH;AACJ;AACJ;;AACD,YAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC7B1xB,YAAE,CAAC0C,SAAH,GAAegvB,OAAf,CAD6B,CACL;AAC3B,SAFD,MAGK,IAAIA,OAAO,IAAI,IAAf,EAAqB;AACtBI,yBAAe,CAAC9xB,EAAD,EAAK0xB,OAAL,CAAf;AACH;;AACD,eAAO1xB,EAAP;AACH;;AACD,eAAS+xB,aAAT,CAAuBC,IAAvB,EAA6B;AACzBA,YAAI,GAAGA,IAAI,CAACC,IAAL,EAAP;AACA,YAAIC,SAAS,GAAGnmB,QAAQ,CAACylB,aAAT,CAAuBW,mBAAmB,CAACH,IAAD,CAA1C,CAAhB;AACAE,iBAAS,CAACxvB,SAAV,GAAsBsvB,IAAtB;AACA,eAAOE,SAAS,CAACE,UAAjB;AACH;;AACD,eAASC,cAAT,CAAwBL,IAAxB,EAA8B;AAC1B,eAAOz2B,KAAK,CAACM,SAAN,CAAgB0M,KAAhB,CAAsBpM,IAAtB,CAA2Bm2B,cAAc,CAACN,IAAD,CAAzC,CAAP;AACH;;AACD,eAASM,cAAT,CAAwBN,IAAxB,EAA8B;AAC1BA,YAAI,GAAGA,IAAI,CAACC,IAAL,EAAP;AACA,YAAIC,SAAS,GAAGnmB,QAAQ,CAACylB,aAAT,CAAuBW,mBAAmB,CAACH,IAAD,CAA1C,CAAhB;AACAE,iBAAS,CAACxvB,SAAV,GAAsBsvB,IAAtB;AACA,eAAOE,SAAS,CAACK,UAAjB;AACH,O,CACD;;;AACA,eAASJ,mBAAT,CAA6BH,IAA7B,EAAmC;AAC/B,eAAOT,gBAAgB,CAACS,IAAI,CAACQ,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAD,CAAmB;AAAnB,SAAhB,IACF,KADL;AAEH;;AACD,eAASV,eAAT,CAAyB9xB,EAAzB,EAA6B0xB,OAA7B,EAAsC;AAClC,YAAIa,UAAU,GAAGE,gBAAgB,CAACf,OAAD,CAAjC;;AACA,aAAK,IAAI1uB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuvB,UAAU,CAACj2B,MAA/B,EAAuC0G,CAAC,EAAxC,EAA4C;AACxChD,YAAE,CAACkB,WAAH,CAAeqxB,UAAU,CAACvvB,CAAD,CAAzB;AACH;AACJ;;AACD,eAAS0vB,gBAAT,CAA0BC,MAA1B,EAAkCjB,OAAlC,EAA2C;AACvC,YAAIkB,MAAM,GAAGH,gBAAgB,CAACf,OAAD,CAA7B;AACA,YAAImB,OAAO,GAAGF,MAAM,CAACP,UAAP,IAAqB,IAAnC,CAFuC,CAEE;;AACzC,aAAK,IAAIpvB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4vB,MAAM,CAACt2B,MAA3B,EAAmC0G,CAAC,EAApC,EAAwC;AACpC2vB,gBAAM,CAACG,YAAP,CAAoBF,MAAM,CAAC5vB,CAAD,CAA1B,EAA+B6vB,OAA/B;AACH;AACJ;;AACD,eAASE,kBAAT,CAA4BC,KAA5B,EAAmCtB,OAAnC,EAA4C;AACxC,YAAIkB,MAAM,GAAGH,gBAAgB,CAACf,OAAD,CAA7B;AACA,YAAImB,OAAO,GAAGG,KAAK,CAACC,WAAN,IAAqB,IAAnC;;AACA,aAAK,IAAIjwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4vB,MAAM,CAACt2B,MAA3B,EAAmC0G,CAAC,EAApC,EAAwC;AACpCgwB,eAAK,CAACjkB,UAAN,CAAiB+jB,YAAjB,CAA8BF,MAAM,CAAC5vB,CAAD,CAApC,EAAyC6vB,OAAzC;AACH;AACJ;;AACD,eAASJ,gBAAT,CAA0Bf,OAA1B,EAAmC;AAC/B,YAAIlc,GAAJ;;AACA,YAAI,OAAOkc,OAAP,KAAmB,QAAvB,EAAiC;AAC7Blc,aAAG,GAAG6c,cAAc,CAACX,OAAD,CAApB;AACH,SAFD,MAGK,IAAIA,OAAO,YAAYwB,IAAvB,EAA6B;AAC9B1d,aAAG,GAAG,CAACkc,OAAD,CAAN;AACH,SAFI,MAGA;AAAE;AACHlc,aAAG,GAAGja,KAAK,CAACM,SAAN,CAAgB0M,KAAhB,CAAsBpM,IAAtB,CAA2Bu1B,OAA3B,CAAN;AACH;;AACD,eAAOlc,GAAP;AACH;;AACD,eAAS2d,aAAT,CAAuBnzB,EAAvB,EAA2B;AACvB,YAAIA,EAAE,CAAC+O,UAAP,EAAmB;AACf/O,YAAE,CAAC+O,UAAH,CAAcqkB,WAAd,CAA0BpzB,EAA1B;AACH;AACJ,O,CACD;AACA;AACA;;;AACA,UAAIqzB,aAAa,GAAGvO,OAAO,CAACjpB,SAAR,CAAkBy3B,OAAlB,IAChBxO,OAAO,CAACjpB,SAAR,CAAkB03B,eADF,IAEhBzO,OAAO,CAACjpB,SAAR,CAAkB23B,iBAFtB;;AAGA,UAAIC,aAAa,GAAG3O,OAAO,CAACjpB,SAAR,CAAkB63B,OAAlB,IAA6B,UAAU5pB,QAAV,EAAoB;AACjE;AACA,YAAI9J,EAAE,GAAG,IAAT;;AACA,YAAI,CAAC+L,QAAQ,CAAC4nB,eAAT,CAAyB5V,QAAzB,CAAkC/d,EAAlC,CAAL,EAA4C;AACxC,iBAAO,IAAP;AACH;;AACD,WAAG;AACC,cAAI4zB,cAAc,CAAC5zB,EAAD,EAAK8J,QAAL,CAAlB,EAAkC;AAC9B,mBAAO9J,EAAP;AACH;;AACDA,YAAE,GAAGA,EAAE,CAAC6zB,aAAH,IAAoB7zB,EAAE,CAAC+O,UAA5B;AACH,SALD,QAKS/O,EAAE,KAAK,IAAP,IAAeA,EAAE,CAAC8zB,QAAH,KAAgB,CALxC;;AAMA,eAAO,IAAP;AACH,OAbD;;AAcA,eAASC,cAAT,CAAwB/zB,EAAxB,EAA4B8J,QAA5B,EAAsC;AAClC,eAAO2pB,aAAa,CAACt3B,IAAd,CAAmB6D,EAAnB,EAAuB8J,QAAvB,CAAP;AACH;;AACD,eAAS8pB,cAAT,CAAwB5zB,EAAxB,EAA4B8J,QAA5B,EAAsC;AAClC,eAAOupB,aAAa,CAACl3B,IAAd,CAAmB6D,EAAnB,EAAuB8J,QAAvB,CAAP;AACH,O,CACD;AACA;;;AACA,eAASkqB,YAAT,CAAsB9B,SAAtB,EAAiCpoB,QAAjC,EAA2C;AACvC,YAAImqB,UAAU,GAAG/B,SAAS,YAAYgC,WAArB,GAAmC,CAAChC,SAAD,CAAnC,GAAiDA,SAAlE;AACA,YAAIiC,UAAU,GAAG,EAAjB;;AACA,aAAK,IAAInxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGixB,UAAU,CAAC33B,MAA/B,EAAuC0G,CAAC,EAAxC,EAA4C;AACxC,cAAIswB,OAAO,GAAGW,UAAU,CAACjxB,CAAD,CAAV,CAAc0S,gBAAd,CAA+B5L,QAA/B,CAAd;;AACA,eAAK,IAAIsqB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,OAAO,CAACh3B,MAA5B,EAAoC83B,CAAC,EAArC,EAAyC;AACrCD,sBAAU,CAAC71B,IAAX,CAAgBg1B,OAAO,CAACc,CAAD,CAAvB;AACH;AACJ;;AACD,eAAOD,UAAP;AACH,O,CACD;AACA;;;AACA,eAASE,YAAT,CAAsB1B,MAAtB,EAA8B7oB,QAA9B,EAAwC;AACpC,YAAIwqB,OAAO,GAAG3B,MAAM,YAAYuB,WAAlB,GAAgC,CAACvB,MAAD,CAAhC,GAA2CA,MAAzD;AACA,YAAIwB,UAAU,GAAG,EAAjB;;AACA,aAAK,IAAInxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsxB,OAAO,CAACh4B,MAA5B,EAAoC0G,CAAC,EAArC,EAAyC;AACrC,cAAIuvB,UAAU,GAAG+B,OAAO,CAACtxB,CAAD,CAAP,CAAWuxB,QAA5B,CADqC,CACC;;AACtC,eAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,UAAU,CAACj2B,MAA/B,EAAuC83B,CAAC,EAAxC,EAA4C;AACxC,gBAAII,SAAS,GAAGjC,UAAU,CAAC6B,CAAD,CAA1B;;AACA,gBAAI,CAACtqB,QAAD,IAAa8pB,cAAc,CAACY,SAAD,EAAY1qB,QAAZ,CAA/B,EAAsD;AAClDqqB,wBAAU,CAAC71B,IAAX,CAAgBk2B,SAAhB;AACH;AACJ;AACJ;;AACD,eAAOL,UAAP;AACH,O,CACD;AACA;;;AACA,eAASM,cAAT,CAAwBz0B,EAAxB,EAA4B2D,SAA5B,EAAuC8L,IAAvC,EAA6C;AACzC,YAAIA,IAAJ,EAAU;AACNzP,YAAE,CAACU,SAAH,CAAaC,GAAb,CAAiBgD,SAAjB;AACH,SAFD,MAGK;AACD3D,YAAE,CAACU,SAAH,CAAag0B,MAAb,CAAoB/wB,SAApB;AACH;AACJ,O,CACD;AACA;;;AACA,UAAIgxB,aAAa,GAAG,wCAApB;;AACA,eAAS/C,UAAT,CAAoB5xB,EAApB,EAAwBE,KAAxB,EAA+B;AAC3B,aAAK,IAAI00B,QAAT,IAAqB10B,KAArB,EAA4B;AACxB20B,wBAAc,CAAC70B,EAAD,EAAK40B,QAAL,EAAe10B,KAAK,CAAC00B,QAAD,CAApB,CAAd;AACH;AACJ;;AACD,eAASC,cAAT,CAAwB70B,EAAxB,EAA4B8F,IAA5B,EAAkCgvB,GAAlC,EAAuC;AACnC,YAAIA,GAAG,IAAI,IAAX,EAAiB;AACb90B,YAAE,CAAC0P,KAAH,CAAS5J,IAAT,IAAiB,EAAjB;AACH,SAFD,MAGK,IAAI,OAAOgvB,GAAP,KAAe,QAAf,IAA2BH,aAAa,CAACI,IAAd,CAAmBjvB,IAAnB,CAA/B,EAAyD;AAC1D9F,YAAE,CAAC0P,KAAH,CAAS5J,IAAT,IAAiBgvB,GAAG,GAAG,IAAvB;AACH,SAFI,MAGA;AACD90B,YAAE,CAAC0P,KAAH,CAAS5J,IAAT,IAAiBgvB,GAAjB;AACH;AACJ;;AAED,eAASE,eAAT,CAAyBpd,KAAzB,EAAgC/C,IAAhC,EAAsC;AAClC,eAAO+C,KAAK,CAACzH,IAAN,IAAc0E,IAAI,CAAC1E,IAAnB,IACHyH,KAAK,CAACzH,IAAN,GAAa0E,IAAI,CAAClE,KADf,IAEHiH,KAAK,CAACxH,GAAN,IAAayE,IAAI,CAACzE,GAFf,IAGHwH,KAAK,CAACxH,GAAN,GAAYyE,IAAI,CAAChE,MAHrB;AAIH,O,CACD;;;AACA,eAASokB,cAAT,CAAwBC,KAAxB,EAA+BC,KAA/B,EAAsC;AAClC,YAAItY,GAAG,GAAG;AACN1M,cAAI,EAAE3G,IAAI,CAAC6I,GAAL,CAAS6iB,KAAK,CAAC/kB,IAAf,EAAqBglB,KAAK,CAAChlB,IAA3B,CADA;AAENQ,eAAK,EAAEnH,IAAI,CAAC8I,GAAL,CAAS4iB,KAAK,CAACvkB,KAAf,EAAsBwkB,KAAK,CAACxkB,KAA5B,CAFD;AAGNP,aAAG,EAAE5G,IAAI,CAAC6I,GAAL,CAAS6iB,KAAK,CAAC9kB,GAAf,EAAoB+kB,KAAK,CAAC/kB,GAA1B,CAHC;AAINS,gBAAM,EAAErH,IAAI,CAAC8I,GAAL,CAAS4iB,KAAK,CAACrkB,MAAf,EAAuBskB,KAAK,CAACtkB,MAA7B;AAJF,SAAV;;AAMA,YAAIgM,GAAG,CAAC1M,IAAJ,GAAW0M,GAAG,CAAClM,KAAf,IAAwBkM,GAAG,CAACzM,GAAJ,GAAUyM,GAAG,CAAChM,MAA1C,EAAkD;AAC9C,iBAAOgM,GAAP;AACH;;AACD,eAAO,KAAP;AACH;;AACD,eAASuY,aAAT,CAAuBvgB,IAAvB,EAA6BpH,MAA7B,EAAqCE,MAArC,EAA6C;AACzC,eAAO;AACHwC,cAAI,EAAE0E,IAAI,CAAC1E,IAAL,GAAY1C,MADf;AAEHkD,eAAK,EAAEkE,IAAI,CAAClE,KAAL,GAAalD,MAFjB;AAGH2C,aAAG,EAAEyE,IAAI,CAACzE,GAAL,GAAWzC,MAHb;AAIHkD,gBAAM,EAAEgE,IAAI,CAAChE,MAAL,GAAclD;AAJnB,SAAP;AAMH,O,CACD;;;AACA,eAAS0nB,cAAT,CAAwBzd,KAAxB,EAA+B/C,IAA/B,EAAqC;AACjC,eAAO;AACH1E,cAAI,EAAE3G,IAAI,CAAC8I,GAAL,CAAS9I,IAAI,CAAC6I,GAAL,CAASuF,KAAK,CAACzH,IAAf,EAAqB0E,IAAI,CAAC1E,IAA1B,CAAT,EAA0C0E,IAAI,CAAClE,KAA/C,CADH;AAEHP,aAAG,EAAE5G,IAAI,CAAC8I,GAAL,CAAS9I,IAAI,CAAC6I,GAAL,CAASuF,KAAK,CAACxH,GAAf,EAAoByE,IAAI,CAACzE,GAAzB,CAAT,EAAwCyE,IAAI,CAAChE,MAA7C;AAFF,SAAP;AAIH,O,CACD;;;AACA,eAASykB,aAAT,CAAuBzgB,IAAvB,EAA6B;AACzB,eAAO;AACH1E,cAAI,EAAE,CAAC0E,IAAI,CAAC1E,IAAL,GAAY0E,IAAI,CAAClE,KAAlB,IAA2B,CAD9B;AAEHP,aAAG,EAAE,CAACyE,IAAI,CAACzE,GAAL,GAAWyE,IAAI,CAAChE,MAAjB,IAA2B;AAF7B,SAAP;AAIH,O,CACD;;;AACA,eAAS0kB,UAAT,CAAoBC,MAApB,EAA4BC,MAA5B,EAAoC;AAChC,eAAO;AACHtlB,cAAI,EAAEqlB,MAAM,CAACrlB,IAAP,GAAcslB,MAAM,CAACtlB,IADxB;AAEHC,aAAG,EAAEolB,MAAM,CAACplB,GAAP,GAAaqlB,MAAM,CAACrlB;AAFtB,SAAP;AAIH,O,CAED;;;AACA,UAAIslB,oBAAoB,GAAG,IAA3B;;AACA,eAASC,uBAAT,GAAmC;AAC/B,YAAID,oBAAoB,KAAK,IAA7B,EAAmC;AAC/BA,8BAAoB,GAAGE,2BAA2B,EAAlD;AACH;;AACD,eAAOF,oBAAP;AACH;;AACD,eAASE,2BAAT,GAAuC;AACnC,YAAIC,OAAO,GAAGrE,aAAa,CAAC,KAAD,EAAQ;AAC/B9hB,eAAK,EAAE;AACHa,oBAAQ,EAAE,UADP;AAEHH,eAAG,EAAE,CAAC,IAFH;AAGHD,gBAAI,EAAE,CAHH;AAIH2lB,kBAAM,EAAE,CAJL;AAKHC,mBAAO,EAAE,CALN;AAMHC,oBAAQ,EAAE,QANP;AAOHC,qBAAS,EAAE;AAPR;AADwB,SAAR,EAUxB,aAVwB,CAA3B;AAWAlqB,gBAAQ,CAACiD,IAAT,CAAc9N,WAAd,CAA0B20B,OAA1B;AACA,YAAIK,OAAO,GAAGL,OAAO,CAACzD,UAAtB;AACA,YAAIvV,GAAG,GAAGqZ,OAAO,CAAC/mB,qBAAR,GAAgCgB,IAAhC,GAAuC0lB,OAAO,CAAC1mB,qBAAR,GAAgCgB,IAAjF;AACAgjB,qBAAa,CAAC0C,OAAD,CAAb;AACA,eAAOhZ,GAAP;AACH,O,CACD;AACA;;;AACA,eAASsZ,sBAAT,CAAgCzlB,KAAhC,EAAuC;AACnCA,aAAK,GAAGlH,IAAI,CAAC6I,GAAL,CAAS,CAAT,EAAY3B,KAAZ,CAAR,CADmC,CACP;;AAC5BA,aAAK,GAAGlH,IAAI,CAACC,KAAL,CAAWiH,KAAX,CAAR;AACA,eAAOA,KAAP;AACH;;AAED,eAAS0lB,YAAT,CAAsBp2B,EAAtB,EAA0Bq2B,UAA1B,EAAsC;AAClC,YAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,oBAAU,GAAG,KAAb;AAAqB;;AAClD,YAAIC,aAAa,GAAG3pB,MAAM,CAAC4pB,gBAAP,CAAwBv2B,EAAxB,CAApB;AACA,YAAIw2B,UAAU,GAAGC,QAAQ,CAACH,aAAa,CAACI,eAAf,EAAgC,EAAhC,CAAR,IAA+C,CAAhE;AACA,YAAIC,WAAW,GAAGF,QAAQ,CAACH,aAAa,CAACM,gBAAf,EAAiC,EAAjC,CAAR,IAAgD,CAAlE;AACA,YAAIC,SAAS,GAAGJ,QAAQ,CAACH,aAAa,CAACQ,cAAf,EAA+B,EAA/B,CAAR,IAA8C,CAA9D;AACA,YAAIC,YAAY,GAAGN,QAAQ,CAACH,aAAa,CAACU,iBAAf,EAAkC,EAAlC,CAAR,IAAiD,CAApE,CANkC,CAOlC;;AACA,YAAIC,kBAAkB,GAAGd,sBAAsB,CAACn2B,EAAE,CAACk3B,WAAH,GAAiBl3B,EAAE,CAAC6R,WAApB,GAAkC2kB,UAAlC,GAA+CG,WAAhD,CAA/C;AACA,YAAIQ,eAAe,GAAGhB,sBAAsB,CAACn2B,EAAE,CAACo3B,YAAH,GAAkBp3B,EAAE,CAAC+R,YAArB,GAAoC8kB,SAApC,GAAgDE,YAAjD,CAA5C;AACA,YAAIla,GAAG,GAAG;AACN2Z,oBAAU,EAAEA,UADN;AAENG,qBAAW,EAAEA,WAFP;AAGNE,mBAAS,EAAEA,SAHL;AAINE,sBAAY,EAAEA,YAJR;AAKNI,yBAAe,EAAEA,eALX;AAMNE,uBAAa,EAAE,CANT;AAONC,wBAAc,EAAE;AAPV,SAAV;;AASA,YAAI3B,uBAAuB,MAAMW,aAAa,CAACL,SAAd,KAA4B,KAA7D,EAAoE;AAAE;AAClEpZ,aAAG,CAACwa,aAAJ,GAAoBJ,kBAApB;AACH,SAFD,MAGK;AACDpa,aAAG,CAACya,cAAJ,GAAqBL,kBAArB;AACH;;AACD,YAAIZ,UAAJ,EAAgB;AACZxZ,aAAG,CAAC0a,WAAJ,GAAkBd,QAAQ,CAACH,aAAa,CAACiB,WAAf,EAA4B,EAA5B,CAAR,IAA2C,CAA7D;AACA1a,aAAG,CAAC2a,YAAJ,GAAmBf,QAAQ,CAACH,aAAa,CAACkB,YAAf,EAA6B,EAA7B,CAAR,IAA4C,CAA/D;AACA3a,aAAG,CAAC4a,UAAJ,GAAiBhB,QAAQ,CAACH,aAAa,CAACmB,UAAf,EAA2B,EAA3B,CAAR,IAA0C,CAA3D;AACA5a,aAAG,CAAC6a,aAAJ,GAAoBjB,QAAQ,CAACH,aAAa,CAACoB,aAAf,EAA8B,EAA9B,CAAR,IAA6C,CAAjE;AACH;;AACD,eAAO7a,GAAP;AACH;;AACD,eAAS8a,gBAAT,CAA0B33B,EAA1B,EAA8B43B,eAA9B,EAA+C;AAC3C,YAAIA,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAAEA,yBAAe,GAAG,KAAlB;AAA0B;;AAC5D,YAAIC,SAAS,GAAGC,WAAW,CAAC93B,EAAD,CAA3B;AACA,YAAI+3B,KAAK,GAAG3B,YAAY,CAACp2B,EAAD,EAAK43B,eAAL,CAAxB;AACA,YAAI/a,GAAG,GAAG;AACN1M,cAAI,EAAE0nB,SAAS,CAAC1nB,IAAV,GAAiB4nB,KAAK,CAACvB,UAAvB,GAAoCuB,KAAK,CAACV,aAD1C;AAEN1mB,eAAK,EAAEknB,SAAS,CAAClnB,KAAV,GAAkBonB,KAAK,CAACpB,WAAxB,GAAsCoB,KAAK,CAACT,cAF7C;AAGNlnB,aAAG,EAAEynB,SAAS,CAACznB,GAAV,GAAgB2nB,KAAK,CAAClB,SAHrB;AAINhmB,gBAAM,EAAEgnB,SAAS,CAAChnB,MAAV,GAAmBknB,KAAK,CAAChB,YAAzB,GAAwCgB,KAAK,CAACZ;AAJhD,SAAV;;AAMA,YAAIS,eAAJ,EAAqB;AACjB/a,aAAG,CAAC1M,IAAJ,IAAY4nB,KAAK,CAACR,WAAlB;AACA1a,aAAG,CAAClM,KAAJ,IAAaonB,KAAK,CAACP,YAAnB;AACA3a,aAAG,CAACzM,GAAJ,IAAW2nB,KAAK,CAACN,UAAjB;AACA5a,aAAG,CAAChM,MAAJ,IAAcknB,KAAK,CAACL,aAApB;AACH;;AACD,eAAO7a,GAAP;AACH;;AACD,eAASib,WAAT,CAAqB93B,EAArB,EAAyB;AACrB,YAAI6U,IAAI,GAAG7U,EAAE,CAACmP,qBAAH,EAAX;AACA,eAAO;AACHgB,cAAI,EAAE0E,IAAI,CAAC1E,IAAL,GAAYxD,MAAM,CAACK,WADtB;AAEHoD,aAAG,EAAEyE,IAAI,CAACzE,GAAL,GAAWzD,MAAM,CAACS,WAFpB;AAGHuD,eAAK,EAAEkE,IAAI,CAAClE,KAAL,GAAahE,MAAM,CAACK,WAHxB;AAIH6D,gBAAM,EAAEgE,IAAI,CAAChE,MAAL,GAAclE,MAAM,CAACS;AAJ1B,SAAP;AAMH;;AACD,eAAS4qB,mBAAT,GAA+B;AAC3B,eAAO;AACH7nB,cAAI,EAAExD,MAAM,CAACK,WADV;AAEH2D,eAAK,EAAEhE,MAAM,CAACK,WAAP,GAAqBjB,QAAQ,CAAC4nB,eAAT,CAAyB9hB,WAFlD;AAGHzB,aAAG,EAAEzD,MAAM,CAACS,WAHT;AAIHyD,gBAAM,EAAElE,MAAM,CAACS,WAAP,GAAqBrB,QAAQ,CAAC4nB,eAAT,CAAyB5hB;AAJnD,SAAP;AAMH;;AACD,eAASkmB,uBAAT,CAAiCj4B,EAAjC,EAAqC;AACjC,eAAOA,EAAE,CAACmP,qBAAH,GAA2ByB,MAA3B,GAAoCsnB,eAAe,CAACl4B,EAAD,CAA1D;AACH;;AACD,eAASk4B,eAAT,CAAyBl4B,EAAzB,EAA6B;AACzB,YAAIm4B,QAAQ,GAAGxrB,MAAM,CAAC4pB,gBAAP,CAAwBv2B,EAAxB,CAAf;AACA,eAAOy2B,QAAQ,CAAC0B,QAAQ,CAACC,SAAV,EAAqB,EAArB,CAAR,GACH3B,QAAQ,CAAC0B,QAAQ,CAACE,YAAV,EAAwB,EAAxB,CADZ;AAEH,O,CACD;;;AACA,eAASC,kBAAT,CAA4Bt4B,EAA5B,EAAgC;AAC5B,YAAIs0B,OAAO,GAAG,EAAd;;AACA,eAAOt0B,EAAE,YAAYk0B,WAArB,EAAkC;AAAE;AAChC,cAAIoC,aAAa,GAAG3pB,MAAM,CAAC4pB,gBAAP,CAAwBv2B,EAAxB,CAApB;;AACA,cAAIs2B,aAAa,CAAC/lB,QAAd,KAA2B,OAA/B,EAAwC;AACpC;AACH;;AACD,cAAK,eAAD,CAAkBwkB,IAAlB,CAAuBuB,aAAa,CAACN,QAAd,GAAyBM,aAAa,CAACiC,SAAvC,GAAmDjC,aAAa,CAACkC,SAAxF,CAAJ,EAAwG;AACpGlE,mBAAO,CAACh2B,IAAR,CAAa0B,EAAb;AACH;;AACDA,YAAE,GAAGA,EAAE,CAAC+O,UAAR;AACH;;AACD,eAAOulB,OAAP;AACH;;AACD,eAASmE,mBAAT,CAA6Bz4B,EAA7B,EAAiC;AAC7B,eAAOs4B,kBAAkB,CAACt4B,EAAD,CAAlB,CACFuV,GADE,CACE,UAAUvV,EAAV,EAAc;AACnB,iBAAO23B,gBAAgB,CAAC33B,EAAD,CAAvB;AACH,SAHM,EAIFvC,MAJE,CAIKu6B,mBAAmB,EAJxB,EAKFU,MALE,CAKK,UAAUC,KAAV,EAAiBzD,KAAjB,EAAwB;AAChC,iBAAOD,cAAc,CAAC0D,KAAD,EAAQzD,KAAR,CAAd,IAAgCA,KAAvC,CADgC,CACc;AACjD,SAPM,CAAP;AAQH,O,CAED;;;AACA,eAASzmB,cAAT,CAAwBnD,EAAxB,EAA4B;AACxBA,UAAE,CAACmD,cAAH;AACH,O,CACD;AACA;;;AACA,eAASmqB,gBAAT,CAA0B1G,SAA1B,EAAqC2G,SAArC,EAAgD/uB,QAAhD,EAA0DgvB,OAA1D,EAAmE;AAC/D,iBAASC,WAAT,CAAqBztB,EAArB,EAAyB;AACrB,cAAI0tB,YAAY,GAAGjF,cAAc,CAACzoB,EAAE,CAACkB,MAAJ,EAAY1C,QAAZ,CAAjC;;AACA,cAAIkvB,YAAJ,EAAkB;AACdF,mBAAO,CAAC38B,IAAR,CAAa68B,YAAb,EAA2B1tB,EAA3B,EAA+B0tB,YAA/B;AACH;AACJ;;AACD9G,iBAAS,CAAClmB,gBAAV,CAA2B6sB,SAA3B,EAAsCE,WAAtC;AACA,eAAO,YAAY;AACf7G,mBAAS,CAAC9lB,mBAAV,CAA8BysB,SAA9B,EAAyCE,WAAzC;AACH,SAFD;AAGH;;AACD,eAASE,uBAAT,CAAiC/G,SAAjC,EAA4CpoB,QAA5C,EAAsDovB,YAAtD,EAAoEC,YAApE,EAAkF;AAC9E,YAAIC,mBAAJ;AACA,eAAOR,gBAAgB,CAAC1G,SAAD,EAAY,WAAZ,EAAyBpoB,QAAzB,EAAmC,UAAUwB,EAAV,EAAc0tB,YAAd,EAA4B;AAClF,cAAIA,YAAY,KAAKI,mBAArB,EAA0C;AACtCA,+BAAmB,GAAGJ,YAAtB;AACAE,wBAAY,CAAC5tB,EAAD,EAAK0tB,YAAL,CAAZ;;AACA,gBAAIK,kBAAkB,GAAG,SAArBA,kBAAqB,CAAU/tB,EAAV,EAAc;AACnC8tB,iCAAmB,GAAG,IAAtB;AACAD,0BAAY,CAAC7tB,EAAD,EAAK0tB,YAAL,CAAZ;AACAA,0BAAY,CAAC5sB,mBAAb,CAAiC,YAAjC,EAA+CitB,kBAA/C;AACH,aAJD,CAHsC,CAQtC;;;AACAL,wBAAY,CAAChtB,gBAAb,CAA8B,YAA9B,EAA4CqtB,kBAA5C;AACH;AACJ,SAZsB,CAAvB;AAaH,O,CACD;AACA;;;AACA,UAAIC,oBAAoB,GAAG,CACvB,qBADuB,EAEvB,gBAFuB,EAGvB,gBAHuB,EAIvB,iBAJuB,EAKvB,eALuB,CAA3B,C,CAOA;;AACA,eAASC,kBAAT,CAA4Bv5B,EAA5B,EAAgC8P,QAAhC,EAA0C;AACtC,YAAI0pB,YAAY,GAAG,SAAfA,YAAe,CAAUluB,EAAV,EAAc;AAC7BwE,kBAAQ,CAACxE,EAAD,CAAR;AACAguB,8BAAoB,CAACrxB,OAArB,CAA6B,UAAUwxB,SAAV,EAAqB;AAC9Cz5B,cAAE,CAACoM,mBAAH,CAAuBqtB,SAAvB,EAAkCD,YAAlC;AACH,WAFD;AAGH,SALD;;AAMAF,4BAAoB,CAACrxB,OAArB,CAA6B,UAAUwxB,SAAV,EAAqB;AAC9Cz5B,YAAE,CAACgM,gBAAH,CAAoBytB,SAApB,EAA+BD,YAA/B,EAD8C,CACA;AACjD,SAFD;AAGH;;AAED,UAAIE,OAAO,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,CAAd,C,CACA;;AACA,eAASC,QAAT,CAAkBC,CAAlB,EAAqBvvB,CAArB,EAAwB;AACpB,YAAIwvB,CAAC,GAAGC,cAAc,CAACF,CAAD,CAAtB;AACAC,SAAC,CAAC,CAAD,CAAD,IAAQxvB,CAAC,GAAG,CAAZ;AACA,eAAO0vB,cAAc,CAACF,CAAD,CAArB;AACH;;AACD,eAASG,OAAT,CAAiBJ,CAAjB,EAAoBvvB,CAApB,EAAuB;AACnB,YAAIwvB,CAAC,GAAGC,cAAc,CAACF,CAAD,CAAtB;AACAC,SAAC,CAAC,CAAD,CAAD,IAAQxvB,CAAR;AACA,eAAO0vB,cAAc,CAACF,CAAD,CAArB;AACH;;AACD,eAASI,KAAT,CAAeL,CAAf,EAAkBvvB,CAAlB,EAAqB;AACjB,YAAIwvB,CAAC,GAAGC,cAAc,CAACF,CAAD,CAAtB;AACAC,SAAC,CAAC,CAAD,CAAD,IAAQxvB,CAAR;AACA,eAAO0vB,cAAc,CAACF,CAAD,CAArB;AACH,O,CACD;;;AACA,eAASK,SAAT,CAAmBC,EAAnB,EAAuBC,EAAvB,EAA2B;AACvB,eAAOC,QAAQ,CAACF,EAAD,EAAKC,EAAL,CAAR,GAAmB,CAA1B;AACH;;AACD,eAASC,QAAT,CAAkBF,EAAlB,EAAsBC,EAAtB,EAA0B;AACtB,eAAO,CAACA,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH,EAAhB,KAAiC,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAlD,CAAP;AACH;;AACD,eAAS63B,SAAT,CAAmBH,EAAnB,EAAuBC,EAAvB,EAA2B;AACvB,eAAO,CAACA,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH,EAAhB,KAAiC,OAAO,EAAP,GAAY,EAA7C,CAAP;AACH;;AACD,eAAS83B,WAAT,CAAqBJ,EAArB,EAAyBC,EAAzB,EAA6B;AACzB,eAAO,CAACA,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH,EAAhB,KAAiC,OAAO,EAAxC,CAAP;AACH;;AACD,eAAS+3B,WAAT,CAAqBL,EAArB,EAAyBC,EAAzB,EAA6B;AACzB,eAAO,CAACA,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH,EAAhB,IAAgC,IAAvC;AACH;;AACD,eAASg4B,cAAT,CAAwBN,EAAxB,EAA4BC,EAA5B,EAAgC;AAC5B,YAAIM,KAAK,GAAGC,UAAU,CAACR,EAAD,CAAtB;AACA,YAAIS,KAAK,GAAGD,UAAU,CAACP,EAAD,CAAtB;AACA,eAAO;AACHS,eAAK,EAAE,CADJ;AAEHC,gBAAM,EAAE,CAFL;AAGHj2B,cAAI,EAAE2E,IAAI,CAACC,KAAL,CAAW4wB,QAAQ,CAACK,KAAD,EAAQE,KAAR,CAAnB,CAHH;AAIH/Z,sBAAY,EAAGuZ,EAAE,CAAC33B,OAAH,KAAem4B,KAAK,CAACn4B,OAAN,EAAhB,IAAoC03B,EAAE,CAAC13B,OAAH,KAAei4B,KAAK,CAACj4B,OAAN,EAAnD;AAJX,SAAP;AAMH,O,CACD;;;AACA,eAASs4B,cAAT,CAAwBZ,EAAxB,EAA4BC,EAA5B,EAAgC;AAC5B,YAAIl/B,CAAC,GAAG8/B,aAAa,CAACb,EAAD,EAAKC,EAAL,CAArB;;AACA,YAAIl/B,CAAC,KAAK,IAAN,IAAcA,CAAC,GAAG,CAAJ,KAAU,CAA5B,EAA+B;AAC3B,iBAAOA,CAAC,GAAG,CAAX;AACH;;AACD,eAAO,IAAP;AACH;;AACD,eAAS8/B,aAAT,CAAuBb,EAAvB,EAA2BC,EAA3B,EAA+B;AAC3B,YAAIa,QAAQ,CAACd,EAAD,CAAR,KAAiBc,QAAQ,CAACb,EAAD,CAA7B,EAAmC;AAC/B,iBAAO5wB,IAAI,CAACC,KAAL,CAAW4wB,QAAQ,CAACF,EAAD,EAAKC,EAAL,CAAnB,CAAP;AACH;;AACD,eAAO,IAAP;AACH,O,CACD;;;AACA,eAASO,UAAT,CAAoBf,CAApB,EAAuB;AACnB,eAAOG,cAAc,CAAC,CAClBH,CAAC,CAACsB,cAAF,EADkB,EAElBtB,CAAC,CAACuB,WAAF,EAFkB,EAGlBvB,CAAC,CAACwB,UAAF,EAHkB,CAAD,CAArB;AAKH;;AACD,eAASC,WAAT,CAAqBzB,CAArB,EAAwB;AACpB,eAAOG,cAAc,CAAC,CAClBH,CAAC,CAACsB,cAAF,EADkB,EAElBtB,CAAC,CAACuB,WAAF,EAFkB,EAGlBvB,CAAC,CAACwB,UAAF,EAHkB,EAIlBxB,CAAC,CAAC0B,WAAF,EAJkB,CAAD,CAArB;AAMH;;AACD,eAASC,aAAT,CAAuB3B,CAAvB,EAA0B;AACtB,eAAOG,cAAc,CAAC,CAClBH,CAAC,CAACsB,cAAF,EADkB,EAElBtB,CAAC,CAACuB,WAAF,EAFkB,EAGlBvB,CAAC,CAACwB,UAAF,EAHkB,EAIlBxB,CAAC,CAAC0B,WAAF,EAJkB,EAKlB1B,CAAC,CAAC4B,aAAF,EALkB,CAAD,CAArB;AAOH;;AACD,eAASC,aAAT,CAAuB7B,CAAvB,EAA0B;AACtB,eAAOG,cAAc,CAAC,CAClBH,CAAC,CAACsB,cAAF,EADkB,EAElBtB,CAAC,CAACuB,WAAF,EAFkB,EAGlBvB,CAAC,CAACwB,UAAF,EAHkB,EAIlBxB,CAAC,CAAC0B,WAAF,EAJkB,EAKlB1B,CAAC,CAAC4B,aAAF,EALkB,EAMlB5B,CAAC,CAAC8B,aAAF,EANkB,CAAD,CAArB;AAQH,O,CACD;;;AACA,eAASC,UAAT,CAAoBC,MAApB,EAA4BC,GAA5B,EAAiCC,GAAjC,EAAsC;AAClC,YAAIC,CAAC,GAAGH,MAAM,CAACV,cAAP,EAAR;AACA,YAAIc,CAAC,GAAGC,eAAe,CAACL,MAAD,EAASG,CAAT,EAAYF,GAAZ,EAAiBC,GAAjB,CAAvB;;AACA,YAAIE,CAAC,GAAG,CAAR,EAAW;AACP,iBAAOC,eAAe,CAACL,MAAD,EAASG,CAAC,GAAG,CAAb,EAAgBF,GAAhB,EAAqBC,GAArB,CAAtB;AACH;;AACD,YAAII,KAAK,GAAGD,eAAe,CAACL,MAAD,EAASG,CAAC,GAAG,CAAb,EAAgBF,GAAhB,EAAqBC,GAArB,CAA3B;;AACA,YAAII,KAAK,IAAI,CAAb,EAAgB;AACZ,iBAAO1yB,IAAI,CAAC8I,GAAL,CAAS0pB,CAAT,EAAYE,KAAZ,CAAP;AACH;;AACD,eAAOF,CAAP;AACH;;AACD,eAASC,eAAT,CAAyBL,MAAzB,EAAiCn3B,IAAjC,EAAuCo3B,GAAvC,EAA4CC,GAA5C,EAAiD;AAC7C,YAAIK,cAAc,GAAGpC,cAAc,CAAC,CAACt1B,IAAD,EAAO,CAAP,EAAU,IAAI23B,eAAe,CAAC33B,IAAD,EAAOo3B,GAAP,EAAYC,GAAZ,CAA7B,CAAD,CAAnC;AACA,YAAI93B,QAAQ,GAAG22B,UAAU,CAACiB,MAAD,CAAzB;AACA,YAAI/2B,IAAI,GAAG2E,IAAI,CAACC,KAAL,CAAW4wB,QAAQ,CAAC8B,cAAD,EAAiBn4B,QAAjB,CAAnB,CAAX;AACA,eAAOwF,IAAI,CAAC6yB,KAAL,CAAWx3B,IAAI,GAAG,CAAlB,IAAuB,CAA9B,CAJ6C,CAIZ;AACpC,O,CACD;;;AACA,eAASu3B,eAAT,CAAyB33B,IAAzB,EAA+Bo3B,GAA/B,EAAoCC,GAApC,EAAyC;AACrC;AACA,YAAIQ,GAAG,GAAG,IAAIT,GAAJ,GAAUC,GAApB,CAFqC,CAGrC;;AACA,YAAIS,KAAK,GAAG,CAAC,IAAIxC,cAAc,CAAC,CAACt1B,IAAD,EAAO,CAAP,EAAU63B,GAAV,CAAD,CAAd,CAA+BE,SAA/B,EAAJ,GAAiDX,GAAlD,IAAyD,CAArE;AACA,eAAO,CAACU,KAAD,GAASD,GAAT,GAAe,CAAtB;AACH,O,CACD;;;AACA,eAASG,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B,eAAO,CACHA,IAAI,CAACp3B,WAAL,EADG,EAEHo3B,IAAI,CAACr3B,QAAL,EAFG,EAGHq3B,IAAI,CAACt3B,OAAL,EAHG,EAIHs3B,IAAI,CAACC,QAAL,EAJG,EAKHD,IAAI,CAACE,UAAL,EALG,EAMHF,IAAI,CAACG,UAAL,EANG,EAOHH,IAAI,CAACI,eAAL,EAPG,CAAP;AASH;;AACD,eAASC,gBAAT,CAA0BlD,CAA1B,EAA6B;AACzB,eAAO,IAAI10B,IAAJ,CAAS00B,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAvB,EAA0BA,CAAC,CAAC,CAAD,CAAD,IAAQ,IAAR,GAAe,CAAf,GAAmBA,CAAC,CAAC,CAAD,CAA9C,EAAmD;AAC1DA,SAAC,CAAC,CAAD,CAAD,IAAQ,CADD,EACIA,CAAC,CAAC,CAAD,CAAD,IAAQ,CADZ,EACeA,CAAC,CAAC,CAAD,CAAD,IAAQ,CADvB,CAAP;AAEH;;AACD,eAASC,cAAT,CAAwB4C,IAAxB,EAA8B;AAC1B,eAAO,CACHA,IAAI,CAACxB,cAAL,EADG,EAEHwB,IAAI,CAACvB,WAAL,EAFG,EAGHuB,IAAI,CAACtB,UAAL,EAHG,EAIHsB,IAAI,CAACpB,WAAL,EAJG,EAKHoB,IAAI,CAAClB,aAAL,EALG,EAMHkB,IAAI,CAAChB,aAAL,EANG,EAOHgB,IAAI,CAACM,kBAAL,EAPG,CAAP;AASH;;AACD,eAASjD,cAAT,CAAwBF,CAAxB,EAA2B;AACvB;AACA;AACA,YAAIA,CAAC,CAACv9B,MAAF,KAAa,CAAjB,EAAoB;AAChBu9B,WAAC,GAAGA,CAAC,CAACp8B,MAAF,CAAS,CAAC,CAAD,CAAT,CAAJ;AACH;;AACD,eAAO,IAAI0H,IAAJ,CAASA,IAAI,CAAC83B,GAAL,CAAS96B,KAAT,CAAegD,IAAf,EAAqB00B,CAArB,CAAT,CAAP;AACH,O,CACD;;;AACA,eAASqD,WAAT,CAAqBtD,CAArB,EAAwB;AACpB,eAAO,CAACuD,KAAK,CAACvD,CAAC,CAACn3B,OAAF,EAAD,CAAb;AACH;;AACD,eAASw4B,QAAT,CAAkBrB,CAAlB,EAAqB;AACjB,eAAOA,CAAC,CAAC0B,WAAF,KAAkB,IAAlB,GAAyB,EAAzB,GAA8B,EAA9B,GACH1B,CAAC,CAAC4B,aAAF,KAAoB,IAApB,GAA2B,EADxB,GAEH5B,CAAC,CAAC8B,aAAF,KAAoB,IAFjB,GAGH9B,CAAC,CAACoD,kBAAF,EAHJ;AAIH;;AAED,UAAII,cAAc,GAAG,CAAC,OAAD,EAAU,QAAV,EAAoB,MAApB,EAA4B,cAA5B,CAArB;AACA,UAAIC,QAAQ,GAAG,0DAAf,C,CACA;;AACA,eAASC,cAAT,CAAwBnY,KAAxB,EAA+BoY,IAA/B,EAAqC;AACjC,YAAI3gC,EAAJ;;AACA,YAAI,OAAOuoB,KAAP,KAAiB,QAArB,EAA+B;AAC3B,iBAAOqY,WAAW,CAACrY,KAAD,CAAlB;AACH,SAFD,MAGK,IAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAjC,EAAwC;AAAE;AAC3C,iBAAOsY,eAAe,CAACtY,KAAD,CAAtB;AACH,SAFI,MAGA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAChC,iBAAOsY,eAAe,EAAE7gC,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC2gC,IAAI,IAAI,cAAT,CAAF,GAA6BpY,KAAtC,EAA6CvoB,EAA/C,EAAtB;AACH,SAFI,MAGA;AACD,iBAAO,IAAP;AACH;AACJ;;AACD,eAAS4gC,WAAT,CAAqBpzB,CAArB,EAAwB;AACpB,YAAIwvB,CAAC,GAAGyD,QAAQ,CAACK,IAAT,CAActzB,CAAd,CAAR;;AACA,YAAIwvB,CAAJ,EAAO;AACH,cAAIjlB,IAAI,GAAGilB,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAR,GAAY,CAAvB;AACA,iBAAO;AACHiB,iBAAK,EAAE,CADJ;AAEHC,kBAAM,EAAE,CAFL;AAGHj2B,gBAAI,EAAE8P,IAAI,IAAIilB,CAAC,CAAC,CAAD,CAAD,GAAOnD,QAAQ,CAACmD,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAAf,GAA4B,CAAhC,CAHP;AAIH/Y,wBAAY,EAAElM,IAAI,IAAI,CAACilB,CAAC,CAAC,CAAD,CAAD,GAAOnD,QAAQ,CAACmD,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAAf,GAA4B,CAA7B,IAAkC,EAAlC,GAAuC,EAAvC,GAA4C,IAA5C,GAAmD;AACrE,aAACA,CAAC,CAAC,CAAD,CAAD,GAAOnD,QAAQ,CAACmD,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAAf,GAA4B,CAA7B,IAAkC,EAAlC,GAAuC,IADrB,GAC4B;AAC9C,aAACA,CAAC,CAAC,CAAD,CAAD,GAAOnD,QAAQ,CAACmD,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAAf,GAA4B,CAA7B,IAAkC,IAFhB,KAEuB;AACxCA,aAAC,CAAC,CAAD,CAAD,GAAOnD,QAAQ,CAACmD,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAAf,GAA4B,CAHX,CAAJ,CAGkB;AAHlB;AAJf,WAAP;AAUH;;AACD,eAAO,IAAP;AACH;;AACD,eAAS6D,eAAT,CAAyB5Z,GAAzB,EAA8B;AAC1B,eAAO;AACHgX,eAAK,EAAEhX,GAAG,CAACgX,KAAJ,IAAahX,GAAG,CAACpf,IAAjB,IAAyB,CAD7B;AAEHq2B,gBAAM,EAAEjX,GAAG,CAACiX,MAAJ,IAAcjX,GAAG,CAACtf,KAAlB,IAA2B,CAFhC;AAGHM,cAAI,EAAE,CAACgf,GAAG,CAAChf,IAAJ,IAAYgf,GAAG,CAACrf,GAAhB,IAAuB,CAAxB,IACFm5B,iBAAiB,CAAC9Z,GAAD,CAAjB,GAAyB,CAJ1B;AAKHhD,sBAAY,EAAE,CAACgD,GAAG,CAAC+Z,KAAJ,IAAa/Z,GAAG,CAACjlB,IAAjB,IAAyB,CAA1B,IAA+B,EAA/B,GAAoC,EAApC,GAAyC,IAAzC,GAAgD;AAC1D,WAACilB,GAAG,CAACga,OAAJ,IAAeha,GAAG,CAAChlB,MAAnB,IAA6B,CAA9B,IAAmC,EAAnC,GAAwC,IAD9B,GACqC;AAC/C,WAACglB,GAAG,CAACtP,OAAJ,IAAesP,GAAG,CAACia,MAAnB,IAA6B,CAA9B,IAAmC,IAFzB,KAEgC;AACzCja,aAAG,CAAChD,YAAJ,IAAoBgD,GAAG,CAACka,WAAxB,IAAuCla,GAAG,CAACpH,EAA3C,IAAiD,CAHxC,CALX,CAQsD;;AARtD,SAAP;AAUH;;AACD,eAASkhB,iBAAT,CAA2B9Z,GAA3B,EAAgC;AAC5B,eAAOA,GAAG,CAAC7e,KAAJ,IAAa6e,GAAG,CAACma,IAAjB,IAAyB,CAAhC;AACH,O,CACD;;;AACA,eAASC,cAAT,CAAwBC,EAAxB,EAA4BC,EAA5B,EAAgC;AAC5B,eAAOD,EAAE,CAACrD,KAAH,KAAasD,EAAE,CAACtD,KAAhB,IACHqD,EAAE,CAACpD,MAAH,KAAcqD,EAAE,CAACrD,MADd,IAEHoD,EAAE,CAACr5B,IAAH,KAAYs5B,EAAE,CAACt5B,IAFZ,IAGHq5B,EAAE,CAACrd,YAAH,KAAoBsd,EAAE,CAACtd,YAH3B;AAIH;;AACD,eAASud,WAAT,CAAqBC,GAArB,EAA0B;AACtB,eAAOA,GAAG,CAACxD,KAAJ,KAAc,CAAd,IAAmBwD,GAAG,CAACvD,MAAJ,KAAe,CAAlC,IAAuCuD,GAAG,CAACx5B,IAAJ,KAAa,CAApD,IAAyDw5B,GAAG,CAACxd,YAAJ,KAAqB,CAArF;AACH,O,CACD;;;AACA,eAASyd,YAAT,CAAsBJ,EAAtB,EAA0BC,EAA1B,EAA8B;AAC1B,eAAO;AACHtD,eAAK,EAAEqD,EAAE,CAACrD,KAAH,GAAWsD,EAAE,CAACtD,KADlB;AAEHC,gBAAM,EAAEoD,EAAE,CAACpD,MAAH,GAAYqD,EAAE,CAACrD,MAFpB;AAGHj2B,cAAI,EAAEq5B,EAAE,CAACr5B,IAAH,GAAUs5B,EAAE,CAACt5B,IAHhB;AAIHgc,sBAAY,EAAEqd,EAAE,CAACrd,YAAH,GAAkBsd,EAAE,CAACtd;AAJhC,SAAP;AAMH;;AACD,eAAS0d,iBAAT,CAA2BJ,EAA3B,EAA+BD,EAA/B,EAAmC;AAC/B,eAAO;AACHrD,eAAK,EAAEsD,EAAE,CAACtD,KAAH,GAAWqD,EAAE,CAACrD,KADlB;AAEHC,gBAAM,EAAEqD,EAAE,CAACrD,MAAH,GAAYoD,EAAE,CAACpD,MAFpB;AAGHj2B,cAAI,EAAEs5B,EAAE,CAACt5B,IAAH,GAAUq5B,EAAE,CAACr5B,IAHhB;AAIHgc,sBAAY,EAAEsd,EAAE,CAACtd,YAAH,GAAkBqd,EAAE,CAACrd;AAJhC,SAAP;AAMH;;AACD,eAAS2d,gBAAT,CAA0BtjC,CAA1B,EAA6BmP,CAA7B,EAAgC;AAC5B,eAAO;AACHwwB,eAAK,EAAE3/B,CAAC,CAAC2/B,KAAF,GAAUxwB,CADd;AAEHywB,gBAAM,EAAE5/B,CAAC,CAAC4/B,MAAF,GAAWzwB,CAFhB;AAGHxF,cAAI,EAAE3J,CAAC,CAAC2J,IAAF,GAASwF,CAHZ;AAIHwW,sBAAY,EAAE3lB,CAAC,CAAC2lB,YAAF,GAAiBxW;AAJ5B,SAAP;AAMH,O,CACD;AACA;;;AACA,eAASo0B,YAAT,CAAsBJ,GAAtB,EAA2B;AACvB,eAAOK,WAAW,CAACL,GAAD,CAAX,GAAmB,GAA1B;AACH;;AACD,eAASM,aAAT,CAAuBN,GAAvB,EAA4B;AACxB,eAAOK,WAAW,CAACL,GAAD,CAAX,GAAmB,EAA1B;AACH;;AACD,eAASK,WAAT,CAAqBL,GAArB,EAA0B;AACtB,eAAOO,SAAS,CAACP,GAAD,CAAT,GAAiB,KAAxB;AACH;;AACD,eAASQ,cAAT,CAAwBR,GAAxB,EAA6B;AACzB,eAAOO,SAAS,CAACP,GAAD,CAAT,IAAkB,OAAO,EAAzB,CAAP;AACH;;AACD,eAASS,cAAT,CAAwBT,GAAxB,EAA6B;AACzB,eAAOO,SAAS,CAACP,GAAD,CAAT,GAAiB,IAAxB;AACH;;AACD,eAASO,SAAT,CAAmBP,GAAnB,EAAwB;AACpB,eAAOA,GAAG,CAACxD,KAAJ,IAAa,MAAM,KAAnB,IACHwD,GAAG,CAACvD,MAAJ,IAAc,KAAK,KAAnB,CADG,GAEHuD,GAAG,CAACx5B,IAAJ,GAAW,KAFR,GAGHw5B,GAAG,CAACxd,YAHR;AAIH,O,CACD;;;AACA,eAASke,oBAAT,CAA8BC,SAA9B,EAAyCC,WAAzC,EAAsD;AAClD,YAAIpiB,GAAG,GAAG,IAAV;;AACA,aAAK,IAAI7Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGo6B,cAAc,CAAC9gC,MAAnC,EAA2C0G,CAAC,EAA5C,EAAgD;AAC5C,cAAIu6B,IAAI,GAAGH,cAAc,CAACp6B,CAAD,CAAzB;;AACA,cAAIi8B,WAAW,CAAC1B,IAAD,CAAf,EAAuB;AACnB,gBAAI2B,QAAQ,GAAGF,SAAS,CAACzB,IAAD,CAAT,GAAkB0B,WAAW,CAAC1B,IAAD,CAA5C;;AACA,gBAAI,CAAC4B,KAAK,CAACD,QAAD,CAAN,IAAqBriB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKqiB,QAAjD,EAA4D;AACxD,qBAAO,IAAP;AACH;;AACDriB,eAAG,GAAGqiB,QAAN;AACH,WAND,MAOK,IAAIF,SAAS,CAACzB,IAAD,CAAb,EAAqB;AACtB;AACA,mBAAO,IAAP;AACH;AACJ;;AACD,eAAO1gB,GAAP;AACH;;AACD,eAASuiB,2BAAT,CAAqCf,GAArC,EAA0CgB,eAA1C,EAA2D;AACvD,YAAI5iB,EAAE,GAAG4hB,GAAG,CAACxd,YAAb;;AACA,YAAIpE,EAAJ,EAAQ;AACJ,cAAIA,EAAE,GAAG,IAAL,KAAc,CAAlB,EAAqB;AACjB,mBAAO;AAAE8gB,kBAAI,EAAE,aAAR;AAAuBx3B,mBAAK,EAAE0W;AAA9B,aAAP;AACH;;AACD,cAAIA,EAAE,IAAI,OAAO,EAAX,CAAF,KAAqB,CAAzB,EAA4B;AACxB,mBAAO;AAAE8gB,kBAAI,EAAE,QAAR;AAAkBx3B,mBAAK,EAAE0W,EAAE,GAAG;AAA9B,aAAP;AACH;;AACD,cAAIA,EAAE,IAAI,OAAO,EAAP,GAAY,EAAhB,CAAF,KAA0B,CAA9B,EAAiC;AAC7B,mBAAO;AAAE8gB,kBAAI,EAAE,QAAR;AAAkBx3B,mBAAK,EAAE0W,EAAE,IAAI,OAAO,EAAX;AAA3B,aAAP;AACH;;AACD,cAAIA,EAAJ,EAAQ;AACJ,mBAAO;AAAE8gB,kBAAI,EAAE,MAAR;AAAgBx3B,mBAAK,EAAE0W,EAAE,IAAI,OAAO,EAAP,GAAY,EAAhB;AAAzB,aAAP;AACH;AACJ;;AACD,YAAI4hB,GAAG,CAACx5B,IAAR,EAAc;AACV,cAAI,CAACw6B,eAAD,IAAoBhB,GAAG,CAACx5B,IAAJ,GAAW,CAAX,KAAiB,CAAzC,EAA4C;AACxC,mBAAO;AAAE04B,kBAAI,EAAE,MAAR;AAAgBx3B,mBAAK,EAAEs4B,GAAG,CAACx5B,IAAJ,GAAW;AAAlC,aAAP;AACH;;AACD,iBAAO;AAAE04B,gBAAI,EAAE,KAAR;AAAex3B,iBAAK,EAAEs4B,GAAG,CAACx5B;AAA1B,WAAP;AACH;;AACD,YAAIw5B,GAAG,CAACvD,MAAR,EAAgB;AACZ,iBAAO;AAAEyC,gBAAI,EAAE,OAAR;AAAiBx3B,iBAAK,EAAEs4B,GAAG,CAACvD;AAA5B,WAAP;AACH;;AACD,YAAIuD,GAAG,CAACxD,KAAR,EAAe;AACX,iBAAO;AAAE0C,gBAAI,EAAE,MAAR;AAAgBx3B,iBAAK,EAAEs4B,GAAG,CAACxD;AAA3B,WAAP;AACH;;AACD,eAAO;AAAE0C,cAAI,EAAE,aAAR;AAAuBx3B,eAAK,EAAE;AAA9B,SAAP;AACH;AAED;;AAEA;AACA;;;AACA,eAASu5B,gBAAT,CAA0BC,KAA1B,EAAiCC,eAAjC,EAAkD;AAC9C,YAAIA,eAAe,CAACrvB,IAApB,EAA0B;AACtByhB,oBAAU,CAAC2N,KAAD,EAAQ;AACd7I,2BAAe,EAAE,CADH;AAEd+I,sBAAU,EAAED,eAAe,CAACrvB,IAAhB,GAAuB;AAFrB,WAAR,CAAV;AAIH;;AACD,YAAIqvB,eAAe,CAAC7uB,KAApB,EAA2B;AACvBihB,oBAAU,CAAC2N,KAAD,EAAQ;AACd3I,4BAAgB,EAAE,CADJ;AAEd8I,uBAAW,EAAEF,eAAe,CAAC7uB,KAAhB,GAAwB;AAFvB,WAAR,CAAV;AAIH;AACJ,O,CACD;;;AACA,eAASgvB,kBAAT,CAA4BJ,KAA5B,EAAmC;AAC/B3N,kBAAU,CAAC2N,KAAD,EAAQ;AACdE,oBAAU,EAAE,EADE;AAEdC,qBAAW,EAAE,EAFC;AAGdhJ,yBAAe,EAAE,EAHH;AAIdE,0BAAgB,EAAE;AAJJ,SAAR,CAAV;AAMH,O,CACD;;;AACA,eAASgJ,aAAT,GAAyB;AACrB7zB,gBAAQ,CAACiD,IAAT,CAActO,SAAd,CAAwBC,GAAxB,CAA4B,gBAA5B;AACH,O,CACD;;;AACA,eAASk/B,YAAT,GAAwB;AACpB9zB,gBAAQ,CAACiD,IAAT,CAActO,SAAd,CAAwBg0B,MAAxB,CAA+B,gBAA/B;AACH,O,CACD;AACA;AACA;AACA;;;AACA,eAASoL,gBAAT,CAA0BtqB,GAA1B,EAA+BuqB,eAA/B,EAAgDC,kBAAhD,EAAoE;AAChE;AACA;AACA,YAAIC,UAAU,GAAGz2B,IAAI,CAAC6yB,KAAL,CAAW0D,eAAe,GAAGvqB,GAAG,CAAClZ,MAAjC,CAAjB,CAHgE,CAGL;;AAC3D,YAAI4jC,UAAU,GAAG12B,IAAI,CAAC6yB,KAAL,CAAW0D,eAAe,GAAGE,UAAU,IAAIzqB,GAAG,CAAClZ,MAAJ,GAAa,CAAjB,CAAvC,CAAjB,CAJgE,CAIc;;AAC9E,YAAI6jC,OAAO,GAAG,EAAd,CALgE,CAK9C;;AAClB,YAAIC,WAAW,GAAG,EAAlB,CANgE,CAM1C;;AACtB,YAAIC,WAAW,GAAG,EAAlB,CAPgE,CAO1C;;AACtB,YAAIC,UAAU,GAAG,CAAjB;AACAC,0BAAkB,CAAC/qB,GAAD,CAAlB,CATgE,CASvC;AACzB;AACA;;AACAA,WAAG,CAACvN,OAAJ,CAAY,UAAUjI,EAAV,EAAcgD,CAAd,EAAiB;AACzB,cAAIw9B,SAAS,GAAGx9B,CAAC,KAAKwS,GAAG,CAAClZ,MAAJ,GAAa,CAAnB,GAAuB4jC,UAAvB,GAAoCD,UAApD;AACA,cAAIQ,aAAa,GAAGzgC,EAAE,CAACmP,qBAAH,GAA2ByB,MAA/C;AACA,cAAI8vB,aAAa,GAAGD,aAAa,GAAGvI,eAAe,CAACl4B,EAAD,CAAnD;;AACA,cAAI0gC,aAAa,GAAGF,SAApB,EAA+B;AAC3BL,mBAAO,CAAC7hC,IAAR,CAAa0B,EAAb;AACAogC,uBAAW,CAAC9hC,IAAZ,CAAiBoiC,aAAjB;AACAL,uBAAW,CAAC/hC,IAAZ,CAAiBmiC,aAAjB;AACH,WAJD,MAKK;AACD;AACAH,sBAAU,IAAII,aAAd;AACH;AACJ,SAbD,EAZgE,CA0BhE;;AACA,YAAIV,kBAAJ,EAAwB;AACpBD,yBAAe,IAAIO,UAAnB;AACAL,oBAAU,GAAGz2B,IAAI,CAAC6yB,KAAL,CAAW0D,eAAe,GAAGI,OAAO,CAAC7jC,MAArC,CAAb;AACA4jC,oBAAU,GAAG12B,IAAI,CAAC6yB,KAAL,CAAW0D,eAAe,GAAGE,UAAU,IAAIE,OAAO,CAAC7jC,MAAR,GAAiB,CAArB,CAAvC,CAAb,CAHoB,CAG0D;AACjF,SA/B+D,CAgChE;;;AACA6jC,eAAO,CAACl4B,OAAR,CAAgB,UAAUjI,EAAV,EAAcgD,CAAd,EAAiB;AAC7B,cAAIw9B,SAAS,GAAGx9B,CAAC,KAAKm9B,OAAO,CAAC7jC,MAAR,GAAiB,CAAvB,GAA2B4jC,UAA3B,GAAwCD,UAAxD;AACA,cAAIS,aAAa,GAAGN,WAAW,CAACp9B,CAAD,CAA/B;AACA,cAAIy9B,aAAa,GAAGJ,WAAW,CAACr9B,CAAD,CAA/B;AACA,cAAI29B,SAAS,GAAGH,SAAS,IAAIE,aAAa,GAAGD,aAApB,CAAzB,CAJ6B,CAIgC;;AAC7D,cAAIC,aAAa,GAAGF,SAApB,EAA+B;AAAE;AAC7BxgC,cAAE,CAAC0P,KAAH,CAASkB,MAAT,GAAkB+vB,SAAS,GAAG,IAA9B;AACH;AACJ,SARD;AASH,O,CACD;;;AACA,eAASJ,kBAAT,CAA4B/qB,GAA5B,EAAiC;AAC7BA,WAAG,CAACvN,OAAJ,CAAY,UAAUjI,EAAV,EAAc;AACtBA,YAAE,CAAC0P,KAAH,CAASkB,MAAT,GAAkB,EAAlB;AACH,SAFD;AAGH,O,CACD;AACA;AACA;;;AACA,eAASgwB,eAAT,CAAyBprB,GAAzB,EAA8B;AAC1B,YAAIqrB,aAAa,GAAG,CAApB;AACArrB,WAAG,CAACvN,OAAJ,CAAY,UAAUjI,EAAV,EAAc;AACtB,cAAIk2B,OAAO,GAAGl2B,EAAE,CAACoyB,UAAjB,CADsB,CACO;;AAC7B,cAAI8D,OAAO,YAAYhC,WAAvB,EAAoC;AAChC,gBAAI4M,YAAY,GAAG5K,OAAO,CAAC/mB,qBAAR,GAAgCuB,KAAnD;;AACA,gBAAIowB,YAAY,GAAGD,aAAnB,EAAkC;AAC9BA,2BAAa,GAAGC,YAAhB;AACH;AACJ;AACJ,SARD;AASAD,qBAAa,GAXa,CAWT;;AACjBrrB,WAAG,CAACvN,OAAJ,CAAY,UAAUjI,EAAV,EAAc;AACtBA,YAAE,CAAC0P,KAAH,CAASgB,KAAT,GAAiBmwB,aAAa,GAAG,IAAjC;AACH,SAFD;AAGA,eAAOA,aAAP;AACH,O,CACD;AACA;;;AACA,eAASE,qBAAT,CAA+BlL,OAA/B,EAAwCK,OAAxC,EAAiD;AAC7C;AACA,YAAI8K,gBAAgB,GAAG;AACnBzwB,kBAAQ,EAAE,UADS;AAEnBJ,cAAI,EAAE,CAAC,CAFY,CAEV;;AAFU,SAAvB;AAIAyhB,kBAAU,CAACiE,OAAD,EAAUmL,gBAAV,CAAV;AACApP,kBAAU,CAACsE,OAAD,EAAU8K,gBAAV,CAAV;AACA,YAAIC,IAAI,GAAG;AACVpL,eAAO,CAAC1mB,qBAAR,GAAgCyB,MAAhC,GACGslB,OAAO,CAAC/mB,qBAAR,GAAgCyB,MAFpC,CAR6C,CAW7C;;AACA,YAAIswB,eAAe,GAAG;AAAE3wB,kBAAQ,EAAE,EAAZ;AAAgBJ,cAAI,EAAE;AAAtB,SAAtB;AACAyhB,kBAAU,CAACiE,OAAD,EAAUqL,eAAV,CAAV;AACAtP,kBAAU,CAACsE,OAAD,EAAUgL,eAAV,CAAV;AACA,eAAOD,IAAP;AACH;AACD;;;;AAEA,eAASE,gBAAT,CAA0BnhC,EAA1B,EAA8B;AAC1BA,UAAE,CAACU,SAAH,CAAaC,GAAb,CAAiB,iBAAjB;AACAX,UAAE,CAACgM,gBAAH,CAAoB,aAApB,EAAmCyC,cAAnC;AACH;;AACD,eAAS2yB,cAAT,CAAwBphC,EAAxB,EAA4B;AACxBA,UAAE,CAACU,SAAH,CAAag0B,MAAb,CAAoB,iBAApB;AACA10B,UAAE,CAACoM,mBAAH,CAAuB,aAAvB,EAAsCqC,cAAtC;AACH;AACD;;;;AAEA,eAAS4yB,kBAAT,CAA4BrhC,EAA5B,EAAgC;AAC5BA,UAAE,CAACgM,gBAAH,CAAoB,aAApB,EAAmCyC,cAAnC;AACH;;AACD,eAAS6yB,gBAAT,CAA0BthC,EAA1B,EAA8B;AAC1BA,UAAE,CAACoM,mBAAH,CAAuB,aAAvB,EAAsCqC,cAAtC;AACH;AACD;;;;AAEA,eAAS8yB,eAAT,CAAyBpc,KAAzB,EAAgC;AAC5B,YAAIqc,KAAK,GAAG,EAAZ;AACA,YAAIC,MAAM,GAAG,EAAb;AACA,YAAIz+B,CAAJ;AACA,YAAI0+B,KAAJ;;AACA,YAAI,OAAOvc,KAAP,KAAiB,QAArB,EAA+B;AAC3Bsc,gBAAM,GAAGtc,KAAK,CAACtkB,KAAN,CAAY,SAAZ,CAAT;AACH,SAFD,MAGK,IAAI,OAAOskB,KAAP,KAAiB,UAArB,EAAiC;AAClCsc,gBAAM,GAAG,CAACtc,KAAD,CAAT;AACH,SAFI,MAGA,IAAI5pB,KAAK,CAAC6pB,OAAN,CAAcD,KAAd,CAAJ,EAA0B;AAC3Bsc,gBAAM,GAAGtc,KAAT;AACH;;AACD,aAAKniB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGy+B,MAAM,CAACnlC,MAAvB,EAA+B0G,CAAC,EAAhC,EAAoC;AAChC0+B,eAAK,GAAGD,MAAM,CAACz+B,CAAD,CAAd;;AACA,cAAI,OAAO0+B,KAAP,KAAiB,QAArB,EAA+B;AAC3BF,iBAAK,CAACljC,IAAN,CAAWojC,KAAK,CAACC,MAAN,CAAa,CAAb,MAAoB,GAApB,GACP;AAAEC,mBAAK,EAAEF,KAAK,CAACG,SAAN,CAAgB,CAAhB,CAAT;AAA6BC,mBAAK,EAAE,CAAC;AAArC,aADO,GAEP;AAAEF,mBAAK,EAAEF,KAAT;AAAgBI,mBAAK,EAAE;AAAvB,aAFJ;AAGH,WAJD,MAKK,IAAI,OAAOJ,KAAP,KAAiB,UAArB,EAAiC;AAClCF,iBAAK,CAACljC,IAAN,CAAW;AAAEgnB,kBAAI,EAAEoc;AAAR,aAAX;AACH;AACJ;;AACD,eAAOF,KAAP;AACH;;AACD,eAASO,mBAAT,CAA6BC,IAA7B,EAAmCC,IAAnC,EAAyCC,UAAzC,EAAqD;AACjD,YAAIl/B,CAAJ;AACA,YAAIm/B,GAAJ;;AACA,aAAKn/B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGk/B,UAAU,CAAC5lC,MAA3B,EAAmC0G,CAAC,EAApC,EAAwC;AACpCm/B,aAAG,GAAGC,kBAAkB,CAACJ,IAAD,EAAOC,IAAP,EAAaC,UAAU,CAACl/B,CAAD,CAAvB,CAAxB;;AACA,cAAIm/B,GAAJ,EAAS;AACL,mBAAOA,GAAP;AACH;AACJ;;AACD,eAAO,CAAP;AACH;;AACD,eAASC,kBAAT,CAA4BJ,IAA5B,EAAkCC,IAAlC,EAAwCI,SAAxC,EAAmD;AAC/C,YAAIA,SAAS,CAAC/c,IAAd,EAAoB;AAChB,iBAAO+c,SAAS,CAAC/c,IAAV,CAAe0c,IAAf,EAAqBC,IAArB,CAAP;AACH;;AACD,eAAOK,eAAe,CAACN,IAAI,CAACK,SAAS,CAACT,KAAX,CAAL,EAAwBK,IAAI,CAACI,SAAS,CAACT,KAAX,CAA5B,CAAf,IACAS,SAAS,CAACP,KAAV,IAAmB,CADnB,CAAP;AAEH;;AACD,eAASQ,eAAT,CAAyBzI,CAAzB,EAA4B1+B,CAA5B,EAA+B;AAC3B,YAAI,CAAC0+B,CAAD,IAAM,CAAC1+B,CAAX,EAAc;AACV,iBAAO,CAAP;AACH;;AACD,YAAIA,CAAC,IAAI,IAAT,EAAe;AACX,iBAAO,CAAC,CAAR;AACH;;AACD,YAAI0+B,CAAC,IAAI,IAAT,EAAe;AACX,iBAAO,CAAP;AACH;;AACD,YAAI,OAAOA,CAAP,KAAa,QAAb,IAAyB,OAAO1+B,CAAP,KAAa,QAA1C,EAAoD;AAChD,iBAAO+0B,MAAM,CAAC2J,CAAD,CAAN,CAAU0I,aAAV,CAAwBrS,MAAM,CAAC/0B,CAAD,CAA9B,CAAP;AACH;;AACD,eAAO0+B,CAAC,GAAG1+B,CAAX;AACH;AACD;;;;AAEA,eAASqnC,qBAAT,CAA+B7e,GAA/B,EAAoC;AAChC,eAAOA,GAAG,CAACge,MAAJ,CAAW,CAAX,EAAcc,WAAd,KAA8B9e,GAAG,CAACpb,KAAJ,CAAU,CAAV,CAArC;AACH;;AACD,eAASm6B,QAAT,CAAkB5N,GAAlB,EAAuB6N,GAAvB,EAA4B;AACxB,YAAIv4B,CAAC,GAAG8lB,MAAM,CAAC4E,GAAD,CAAd;AACA,eAAO,MAAMtC,MAAN,CAAa,CAAb,EAAgBmQ,GAAG,GAAGv4B,CAAC,CAAC9N,MAAxB,IAAkC8N,CAAzC;AACH;AACD;;;;AAEA,eAASw4B,cAAT,CAAwB/I,CAAxB,EAA2B1+B,CAA3B,EAA8B;AAC1B,eAAO0+B,CAAC,GAAG1+B,CAAX;AACH;;AACD,eAASgkC,KAAT,CAAe90B,CAAf,EAAkB;AACd,eAAOA,CAAC,GAAG,CAAJ,KAAU,CAAjB;AACH;AACD;;;;AAEA,eAASw4B,QAAT,CAAkBC,SAAlB,EAA6BC,OAA7B,EAAsCrS,IAAtC,EAA4C;AACxC,YAAI,OAAOoS,SAAP,KAAqB,UAAzB,EAAqC;AAAE;AACnCA,mBAAS,GAAG,CAACA,SAAD,CAAZ;AACH;;AACD,YAAIA,SAAJ,EAAe;AACX,cAAI9/B,CAAC,GAAG,KAAK,CAAb;AACA,cAAIggC,GAAG,GAAG,KAAK,CAAf;;AACA,eAAKhgC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8/B,SAAS,CAACxmC,MAA1B,EAAkC0G,CAAC,EAAnC,EAAuC;AACnCggC,eAAG,GAAGF,SAAS,CAAC9/B,CAAD,CAAT,CAAab,KAAb,CAAmB4gC,OAAnB,EAA4BrS,IAA5B,KAAqCsS,GAA3C;AACH;;AACD,iBAAOA,GAAP;AACH;AACJ;;AACD,eAASC,YAAT,GAAwB;AACpB,YAAIvS,IAAI,GAAG,EAAX;;AACA,aAAK,IAAI5vB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1C4vB,cAAI,CAAC5vB,EAAD,CAAJ,GAAWwJ,SAAS,CAACxJ,EAAD,CAApB;AACH;;AACD,aAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0tB,IAAI,CAACp0B,MAAzB,EAAiC0G,CAAC,EAAlC,EAAsC;AAClC,cAAI0tB,IAAI,CAAC1tB,CAAD,CAAJ,KAAYolB,SAAhB,EAA2B;AACvB,mBAAOsI,IAAI,CAAC1tB,CAAD,CAAX;AACH;AACJ;AACJ,O,CACD;AACA;AACA;AACA;AACA;;;AACA,eAASkgC,QAAT,CAAkB5d,IAAlB,EAAwB6d,IAAxB,EAA8B;AAC1B,YAAIC,OAAJ;AACA,YAAI1S,IAAJ;AACA,YAAI7zB,OAAJ;AACA,YAAIwmC,SAAJ;AACA,YAAI77B,MAAJ;;AACA,YAAI87B,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,cAAIC,IAAI,GAAG,IAAIp+B,IAAJ,GAAW1C,OAAX,KAAuB4gC,SAAlC;;AACA,cAAIE,IAAI,GAAGJ,IAAX,EAAiB;AACbC,mBAAO,GAAG70B,UAAU,CAAC+0B,KAAD,EAAQH,IAAI,GAAGI,IAAf,CAApB;AACH,WAFD,MAGK;AACDH,mBAAO,GAAG,IAAV;AACA57B,kBAAM,GAAG8d,IAAI,CAACnjB,KAAL,CAAWtF,OAAX,EAAoB6zB,IAApB,CAAT;AACA7zB,mBAAO,GAAG6zB,IAAI,GAAG,IAAjB;AACH;AACJ,SAVD;;AAWA,eAAO,YAAY;AACf7zB,iBAAO,GAAG,IAAV;AACA6zB,cAAI,GAAGpmB,SAAP;AACA+4B,mBAAS,GAAG,IAAIl+B,IAAJ,GAAW1C,OAAX,EAAZ;;AACA,cAAI,CAAC2gC,OAAL,EAAc;AACVA,mBAAO,GAAG70B,UAAU,CAAC+0B,KAAD,EAAQH,IAAR,CAApB;AACH;;AACD,iBAAO37B,MAAP;AACH,SARD;AASH,O,CACD;AACA;;;AACA,eAASg8B,WAAT,CAAqBC,QAArB,EAA+BC,UAA/B,EAA2CC,QAA3C,EAAqDrgB,aAArD,EAAoE;AAChE,YAAIqgB,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,kBAAQ,GAAG,EAAX;AAAgB;;AAC3C,YAAIC,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIpe,GAAT,IAAgBke,UAAhB,EAA4B;AACxB,cAAIG,SAAS,GAAGH,UAAU,CAACle,GAAD,CAA1B;;AACA,cAAIie,QAAQ,CAACje,GAAD,CAAR,KAAkB4C,SAAtB,EAAiC;AAC7B;AACA,gBAAIyb,SAAS,KAAKC,QAAlB,EAA4B;AACxBF,qBAAO,CAACpe,GAAD,CAAP,GAAe,OAAOie,QAAQ,CAACje,GAAD,CAAf,KAAyB,UAAzB,GAAsCie,QAAQ,CAACje,GAAD,CAA9C,GAAsD,IAArE;AACH,aAFD,MAGK,IAAIqe,SAAJ,EAAe;AAAE;AAClBD,qBAAO,CAACpe,GAAD,CAAP,GAAeqe,SAAS,CAACJ,QAAQ,CAACje,GAAD,CAAT,CAAxB;AACH,aAFI,MAGA;AACDoe,qBAAO,CAACpe,GAAD,CAAP,GAAeie,QAAQ,CAACje,GAAD,CAAvB;AACH;AACJ,WAXD,MAYK,IAAIme,QAAQ,CAACne,GAAD,CAAR,KAAkB4C,SAAtB,EAAiC;AAClC;AACAwb,mBAAO,CAACpe,GAAD,CAAP,GAAeme,QAAQ,CAACne,GAAD,CAAvB;AACH,WAHI,MAIA;AACD;AACA,gBAAIqe,SAAS,KAAK3T,MAAlB,EAA0B;AACtB0T,qBAAO,CAACpe,GAAD,CAAP,GAAe,EAAf,CADsB,CACH;AACtB,aAFD,MAGK,IAAI,CAACqe,SAAD,IAAcA,SAAS,KAAK1T,MAA5B,IAAsC0T,SAAS,KAAKppB,OAApD,IAA+DopB,SAAS,KAAKC,QAAjF,EAA2F;AAC5FF,qBAAO,CAACpe,GAAD,CAAP,GAAe,IAAf,CAD4F,CACvE;AACxB,aAFI,MAGA;AACDoe,qBAAO,CAACpe,GAAD,CAAP,GAAeqe,SAAS,CAAC,IAAD,CAAxB,CADC,CAC+B;AACnC;AACJ;AACJ;;AACD,YAAIvgB,aAAJ,EAAmB;AACf,eAAK,IAAIkC,GAAT,IAAgBie,QAAhB,EAA0B;AACtB,gBAAIC,UAAU,CAACle,GAAD,CAAV,KAAoB4C,SAAxB,EAAmC;AAC/B9E,2BAAa,CAACkC,GAAD,CAAb,GAAqBie,QAAQ,CAACje,GAAD,CAA7B;AACH;AACJ;AACJ;;AACD,eAAOoe,OAAP;AACH;AACD;;AAEA;AACA;;;AACA,eAASG,sBAAT,CAAgCC,UAAhC,EAA4C;AACxC,YAAIC,MAAM,GAAGz6B,IAAI,CAAC6yB,KAAL,CAAWhC,QAAQ,CAAC2J,UAAU,CAAC9lC,KAAZ,EAAmB8lC,UAAU,CAAC7lC,GAA9B,CAAnB,KAA0D,CAAvE;AACA,YAAID,KAAK,GAAGy8B,UAAU,CAACqJ,UAAU,CAAC9lC,KAAZ,CAAtB;AACA,YAAIC,GAAG,GAAG67B,OAAO,CAAC97B,KAAD,EAAQ+lC,MAAR,CAAjB;AACA,eAAO;AAAE/lC,eAAK,EAAEA,KAAT;AAAgBC,aAAG,EAAEA;AAArB,SAAP;AACH,O,CACD;AACA;;;AACA,eAAS+lC,sBAAT,CAAgCF,UAAhC,EAA4CjiC,gBAA5C,EAA8D;AAC1D,YAAIA,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;AAAEA,0BAAgB,GAAGu7B,cAAc,CAAC,CAAD,CAAjC;AAAuC;;AAC1E,YAAI6G,QAAQ,GAAG,IAAf;AACA,YAAIC,MAAM,GAAG,IAAb;;AACA,YAAIJ,UAAU,CAAC7lC,GAAf,EAAoB;AAChBimC,gBAAM,GAAGzJ,UAAU,CAACqJ,UAAU,CAAC7lC,GAAZ,CAAnB;AACA,cAAIkmC,SAAS,GAAGL,UAAU,CAAC7lC,GAAX,CAAesE,OAAf,KAA2B2hC,MAAM,CAAC3hC,OAAP,EAA3C,CAFgB,CAE6C;AAC7D;AACA;AACA;;AACA,cAAI4hC,SAAS,IAAIA,SAAS,IAAIzF,SAAS,CAAC78B,gBAAD,CAAvC,EAA2D;AACvDqiC,kBAAM,GAAGpK,OAAO,CAACoK,MAAD,EAAS,CAAT,CAAhB;AACH;AACJ;;AACD,YAAIJ,UAAU,CAAC9lC,KAAf,EAAsB;AAClBimC,kBAAQ,GAAGxJ,UAAU,CAACqJ,UAAU,CAAC9lC,KAAZ,CAArB,CADkB,CACuB;AACzC;;AACA,cAAIkmC,MAAM,IAAIA,MAAM,IAAID,QAAxB,EAAkC;AAC9BC,kBAAM,GAAGpK,OAAO,CAACmK,QAAD,EAAW,CAAX,CAAhB;AACH;AACJ;;AACD,eAAO;AAAEjmC,eAAK,EAAEimC,QAAT;AAAmBhmC,aAAG,EAAEimC;AAAxB,SAAP;AACH,O,CACD;;;AACA,eAASE,eAAT,CAAyBvmC,KAAzB,EAAgC;AAC5B,YAAImtB,YAAY,GAAGgZ,sBAAsB,CAACnmC,KAAD,CAAzC;AACA,eAAOs8B,QAAQ,CAACnP,YAAY,CAAChtB,KAAd,EAAqBgtB,YAAY,CAAC/sB,GAAlC,CAAR,GAAiD,CAAxD;AACH;;AACD,eAASomC,SAAT,CAAmBhkB,KAAnB,EAA0BC,KAA1B,EAAiCne,OAAjC,EAA0Cue,SAA1C,EAAqD;AACjD,YAAIA,SAAS,KAAK,MAAlB,EAA0B;AACtB,iBAAO0c,cAAc,CAACj7B,OAAO,CAACmiC,cAAR,CAAuBjkB,KAAvB,EAA8BC,KAA9B,CAAD,EAAuC,MAAvC,CAArB;AACH,SAFD,MAGK,IAAII,SAAS,KAAK,OAAlB,EAA2B;AAC5B,iBAAO0c,cAAc,CAACj7B,OAAO,CAACoiC,eAAR,CAAwBlkB,KAAxB,EAA+BC,KAA/B,CAAD,EAAwC,OAAxC,CAArB;AACH,SAFI,MAGA;AACD,iBAAOia,cAAc,CAACla,KAAD,EAAQC,KAAR,CAArB,CADC,CACoC;AACxC;AACJ;AAED;;;;;;;;;;;;;;;AAcA;;;AAEA,UAAIvlB,eAAa,GAAG,uBAASC,CAAT,EAAYC,CAAZ,EAAe;AAC/BF,uBAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,mBAAS,EAAE;AAAb,qBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,WAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,eAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,gBAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAA1C;AAAwD,SAF9E;;AAGA,eAAOP,eAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,OALD;;AAOA,eAASO,SAAT,CAAmBR,CAAnB,EAAsBC,CAAtB,EAAyB;AACrBF,uBAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,iBAASQ,EAAT,GAAc;AAAE,eAAKC,WAAL,GAAmBV,CAAnB;AAAuB;;AACvCA,SAAC,CAACW,SAAF,GAAcV,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACU,MAAP,CAAcX,CAAd,CAAb,IAAiCQ,EAAE,CAACE,SAAH,GAAeV,CAAC,CAACU,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH;;AAED,UAAIuO,QAAQ,GAAG,oBAAW;AACtBA,gBAAQ,GAAG9O,MAAM,CAACqN,MAAP,IAAiB,SAASyB,QAAT,CAAkBC,CAAlB,EAAqB;AAC7C,eAAK,IAAIC,CAAJ,EAAOpH,CAAC,GAAG,CAAX,EAAcqH,CAAC,GAAGC,SAAS,CAAChO,MAAjC,EAAyC0G,CAAC,GAAGqH,CAA7C,EAAgDrH,CAAC,EAAjD,EAAqD;AACjDoH,aAAC,GAAGE,SAAS,CAACtH,CAAD,CAAb;;AACA,iBAAK,IAAIxH,CAAT,IAAc4O,CAAd;AAAiB,kBAAIhP,MAAM,CAACS,SAAP,CAAiBJ,cAAjB,CAAgCU,IAAhC,CAAqCiO,CAArC,EAAwC5O,CAAxC,CAAJ,EAAgD2O,CAAC,CAAC3O,CAAD,CAAD,GAAO4O,CAAC,CAAC5O,CAAD,CAAR;AAAjE;AACH;;AACD,iBAAO2O,CAAP;AACH,SAND;;AAOA,eAAOD,QAAQ,CAAC/H,KAAT,CAAe,IAAf,EAAqBmI,SAArB,CAAP;AACH,OATD;;AAWA,eAASo6B,cAAT,CAAwBC,UAAxB,EAAoCpX,aAApC,EAAmDlrB,OAAnD,EAA4DuiC,cAA5D,EAA4EC,SAA5E,EAAuF;AACnF,aAAK,IAAI7hC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4hC,cAAc,CAACtoC,MAAnC,EAA2C0G,CAAC,EAA5C,EAAgD;AAC5C,cAAI8hC,cAAc,GAAG,EAArB;AACA,cAAIC,MAAM,GAAGH,cAAc,CAAC5hC,CAAD,CAAd,CAAkB+gB,KAAlB,CAAwB4gB,UAAxB,EAAoCG,cAApC,EAAoDziC,OAApD,CAAb;;AACA,cAAI0iC,MAAJ,EAAY;AACR,gBAAIjnC,MAAM,GAAGgnC,cAAc,CAAChnC,MAA5B;AACA,mBAAOgnC,cAAc,CAAChnC,MAAtB,CAFQ,CAEsB;;AAC9B,gBAAIA,MAAM,IAAI,IAAd,EAAoB;AAChBA,oBAAM,GAAGyvB,aAAT;;AACA,kBAAIzvB,MAAM,IAAI,IAAd,EAAoB;AAChBA,sBAAM,GAAGinC,MAAM,CAACC,WAAhB;;AACA,oBAAIlnC,MAAM,IAAI,IAAd,EAAoB;AAChBA,wBAAM,GAAG,KAAT;AACH;AACJ;AACJ;;AACDoM,oBAAQ,CAAC26B,SAAD,EAAYC,cAAZ,CAAR;;AACA,mBAAO;AACHhnC,oBAAM,EAAEA,MADL;AAEH8G,sBAAQ,EAAEmgC,MAAM,CAACngC,QAFd;AAGHqgC,sBAAQ,EAAEF,MAAM,CAACE,QAHd;AAIHC,oBAAM,EAAEliC;AAJL,aAAP;AAMH;AACJ;;AACD,eAAO,IAAP;AACH;AACD;;;;;AAGA,eAASmiC,qBAAT,CAA+BloC,QAA/B,EAAyC2H,QAAzC,EAAmDwgC,YAAnD,EAAiE/iC,OAAjE,EAA0EuiC,cAA1E,EAA0F;AACtF,YAAIS,OAAO,GAAGT,cAAc,CAAC3nC,QAAQ,CAACqoC,YAAT,CAAsBJ,MAAvB,CAA5B;AACA,YAAIK,OAAO,GAAGF,OAAO,CAACG,MAAR,CAAevoC,QAAQ,CAACqoC,YAAT,CAAsBL,QAArC,EAA+C;AACzD/mC,eAAK,EAAEmE,OAAO,CAACojC,QAAR,CAAiBL,YAAY,CAAClnC,KAA9B,EAAqC0G,QAArC,CADkD;AAEzDzG,aAAG,EAAEinC,YAAY,CAACjnC;AAFuC,SAA/C,EAGXkE,OAHW,CAAd,CAFsF,CAMtF;;AACA,YAAIpF,QAAQ,CAACa,MAAb,EAAqB;AACjBynC,iBAAO,GAAGA,OAAO,CAAChwB,GAAR,CAAYolB,UAAZ,CAAV;AACH;;AACD,eAAO4K,OAAP;AACH;;AAED,UAAI9pC,cAAc,GAAGL,MAAM,CAACS,SAAP,CAAiBJ,cAAtC,C,CACA;AACA;;AACA,eAASiqC,UAAT,CAAoBC,QAApB,EAA8BC,YAA9B,EAA4C;AACxC,YAAIC,IAAI,GAAG,EAAX;AACA,YAAI7iC,CAAJ;AACA,YAAI8C,IAAJ;AACA,YAAIggC,WAAJ;AACA,YAAI1R,CAAJ;AACA,YAAIU,GAAJ;AACA,YAAI50B,KAAJ;;AACA,YAAI0lC,YAAJ,EAAkB;AACd,eAAK5iC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4iC,YAAY,CAACtpC,MAA7B,EAAqC0G,CAAC,EAAtC,EAA0C;AACtC8C,gBAAI,GAAG8/B,YAAY,CAAC5iC,CAAD,CAAnB;AACA8iC,uBAAW,GAAG,EAAd,CAFsC,CAGtC;;AACA,iBAAK1R,CAAC,GAAGuR,QAAQ,CAACrpC,MAAT,GAAkB,CAA3B,EAA8B83B,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AACvCU,iBAAG,GAAG6Q,QAAQ,CAACvR,CAAD,CAAR,CAAYtuB,IAAZ,CAAN;;AACA,kBAAI,OAAOgvB,GAAP,KAAe,QAAf,IAA2BA,GAA/B,EAAoC;AAAE;AAClCgR,2BAAW,CAACC,OAAZ,CAAoBjR,GAApB;AACH,eAFD,MAGK,IAAIA,GAAG,KAAK1M,SAAZ,EAAuB;AACxByd,oBAAI,CAAC//B,IAAD,CAAJ,GAAagvB,GAAb,CADwB,CACN;;AAClB;AACH;AACJ,aAbqC,CActC;;;AACA,gBAAIgR,WAAW,CAACxpC,MAAhB,EAAwB;AACpBupC,kBAAI,CAAC//B,IAAD,CAAJ,GAAa4/B,UAAU,CAACI,WAAD,CAAvB;AACH;AACJ;AACJ,SA5BuC,CA6BxC;;;AACA,aAAK9iC,CAAC,GAAG2iC,QAAQ,CAACrpC,MAAT,GAAkB,CAA3B,EAA8B0G,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AACvC9C,eAAK,GAAGylC,QAAQ,CAAC3iC,CAAD,CAAhB;;AACA,eAAK8C,IAAL,IAAa5F,KAAb,EAAoB;AAChB,gBAAI,EAAE4F,IAAI,IAAI+/B,IAAV,CAAJ,EAAqB;AAAE;AACnBA,kBAAI,CAAC//B,IAAD,CAAJ,GAAa5F,KAAK,CAAC4F,IAAD,CAAlB;AACH;AACJ;AACJ;;AACD,eAAO+/B,IAAP;AACH;;AACD,eAASG,UAAT,CAAoBC,IAApB,EAA0B3gB,IAA1B,EAAgC;AAC5B,YAAI4gB,QAAQ,GAAG,EAAf;;AACA,aAAK,IAAI1gB,GAAT,IAAgBygB,IAAhB,EAAsB;AAClB,cAAI3gB,IAAI,CAAC2gB,IAAI,CAACzgB,GAAD,CAAL,EAAYA,GAAZ,CAAR,EAA0B;AACtB0gB,oBAAQ,CAAC1gB,GAAD,CAAR,GAAgBygB,IAAI,CAACzgB,GAAD,CAApB;AACH;AACJ;;AACD,eAAO0gB,QAAP;AACH;;AACD,eAAS7gB,OAAT,CAAiB4gB,IAAjB,EAAuB3gB,IAAvB,EAA6B;AACzB,YAAI6gB,OAAO,GAAG,EAAd;;AACA,aAAK,IAAI3gB,GAAT,IAAgBygB,IAAhB,EAAsB;AAClBE,iBAAO,CAAC3gB,GAAD,CAAP,GAAeF,IAAI,CAAC2gB,IAAI,CAACzgB,GAAD,CAAL,EAAYA,GAAZ,CAAnB;AACH;;AACD,eAAO2gB,OAAP;AACH;;AACD,eAASC,WAAT,CAAqBvM,CAArB,EAAwB;AACpB,YAAIoM,IAAI,GAAG,EAAX;;AACA,aAAK,IAAInlC,EAAE,GAAG,CAAT,EAAYulC,GAAG,GAAGxM,CAAvB,EAA0B/4B,EAAE,GAAGulC,GAAG,CAAC/pC,MAAnC,EAA2CwE,EAAE,EAA7C,EAAiD;AAC7C,cAAIiI,IAAI,GAAGs9B,GAAG,CAACvlC,EAAD,CAAd;AACAmlC,cAAI,CAACl9B,IAAD,CAAJ,GAAa,IAAb;AACH;;AACD,eAAOk9B,IAAP;AACH;;AACD,eAASK,iBAAT,CAA2BziB,GAA3B,EAAgC;AAC5B,YAAIgW,CAAC,GAAG,EAAR;;AACA,aAAK,IAAIrU,GAAT,IAAgB3B,GAAhB,EAAqB;AACjBgW,WAAC,CAACv7B,IAAF,CAAOulB,GAAG,CAAC2B,GAAD,CAAV;AACH;;AACD,eAAOqU,CAAP;AACH;;AACD,eAAS0M,YAAT,CAAsBvE,IAAtB,EAA4BC,IAA5B,EAAkC;AAC9B,aAAK,IAAIzc,GAAT,IAAgBwc,IAAhB,EAAsB;AAClB,cAAIvmC,cAAc,CAACU,IAAf,CAAoB6lC,IAApB,EAA0Bxc,GAA1B,CAAJ,EAAoC;AAChC,gBAAI,EAAEA,GAAG,IAAIyc,IAAT,CAAJ,EAAoB;AAChB,qBAAO,KAAP;AACH;AACJ;AACJ;;AACD,aAAK,IAAIzc,GAAT,IAAgByc,IAAhB,EAAsB;AAClB,cAAIxmC,cAAc,CAACU,IAAf,CAAoB8lC,IAApB,EAA0Bzc,GAA1B,CAAJ,EAAoC;AAChC,gBAAIwc,IAAI,CAACxc,GAAD,CAAJ,KAAcyc,IAAI,CAACzc,GAAD,CAAtB,EAA6B;AACzB,qBAAO,KAAP;AACH;AACJ;AACJ;;AACD,eAAO,IAAP;AACH;;AAED,eAASghB,WAAT,CAAqBC,SAArB,EAAgCjjB,QAAhC,EAA0C1jB,QAA1C,EAAoD4mC,cAApD,EAAoE;AAChE,YAAIpmC,UAAU,GAAGqmC,qBAAqB,EAAtC;;AACA,aAAK,IAAI7lC,EAAE,GAAG,CAAT,EAAY8lC,WAAW,GAAGH,SAA/B,EAA0C3lC,EAAE,GAAG8lC,WAAW,CAACtqC,MAA3D,EAAmEwE,EAAE,EAArE,EAAyE;AACrE,cAAI+lC,QAAQ,GAAGD,WAAW,CAAC9lC,EAAD,CAA1B;AACA,cAAIgmC,KAAK,GAAGC,UAAU,CAACF,QAAD,EAAWrjB,QAAX,EAAqB1jB,QAArB,EAA+B4mC,cAA/B,CAAtB;;AACA,cAAII,KAAJ,EAAW;AACPE,6BAAiB,CAACF,KAAD,EAAQxmC,UAAR,CAAjB;AACH;AACJ;;AACD,eAAOA,UAAP;AACH;;AACD,eAAS0mC,iBAAT,CAA2BF,KAA3B,EAAkCxmC,UAAlC,EAA8C;AAC1C,YAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,oBAAU,GAAGqmC,qBAAqB,EAAlC;AAAuC;;AACpErmC,kBAAU,CAACqf,IAAX,CAAgBmnB,KAAK,CAAC5pC,GAAN,CAAU0iB,KAA1B,IAAmCknB,KAAK,CAAC5pC,GAAzC;;AACA,YAAI4pC,KAAK,CAAC1pC,QAAV,EAAoB;AAChBkD,oBAAU,CAACuf,SAAX,CAAqBinB,KAAK,CAAC1pC,QAAN,CAAemgB,UAApC,IAAkDupB,KAAK,CAAC1pC,QAAxD;AACH;;AACD,eAAOkD,UAAP;AACH;;AACD,eAAS2mC,eAAT,CAAyB3mC,UAAzB,EAAqC8kC,YAArC,EAAmDtlC,QAAnD,EAA6D;AACzD,YAAIuC,OAAO,GAAGvC,QAAQ,CAACuC,OAAvB;AACA,YAAIsd,IAAI,GAAGrf,UAAU,CAACqf,IAAtB;AAAA,YAA4BE,SAAS,GAAGvf,UAAU,CAACuf,SAAnD,CAFyD,CAGzD;;AACAA,iBAAS,GAAGmmB,UAAU,CAACnmB,SAAD,EAAY,UAAUziB,QAAV,EAAoB;AAClD,iBAAO,CAACuiB,IAAI,CAACviB,QAAQ,CAACwiB,KAAV,CAAJ,CAAqB0lB,YAA7B;AACH,SAFqB,CAAtB;;AAGA,aAAK,IAAI1lB,KAAT,IAAkBD,IAAlB,EAAwB;AACpB,cAAIziB,GAAG,GAAGyiB,IAAI,CAACC,KAAD,CAAd;;AACA,cAAI1iB,GAAG,CAACooC,YAAR,EAAsB;AAClB,gBAAI1gC,QAAQ,GAAG1H,GAAG,CAACooC,YAAJ,CAAiB1gC,QAAhC;;AACA,gBAAI,CAACA,QAAL,EAAe;AACXA,sBAAQ,GAAG1H,GAAG,CAACY,MAAJ,GACPgC,QAAQ,CAACusB,0BADF,GAEPvsB,QAAQ,CAACwsB,yBAFb;AAGH;;AACD,gBAAI4a,MAAM,GAAG/B,qBAAqB,CAACjoC,GAAD,EAAM0H,QAAN,EAAgBwgC,YAAhB,EAA8BtlC,QAAQ,CAACuC,OAAvC,EAAgDvC,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4B+oB,cAA5E,CAAlC;;AACA,iBAAK,IAAI9jC,EAAE,GAAG,CAAT,EAAYqmC,QAAQ,GAAGD,MAA5B,EAAoCpmC,EAAE,GAAGqmC,QAAQ,CAAC7qC,MAAlD,EAA0DwE,EAAE,EAA5D,EAAgE;AAC5D,kBAAI5C,KAAK,GAAGipC,QAAQ,CAACrmC,EAAD,CAApB;AACA,kBAAI1D,QAAQ,GAAGgqC,mBAAmB,CAACxnB,KAAD,EAAQ;AACtC1hB,qBAAK,EAAEA,KAD+B;AAEtCC,mBAAG,EAAEkE,OAAO,CAAC1B,GAAR,CAAYzC,KAAZ,EAAmB0G,QAAnB;AAFiC,eAAR,CAAlC;AAIAib,uBAAS,CAACziB,QAAQ,CAACmgB,UAAV,CAAT,GAAiCngB,QAAjC;AACH;AACJ;AACJ;;AACD,eAAO;AAAEuiB,cAAI,EAAEA,IAAR;AAAcE,mBAAS,EAAEA;AAAzB,SAAP;AACH,O,CACD;AACA;AACA;;;AACA,eAASwnB,iBAAT,CAA2B/mC,UAA3B,EAAuCid,UAAvC,EAAmD;AAC/C,YAAIngB,QAAQ,GAAGkD,UAAU,CAACuf,SAAX,CAAqBtC,UAArB,CAAf;;AACA,YAAIngB,QAAJ,EAAc;AACV,cAAIkqC,KAAK,GAAGhnC,UAAU,CAACqf,IAAX,CAAgBviB,QAAQ,CAACwiB,KAAzB,CAAZ,CADU,CAEV;;AACA,cAAI2nB,QAAQ,GAAGC,oBAAoB,CAAClnC,UAAD,EAAa,UAAUmnC,OAAV,EAAmB;AAC/D,mBAAOC,kBAAkB,CAACJ,KAAD,EAAQG,OAAR,CAAzB;AACH,WAFkC,CAAnC,CAHU,CAMV;AACA;;AACAF,kBAAQ,CAAC5nB,IAAT,CAAc2nB,KAAK,CAAC1nB,KAApB,IAA6B0nB,KAA7B;AACAC,kBAAQ,CAAC1nB,SAAT,CAAmBziB,QAAQ,CAACmgB,UAA5B,IAA0CngB,QAA1C;AACA,iBAAOmqC,QAAP;AACH;;AACD,eAAOZ,qBAAqB,EAA5B;AACH;;AACD,eAASe,kBAAT,CAA4BC,IAA5B,EAAkCC,IAAlC,EAAwC;AACpC,eAAOntB,OAAO,CAACktB,IAAI,CAAChgC,OAAL,IAAgBggC,IAAI,CAAChgC,OAAL,KAAiBigC,IAAI,CAACjgC,OAAvC,CAAd;AACH;;AACD,eAASkgC,kBAAT,CAA4BpB,SAA5B,EAAuCqB,WAAvC,EAAoDhoC,QAApD,EAA8D;AAC1D,YAAIioC,gBAAgB,GAAGjoC,QAAQ,CAACsjB,GAAT,CAAa,oBAAb,CAAvB;AACA,YAAI4kB,mBAAmB,GAAGF,WAAW,GAAGA,WAAW,CAACja,kBAAf,GAAoC,IAAzE;;AACA,YAAIma,mBAAJ,EAAyB;AACrBvB,mBAAS,GAAGwB,qBAAqB,CAACxB,SAAD,EAAYuB,mBAAZ,CAAjC;AACH;;AACD,YAAID,gBAAJ,EAAsB;AAClBtB,mBAAS,GAAGwB,qBAAqB,CAACxB,SAAD,EAAYsB,gBAAZ,CAAjC;AACH;;AACD,eAAOtB,SAAP;AACH;;AACD,eAASwB,qBAAT,CAA+BxB,SAA/B,EAA0CnhB,IAA1C,EAAgD;AAC5C,YAAI4iB,aAAJ;;AACA,YAAI,CAAC5iB,IAAL,EAAW;AACP4iB,uBAAa,GAAGzB,SAAhB;AACH,SAFD,MAGK;AACDyB,uBAAa,GAAG,EAAhB;;AACA,eAAK,IAAIpnC,EAAE,GAAG,CAAT,EAAYqnC,WAAW,GAAG1B,SAA/B,EAA0C3lC,EAAE,GAAGqnC,WAAW,CAAC7rC,MAA3D,EAAmEwE,EAAE,EAArE,EAAyE;AACrE,gBAAI+lC,QAAQ,GAAGsB,WAAW,CAACrnC,EAAD,CAA1B;AACA,gBAAIsnC,YAAY,GAAG9iB,IAAI,CAACuhB,QAAD,CAAvB;;AACA,gBAAIuB,YAAJ,EAAkB;AACdF,2BAAa,CAAC5pC,IAAd,CAAmB8pC,YAAnB;AACH,aAFD,MAGK,IAAIA,YAAY,IAAI,IAApB,EAA0B;AAC3BF,2BAAa,CAAC5pC,IAAd,CAAmBuoC,QAAnB;AACH,aARoE,CAQnE;;AACL;AACJ;;AACD,eAAOqB,aAAP;AACH;;AACD,eAASvB,qBAAT,GAAiC;AAC7B,eAAO;AAAEhnB,cAAI,EAAE,EAAR;AAAYE,mBAAS,EAAE;AAAvB,SAAP;AACH;;AACD,eAASwoB,gBAAT,CAA0BC,MAA1B,EAAkCC,MAAlC,EAA0C;AACtC,eAAO;AACH5oB,cAAI,EAAEzV,QAAQ,CAAC,EAAD,EAAKo+B,MAAM,CAAC3oB,IAAZ,EAAkB4oB,MAAM,CAAC5oB,IAAzB,CADX;AAEHE,mBAAS,EAAE3V,QAAQ,CAAC,EAAD,EAAKo+B,MAAM,CAACzoB,SAAZ,EAAuB0oB,MAAM,CAAC1oB,SAA9B;AAFhB,SAAP;AAIH;;AACD,eAAS2nB,oBAAT,CAA8BlnC,UAA9B,EAA0CkoC,UAA1C,EAAsD;AAClD,YAAI7oB,IAAI,GAAGqmB,UAAU,CAAC1lC,UAAU,CAACqf,IAAZ,EAAkB6oB,UAAlB,CAArB;AACA,YAAI3oB,SAAS,GAAGmmB,UAAU,CAAC1lC,UAAU,CAACuf,SAAZ,EAAuB,UAAUziB,QAAV,EAAoB;AACjE,iBAAOuiB,IAAI,CAACviB,QAAQ,CAACwiB,KAAV,CAAX,CADiE,CACpC;AAChC,SAFyB,CAA1B;AAGA,eAAO;AAAED,cAAI,EAAEA,IAAR;AAAcE,mBAAS,EAAEA;AAAzB,SAAP;AACH;;AAED,eAAS4oB,UAAT,CAAoBtjB,KAApB,EAA2B9iB,OAA3B,EAAoC;AAChC,YAAInE,KAAK,GAAG,IAAZ;AACA,YAAIC,GAAG,GAAG,IAAV;;AACA,YAAIgnB,KAAK,CAACjnB,KAAV,EAAiB;AACbA,eAAK,GAAGmE,OAAO,CAACqmC,YAAR,CAAqBvjB,KAAK,CAACjnB,KAA3B,CAAR;AACH;;AACD,YAAIinB,KAAK,CAAChnB,GAAV,EAAe;AACXA,aAAG,GAAGkE,OAAO,CAACqmC,YAAR,CAAqBvjB,KAAK,CAAChnB,GAA3B,CAAN;AACH;;AACD,YAAI,CAACD,KAAD,IAAU,CAACC,GAAf,EAAoB;AAChB,iBAAO,IAAP;AACH;;AACD,YAAID,KAAK,IAAIC,GAAT,IAAgBA,GAAG,GAAGD,KAA1B,EAAiC;AAC7B,iBAAO,IAAP;AACH;;AACD,eAAO;AAAEA,eAAK,EAAEA,KAAT;AAAgBC,aAAG,EAAEA;AAArB,SAAP;AACH,O,CACD;AACA;;;AACA,eAASwqC,YAAT,CAAsBC,MAAtB,EAA8BC,eAA9B,EAA+C;AAC3C,YAAIC,cAAc,GAAG,EAArB;AACA,YAAI5qC,KAAK,GAAG2qC,eAAe,CAAC3qC,KAA5B,CAF2C,CAER;;AACnC,YAAI8E,CAAJ;AACA,YAAI+lC,SAAJ,CAJ2C,CAK3C;;AACAH,cAAM,CAAClsB,IAAP,CAAYssB,aAAZ;;AACA,aAAKhmC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4lC,MAAM,CAACtsC,MAAvB,EAA+B0G,CAAC,EAAhC,EAAoC;AAChC+lC,mBAAS,GAAGH,MAAM,CAAC5lC,CAAD,CAAlB,CADgC,CAEhC;;AACA,cAAI+lC,SAAS,CAAC7qC,KAAV,GAAkBA,KAAtB,EAA6B;AAAE;AAC3B4qC,0BAAc,CAACxqC,IAAf,CAAoB;AAAEJ,mBAAK,EAAEA,KAAT;AAAgBC,iBAAG,EAAE4qC,SAAS,CAAC7qC;AAA/B,aAApB;AACH;;AACD,cAAI6qC,SAAS,CAAC5qC,GAAV,GAAgBD,KAApB,EAA2B;AACvBA,iBAAK,GAAG6qC,SAAS,CAAC5qC,GAAlB;AACH;AACJ,SAhB0C,CAiB3C;;;AACA,YAAID,KAAK,GAAG2qC,eAAe,CAAC1qC,GAA5B,EAAiC;AAAE;AAC/B2qC,wBAAc,CAACxqC,IAAf,CAAoB;AAAEJ,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAE0qC,eAAe,CAAC1qC;AAArC,WAApB;AACH;;AACD,eAAO2qC,cAAP;AACH;;AACD,eAASE,aAAT,CAAuBC,MAAvB,EAA+BC,MAA/B,EAAuC;AACnC,eAAOD,MAAM,CAAC/qC,KAAP,CAAauE,OAAb,KAAyBymC,MAAM,CAAChrC,KAAP,CAAauE,OAAb,EAAhC,CADmC,CACqB;AAC3D;;AACD,eAAS0mC,eAAT,CAAyBF,MAAzB,EAAiCC,MAAjC,EAAyC;AACrC,YAAIhrC,KAAK,GAAG+qC,MAAM,CAAC/qC,KAAnB;AACA,YAAIC,GAAG,GAAG8qC,MAAM,CAAC9qC,GAAjB;AACA,YAAIirC,QAAQ,GAAG,IAAf;;AACA,YAAIF,MAAM,CAAChrC,KAAP,KAAiB,IAArB,EAA2B;AACvB,cAAIA,KAAK,KAAK,IAAd,EAAoB;AAChBA,iBAAK,GAAGgrC,MAAM,CAAChrC,KAAf;AACH,WAFD,MAGK;AACDA,iBAAK,GAAG,IAAIiH,IAAJ,CAASqE,IAAI,CAAC6I,GAAL,CAASnU,KAAK,CAACuE,OAAN,EAAT,EAA0BymC,MAAM,CAAChrC,KAAP,CAAauE,OAAb,EAA1B,CAAT,CAAR;AACH;AACJ;;AACD,YAAIymC,MAAM,CAAC/qC,GAAP,IAAc,IAAlB,EAAwB;AACpB,cAAIA,GAAG,KAAK,IAAZ,EAAkB;AACdA,eAAG,GAAG+qC,MAAM,CAAC/qC,GAAb;AACH,WAFD,MAGK;AACDA,eAAG,GAAG,IAAIgH,IAAJ,CAASqE,IAAI,CAAC8I,GAAL,CAASnU,GAAG,CAACsE,OAAJ,EAAT,EAAwBymC,MAAM,CAAC/qC,GAAP,CAAWsE,OAAX,EAAxB,CAAT,CAAN;AACH;AACJ;;AACD,YAAIvE,KAAK,KAAK,IAAV,IAAkBC,GAAG,KAAK,IAA1B,IAAkCD,KAAK,GAAGC,GAA9C,EAAmD;AAC/CirC,kBAAQ,GAAG;AAAElrC,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAEA;AAArB,WAAX;AACH;;AACD,eAAOirC,QAAP;AACH;;AACD,eAASC,WAAT,CAAqBJ,MAArB,EAA6BC,MAA7B,EAAqC;AACjC,eAAO,CAACD,MAAM,CAAC/qC,KAAP,KAAiB,IAAjB,GAAwB,IAAxB,GAA+B+qC,MAAM,CAAC/qC,KAAP,CAAauE,OAAb,EAAhC,OAA6DymC,MAAM,CAAChrC,KAAP,KAAiB,IAAjB,GAAwB,IAAxB,GAA+BgrC,MAAM,CAAChrC,KAAP,CAAauE,OAAb,EAA5F,KACH,CAACwmC,MAAM,CAAC9qC,GAAP,KAAe,IAAf,GAAsB,IAAtB,GAA6B8qC,MAAM,CAAC9qC,GAAP,CAAWsE,OAAX,EAA9B,OAAyDymC,MAAM,CAAC/qC,GAAP,KAAe,IAAf,GAAsB,IAAtB,GAA6B+qC,MAAM,CAAC/qC,GAAP,CAAWsE,OAAX,EAAtF,CADJ;AAEH;;AACD,eAAS6mC,eAAT,CAAyBL,MAAzB,EAAiCC,MAAjC,EAAyC;AACrC,eAAO,CAACD,MAAM,CAAC9qC,GAAP,KAAe,IAAf,IAAuB+qC,MAAM,CAAChrC,KAAP,KAAiB,IAAxC,IAAgD+qC,MAAM,CAAC9qC,GAAP,GAAa+qC,MAAM,CAAChrC,KAArE,MACF+qC,MAAM,CAAC/qC,KAAP,KAAiB,IAAjB,IAAyBgrC,MAAM,CAAC/qC,GAAP,KAAe,IAAxC,IAAgD8qC,MAAM,CAAC/qC,KAAP,GAAegrC,MAAM,CAAC/qC,GADpE,CAAP;AAEH;;AACD,eAASorC,kBAAT,CAA4BC,UAA5B,EAAwCC,UAAxC,EAAoD;AAChD,eAAO,CAACD,UAAU,CAACtrC,KAAX,KAAqB,IAArB,IAA8BurC,UAAU,CAACvrC,KAAX,KAAqB,IAArB,IAA6BurC,UAAU,CAACvrC,KAAX,IAAoBsrC,UAAU,CAACtrC,KAA3F,MACFsrC,UAAU,CAACrrC,GAAX,KAAmB,IAAnB,IAA4BsrC,UAAU,CAACtrC,GAAX,KAAmB,IAAnB,IAA2BsrC,UAAU,CAACtrC,GAAX,IAAkBqrC,UAAU,CAACrrC,GADlF,CAAP;AAEH;;AACD,eAASurC,mBAAT,CAA6B3rC,KAA7B,EAAoC2+B,IAApC,EAA0C;AACtC,eAAO,CAAC3+B,KAAK,CAACG,KAAN,KAAgB,IAAhB,IAAwBw+B,IAAI,IAAI3+B,KAAK,CAACG,KAAvC,MACFH,KAAK,CAACI,GAAN,KAAc,IAAd,IAAsBu+B,IAAI,GAAG3+B,KAAK,CAACI,GADjC,CAAP;AAEH,O,CACD;AACA;;;AACA,eAASwrC,sBAAT,CAAgCjN,IAAhC,EAAsC3+B,KAAtC,EAA6C;AACzC,YAAIA,KAAK,CAACG,KAAN,IAAe,IAAf,IAAuBw+B,IAAI,GAAG3+B,KAAK,CAACG,KAAxC,EAA+C;AAC3C,iBAAOH,KAAK,CAACG,KAAb;AACH;;AACD,YAAIH,KAAK,CAACI,GAAN,IAAa,IAAb,IAAqBu+B,IAAI,IAAI3+B,KAAK,CAACI,GAAvC,EAA4C;AACxC,iBAAO,IAAIgH,IAAJ,CAASpH,KAAK,CAACI,GAAN,CAAUsE,OAAV,KAAsB,CAA/B,CAAP;AACH;;AACD,eAAOi6B,IAAP;AACH;;AAED,eAASkN,WAAT,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AAClC,YAAIC,SAAS,GAAG,CAAhB;AACA,YAAI/mC,CAAC,GAAG,CAAR;;AACA,eAAOA,CAAC,GAAG6mC,KAAK,CAACvtC,MAAjB,EAAyB;AACrB,cAAIutC,KAAK,CAAC7mC,CAAD,CAAL,KAAa8mC,QAAjB,EAA2B;AACvBD,iBAAK,CAACG,MAAN,CAAahnC,CAAb,EAAgB,CAAhB;AACA+mC,qBAAS;AACZ,WAHD,MAIK;AACD/mC,aAAC;AACJ;AACJ;;AACD,eAAO+mC,SAAP;AACH;;AACD,eAASE,aAAT,CAAuBC,EAAvB,EAA2BC,EAA3B,EAA+B;AAC3B,YAAIxH,GAAG,GAAGuH,EAAE,CAAC5tC,MAAb;AACA,YAAI0G,CAAJ;;AACA,YAAI2/B,GAAG,KAAKwH,EAAE,CAAC7tC,MAAf,EAAuB;AAAE;AACrB,iBAAO,KAAP;AACH;;AACD,aAAK0G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2/B,GAAhB,EAAqB3/B,CAAC,EAAtB,EAA0B;AACtB,cAAIknC,EAAE,CAAClnC,CAAD,CAAF,KAAUmnC,EAAE,CAACnnC,CAAD,CAAhB,EAAqB;AACjB,mBAAO,KAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH;;AAED,eAASonC,OAAT,CAAiBC,UAAjB,EAA6B;AACzB,YAAI3Z,IAAJ;AACA,YAAI7T,GAAJ;AACA,eAAO,YAAY;AACf,cAAI,CAAC6T,IAAD,IAAS,CAACuZ,aAAa,CAACvZ,IAAD,EAAOpmB,SAAP,CAA3B,EAA8C;AAC1ComB,gBAAI,GAAGpmB,SAAP;AACAuS,eAAG,GAAGwtB,UAAU,CAACloC,KAAX,CAAiB,IAAjB,EAAuBmI,SAAvB,CAAN;AACH;;AACD,iBAAOuS,GAAP;AACH,SAND;AAOH;AACD;;;;;;AAIA,eAASytB,aAAT,CAAuBD,UAAvB,EAAmCE,YAAnC,EAAiD;AAC7C,YAAIC,SAAS,GAAG,IAAhB;AACA,eAAO,YAAY;AACf,cAAIC,MAAM,GAAGJ,UAAU,CAACloC,KAAX,CAAiB,IAAjB,EAAuBmI,SAAvB,CAAb;;AACA,cAAIkgC,SAAS,KAAK,IAAd,IAAsB,EAAEA,SAAS,KAAKC,MAAd,IAAwBF,YAAY,CAACC,SAAD,EAAYC,MAAZ,CAAtC,CAA1B,EAAsF;AAClFD,qBAAS,GAAGC,MAAZ;AACH;;AACD,iBAAOD,SAAP;AACH,SAND;AAOH;;AAED,UAAIE,gCAAgC,GAAG;AACnC1M,YAAI,EAAE,CAD6B;AAEnC2M,iBAAS,EAAE,CAFwB;AAGnCC,sBAAc,EAAE,CAHmB;AAInC9rC,gBAAQ,EAAE,CAJyB;AAKnC+rC,kBAAU,EAAE;AALuB,OAAvC;AAOA,UAAIC,6BAA6B,GAAG;AAChCC,oBAAY,EAAE,CADkB;AAEhCC,WAAG,EAAE,CAF2B;AAGhCvmC,YAAI,EAAE,CAH0B;AAIhCF,aAAK,EAAE,CAJyB;AAKhCC,WAAG,EAAE,CAL2B;AAMhCM,eAAO,EAAE,CANuB;AAOhClG,YAAI,EAAE,CAP0B;AAQhCC,cAAM,EAAE,CARwB;AAShCi/B,cAAM,EAAE;AATwB,OAApC;AAWA,UAAImN,WAAW,GAAG,mBAAlB,C,CAAuC;;AACvC,UAAIC,QAAQ,GAAG,IAAf,C,CAAqB;;AACrB,UAAIC,cAAc,GAAG,MAArB;AACA,UAAIC,MAAM,GAAG,SAAb,C,CAAwB;;AACxB,UAAIC,MAAM,GAAG,SAAb;;AACA,UAAIC,eAAe;AAAG;AAAe,kBAAY;AAC7C,iBAASA,eAAT,CAAyBC,cAAzB,EAAyC;AACrC,cAAIC,iBAAiB,GAAG,EAAxB;AACA,cAAIC,gBAAgB,GAAG,EAAvB;AACA,cAAIC,QAAQ,GAAG,CAAf;;AACA,eAAK,IAAIC,MAAT,IAAmBJ,cAAnB,EAAmC;AAC/B,gBAAII,MAAM,IAAIjB,gCAAd,EAAgD;AAC5Ce,8BAAgB,CAACE,MAAD,CAAhB,GAA2BJ,cAAc,CAACI,MAAD,CAAzC;AACAD,sBAAQ,GAAGliC,IAAI,CAAC6I,GAAL,CAASq4B,gCAAgC,CAACiB,MAAD,CAAzC,EAAmDD,QAAnD,CAAX;AACH,aAHD,MAIK;AACDF,+BAAiB,CAACG,MAAD,CAAjB,GAA4BJ,cAAc,CAACI,MAAD,CAA1C;;AACA,kBAAIA,MAAM,IAAIb,6BAAd,EAA6C;AACzCY,wBAAQ,GAAGliC,IAAI,CAAC6I,GAAL,CAASy4B,6BAA6B,CAACa,MAAD,CAAtC,EAAgDD,QAAhD,CAAX;AACH;AACJ;AACJ;;AACD,eAAKF,iBAAL,GAAyBA,iBAAzB;AACA,eAAKC,gBAAL,GAAwBA,gBAAxB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACA,eAAKE,mBAAL,GAA2BxB,OAAO,CAACwB,mBAAD,CAAlC;AACH;;AACDN,uBAAe,CAACzvC,SAAhB,CAA0BiI,MAA1B,GAAmC,UAAU44B,IAAV,EAAgB7/B,OAAhB,EAAyB;AACxD,iBAAO,KAAK+uC,mBAAL,CAAyB,KAAKJ,iBAA9B,EAAiD,KAAKC,gBAAtD,EAAwE5uC,OAAxE,EAAiF6/B,IAAjF,CAAP;AACH,SAFD;;AAGA4O,uBAAe,CAACzvC,SAAhB,CAA0BgwC,WAA1B,GAAwC,UAAU3tC,KAAV,EAAiBC,GAAjB,EAAsBtB,OAAtB,EAA+B;AACnE,cAAID,EAAE,GAAG,IAAT;AAAA,cAAe4uC,iBAAiB,GAAG5uC,EAAE,CAAC4uC,iBAAtC;AAAA,cAAyDC,gBAAgB,GAAG7uC,EAAE,CAAC6uC,gBAA/E;;AACA,cAAIK,YAAY,GAAGC,yBAAyB,CAAC7tC,KAAK,CAAC09B,MAAP,EAAez9B,GAAG,CAACy9B,MAAnB,EAA2B/+B,OAAO,CAACmvC,cAAnC,CAA5C;;AACA,cAAI,CAACF,YAAL,EAAmB;AACf,mBAAO,KAAKhoC,MAAL,CAAY5F,KAAZ,EAAmBrB,OAAnB,CAAP;AACH;;AACD,cAAIovC,qBAAqB,GAAGH,YAA5B;;AACA,cAAIG,qBAAqB,GAAG,CAAxB,MAA6B;AAC5BT,2BAAiB,CAAC/mC,IAAlB,KAA2B,SAA3B,IAAwC+mC,iBAAiB,CAAC/mC,IAAlB,KAA2B,SADpE,MAEC+mC,iBAAiB,CAACjnC,KAAlB,KAA4B,SAA5B,IAAyCinC,iBAAiB,CAACjnC,KAAlB,KAA4B,SAFtE,MAGCinC,iBAAiB,CAAChnC,GAAlB,KAA0B,SAA1B,IAAuCgnC,iBAAiB,CAAChnC,GAAlB,KAA0B,SAHlE,CAAJ,EAGkF;AAC9EynC,iCAAqB,GAAG,CAAxB,CAD8E,CACnD;AAC9B;;AACD,cAAIC,KAAK,GAAG,KAAKpoC,MAAL,CAAY5F,KAAZ,EAAmBrB,OAAnB,CAAZ;AACA,cAAIsvC,KAAK,GAAG,KAAKroC,MAAL,CAAY3F,GAAZ,EAAiBtB,OAAjB,CAAZ;;AACA,cAAIqvC,KAAK,KAAKC,KAAd,EAAqB;AACjB,mBAAOD,KAAP;AACH;;AACD,cAAIE,gBAAgB,GAAGC,+BAA+B,CAACb,iBAAD,EAAoBS,qBAApB,CAAtD;AACA,cAAIK,qBAAqB,GAAGV,mBAAmB,CAACQ,gBAAD,EAAmBX,gBAAnB,EAAqC5uC,OAArC,CAA/C;AACA,cAAI0vC,QAAQ,GAAGD,qBAAqB,CAACpuC,KAAD,CAApC;AACA,cAAIsuC,QAAQ,GAAGF,qBAAqB,CAACnuC,GAAD,CAApC;AACA,cAAIsuC,SAAS,GAAGC,mBAAmB,CAACR,KAAD,EAAQK,QAAR,EAAkBJ,KAAlB,EAAyBK,QAAzB,CAAnC;AACA,cAAI7B,SAAS,GAAGc,gBAAgB,CAACd,SAAjB,IAA8B,EAA9C;;AACA,cAAI8B,SAAJ,EAAe;AACX,mBAAOA,SAAS,CAACE,MAAV,GAAmBJ,QAAnB,GAA8B5B,SAA9B,GAA0C6B,QAA1C,GAAqDC,SAAS,CAACG,KAAtE;AACH;;AACD,iBAAOV,KAAK,GAAGvB,SAAR,GAAoBwB,KAA3B;AACH,SA5BD;;AA6BAb,uBAAe,CAACzvC,SAAhB,CAA0BgxC,cAA1B,GAA2C,YAAY;AACnD,kBAAQ,KAAKnB,QAAb;AACI,iBAAK,CAAL;AACA,iBAAK,CAAL;AACA,iBAAK,CAAL;AACI,qBAAO,MAAP;;AACJ,iBAAK,CAAL;AACI,qBAAO,OAAP;;AACJ,iBAAK,CAAL;AACI,qBAAO,MAAP;;AACJ;AACI,qBAAO,KAAP;AAVR;AAYH,SAbD;;AAcA,eAAOJ,eAAP;AACH,OArEoC,EAArC;;AAsEA,eAASM,mBAAT,CAA6BJ,iBAA7B,EAAgDC,gBAAhD,EAAkE5uC,OAAlE,EAA2E;AACvE,YAAIiwC,mBAAmB,GAAG1xC,MAAM,CAACqtB,IAAP,CAAY+iB,iBAAZ,EAA+BlvC,MAAzD;;AACA,YAAIwwC,mBAAmB,KAAK,CAAxB,IAA6BtB,iBAAiB,CAACT,YAAlB,KAAmC,OAApE,EAA6E;AACzE,iBAAO,UAAUrO,IAAV,EAAgB;AACnB,mBAAOqQ,oBAAoB,CAACrQ,IAAI,CAACsQ,cAAN,CAA3B;AACH,WAFD;AAGH;;AACD,YAAIF,mBAAmB,KAAK,CAAxB,IAA6BrB,gBAAgB,CAACzN,IAAlD,EAAwD;AACpD,iBAAO,UAAUtB,IAAV,EAAgB;AACnB,mBAAOuQ,gBAAgB,CAACpwC,OAAO,CAACqwC,iBAAR,CAA0BxQ,IAAI,CAACd,MAA/B,CAAD,EAAyC/+B,OAAO,CAACkvB,SAAjD,EAA4DlvB,OAAO,CAAC2uB,MAApE,EAA4EigB,gBAAgB,CAACzN,IAA7F,CAAvB;AACH,WAFD;AAGH;;AACD,eAAOmP,yBAAyB,CAAC3B,iBAAD,EAAoBC,gBAApB,EAAsC5uC,OAAtC,CAAhC;AACH;;AACD,eAASswC,yBAAT,CAAmC3B,iBAAnC,EAAsDC,gBAAtD,EAAwE5uC,OAAxE,EAAiF;AAC7E2uC,yBAAiB,GAAGthC,QAAQ,CAAC,EAAD,EAAKshC,iBAAL,CAA5B,CAD6E,CACxB;;AACrDC,wBAAgB,GAAGvhC,QAAQ,CAAC,EAAD,EAAKuhC,gBAAL,CAA3B,CAF6E,CAE1B;;AACnD2B,wBAAgB,CAAC5B,iBAAD,EAAoBC,gBAApB,CAAhB;AACAD,yBAAiB,CAACphB,QAAlB,GAA6B,KAA7B,CAJ6E,CAIzC;;AACpC,YAAIijB,YAAY,GAAG,IAAIC,IAAI,CAACC,cAAT,CAAwB1wC,OAAO,CAAC2uB,MAAR,CAAegiB,KAAvC,EAA8ChC,iBAA9C,CAAnB;AACA,YAAIiC,UAAJ,CAN6E,CAM7D;;AAChB,YAAIhC,gBAAgB,CAACb,cAArB,EAAqC;AACjC,cAAI8C,SAAS,GAAGxjC,QAAQ,CAAC,EAAD,EAAKshC,iBAAL,CAAxB;;AACA,iBAAOkC,SAAS,CAAC7uC,MAAjB,CAFiC,CAER;;AACzB4uC,oBAAU,GAAG,IAAIH,IAAI,CAACC,cAAT,CAAwB1wC,OAAO,CAAC2uB,MAAR,CAAegiB,KAAvC,EAA8CE,SAA9C,CAAb;AACH;;AACD,eAAO,UAAUhR,IAAV,EAAgB;AACnB,cAAId,MAAM,GAAGc,IAAI,CAACd,MAAlB;AACA,cAAI93B,MAAJ;;AACA,cAAI2pC,UAAU,IAAI,CAAC7R,MAAM,CAACJ,aAAP,EAAnB,EAA2C;AACvC13B,kBAAM,GAAG2pC,UAAT;AACH,WAFD,MAGK;AACD3pC,kBAAM,GAAGupC,YAAT;AACH;;AACD,cAAIjjC,CAAC,GAAGtG,MAAM,CAACA,MAAP,CAAc83B,MAAd,CAAR;AACA,iBAAO+R,WAAW,CAACvjC,CAAD,EAAIsyB,IAAJ,EAAU8O,iBAAV,EAA6BC,gBAA7B,EAA+C5uC,OAA/C,CAAlB;AACH,SAXD;AAYH;;AACD,eAASuwC,gBAAT,CAA0B5B,iBAA1B,EAA6CC,gBAA7C,EAA+D;AAC3D;AACA;AACA,YAAID,iBAAiB,CAACT,YAAtB,EAAoC;AAChC,cAAI,CAACS,iBAAiB,CAAC5sC,IAAvB,EAA6B;AACzB4sC,6BAAiB,CAAC5sC,IAAlB,GAAyB,SAAzB;AACH;;AACD,cAAI,CAAC4sC,iBAAiB,CAAC3sC,MAAvB,EAA+B;AAC3B2sC,6BAAiB,CAAC3sC,MAAlB,GAA2B,SAA3B;AACH;AACJ,SAV0D,CAW3D;;;AACA,YAAI2sC,iBAAiB,CAACT,YAAlB,KAAmC,MAAvC,EAA+C;AAC3CS,2BAAiB,CAACT,YAAlB,GAAiC,OAAjC;AACH,SAd0D,CAe3D;;;AACA,YAAIU,gBAAgB,CAACb,cAAjB,KAAoCY,iBAAiB,CAAC1N,MAAlB,IAA4B0N,iBAAiB,CAACzN,WAAlF,CAAJ,EAAoG;AAChG,iBAAO0N,gBAAgB,CAACb,cAAxB;AACH;AACJ;;AACD,eAAS+C,WAAT,CAAqBvjC,CAArB,EAAwBsyB,IAAxB,EAA8B8O,iBAA9B,EAAiDC,gBAAjD,EAAmE5uC,OAAnE,EAA4E;AACxEuN,SAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAUxC,MAAV,EAAkB,EAAlB,CAAJ,CADwE,CAC7C;;AAC3B,YAAII,iBAAiB,CAACT,YAAlB,KAAmC,OAAvC,EAAgD;AAC5C3gC,WAAC,GAAGyjC,YAAY,CAACzjC,CAAD,EAAKvN,OAAO,CAACutB,QAAR,KAAqB,KAArB,IAA8BsS,IAAI,CAACsQ,cAAL,IAAuB,IAAtD,GAChB,KADgB,GACR;AACRD,8BAAoB,CAACrQ,IAAI,CAACsQ,cAAN,CAFR,CAAhB;AAGH;;AACD,YAAIvB,gBAAgB,CAACZ,UAArB,EAAiC;AAC7BzgC,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU1C,QAAV,EAAoB,EAApB,EAAwBjZ,IAAxB,EAAJ;AACH;;AACD,YAAIwZ,gBAAgB,CAACb,cAArB,EAAqC;AACjCxgC,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU,KAAV,EAAiB,EAAjB,CAAJ,CADiC,CACP;AAC7B,SAZuE,CAaxE;AACA;;;AACA,YAAInC,gBAAgB,CAAC3sC,QAAjB,KAA8B,KAAlC,EAAyC;AACrCsL,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU3C,WAAV,EAAuB,EAAvB,EAA2BhZ,IAA3B,EAAJ;AACH,SAFD,MAGK,IAAIwZ,gBAAgB,CAAC3sC,QAAjB,KAA8B,QAAlC,EAA4C;AAAE;AAC/CsL,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU3C,WAAV,EAAuB,UAAU9Q,EAAV,EAAcC,EAAd,EAAkB;AACzC,mBAAOA,EAAE,CAAC0T,iBAAH,EAAP;AACH,WAFG,CAAJ;AAGH,SAJI,MAKA,IAAIrC,gBAAgB,CAAC3sC,QAAjB,KAA8B,OAAlC,EAA2C;AAAE;AAC9CsL,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU3C,WAAV,EAAuB,UAAU9Q,EAAV,EAAcC,EAAd,EAAkB;AACzC,mBAAOA,EAAE,CAAC0T,iBAAH,KAAyB,GAAhC;AACH,WAFG,CAAJ;AAGH,SAJI,MAKA,IAAIrC,gBAAgB,CAAC3sC,QAAjB,KAA8B,WAAlC,EAA+C;AAAE;AAClDsL,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU3C,WAAV,EAAuB,UAAU9Q,EAAV,EAAc;AACrC,mBAAOA,EAAE,CAAC2T,iBAAH,EAAP;AACH,WAFG,CAAJ;AAGH;;AACD1jC,SAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAUzC,cAAV,EAA0B,GAA1B,CAAJ;AACA/gC,SAAC,GAAGA,CAAC,CAAC6nB,IAAF,EAAJ;AACA,eAAO7nB,CAAP;AACH;;AACD,eAASyjC,YAAT,CAAsBzjC,CAAtB,EAAyB2jC,MAAzB,EAAiC;AAC7B,YAAIC,QAAQ,GAAG,KAAf;AACA5jC,SAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAUvC,MAAV,EAAkB,YAAY;AAC9B2C,kBAAQ,GAAG,IAAX;AACA,iBAAOD,MAAP;AACH,SAHG,CAAJ,CAF6B,CAM7B;;AACA,YAAI,CAACC,QAAL,EAAe;AACX5jC,WAAC,IAAI,MAAM2jC,MAAX;AACH;;AACD,eAAO3jC,CAAP;AACH;;AACD,eAAS6iC,gBAAT,CAA0BgB,GAA1B,EAA+BliB,SAA/B,EAA0CP,MAA1C,EAAkD7b,OAAlD,EAA2D;AACvD,YAAIu+B,KAAK,GAAG,EAAZ;;AACA,YAAIv+B,OAAO,KAAK,QAAhB,EAA0B;AACtBu+B,eAAK,CAAC5vC,IAAN,CAAWytB,SAAX;AACH,SAFD,MAGK,IAAIpc,OAAO,KAAK,OAAhB,EAAyB;AAC1Bu+B,eAAK,CAAC5vC,IAAN,CAAWytB,SAAX,EAAsB,GAAtB;AACH,SAPsD,CAQvD;;;AACAmiB,aAAK,CAAC5vC,IAAN,CAAWktB,MAAM,CAAC2iB,kBAAP,CAA0BrqC,MAA1B,CAAiCmqC,GAAjC,CAAX;;AACA,YAAIziB,MAAM,CAACzuB,OAAP,CAAeqxC,KAAnB,EAA0B;AAAE;AACxBF,eAAK,CAACG,OAAN;AACH;;AACD,eAAOH,KAAK,CAAC3vC,IAAN,CAAW,EAAX,CAAP;AACH,O,CACD;AACA;AACA;AACA;;;AACA,eAASwtC,yBAAT,CAAmC7N,EAAnC,EAAuCC,EAAvC,EAA2CmQ,EAA3C,EAA+C;AAC3C,YAAIA,EAAE,CAACC,aAAH,CAAiBrQ,EAAjB,MAAyBoQ,EAAE,CAACC,aAAH,CAAiBpQ,EAAjB,CAA7B,EAAmD;AAC/C,iBAAO,CAAP;AACH;;AACD,YAAImQ,EAAE,CAACE,cAAH,CAAkBtQ,EAAlB,MAA0BoQ,EAAE,CAACE,cAAH,CAAkBrQ,EAAlB,CAA9B,EAAqD;AACjD,iBAAO,CAAP;AACH;;AACD,YAAImQ,EAAE,CAACG,YAAH,CAAgBvQ,EAAhB,MAAwBoQ,EAAE,CAACG,YAAH,CAAgBtQ,EAAhB,CAA5B,EAAiD;AAC7C,iBAAO,CAAP;AACH;;AACD,YAAIlD,QAAQ,CAACiD,EAAD,CAAR,KAAiBjD,QAAQ,CAACkD,EAAD,CAA7B,EAAmC;AAC/B,iBAAO,CAAP;AACH;;AACD,eAAO,CAAP;AACH;;AACD,eAASkO,+BAAT,CAAyCtvC,OAAzC,EAAkD2xC,WAAlD,EAA+D;AAC3D,YAAIC,cAAc,GAAG,EAArB;;AACA,aAAK,IAAIC,MAAT,IAAmB7xC,OAAnB,EAA4B;AACxB,cAAI,EAAE6xC,MAAM,IAAI9D,6BAAZ,KAA8C;AAC9CA,uCAA6B,CAAC8D,MAAD,CAA7B,IAAyCF,WAD7C,EAC0D;AACtDC,0BAAc,CAACC,MAAD,CAAd,GAAyB7xC,OAAO,CAAC6xC,MAAD,CAAhC;AACH;AACJ;;AACD,eAAOD,cAAP;AACH;;AACD,eAASjC,mBAAT,CAA6BR,KAA7B,EAAoCK,QAApC,EAA8CJ,KAA9C,EAAqDK,QAArD,EAA+D;AAC3D,YAAIqC,EAAE,GAAG,CAAT;;AACA,eAAOA,EAAE,GAAG3C,KAAK,CAAC5vC,MAAlB,EAA0B;AACtB,cAAIwyC,MAAM,GAAG5C,KAAK,CAAC6C,OAAN,CAAcxC,QAAd,EAAwBsC,EAAxB,CAAb;;AACA,cAAIC,MAAM,KAAK,CAAC,CAAhB,EAAmB;AACf;AACH;;AACD,cAAIE,OAAO,GAAG9C,KAAK,CAAC1Z,MAAN,CAAa,CAAb,EAAgBsc,MAAhB,CAAd;AACAD,YAAE,GAAGC,MAAM,GAAGvC,QAAQ,CAACjwC,MAAvB;AACA,cAAI2yC,MAAM,GAAG/C,KAAK,CAAC1Z,MAAN,CAAaqc,EAAb,CAAb;AACA,cAAIK,EAAE,GAAG,CAAT;;AACA,iBAAOA,EAAE,GAAG/C,KAAK,CAAC7vC,MAAlB,EAA0B;AACtB,gBAAI6yC,MAAM,GAAGhD,KAAK,CAAC4C,OAAN,CAAcvC,QAAd,EAAwB0C,EAAxB,CAAb;;AACA,gBAAIC,MAAM,KAAK,CAAC,CAAhB,EAAmB;AACf;AACH;;AACD,gBAAIC,OAAO,GAAGjD,KAAK,CAAC3Z,MAAN,CAAa,CAAb,EAAgB2c,MAAhB,CAAd;AACAD,cAAE,GAAGC,MAAM,GAAG3C,QAAQ,CAAClwC,MAAvB;AACA,gBAAI+yC,MAAM,GAAGlD,KAAK,CAAC3Z,MAAN,CAAa0c,EAAb,CAAb;;AACA,gBAAIF,OAAO,KAAKI,OAAZ,IAAuBH,MAAM,KAAKI,MAAtC,EAA8C;AAC1C,qBAAO;AACH1C,sBAAM,EAAEqC,OADL;AAEHpC,qBAAK,EAAEqC;AAFJ,eAAP;AAIH;AACJ;AACJ;;AACD,eAAO,IAAP;AACH;AAED;;;;AAGA;;;;;;AAIA,UAAIK,YAAY;AAAG;AAAe,kBAAY;AAC1C,iBAASA,YAAT,CAAsBC,MAAtB,EAA8B5E,SAA9B,EAAyC;AACrC,eAAK4E,MAAL,GAAcA,MAAd;AACA,eAAK5E,SAAL,GAAiBA,SAAjB;AACH;;AACD2E,oBAAY,CAACzzC,SAAb,CAAuBiI,MAAvB,GAAgC,UAAU44B,IAAV,EAAgB7/B,OAAhB,EAAyB;AACrD,iBAAOA,OAAO,CAAC0vB,YAAR,CAAqB,KAAKgjB,MAA1B,EAAkCC,0BAA0B,CAAC9S,IAAD,EAAO,IAAP,EAAa7/B,OAAb,EAAsB,KAAK8tC,SAA3B,CAA5D,CAAP;AACH,SAFD;;AAGA2E,oBAAY,CAACzzC,SAAb,CAAuBgwC,WAAvB,GAAqC,UAAU3tC,KAAV,EAAiBC,GAAjB,EAAsBtB,OAAtB,EAA+B;AAChE,iBAAOA,OAAO,CAAC0vB,YAAR,CAAqB,KAAKgjB,MAA1B,EAAkCC,0BAA0B,CAACtxC,KAAD,EAAQC,GAAR,EAAatB,OAAb,EAAsB,KAAK8tC,SAA3B,CAA5D,CAAP;AACH,SAFD;;AAGA,eAAO2E,YAAP;AACH,OAZiC,EAAlC;;AAcA,UAAIG,aAAa;AAAG;AAAe,kBAAY;AAC3C,iBAASA,aAAT,CAAuBnqB,IAAvB,EAA6B;AACzB,eAAKA,IAAL,GAAYA,IAAZ;AACH;;AACDmqB,qBAAa,CAAC5zC,SAAd,CAAwBiI,MAAxB,GAAiC,UAAU44B,IAAV,EAAgB7/B,OAAhB,EAAyB;AACtD,iBAAO,KAAKyoB,IAAL,CAAUkqB,0BAA0B,CAAC9S,IAAD,EAAO,IAAP,EAAa7/B,OAAb,CAApC,CAAP;AACH,SAFD;;AAGA4yC,qBAAa,CAAC5zC,SAAd,CAAwBgwC,WAAxB,GAAsC,UAAU3tC,KAAV,EAAiBC,GAAjB,EAAsBtB,OAAtB,EAA+B;AACjE,iBAAO,KAAKyoB,IAAL,CAAUkqB,0BAA0B,CAACtxC,KAAD,EAAQC,GAAR,EAAatB,OAAb,CAApC,CAAP;AACH,SAFD;;AAGA,eAAO4yC,aAAP;AACH,OAXkC,EAAnC,C,CAaA;;;AACA,eAASC,eAAT,CAAyBvqB,KAAzB,EAAgCwqB,gBAAhC,EAAkD;AAC9C,YAAI,OAAOxqB,KAAP,KAAiB,QAAjB,IAA6BA,KAAjC,EAAwC;AAAE;AACtC,cAAI,OAAOwqB,gBAAP,KAA4B,QAAhC,EAA0C;AACtCxqB,iBAAK,GAAGjb,QAAQ,CAAC;AAAEygC,uBAAS,EAAEgF;AAAb,aAAD,EAAkCxqB,KAAlC,CAAhB;AACH;;AACD,iBAAO,IAAImmB,eAAJ,CAAoBnmB,KAApB,CAAP;AACH,SALD,MAMK,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAChC,iBAAO,IAAImqB,YAAJ,CAAiBnqB,KAAjB,EAAwBwqB,gBAAxB,CAAP;AACH,SAFI,MAGA,IAAI,OAAOxqB,KAAP,KAAiB,UAArB,EAAiC;AAClC,iBAAO,IAAIsqB,aAAJ,CAAkBtqB,KAAlB,CAAP;AACH;AACJ,O,CACD;AACA;;;AACA,eAASyqB,cAAT,CAAwBhU,MAAxB,EAAgCoR,cAAhC,EAAgD6C,aAAhD,EAA+D;AAC3D,YAAIA,aAAa,KAAK,KAAK,CAA3B,EAA8B;AAAEA,uBAAa,GAAG,KAAhB;AAAwB;;AACxD,YAAIzlC,CAAC,GAAGwxB,MAAM,CAACkU,WAAP,EAAR;AACA1lC,SAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU,MAAV,EAAkB,EAAlB,CAAJ;;AACA,YAAIiC,aAAJ,EAAmB;AACfzlC,WAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU,YAAV,EAAwB,EAAxB,CAAJ;AACH;;AACD,YAAIxjC,CAAC,CAAC9N,MAAF,GAAW,EAAf,EAAmB;AAAE;AACjB,cAAI0wC,cAAc,IAAI,IAAtB,EAA4B;AACxB5iC,aAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU,GAAV,EAAe,EAAf,CAAJ;AACH,WAFD,MAGK,IAAIZ,cAAc,KAAK,CAAvB,EAA0B;AAC3B5iC,aAAC,GAAGA,CAAC,CAACwjC,OAAF,CAAU,GAAV,EAAeb,oBAAoB,CAACC,cAAD,EAAiB,IAAjB,CAAnC,CAAJ;AACH,WANc,CAOf;;AACH;;AACD,eAAO5iC,CAAP;AACH;;AACD,eAAS2lC,mBAAT,CAA6BnU,MAA7B,EAAqC;AACjC,eAAO8G,QAAQ,CAAC9G,MAAM,CAACN,WAAP,EAAD,EAAuB,CAAvB,CAAR,GAAoC,GAApC,GACHoH,QAAQ,CAAC9G,MAAM,CAACJ,aAAP,EAAD,EAAyB,CAAzB,CADL,GACmC,GADnC,GAEHkH,QAAQ,CAAC9G,MAAM,CAACF,aAAP,EAAD,EAAyB,CAAzB,CAFZ;AAGH;;AACD,eAASqR,oBAAT,CAA8BlP,OAA9B,EAAuCmS,KAAvC,EAA8C;AAC1C,YAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,eAAK,GAAG,KAAR;AAAgB;;AACxC,YAAIr7B,IAAI,GAAGkpB,OAAO,GAAG,CAAV,GAAc,GAAd,GAAoB,GAA/B;AACA,YAAIoS,GAAG,GAAGzmC,IAAI,CAACymC,GAAL,CAASpS,OAAT,CAAV;AACA,YAAID,KAAK,GAAGp0B,IAAI,CAAC6yB,KAAL,CAAW4T,GAAG,GAAG,EAAjB,CAAZ;AACA,YAAIC,IAAI,GAAG1mC,IAAI,CAACC,KAAL,CAAWwmC,GAAG,GAAG,EAAjB,CAAX;;AACA,YAAID,KAAJ,EAAW;AACP,iBAAOr7B,IAAI,GAAG+tB,QAAQ,CAAC9E,KAAD,EAAQ,CAAR,CAAf,GAA4B,GAA5B,GAAkC8E,QAAQ,CAACwN,IAAD,EAAO,CAAP,CAAjD;AACH,SAFD,MAGK;AACD,iBAAO,QAAQv7B,IAAR,GAAeipB,KAAf,IAAwBsS,IAAI,GAAG,MAAMxN,QAAQ,CAACwN,IAAD,EAAO,CAAP,CAAjB,GAA6B,EAAzD,CAAP;AACH;AACJ,O,CACD;;;AACA,eAASV,0BAAT,CAAoCtxC,KAApC,EAA2CC,GAA3C,EAAgDtB,OAAhD,EAAyD8tC,SAAzD,EAAoE;AAChE,YAAIwF,SAAS,GAAGC,iBAAiB,CAAClyC,KAAD,EAAQrB,OAAO,CAACmvC,cAAhB,CAAjC;AACA,YAAIqE,OAAO,GAAGlyC,GAAG,GAAGiyC,iBAAiB,CAACjyC,GAAD,EAAMtB,OAAO,CAACmvC,cAAd,CAApB,GAAoD,IAArE;AACA,eAAO;AACHtP,cAAI,EAAEyT,SADH;AAEHjyC,eAAK,EAAEiyC,SAFJ;AAGHhyC,aAAG,EAAEkyC,OAHF;AAIHjmB,kBAAQ,EAAEvtB,OAAO,CAACutB,QAJf;AAKHkmB,qBAAW,EAAEzzC,OAAO,CAAC2uB,MAAR,CAAegiB,KALzB;AAMH7C,mBAAS,EAAEA;AANR,SAAP;AAQH;;AACD,eAASyF,iBAAT,CAA2BG,QAA3B,EAAqCvE,cAArC,EAAqD;AACjD,YAAInS,CAAC,GAAGmS,cAAc,CAACwE,aAAf,CAA6BD,QAAQ,CAAC3U,MAAtC,CAAR;AACA,eAAO;AACHA,gBAAM,EAAE2U,QAAQ,CAAC3U,MADd;AAEHoR,wBAAc,EAAEuD,QAAQ,CAACvD,cAFtB;AAGHnD,eAAK,EAAEhQ,CAHJ;AAIHp1B,cAAI,EAAEo1B,CAAC,CAAC,CAAD,CAJJ;AAKHt1B,eAAK,EAAEs1B,CAAC,CAAC,CAAD,CALL;AAMHr1B,aAAG,EAAEq1B,CAAC,CAAC,CAAD,CANH;AAOHj7B,cAAI,EAAEi7B,CAAC,CAAC,CAAD,CAPJ;AAQHh7B,gBAAM,EAAEg7B,CAAC,CAAC,CAAD,CARN;AASHiE,gBAAM,EAAEjE,CAAC,CAAC,CAAD,CATN;AAUHkE,qBAAW,EAAElE,CAAC,CAAC,CAAD;AAVX,SAAP;AAYH;;AAED,UAAI4W,cAAc;AAAG;AAAe,kBAAY;AAC5C,iBAASA,cAAT,CAAwB3wC,QAAxB,EAAkC4wC,mBAAlC,EAAuD;AACnD,eAAK5wC,QAAL,GAAgBA,QAAhB;AACA,eAAK4wC,mBAAL,GAA2BA,mBAA3B;AACH;;AACDD,sBAAc,CAAC50C,SAAf,CAAyB64B,MAAzB,GAAkC,YAAY;AAC1C,eAAK50B,QAAL,CAAckc,QAAd,CAAuB;AACnBrX,gBAAI,EAAE,qBADa;AAEnB6e,oBAAQ,EAAE,KAAKktB,mBAAL,CAAyBltB;AAFhB,WAAvB;AAIH,SALD;;AAMAitB,sBAAc,CAAC50C,SAAf,CAAyB80C,OAAzB,GAAmC,YAAY;AAC3C,eAAK7wC,QAAL,CAAckc,QAAd,CAAuB;AACnBrX,gBAAI,EAAE,qBADa;AAEnBisC,qBAAS,EAAE,CAAC,KAAKF,mBAAL,CAAyBltB,QAA1B;AAFQ,WAAvB;AAIH,SALD;;AAMApoB,cAAM,CAACy1C,cAAP,CAAsBJ,cAAc,CAAC50C,SAArC,EAAgD,IAAhD,EAAsD;AAClDi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKJ,mBAAL,CAAyBK,QAAhC;AACH,WAHiD;AAIlDC,oBAAU,EAAE,IAJsC;AAKlDC,sBAAY,EAAE;AALoC,SAAtD;AAOA71C,cAAM,CAACy1C,cAAP,CAAsBJ,cAAc,CAAC50C,SAArC,EAAgD,KAAhD,EAAuD;AACnD;AACAi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKJ,mBAAL,CAAyBQ,IAAzB,CAA8B3zC,GAArC;AACH,WAJkD;AAKnDyzC,oBAAU,EAAE,IALuC;AAMnDC,sBAAY,EAAE;AANqC,SAAvD;AAQA,eAAOR,cAAP;AACH,OAjCmC,EAApC;;AAmCA,UAAIU,QAAQ;AAAG;AAAe,kBAAY;AACtC,iBAASA,QAAT,CAAkBrxC,QAAlB,EAA4B5C,GAA5B,EAAiCE,QAAjC,EAA2C;AACvC,eAAKg0C,SAAL,GAAiBtxC,QAAjB;AACA,eAAKuxC,IAAL,GAAYn0C,GAAZ;AACA,eAAKo0C,SAAL,GAAiBl0C,QAAQ,IAAI,IAA7B;AACH;AACD;;;;;AAGA+zC,gBAAQ,CAACt1C,SAAT,CAAmB01C,OAAnB,GAA6B,UAAUzrC,IAAV,EAAgBgvB,GAAhB,EAAqB;AAC9C,cAAIl4B,EAAJ,EAAQke,EAAR;;AACA,cAAIhV,IAAI,IAAI0rC,UAAZ,EAAwB,CAAxB,KACK,IAAI1rC,IAAI,IAAI2rC,cAAZ,EAA4B;AAC7B,gBAAI,OAAOA,cAAc,CAAC3rC,IAAD,CAArB,KAAgC,UAApC,EAAgD;AAC5CgvB,iBAAG,GAAG2c,cAAc,CAAC3rC,IAAD,CAAd,CAAqBgvB,GAArB,CAAN;AACH;;AACD,iBAAK4c,MAAL,CAAY;AACRjxB,2BAAa,GAAG7jB,EAAE,GAAG,EAAL,EAASA,EAAE,CAACkJ,IAAD,CAAF,GAAWgvB,GAApB,EAAyBl4B,EAA5B;AADL,aAAZ;AAGH,WAPI,MAQA,IAAIkJ,IAAI,IAAI6rC,uBAAZ,EAAqC;AACtC,gBAAIr0C,EAAE,GAAG,KAAK,CAAd;;AACA,gBAAI,OAAOq0C,uBAAuB,CAAC7rC,IAAD,CAA9B,KAAyC,UAA7C,EAAyD;AACrDgvB,iBAAG,GAAG6c,uBAAuB,CAAC7rC,IAAD,CAAvB,CAA8BgvB,GAA9B,CAAN;AACH;;AACD,gBAAIhvB,IAAI,KAAK,OAAb,EAAsB;AAClBxI,gBAAE,GAAG;AAAEM,+BAAe,EAAEk3B,GAAnB;AAAwB8c,2BAAW,EAAE9c;AAArC,eAAL;AACH,aAFD,MAGK,IAAIhvB,IAAI,KAAK,UAAb,EAAyB;AAC1BxI,gBAAE,GAAG;AAAEu0C,6BAAa,EAAE/c,GAAjB;AAAsBgd,gCAAgB,EAAEhd;AAAxC,eAAL;AACH,aAFI,MAGA;AACDx3B,gBAAE,IAAIwd,EAAE,GAAG,EAAL,EAASA,EAAE,CAAChV,IAAD,CAAF,GAAWgvB,GAApB,EAAyBha,EAA7B,CAAF;AACH;;AACD,iBAAK42B,MAAL,CAAY;AACRjxB,2BAAa,EAAE;AAAEnjB,kBAAE,EAAEA;AAAN;AADP,aAAZ;AAGH;AACJ,SA7BD;;AA8BA6zC,gBAAQ,CAACt1C,SAAT,CAAmBk2C,eAAnB,GAAqC,UAAUjsC,IAAV,EAAgBgvB,GAAhB,EAAqB;AACtD,cAAIl4B,EAAJ;;AACA,eAAK80C,MAAL,CAAY;AACR1pC,yBAAa,GAAGpL,EAAE,GAAG,EAAL,EAASA,EAAE,CAACkJ,IAAD,CAAF,GAAWgvB,GAApB,EAAyBl4B,EAA5B;AADL,WAAZ;AAGH,SALD;;AAMAu0C,gBAAQ,CAACt1C,SAAT,CAAmBm2C,QAAnB,GAA8B,UAAUC,UAAV,EAAsBl1C,OAAtB,EAA+B;AACzD,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAV;AAAe;;AACzC,cAAIsF,OAAO,GAAG,KAAK+uC,SAAL,CAAe/uC,OAA7B;AACA,cAAInE,KAAK,GAAGmE,OAAO,CAACqmC,YAAR,CAAqBuJ,UAArB,CAAZ;;AACA,cAAI/zC,KAAK,IAAI,KAAKozC,SAAlB,EAA6B;AAAE;AAC3B,gBAAI5vB,aAAa,GAAG,KAAK4vB,SAAL,CAAevzC,KAAnC;AACA,gBAAIujB,UAAU,GAAGijB,SAAS,CAAC7iB,aAAa,CAACxjB,KAAf,EAAsBA,KAAtB,EAA6BmE,OAA7B,EAAsCtF,OAAO,CAACm1C,WAA9C,CAA1B,CAFyB,CAE6D;;AACtF,gBAAIn1C,OAAO,CAACo1C,gBAAZ,EAA8B;AAC1B,mBAAKT,MAAL,CAAY;AAAEjyB,0BAAU,EAAE6B;AAAd,eAAZ;AACH,aAFD,MAGK;AACD,mBAAKowB,MAAL,CAAY;AAAEpwB,0BAAU,EAAEA;AAAd,eAAZ;AACH;AACJ;AACJ,SAdD;;AAeA6vB,gBAAQ,CAACt1C,SAAT,CAAmBu2C,MAAnB,GAA4B,UAAUC,QAAV,EAAoBt1C,OAApB,EAA6B;AACrD,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAV;AAAe;;AACzC,cAAIsF,OAAO,GAAG,KAAK+uC,SAAL,CAAe/uC,OAA7B;AACA,cAAIlE,GAAJ;;AACA,cAAIk0C,QAAQ,IAAI,IAAhB,EAAsB;AAClBl0C,eAAG,GAAGkE,OAAO,CAACqmC,YAAR,CAAqB2J,QAArB,CAAN;;AACA,gBAAI,CAACl0C,GAAL,EAAU;AACN,qBADM,CACE;AACX;AACJ;;AACD,cAAI,KAAKmzC,SAAT,EAAoB;AAChB,gBAAInzC,GAAJ,EAAS;AACL,kBAAIojB,QAAQ,GAAGgjB,SAAS,CAAC,KAAK+M,SAAL,CAAevzC,KAAf,CAAqBI,GAAtB,EAA2BA,GAA3B,EAAgCkE,OAAhC,EAAyCtF,OAAO,CAACm1C,WAAjD,CAAxB;AACA,mBAAKR,MAAL,CAAY;AAAEnwB,wBAAQ,EAAEA;AAAZ,eAAZ;AACH,aAHD,MAIK;AACD,mBAAKmwB,MAAL,CAAY;AAAEjxB,6BAAa,EAAE;AAAEC,wBAAM,EAAE;AAAV;AAAjB,eAAZ;AACH;AACJ;AACJ,SAnBD;;AAoBAywB,gBAAQ,CAACt1C,SAAT,CAAmBy2C,QAAnB,GAA8B,UAAUL,UAAV,EAAsBI,QAAtB,EAAgCt1C,OAAhC,EAAyC;AACnE,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAV;AAAe;;AACzC,cAAIsF,OAAO,GAAG,KAAK+uC,SAAL,CAAe/uC,OAA7B;AACA,cAAIoe,aAAa,GAAG;AAAE3iB,kBAAM,EAAEf,OAAO,CAACe;AAAlB,WAApB;AACA,cAAII,KAAK,GAAGmE,OAAO,CAACqmC,YAAR,CAAqBuJ,UAArB,CAAZ;AACA,cAAI9zC,GAAJ;;AACA,cAAI,CAACD,KAAL,EAAY;AACR,mBADQ,CACA;AACX;;AACD,cAAIm0C,QAAQ,IAAI,IAAhB,EAAsB;AAClBl0C,eAAG,GAAGkE,OAAO,CAACqmC,YAAR,CAAqB2J,QAArB,CAAN;;AACA,gBAAI,CAACl0C,GAAL,EAAU;AAAE;AACR;AACH;AACJ;;AACD,cAAI,KAAKmzC,SAAT,EAAoB;AAChB,gBAAI5vB,aAAa,GAAG,KAAK4vB,SAAL,CAAevzC,KAAnC,CADgB,CAEhB;AACA;;AACA,gBAAIhB,OAAO,CAACe,MAAR,KAAmB,IAAvB,EAA6B;AACzB4jB,2BAAa,GAAGqiB,sBAAsB,CAACriB,aAAD,CAAtC;AACH;;AACD,gBAAIJ,UAAU,GAAGijB,SAAS,CAAC7iB,aAAa,CAACxjB,KAAf,EAAsBA,KAAtB,EAA6BmE,OAA7B,EAAsCtF,OAAO,CAACm1C,WAA9C,CAA1B;;AACA,gBAAI/zC,GAAJ,EAAS;AACL,kBAAIojB,QAAQ,GAAGgjB,SAAS,CAAC7iB,aAAa,CAACvjB,GAAf,EAAoBA,GAApB,EAAyBkE,OAAzB,EAAkCtF,OAAO,CAACm1C,WAA1C,CAAxB;;AACA,kBAAIjU,cAAc,CAAC3c,UAAD,EAAaC,QAAb,CAAlB,EAA0C;AACtC,qBAAKmwB,MAAL,CAAY;AAAEjyB,4BAAU,EAAE6B,UAAd;AAA0Bb,+BAAa,EAAEA;AAAzC,iBAAZ;AACH,eAFD,MAGK;AACD,qBAAKixB,MAAL,CAAY;AAAEpwB,4BAAU,EAAEA,UAAd;AAA0BC,0BAAQ,EAAEA,QAApC;AAA8Cd,+BAAa,EAAEA;AAA7D,iBAAZ;AACH;AACJ,aARD,MASK;AAAE;AACHA,2BAAa,CAACC,MAAd,GAAuB,KAAvB;AACA,mBAAKgxB,MAAL,CAAY;AAAEjyB,0BAAU,EAAE6B,UAAd;AAA0Bb,6BAAa,EAAEA;AAAzC,eAAZ;AACH;AACJ;AACJ,SArCD;;AAsCA0wB,gBAAQ,CAACt1C,SAAT,CAAmB02C,SAAnB,GAA+B,UAAUC,UAAV,EAAsB;AACjD,cAAIhzB,KAAK,GAAG8d,cAAc,CAACkV,UAAD,CAA1B;;AACA,cAAIhzB,KAAJ,EAAW;AAAE;AACT,iBAAKkyB,MAAL,CAAY;AAAEpwB,wBAAU,EAAE9B;AAAd,aAAZ;AACH;AACJ,SALD;;AAMA2xB,gBAAQ,CAACt1C,SAAT,CAAmB42C,OAAnB,GAA6B,UAAUD,UAAV,EAAsB;AAC/C,cAAIhzB,KAAK,GAAG8d,cAAc,CAACkV,UAAD,CAA1B;;AACA,cAAIhzB,KAAJ,EAAW;AAAE;AACT,iBAAKkyB,MAAL,CAAY;AAAEnwB,sBAAQ,EAAE/B;AAAZ,aAAZ;AACH;AACJ,SALD;;AAMA2xB,gBAAQ,CAACt1C,SAAT,CAAmB62C,SAAnB,GAA+B,UAAUF,UAAV,EAAsB;AACjD,cAAIhzB,KAAK,GAAG8d,cAAc,CAACkV,UAAD,CAA1B;;AACA,cAAIhzB,KAAJ,EAAW;AAAE;AACT,iBAAKkyB,MAAL,CAAY;AAAEjyB,wBAAU,EAAED;AAAd,aAAZ;AACH;AACJ,SALD;;AAMA2xB,gBAAQ,CAACt1C,SAAT,CAAmB82C,SAAnB,GAA+B,UAAU70C,MAAV,EAAkBf,OAAlB,EAA2B;AACtD,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAV;AAAe;;AACzC,cAAI0jB,aAAa,GAAG;AAAE3iB,kBAAM,EAAEA;AAAV,WAApB;AACA,cAAIq0C,gBAAgB,GAAGp1C,OAAO,CAACo1C,gBAA/B;;AACA,cAAIA,gBAAgB,IAAI,IAAxB,EAA8B;AAC1BA,4BAAgB,GAAG,KAAKf,SAAL,CAAehuB,GAAf,CAAmB,wBAAnB,CAAnB;AACH;;AACD,cAAI,KAAKiuB,IAAL,CAAUvzC,MAAV,KAAqBA,MAAzB,EAAiC;AAC7B2iB,yBAAa,CAACC,MAAd,GAAuByxB,gBAAvB;AACH;;AACD,eAAKT,MAAL,CAAY;AAAEjxB,yBAAa,EAAEA;AAAjB,WAAZ;AACH,SAXD;;AAYA0wB,gBAAQ,CAACt1C,SAAT,CAAmBgwC,WAAnB,GAAiC,UAAU+G,WAAV,EAAuB;AACpD,cAAIvwC,OAAO,GAAG,KAAK+uC,SAAL,CAAe/uC,OAA7B;AACA,cAAIjF,QAAQ,GAAG,KAAKk0C,SAApB;AACA,cAAIuB,SAAS,GAAGnD,eAAe,CAACkD,WAAD,EAAc,KAAKxB,SAAL,CAAehuB,GAAf,CAAmB,uBAAnB,CAAd,CAA/B;;AACA,cAAI,KAAKiuB,IAAL,CAAU3wB,MAAd,EAAsB;AAClB,mBAAOre,OAAO,CAACwpC,WAAR,CAAoBzuC,QAAQ,CAACW,KAAT,CAAeG,KAAnC,EAA0Cd,QAAQ,CAACW,KAAT,CAAeI,GAAzD,EAA8D00C,SAA9D,EAAyE;AAC5EC,4BAAc,EAAE11C,QAAQ,CAAC01C,cADmD;AAE5EC,0BAAY,EAAE31C,QAAQ,CAAC21C;AAFqD,aAAzE,CAAP;AAIH,WALD,MAMK;AACD,mBAAO1wC,OAAO,CAACyB,MAAR,CAAe1G,QAAQ,CAACW,KAAT,CAAeG,KAA9B,EAAqC20C,SAArC,EAAgD;AACnDG,uBAAS,EAAE51C,QAAQ,CAAC01C;AAD+B,aAAhD,CAAP;AAGH;AACJ,SAfD;;AAgBA3B,gBAAQ,CAACt1C,SAAT,CAAmB61C,MAAnB,GAA4B,UAAUxzB,QAAV,EAAoB;AAC5C,cAAIhhB,GAAG,GAAG,KAAKm0C,IAAf;AACA,cAAIj0C,QAAQ,GAAG,KAAKk0C,SAApB;;AACA,cAAIl0C,QAAJ,EAAc;AACV,iBAAKg0C,SAAL,CAAep1B,QAAf,CAAwB;AACpBrX,kBAAI,EAAE,eADc;AAEpB4Y,wBAAU,EAAEngB,QAAQ,CAACmgB,UAFD;AAGpBW,sBAAQ,EAAEA,QAHU;AAIpB+0B,qBAAO,EAAE;AAJW,aAAxB;;AAMA,gBAAI3yC,UAAU,GAAG,KAAK8wC,SAAL,CAAe5zB,KAAf,CAAqBld,UAAtC;AACA,iBAAK+wC,IAAL,GAAY/wC,UAAU,CAACqf,IAAX,CAAgBziB,GAAG,CAAC0iB,KAApB,CAAZ;AACA,iBAAK0xB,SAAL,GAAiBhxC,UAAU,CAACuf,SAAX,CAAqBziB,QAAQ,CAACmgB,UAA9B,CAAjB;AACH;AACJ,SAdD;;AAeA4zB,gBAAQ,CAACt1C,SAAT,CAAmB64B,MAAnB,GAA4B,YAAY;AACpC,eAAK0c,SAAL,CAAep1B,QAAf,CAAwB;AACpBrX,gBAAI,EAAE,kBADc;AAEpBib,iBAAK,EAAE,KAAKyxB,IAAL,CAAUzxB;AAFG,WAAxB;AAIH,SALD;;AAMAxkB,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,QAA1C,EAAoD;AAChDi1C,aAAG,EAAE,eAAY;AACb,gBAAIttB,QAAQ,GAAG,KAAK6tB,IAAL,CAAU7tB,QAAzB;;AACA,gBAAIA,QAAJ,EAAc;AACV,qBAAO,IAAIitB,cAAJ,CAAmB,KAAKW,SAAxB,EAAmC,KAAKA,SAAL,CAAe5zB,KAAf,CAAqBqI,YAArB,CAAkCrC,QAAlC,CAAnC,CAAP;AACH;;AACD,mBAAO,IAAP;AACH,WAP+C;AAQhDwtB,oBAAU,EAAE,IARoC;AAShDC,sBAAY,EAAE;AATkC,SAApD;AAWA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,OAA1C,EAAmD;AAC/Ci1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKQ,SAAL,GACH,KAAKF,SAAL,CAAe/uC,OAAf,CAAuB6wC,MAAvB,CAA8B,KAAK5B,SAAL,CAAevzC,KAAf,CAAqBG,KAAnD,CADG,GAEH,IAFJ;AAGH,WAL8C;AAM/C8yC,oBAAU,EAAE,IANmC;AAO/CC,sBAAY,EAAE;AAPiC,SAAnD;AASA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,KAA1C,EAAiD;AAC7Ci1C,aAAG,EAAE,eAAY;AACb,mBAAQ,KAAKQ,SAAL,IAAkB,KAAKD,IAAL,CAAU3wB,MAA7B,GACH,KAAK0wB,SAAL,CAAe/uC,OAAf,CAAuB6wC,MAAvB,CAA8B,KAAK5B,SAAL,CAAevzC,KAAf,CAAqBI,GAAnD,CADG,GAEH,IAFJ;AAGH,WAL4C;AAM7C6yC,oBAAU,EAAE,IANiC;AAO7CC,sBAAY,EAAE;AAP+B,SAAjD;AASA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,IAA1C,EAAgD;AAC5C;AACA;AACAi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAUN,QAAjB;AAA4B,WAHH;AAI5CC,oBAAU,EAAE,IAJgC;AAK5CC,sBAAY,EAAE;AAL8B,SAAhD;AAOA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,SAA1C,EAAqD;AACjDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU1pC,OAAjB;AAA2B,WADG;AAEjDqpC,oBAAU,EAAE,IAFqC;AAGjDC,sBAAY,EAAE;AAHmC,SAArD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,QAA1C,EAAoD;AAChDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAUvzC,MAAjB;AAA0B,WADG;AAEhDkzC,oBAAU,EAAE,IAFoC;AAGhDC,sBAAY,EAAE;AAHkC,SAApD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,OAA1C,EAAmD;AAC/Ci1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU3yC,KAAjB;AAAyB,WADG;AAE/CsyC,oBAAU,EAAE,IAFmC;AAG/CC,sBAAY,EAAE;AAHiC,SAAnD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,KAA1C,EAAiD;AAC7Ci1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU9zC,GAAjB;AAAuB,WADG;AAE7CyzC,oBAAU,EAAE,IAFiC;AAG7CC,sBAAY,EAAE;AAH+B,SAAjD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,WAA1C,EAAuD;AACnDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU8B,SAAjB;AAA6B,WADG;AAEnDnC,oBAAU,EAAE,IAFuC;AAGnDC,sBAAY,EAAE;AAHqC,SAAvD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,eAA1C,EAA2D;AACvDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAau0C,aAApB;AAAoC,WADA;AAEvDb,oBAAU,EAAE,IAF2C;AAGvDC,sBAAY,EAAE;AAHyC,SAA3D;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,kBAA1C,EAA8D;AAC1Di1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAaw0C,gBAApB;AAAuC,WADA;AAE1Dd,oBAAU,EAAE,IAF8C;AAG1DC,sBAAY,EAAE;AAH4C,SAA9D;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,YAA1C,EAAwD;AACpDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAa81C,WAAb,CAAyB,CAAzB,KAA+B,IAAtC;AAA6C,WADZ;AAEpDpC,oBAAU,EAAE,IAFwC;AAGpDC,sBAAY,EAAE;AAHsC,SAAxD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,SAA1C,EAAqD;AACjDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAa+1C,OAApB;AAA8B,WADA;AAEjDrC,oBAAU,EAAE,IAFqC;AAGjDC,sBAAY,EAAE;AAHmC,SAArD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,OAA1C,EAAmD;AAC/Ci1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAag2C,MAAb,CAAoB,CAApB,KAA0B,IAAjC;AAAwC,WADZ;AAE/CtC,oBAAU,EAAE,IAFmC;AAG/CC,sBAAY,EAAE;AAHiC,SAAnD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,iBAA1C,EAA6D;AACzDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAaM,eAApB;AAAsC,WADA;AAEzDozC,oBAAU,EAAE,IAF6C;AAGzDC,sBAAY,EAAE;AAH2C,SAA7D;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,aAA1C,EAAyD;AACrDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAas0C,WAApB;AAAkC,WADA;AAErDZ,oBAAU,EAAE,IAFyC;AAGrDC,sBAAY,EAAE;AAHuC,SAAzD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,WAA1C,EAAuD;AACnDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAai2C,SAApB;AAAgC,WADA;AAEnDvC,oBAAU,EAAE,IAFuC;AAGnDC,sBAAY,EAAE;AAHqC,SAAvD;AAKA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,YAA1C,EAAwD;AACpD;AACAi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAU/zC,EAAV,CAAaI,UAApB;AAAiC,WAFA;AAGpDszC,oBAAU,EAAE,IAHwC;AAIpDC,sBAAY,EAAE;AAJsC,SAAxD;AAMA71C,cAAM,CAACy1C,cAAP,CAAsBM,QAAQ,CAACt1C,SAA/B,EAA0C,eAA1C,EAA2D;AACvDi1C,aAAG,EAAE,eAAY;AAAE,mBAAO,KAAKO,IAAL,CAAUrpC,aAAjB;AAAiC,WADG;AAEvDgpC,oBAAU,EAAE,IAF2C;AAGvDC,sBAAY,EAAE;AAHyC,SAA3D;AAKA,eAAOE,QAAP;AACH,OA1S6B,EAA9B;AA4SA;;;;;AAGA,eAASqC,eAAT,CAAyBlzC,UAAzB,EAAqCC,YAArC,EAAmD6kC,YAAnD,EAAiErjC,gBAAjE,EAAmF;AAC/E,YAAI0xC,kBAAkB,GAAG,EAAzB;AACA,YAAIC,gBAAgB,GAAG,EAAvB;AACA,YAAIC,YAAY,GAAG,EAAnB;AACA,YAAIC,QAAQ,GAAG,EAAf;AACA,YAAIC,QAAQ,GAAG,EAAf;AACA,YAAIC,QAAQ,GAAGC,eAAe,CAACzzC,UAAU,CAACqf,IAAZ,EAAkBpf,YAAlB,CAA9B;;AACA,aAAK,IAAIqf,KAAT,IAAkBtf,UAAU,CAACqf,IAA7B,EAAmC;AAC/B,cAAIziB,GAAG,GAAGoD,UAAU,CAACqf,IAAX,CAAgBC,KAAhB,CAAV;;AACA,cAAI1iB,GAAG,CAACi2C,SAAJ,KAAkB,oBAAtB,EAA4C;AACxC,gBAAIj2C,GAAG,CAACyK,OAAR,EAAiB;AACb8rC,gCAAkB,CAACv2C,GAAG,CAACyK,OAAL,CAAlB,GAAkC,EAAlC;;AACA,kBAAI,CAACgsC,YAAY,CAACz2C,GAAG,CAACyK,OAAL,CAAjB,EAAgC;AAC5BgsC,4BAAY,CAACz2C,GAAG,CAACyK,OAAL,CAAZ,GAA4BzK,GAA5B;AACH;AACJ,aALD,MAMK;AACDw2C,8BAAgB,CAAC9zB,KAAD,CAAhB,GAA0B,EAA1B;AACH;AACJ;AACJ;;AACD,aAAK,IAAIrC,UAAT,IAAuBjd,UAAU,CAACuf,SAAlC,EAA6C;AACzC,cAAIziB,QAAQ,GAAGkD,UAAU,CAACuf,SAAX,CAAqBtC,UAArB,CAAf;AACA,cAAIrgB,GAAG,GAAGoD,UAAU,CAACqf,IAAX,CAAgBviB,QAAQ,CAACwiB,KAAzB,CAAV;AACA,cAAItiB,EAAE,GAAGw2C,QAAQ,CAAC52C,GAAG,CAAC0iB,KAAL,CAAjB;AACA,cAAIo0B,SAAS,GAAG52C,QAAQ,CAACW,KAAzB;AACA,cAAIk2C,WAAW,GAAI,CAAC/2C,GAAG,CAACY,MAAL,IAAeiE,gBAAhB,GACdmiC,sBAAsB,CAAC8P,SAAD,EAAYjyC,gBAAZ,CADR,GAEdiyC,SAFJ;AAGA,cAAIE,WAAW,GAAG/K,eAAe,CAAC8K,WAAD,EAAc7O,YAAd,CAAjC;;AACA,cAAI8O,WAAJ,EAAiB;AACb,gBAAIh3C,GAAG,CAACi2C,SAAJ,KAAkB,oBAAtB,EAA4C;AACxC,kBAAIj2C,GAAG,CAACyK,OAAR,EAAiB;AACb8rC,kCAAkB,CAACv2C,GAAG,CAACyK,OAAL,CAAlB,CAAgCrJ,IAAhC,CAAqC41C,WAArC;AACH,eAFD,MAGK;AACDR,gCAAgB,CAACt2C,QAAQ,CAACwiB,KAAV,CAAhB,CAAiCthB,IAAjC,CAAsC41C,WAAtC;AACH;AACJ,aAPD,MAQK;AACD,eAACh3C,GAAG,CAACi2C,SAAJ,KAAkB,YAAlB,GAAiCS,QAAjC,GAA4CC,QAA7C,EAAuDv1C,IAAvD,CAA4D;AACxDpB,mBAAG,EAAEA,GADmD;AAExDI,kBAAE,EAAEA,EAFoD;AAGxDF,wBAAQ,EAAEA,QAH8C;AAIxDW,qBAAK,EAAEm2C,WAJiD;AAKxDl2C,uBAAO,EAAEi2C,WAAW,CAAC/1C,KAAZ,IAAqB+1C,WAAW,CAAC/1C,KAAZ,CAAkBuE,OAAlB,OAAgCyxC,WAAW,CAACh2C,KAAZ,CAAkBuE,OAAlB,EALN;AAMxDrE,qBAAK,EAAE61C,WAAW,CAAC91C,GAAZ,IAAmB81C,WAAW,CAAC91C,GAAZ,CAAgBsE,OAAhB,OAA8ByxC,WAAW,CAAC/1C,GAAZ,CAAgBsE,OAAhB;AANA,eAA5D;AAQH;AACJ;AACJ;;AACD,aAAK,IAAIkF,OAAT,IAAoB8rC,kBAApB,EAAwC;AAAE;AACtC,cAAI7K,MAAM,GAAG6K,kBAAkB,CAAC9rC,OAAD,CAA/B;AACA,cAAImhC,cAAc,GAAGH,YAAY,CAACC,MAAD,EAASxD,YAAT,CAAjC;;AACA,eAAK,IAAItkC,EAAE,GAAG,CAAT,EAAYqzC,gBAAgB,GAAGrL,cAApC,EAAoDhoC,EAAE,GAAGqzC,gBAAgB,CAAC73C,MAA1E,EAAkFwE,EAAE,EAApF,EAAwF;AACpF,gBAAIszC,aAAa,GAAGD,gBAAgB,CAACrzC,EAAD,CAApC;AACA,gBAAI5D,GAAG,GAAGy2C,YAAY,CAAChsC,OAAD,CAAtB;AACA,gBAAIrK,EAAE,GAAGw2C,QAAQ,CAAC52C,GAAG,CAAC0iB,KAAL,CAAjB;AACAg0B,oBAAQ,CAACt1C,IAAT,CAAc;AACVpB,iBAAG,EAAEA,GADK;AAEVI,gBAAE,EAAEA,EAFM;AAGVF,sBAAQ,EAAE,IAHA;AAIVW,mBAAK,EAAEq2C,aAJG;AAKVp2C,qBAAO,EAAE,KALC;AAMVI,mBAAK,EAAE;AANG,aAAd;AAQH;AACJ;;AACD,aAAK,IAAIwhB,KAAT,IAAkB8zB,gBAAlB,EAAoC;AAChC,cAAI9K,MAAM,GAAG8K,gBAAgB,CAAC9zB,KAAD,CAA7B;AACA,cAAIkpB,cAAc,GAAGH,YAAY,CAACC,MAAD,EAASxD,YAAT,CAAjC;;AACA,eAAK,IAAIxoC,EAAE,GAAG,CAAT,EAAYy3C,gBAAgB,GAAGvL,cAApC,EAAoDlsC,EAAE,GAAGy3C,gBAAgB,CAAC/3C,MAA1E,EAAkFM,EAAE,EAApF,EAAwF;AACpF,gBAAIw3C,aAAa,GAAGC,gBAAgB,CAACz3C,EAAD,CAApC;AACAg3C,oBAAQ,CAACt1C,IAAT,CAAc;AACVpB,iBAAG,EAAEoD,UAAU,CAACqf,IAAX,CAAgBC,KAAhB,CADK;AAEVtiB,gBAAE,EAAEw2C,QAAQ,CAACl0B,KAAD,CAFF;AAGVxiB,sBAAQ,EAAE,IAHA;AAIVW,mBAAK,EAAEq2C,aAJG;AAKVp2C,qBAAO,EAAE,KALC;AAMVI,mBAAK,EAAE;AANG,aAAd;AAQH;AACJ;;AACD,eAAO;AAAEk2C,YAAE,EAAEV,QAAN;AAAgB5xC,YAAE,EAAE6xC;AAApB,SAAP;AACH;;AACD,eAASU,cAAT,CAAwBr3C,GAAxB,EAA6B;AACzB,eAAOA,GAAG,CAACi2C,SAAJ,KAAkB,YAAlB,IAAkCj2C,GAAG,CAACi2C,SAAJ,KAAkB,oBAA3D;AACH;;AACD,eAASqB,gBAAT,CAA0B33C,OAA1B,EAAmCR,IAAnC,EAAyCo4C,QAAzC,EAAmD;AAC/C,YAAI30C,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;AAAA,YAAiC+a,IAAI,GAAGhe,OAAO,CAACge,IAAhD;;AACA,YAAI/a,QAAQ,CAAC40C,iBAAT,CAA2B,aAA3B,CAAJ,EAA+C;AAC3Cr4C,cAAI,GAAGA,IAAI,CAACyM,MAAL,CAAY,UAAUnM,GAAV,EAAe;AAC9B,gBAAIg4C,MAAM,GAAG70C,QAAQ,CAACke,eAAT,CAAyB,aAAzB,EAAwC,CACjD;AACIjW,mBAAK,EAAE,IAAIopC,QAAJ,CAAarxC,QAAb,EAAuBnD,GAAG,CAACK,UAAJ,CAAeE,GAAtC,EAA2CP,GAAG,CAACK,UAAJ,CAAeI,QAA1D,CADX;AAEIq3C,sBAAQ,EAAEA,QAFd;AAGIz2C,qBAAO,EAAErB,GAAG,CAACqB,OAHjB;AAIII,mBAAK,EAAEzB,GAAG,CAACyB,KAJf;AAKI;AACA4B,gBAAE,EAAErD,GAAG,CAACqD,EANZ;AAOI6a,kBAAI,EAAEA;AAPV,aADiD,CAAxC,CAAb;;AAWA,gBAAI85B,MAAM,KAAK,KAAf,EAAsB;AAAE;AACpB,qBAAO,KAAP;AACH,aAFD,MAGK,IAAIA,MAAM,IAAIA,MAAM,KAAK,IAAzB,EAA+B;AAChCh4C,iBAAG,CAACqD,EAAJ,GAAS20C,MAAT;AACH;;AACD,mBAAO,IAAP;AACH,WAnBM,CAAP;AAoBH;;AACD,aAAK,IAAI7zC,EAAE,GAAG,CAAT,EAAY8zC,MAAM,GAAGv4C,IAA1B,EAAgCyE,EAAE,GAAG8zC,MAAM,CAACt4C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,cAAInE,GAAG,GAAGi4C,MAAM,CAAC9zC,EAAD,CAAhB;AACA+zC,kBAAQ,CAACl4C,GAAG,CAACqD,EAAL,EAASrD,GAAT,CAAR;AACH;;AACD,eAAON,IAAP;AACH;;AACD,eAASw4C,QAAT,CAAkB70C,EAAlB,EAAsBrD,GAAtB,EAA2B;AACvBqD,UAAE,CAAC80C,KAAH,GAAWn4C,GAAX;AACH;;AACD,eAASo4C,QAAT,CAAkB/0C,EAAlB,EAAsB;AAClB,eAAOA,EAAE,CAAC80C,KAAH,IAAY,IAAnB;AACH,O,CACD;;;AACA,eAASf,eAAT,CAAyBiB,SAAzB,EAAoCz0C,YAApC,EAAkD;AAC9C,eAAO8kB,OAAO,CAAC2vB,SAAD,EAAY,UAAU/3C,QAAV,EAAoB;AAC1C,iBAAOg4C,cAAc,CAACh4C,QAAD,EAAWsD,YAAX,CAArB;AACH,SAFa,CAAd;AAGH;;AACD,eAAS00C,cAAT,CAAwBh4C,QAAxB,EAAkCsD,YAAlC,EAAgD;AAC5C,YAAI20C,GAAG,GAAG,EAAV;;AACA,YAAI30C,YAAY,CAAC,EAAD,CAAhB,EAAsB;AAClB20C,aAAG,CAAC52C,IAAJ,CAASiC,YAAY,CAAC,EAAD,CAArB;AACH;;AACD,YAAIA,YAAY,CAACtD,QAAQ,CAAC2iB,KAAV,CAAhB,EAAkC;AAC9Bs1B,aAAG,CAAC52C,IAAJ,CAASiC,YAAY,CAACtD,QAAQ,CAAC2iB,KAAV,CAArB;AACH;;AACDs1B,WAAG,CAAC52C,IAAJ,CAASrB,QAAQ,CAACK,EAAlB;AACA,eAAO63C,eAAe,CAACD,GAAD,CAAtB;AACH,O,CACD;;;AACA,eAASE,mBAAT,CAA6Bv4C,OAA7B,EAAsCR,IAAtC,EAA4Cg5C,SAA5C,EAAuD;AACnD,YAAIv1C,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;AAAA,YAAiC+a,IAAI,GAAGhe,OAAO,CAACge,IAAhD;;AACA,YAAI/a,QAAQ,CAAC40C,iBAAT,CAA2B,iBAA3B,CAAJ,EAAmD;AAC/C,eAAK,IAAI5zC,EAAE,GAAG,CAAT,EAAYw0C,MAAM,GAAGj5C,IAA1B,EAAgCyE,EAAE,GAAGw0C,MAAM,CAACh5C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAG24C,MAAM,CAACx0C,EAAD,CAAhB;AACAhB,oBAAQ,CAACy1C,0BAAT,CAAoC,iBAApC,EAAuD,CACnD;AACIxtC,mBAAK,EAAE,IAAIopC,QAAJ,CAAarxC,QAAb,EAAuBnD,GAAG,CAACK,UAAJ,CAAeE,GAAtC,EAA2CP,GAAG,CAACK,UAAJ,CAAeI,QAA1D,CADX;AAEIq3C,sBAAQ,EAAEY,SAFd;AAGIr3C,qBAAO,EAAErB,GAAG,CAACqB,OAHjB;AAIII,mBAAK,EAAEzB,GAAG,CAACyB,KAJf;AAKI4B,gBAAE,EAAErD,GAAG,CAACqD,EALZ;AAMI6a,kBAAI,EAAEA;AANV,aADmD,CAAvD;AAUH;AACJ;;AACD,YAAI,CAAC/a,QAAQ,CAAC0d,KAAT,CAAeg4B,uBAApB,EAA6C;AAAE;AAC3C11C,kBAAQ,CAAC21C,mBAAT,CAA6BC,iBAA7B,GAAiD,CAAC,IAAD,CAAjD,CADyC,CACgB;AAC5D;AACJ;;AACD,eAASC,qBAAT,CAA+B94C,OAA/B,EAAwCR,IAAxC,EAA8Cg5C,SAA9C,EAAyD;AACrD,YAAIv1C,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;AAAA,YAAiC+a,IAAI,GAAGhe,OAAO,CAACge,IAAhD;;AACA,aAAK,IAAI/Z,EAAE,GAAG,CAAT,EAAY80C,MAAM,GAAGv5C,IAA1B,EAAgCyE,EAAE,GAAG80C,MAAM,CAACt5C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,cAAInE,GAAG,GAAGi5C,MAAM,CAAC90C,EAAD,CAAhB;AACAhB,kBAAQ,CAAC+L,OAAT,CAAiB,eAAjB,EAAkClP,GAAG,CAACqD,EAAtC;AACH;;AACD,YAAIF,QAAQ,CAAC40C,iBAAT,CAA2B,cAA3B,CAAJ,EAAgD;AAC5C,eAAK,IAAI93C,EAAE,GAAG,CAAT,EAAYi5C,MAAM,GAAGx5C,IAA1B,EAAgCO,EAAE,GAAGi5C,MAAM,CAACv5C,MAA5C,EAAoDM,EAAE,EAAtD,EAA0D;AACtD,gBAAID,GAAG,GAAGk5C,MAAM,CAACj5C,EAAD,CAAhB;AACAkD,oBAAQ,CAACke,eAAT,CAAyB,cAAzB,EAAyC,CACrC;AACIjW,mBAAK,EAAE,IAAIopC,QAAJ,CAAarxC,QAAb,EAAuBnD,GAAG,CAACK,UAAJ,CAAeE,GAAtC,EAA2CP,GAAG,CAACK,UAAJ,CAAeI,QAA1D,CADX;AAEIq3C,sBAAQ,EAAEY,SAFd;AAGIr1C,gBAAE,EAAErD,GAAG,CAACqD,EAHZ;AAII6a,kBAAI,EAAEA;AAJV,aADqC,CAAzC;AAQH;AACJ;AACJ,O,CACD;;;AACA,eAASi7B,qBAAT,CAA+Bj5C,OAA/B,EAAwCI,QAAxC,EAAkDI,OAAlD,EAA2D;AACvD,YAAIyC,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;AAAA,YAAiC+a,IAAI,GAAGhe,OAAO,CAACge,IAAhD;AACA,YAAIk7B,YAAY,GAAGj2C,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4Bm6B,uBAA/C;AACA,YAAIlhB,GAAG,GAAGz3B,OAAO,CAACw0C,aAAlB;;AACA,aAAK,IAAI/wC,EAAE,GAAG,CAAT,EAAYm1C,cAAc,GAAGF,YAAlC,EAAgDj1C,EAAE,GAAGm1C,cAAc,CAAC35C,MAApE,EAA4EwE,EAAE,EAA9E,EAAkF;AAC9E,cAAI8b,WAAW,GAAGq5B,cAAc,CAACn1C,EAAD,CAAhC;AACAg0B,aAAG,GAAGlY,WAAW,CAACkY,GAAD,EAAM73B,QAAN,EAAgBI,OAAhB,EAAyBwd,IAAzB,CAAjB;AACH;;AACD,eAAOia,GAAP;AACH;;AACD,eAASohB,0BAAT,CAAoCr5C,OAApC,EAA6CI,QAA7C,EAAuDI,OAAvD,EAAgE;AAC5D,eAAOA,OAAO,CAACy0C,gBAAR,IAA4Bj1C,OAAO,CAACE,OAAR,CAAgB+wB,uBAAnD;AACH;;AACD,eAASqoB,wBAAT,CAAkCt5C,OAAlC,EAA2CI,QAA3C,EAAqDI,OAArD,EAA8D;AAC1D,eAAOA,OAAO,CAACy0C,gBAAf;AACH,O,CAED;;;AACA,eAASsE,yBAAT,CAAmC91C,UAAnC,EAA+C+1C,eAA/C,EAAgEn4B,QAAhE,EAA0Epe,QAA1E,EAAoF;AAChF,YAAIw2C,YAAY,GAAGvC,eAAe,CAACzzC,UAAU,CAACqf,IAAZ,EAAkB02B,eAAlB,CAAlC;AACA,YAAIxQ,IAAI,GAAGc,qBAAqB,EAAhC;;AACA,aAAK,IAAI/mB,KAAT,IAAkBtf,UAAU,CAACqf,IAA7B,EAAmC;AAC/B,cAAIziB,GAAG,GAAGoD,UAAU,CAACqf,IAAX,CAAgBC,KAAhB,CAAV;AACAimB,cAAI,CAAClmB,IAAL,CAAUC,KAAV,IAAmB22B,uBAAuB,CAACr5C,GAAD,EAAMo5C,YAAY,CAAC12B,KAAD,CAAlB,EAA2B1B,QAA3B,EAAqCpe,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4B26B,wBAAjE,EAA2F12C,QAA3F,CAA1C;AACH;;AACD,aAAK,IAAIyd,UAAT,IAAuBjd,UAAU,CAACuf,SAAlC,EAA6C;AACzC,cAAIziB,QAAQ,GAAGkD,UAAU,CAACuf,SAAX,CAAqBtC,UAArB,CAAf;AACA,cAAIrgB,GAAG,GAAG2oC,IAAI,CAAClmB,IAAL,CAAUviB,QAAQ,CAACwiB,KAAnB,CAAV,CAFyC,CAEJ;;AACrCimB,cAAI,CAAChmB,SAAL,CAAetC,UAAf,IAA6Bk5B,4BAA4B,CAACr5C,QAAD,EAAWF,GAAX,EAAgBo5C,YAAY,CAACl5C,QAAQ,CAACwiB,KAAV,CAA5B,EAA8C1B,QAA9C,EAAwDpe,QAAxD,CAAzD;AACH;;AACD,eAAO+lC,IAAP;AACH;;AACD,eAAS0Q,uBAAT,CAAiCt5C,QAAjC,EAA2Cy5C,WAA3C,EAAwDx4B,QAAxD,EAAkEy4B,QAAlE,EAA4E72C,QAA5E,EAAsF;AAClF,YAAI2gB,aAAa,GAAGvC,QAAQ,CAACuC,aAAT,IAA0B,EAA9C,CADkF,CAElF;AACA;AACA;;AACA,YAAIA,aAAa,CAACC,MAAd,IAAwB,IAAxB,IACAg2B,WAAW,CAAC5E,gBADZ,KAEC5zB,QAAQ,CAACoD,UAAT,IAAuBpD,QAAQ,CAACqD,QAFjC,CAAJ,EAEgD;AAC5Cd,uBAAa,CAACC,MAAd,GAAuB,IAAvB,CAD4C,CACf;AAChC;;AACD,YAAI4H,IAAI,GAAGpe,QAAQ,CAAC,EAAD,EAAKjN,QAAL,EAAewjB,aAAf,EAA8B;AAAEnjB,YAAE,EAAE4M,QAAQ,CAAC,EAAD,EAAKjN,QAAQ,CAACK,EAAd,EAAkBmjB,aAAa,CAACnjB,EAAhC;AAAd,SAA9B,CAAnB;;AACA,YAAI4gB,QAAQ,CAAClW,aAAb,EAA4B;AACxBsgB,cAAI,CAACtgB,aAAL,GAAqBkC,QAAQ,CAAC,EAAD,EAAKoe,IAAI,CAACtgB,aAAV,EAAyBkW,QAAQ,CAAClW,aAAlC,CAA7B;AACH;;AACD,aAAK,IAAIlH,EAAE,GAAG,CAAT,EAAY81C,UAAU,GAAGD,QAA9B,EAAwC71C,EAAE,GAAG81C,UAAU,CAACt6C,MAAxD,EAAgEwE,EAAE,EAAlE,EAAsE;AAClE,cAAI+1C,OAAO,GAAGD,UAAU,CAAC91C,EAAD,CAAxB;AACA+1C,iBAAO,CAACvuB,IAAD,EAAOpK,QAAP,EAAiBpe,QAAjB,CAAP;AACH;;AACD,YAAI,CAACwoB,IAAI,CAAC5H,MAAN,IAAgB5gB,QAAQ,CAACsjB,GAAT,CAAa,oBAAb,CAApB,EAAwD;AACpDkF,cAAI,CAAC5H,MAAL,GAAc,IAAd;AACH;;AACD,eAAO4H,IAAP;AACH;;AACD,eAASmuB,4BAAT,CAAsCt5C,aAAtC,EAAqDF,QAArD,EAA+D;AAC/Dy5C,iBADA,EACax4B,QADb,EACuBpe,QADvB,EACiC;AAC7B,YAAIuC,OAAO,GAAGvC,QAAQ,CAACuC,OAAvB;AACA,YAAIy0C,WAAW,GAAG54B,QAAQ,CAACuC,aAAT,IAA0BvC,QAAQ,CAACuC,aAAT,CAAuB3iB,MAAvB,KAAkC,IAA9E;AACA,YAAIi5C,QAAQ,GAAG74B,QAAQ,CAACuC,aAAT,IAA0BvC,QAAQ,CAACuC,aAAT,CAAuBC,MAAvB,KAAkC,KAA3E;;AACA,YAAI4H,IAAI,GAAGpe,QAAQ,CAAC,EAAD,EAAK/M,aAAL,CAAnB;;AACA,YAAI25C,WAAJ,EAAiB;AACbxuB,cAAI,CAACvqB,KAAL,GAAagmC,sBAAsB,CAACzb,IAAI,CAACvqB,KAAN,CAAnC;AACH;;AACD,YAAImgB,QAAQ,CAACuB,UAAT,IAAuBi3B,WAAW,CAAC7E,aAAvC,EAAsD;AAClDvpB,cAAI,CAACvqB,KAAL,GAAa;AACTG,iBAAK,EAAEmE,OAAO,CAAC1B,GAAR,CAAY2nB,IAAI,CAACvqB,KAAL,CAAWG,KAAvB,EAA8BggB,QAAQ,CAACuB,UAAvC,CADE;AAETthB,eAAG,EAAEkE,OAAO,CAAC1B,GAAR,CAAY2nB,IAAI,CAACvqB,KAAL,CAAWI,GAAvB,EAA4B+f,QAAQ,CAACuB,UAArC;AAFI,WAAb;AAIH;;AACD,YAAIvB,QAAQ,CAACoD,UAAT,IAAuBo1B,WAAW,CAAC5E,gBAAvC,EAAyD;AACrDxpB,cAAI,CAACvqB,KAAL,GAAa;AACTG,iBAAK,EAAEmE,OAAO,CAAC1B,GAAR,CAAY2nB,IAAI,CAACvqB,KAAL,CAAWG,KAAvB,EAA8BggB,QAAQ,CAACoD,UAAvC,CADE;AAETnjB,eAAG,EAAEmqB,IAAI,CAACvqB,KAAL,CAAWI;AAFP,WAAb;AAIH;;AACD,YAAI+f,QAAQ,CAACqD,QAAT,IAAqBm1B,WAAW,CAAC5E,gBAArC,EAAuD;AACnDxpB,cAAI,CAACvqB,KAAL,GAAa;AACTG,iBAAK,EAAEoqB,IAAI,CAACvqB,KAAL,CAAWG,KADT;AAETC,eAAG,EAAEkE,OAAO,CAAC1B,GAAR,CAAY2nB,IAAI,CAACvqB,KAAL,CAAWI,GAAvB,EAA4B+f,QAAQ,CAACqD,QAArC;AAFI,WAAb;AAIH;;AACD,YAAIw1B,QAAJ,EAAc;AACVzuB,cAAI,CAACvqB,KAAL,GAAa;AACTG,iBAAK,EAAEoqB,IAAI,CAACvqB,KAAL,CAAWG,KADT;AAETC,eAAG,EAAE2B,QAAQ,CAAC4jB,kBAAT,CAA4BzmB,QAAQ,CAACa,MAArC,EAA6CwqB,IAAI,CAACvqB,KAAL,CAAWG,KAAxD;AAFI,WAAb;AAIH,SA/B4B,CAgC7B;AACA;;;AACA,YAAIjB,QAAQ,CAACa,MAAb,EAAqB;AACjBwqB,cAAI,CAACvqB,KAAL,GAAa;AACTG,iBAAK,EAAEy8B,UAAU,CAACrS,IAAI,CAACvqB,KAAL,CAAWG,KAAZ,CADR;AAETC,eAAG,EAAEw8B,UAAU,CAACrS,IAAI,CAACvqB,KAAL,CAAWI,GAAZ;AAFN,WAAb;AAIH,SAvC4B,CAwC7B;;;AACA,YAAImqB,IAAI,CAACvqB,KAAL,CAAWI,GAAX,GAAiBmqB,IAAI,CAACvqB,KAAL,CAAWG,KAAhC,EAAuC;AACnCoqB,cAAI,CAACvqB,KAAL,CAAWI,GAAX,GAAiB2B,QAAQ,CAAC4jB,kBAAT,CAA4BzmB,QAAQ,CAACa,MAArC,EAA6CwqB,IAAI,CAACvqB,KAAL,CAAWG,KAAxD,CAAjB;AACH;;AACD,eAAOoqB,IAAP;AACH;;AAED,eAAS0uB,gBAAT,CAA2B12C,UAA3B,EAAuC+G,MAAvC,EAA+Cwe,YAA/C,EAA6D1lB,WAA7D,EAA0EL,QAA1E,EAAoF;AAChF,gBAAQuH,MAAM,CAAC1C,IAAf;AACI,eAAK,gBAAL;AAAuB;AACnB,mBAAOsyC,gBAAgB,CAAC32C,UAAD,EAAaulB,YAAY,CAACxe,MAAM,CAACmc,QAAR,CAAzB,EAA4Cnc,MAAM,CAAC6vC,OAAnD,EAA4D7vC,MAAM,CAAC8vC,UAAnE,EAA+E9vC,MAAM,CAACo/B,SAAtF,EAAiG3mC,QAAjG,CAAvB;;AACJ,eAAK,YAAL;AAAmB;AACf,mBAAOs3C,QAAQ,CAAC92C,UAAD,EAAa+G,MAAM,CAAC/G,UAApB,EAAgC;AAC/CH,uBAAW,GAAGA,WAAW,CAAC2B,WAAf,GAA6B,IADzB,EAC+BhC,QAD/B,CAAf;;AAEJ,eAAK,cAAL;AAAqB;AACjB,mBAAOuoC,gBAAgB,CAAC/nC,UAAD,EAAa+G,MAAM,CAAC/G,UAApB,CAAvB;;AACJ,eAAK,MAAL,CARJ,CAQiB;;AACb,eAAK,MAAL;AACA,eAAK,UAAL;AACA,eAAK,eAAL;AACI,gBAAIH,WAAJ,EAAiB;AACb,qBAAO8mC,eAAe,CAAC3mC,UAAD,EAAaH,WAAW,CAAC2B,WAAzB,EAAsChC,QAAtC,CAAtB;AACH,aAFD,MAGK;AACD,qBAAOQ,UAAP;AACH;;AACL,eAAK,iBAAL;AACI,mBAAO+2C,WAAW,CAAC/2C,UAAD,EAAa+G,MAAM,CAACiwC,UAApB,EAAgCx3C,QAAQ,CAACuC,OAAzC,CAAlB;;AACJ,eAAK,eAAL;AACI,mBAAOk1C,sBAAsB,CAACj3C,UAAD,EAAa+G,MAAM,CAACkW,UAApB,EAAgClW,MAAM,CAAC6W,QAAvC,EAAiD7W,MAAM,CAAC4rC,OAAxD,EAAiEnzC,QAAjE,CAA7B;;AACJ,eAAK,wBAAL;AACI,mBAAO03C,gBAAgB,CAACl3C,UAAD,EAAa+G,MAAM,CAACwY,SAApB,CAAvB;;AACJ,eAAK,kBAAL;AACI,mBAAO2nB,oBAAoB,CAAClnC,UAAD,EAAa,UAAUrD,QAAV,EAAoB;AACxD,qBAAOA,QAAQ,CAAC2iB,KAAT,KAAmBvY,MAAM,CAACuY,KAAjC;AACH,aAF0B,CAA3B;;AAGJ,eAAK,qBAAL;AACI,mBAAO63B,uBAAuB,CAACn3C,UAAD,EAAa+G,MAAM,CAACmc,QAApB,CAA9B;;AACJ,eAAK,0BAAL;AACI,mBAAOgkB,oBAAoB,CAAClnC,UAAD,EAAa,UAAUrD,QAAV,EAAoB;AACxD,qBAAO,CAACA,QAAQ,CAACumB,QAAjB,CADwD,CAC7B;AAC9B,aAF0B,CAA3B;;AAGJ,eAAK,mBAAL;AACI,mBAAOmjB,qBAAqB,EAA5B;;AACJ,eAAK,cAAL;AACI,mBAAO;AACHhnB,kBAAI,EAAErf,UAAU,CAACqf,IADd;AAEHE,uBAAS,EAAEvf,UAAU,CAACuf;AAFnB,aAAP;;AAIJ;AACI,mBAAOvf,UAAP;AA1CR;AA4CH;;AACD,eAAS22C,gBAAT,CAA0B32C,UAA1B,EAAsCwnC,WAAtC,EAAmDoP,OAAnD,EAA4DC,UAA5D,EAAwE1Q,SAAxE,EAAmF3mC,QAAnF,EAA6F;AACzF,YAAIgoC,WAAW,IAAI;AACfoP,eAAO,KAAKpP,WAAW,CAAC4P,aAD5B,CAC0C;AAD1C,UAEE;AACE,gBAAIC,MAAM,GAAGnR,WAAW,CAACqB,kBAAkB,CAACpB,SAAD,EAAYqB,WAAZ,EAAyBhoC,QAAzB,CAAnB,EAAuDgoC,WAAW,CAACtkB,QAAnE,EAA6E1jB,QAA7E,CAAxB;;AACA,gBAAIq3C,UAAJ,EAAgB;AACZQ,oBAAM,GAAG1Q,eAAe,CAAC0Q,MAAD,EAASR,UAAT,EAAqBr3C,QAArB,CAAxB;AACH;;AACD,mBAAOuoC,gBAAgB,CAACoP,uBAAuB,CAACn3C,UAAD,EAAawnC,WAAW,CAACtkB,QAAzB,CAAxB,EAA4Dm0B,MAA5D,CAAvB;AACH;;AACD,eAAOr3C,UAAP;AACH;;AACD,eAAS82C,QAAT,CAAkB92C,UAAlB,EAA8Bq3C,MAA9B,EAAsCC,WAAtC,EAAmD93C,QAAnD,EAA6D;AACzD,YAAI83C,WAAJ,EAAiB;AACbD,gBAAM,GAAG1Q,eAAe,CAAC0Q,MAAD,EAASC,WAAT,EAAsB93C,QAAtB,CAAxB;AACH;;AACD,eAAOuoC,gBAAgB,CAAC/nC,UAAD,EAAaq3C,MAAb,CAAvB;AACH;;AACD,eAASN,WAAT,CAAqB/2C,UAArB,EAAiCg3C,UAAjC,EAA6CO,UAA7C,EAAyD;AACrD,YAAIl4B,IAAI,GAAGrf,UAAU,CAACqf,IAAtB;AACA,YAAIE,SAAS,GAAGwF,OAAO,CAAC/kB,UAAU,CAACuf,SAAZ,EAAuB,UAAUziB,QAAV,EAAoB;AAC9D,cAAIF,GAAG,GAAGyiB,IAAI,CAACviB,QAAQ,CAACwiB,KAAV,CAAd;;AACA,cAAI1iB,GAAG,CAACY,MAAJ,IAAcZ,GAAG,CAACooC,YAAtB,EAAoC;AAChC,mBAAOloC,QAAP,CADgC,CACf;AACpB,WAFD,MAGK;AACD,mBAAO8M,QAAQ,CAAC,EAAD,EAAK9M,QAAL,EAAe;AAAEW,mBAAK,EAAE;AAC/BG,qBAAK,EAAE25C,UAAU,CAACnP,YAAX,CAAwB4O,UAAU,CAACpE,MAAX,CAAkB91C,QAAQ,CAACW,KAAT,CAAeG,KAAjC,EAAwCd,QAAQ,CAAC01C,cAAjD,CAAxB,CADwB;AAE/B30C,mBAAG,EAAE05C,UAAU,CAACnP,YAAX,CAAwB4O,UAAU,CAACpE,MAAX,CAAkB91C,QAAQ,CAACW,KAAT,CAAeI,GAAjC,EAAsCf,QAAQ,CAAC21C,YAA/C,CAAxB;AAF0B,eAAT;AAGvBD,4BAAc,EAAE+E,UAAU,CAACC,gBAAX,GAA8B,IAA9B,GAAqC16C,QAAQ,CAAC01C,cAHvC;AAGuDC,0BAAY,EAAE8E,UAAU,CAACC,gBAAX,GAA8B,IAA9B,GAAqC16C,QAAQ,CAAC21C;AAHnH,aAAf,CAAf;AAIH;AACJ,SAXsB,CAAvB;AAYA,eAAO;AAAEpzB,cAAI,EAAEA,IAAR;AAAcE,mBAAS,EAAEA;AAAzB,SAAP;AACH;;AACD,eAAS03B,sBAAT,CAAgCj3C,UAAhC,EAA4Cid,UAA5C,EAAwDW,QAAxD,EAAkE+0B,OAAlE,EAA2EnzC,QAA3E,EAAqF;AACjF,YAAIi4C,QAAQ,GAAG1Q,iBAAiB,CAAC/mC,UAAD,EAAaid,UAAb,CAAhC;AACA,YAAI84B,eAAe,GAAGpD,OAAO,GACzB;AAAE,cAAI;AACEpB,yBAAa,EAAE,IADjB;AAEEC,4BAAgB,EAAE,IAFpB;AAGEsB,uBAAW,EAAE,EAHf;AAIEC,mBAAO,EAAE,IAJX;AAKEC,kBAAM,EAAE,EALV;AAME11C,2BAAe,EAAE,EANnB;AAOEg0C,uBAAW,EAAE,EAPf;AAQE2B,qBAAS,EAAE,EARb;AASE71C,sBAAU,EAAE;AATd;AAAN,SADyB,GAYzBoC,QAAQ,CAACS,YAZb;AAaAw3C,gBAAQ,GAAG3B,yBAAyB,CAAC2B,QAAD,EAAW1B,eAAX,EAA4Bn4B,QAA5B,EAAsCpe,QAAtC,CAApC;AACA,eAAOuoC,gBAAgB,CAAC/nC,UAAD,EAAay3C,QAAb,CAAvB;AACH;;AACD,eAASN,uBAAT,CAAiCn3C,UAAjC,EAA6CkjB,QAA7C,EAAuD;AACnD,eAAOgkB,oBAAoB,CAAClnC,UAAD,EAAa,UAAUrD,QAAV,EAAoB;AACxD,iBAAOA,QAAQ,CAACumB,QAAT,KAAsBA,QAA7B;AACH,SAF0B,CAA3B;AAGH,O,CACD;;;AACA,eAASg0B,gBAAT,CAA0Bl3C,UAA1B,EAAsC03C,QAAtC,EAAgD;AAC5C,eAAO;AACHr4B,cAAI,EAAErf,UAAU,CAACqf,IADd;AAEHE,mBAAS,EAAEmmB,UAAU,CAAC1lC,UAAU,CAACuf,SAAZ,EAAuB,UAAUziB,QAAV,EAAoB;AAC5D,mBAAO,CAAC46C,QAAQ,CAAC56C,QAAQ,CAACmgB,UAAV,CAAhB;AACH,WAFoB;AAFlB,SAAP;AAMH,O,CAED;AACA;;;AACA,eAASuB,kBAAT,CAA4BX,WAA5B,EAAyCre,QAAzC,EAAmD;AAC/C,eAAOm4C,eAAe,CAAC;AAAEC,mBAAS,EAAE/5B;AAAb,SAAD,EAA6Bre,QAA7B,CAAtB,CAD+C,CACe;AACjE;;AACD,eAASic,oBAAT,CAA8BqG,aAA9B,EAA6CtiB,QAA7C,EAAuD;AACnD,eAAOm4C,eAAe,CAAC;AAAE71B,uBAAa,EAAEA;AAAjB,SAAD,EAAmCtiB,QAAnC,CAAtB;AACH;;AACD,eAASm4C,eAAT,CAAyBE,QAAzB,EAAmCr4C,QAAnC,EAA6C;AACzC,YAAI+a,IAAI,GAAG/a,QAAQ,CAAC+a,IAApB;;AACA,YAAI3a,KAAK,GAAGgK,QAAQ,CAAC;AAAE0f,uBAAa,EAAE/O,IAAI,GAAGA,IAAI,CAAC3a,KAAL,CAAW0pB,aAAd,GAA8B+c,qBAAqB,EAAxE;AAA4EvkB,uBAAa,EAAE,EAA3F;AAA+F9hB,oBAAU,EAAER,QAAQ,CAAC0d,KAAT,CAAeld,UAA1H;AAAsIC,sBAAY,EAAET,QAAQ,CAACS,YAA7J;AAA2Kmd,wBAAc,EAAE,EAA3L;AAA+Lw6B,mBAAS,EAAE,IAA1M;AAAgNnxB,qBAAW,EAAE;AAA7N,SAAD,EAAsOoxB,QAAtO,CAApB;;AACA,eAAO,CAACr4C,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4Bu8B,YAA5B,IAA4CA,YAA7C,EAA2Dl4C,KAA3D,EAAkEJ,QAAlE,CAAP;AACH;;AACD,eAASs4C,YAAT,CAAsB56B,KAAtB,EAA6B1d,QAA7B,EAAuCu4C,YAAvC,EAAqDC,YAArD,EAAmE;AAC/D,YAAID,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,sBAAY,GAAG,EAAf;AAAoB;;AACnD,YAAI76B,KAAK,CAAC06B,SAAN,IAAmB,CAACK,uBAAuB,CAAC/6B,KAAD,EAAQ1d,QAAR,EAAkBu4C,YAAlB,EAAgCC,YAAhC,CAA/C,EAA8F;AAC1F,iBAAO,KAAP;AACH;;AACD,YAAI96B,KAAK,CAAC4E,aAAN,IAAuB,CAACo2B,yBAAyB,CAACh7B,KAAD,EAAQ1d,QAAR,EAAkBu4C,YAAlB,EAAgCC,YAAhC,CAArD,EAAoG;AAChG,iBAAO,KAAP;AACH;;AACD,eAAO,IAAP;AACH,O,CACD;AACA;;;AACA,eAASC,uBAAT,CAAiC/6B,KAAjC,EAAwC1d,QAAxC,EAAkDu4C,YAAlD,EAAgEC,YAAhE,EAA8E;AAC1E,YAAIn6B,WAAW,GAAGX,KAAK,CAAC06B,SAAxB,CAD0E,CACvC;;AACnC,YAAIO,iBAAiB,GAAGt6B,WAAW,CAACE,aAApC;AACA,YAAIq6B,WAAW,GAAGD,iBAAiB,CAAC94B,IAApC;AACA,YAAIg5B,gBAAgB,GAAGF,iBAAiB,CAAC54B,SAAzC;AACA,YAAI+4B,cAAc,GAAG7E,eAAe,CAAC2E,WAAD,EAAcv6B,WAAW,CAACG,OAAZ,GAC9Cd,KAAK,CAACjd,YADwC,GAE9C;AAAE,cAAIT,QAAQ,CAAC+4C;AAAf,SAFgC,CAEC;AAFD,SAApC;;AAIA,YAAIP,YAAJ,EAAkB;AACdM,wBAAc,GAAGvzB,OAAO,CAACuzB,cAAD,EAAiBN,YAAjB,CAAxB;AACH;;AACD,YAAIQ,eAAe,GAAGtB,gBAAgB,CAACh6B,KAAK,CAACld,UAAP,EAAmB6d,WAAW,CAACC,cAAZ,CAA2ByB,SAA9C,CAAtC,CAZ0E,CAYsB;;AAChG,YAAIk5B,SAAS,GAAGD,eAAe,CAACn5B,IAAhC;AACA,YAAIq5B,cAAc,GAAGF,eAAe,CAACj5B,SAArC;AACA,YAAIo5B,YAAY,GAAGlF,eAAe,CAACgF,SAAD,EAAYv7B,KAAK,CAACjd,YAAlB,CAAlC;;AACA,aAAK,IAAI24C,iBAAT,IAA8BP,gBAA9B,EAAgD;AAC5C,cAAIQ,eAAe,GAAGR,gBAAgB,CAACO,iBAAD,CAAtC;AACA,cAAIE,YAAY,GAAGD,eAAe,CAACp7C,KAAnC;AACA,cAAIs7C,aAAa,GAAGT,cAAc,CAACO,eAAe,CAACv5B,KAAjB,CAAlC;AACA,cAAI05B,UAAU,GAAGZ,WAAW,CAACS,eAAe,CAACv5B,KAAjB,CAA5B,CAJ4C,CAK5C;;AACA,cAAI,CAAC25B,kBAAkB,CAACF,aAAa,CAACjG,WAAf,EAA4BgG,YAA5B,EAA0CN,eAA1C,EAA2Dt7B,KAAK,CAACoM,aAAjE,EAAgF9pB,QAAhF,CAAvB,EAAkH;AAC9G,mBAAO,KAAP;AACH,WAR2C,CAS5C;;;AACA,cAAI05C,WAAW,GAAG15C,QAAQ,CAACsjB,GAAT,CAAa,cAAb,CAAlB;;AACA,cAAI,OAAOo2B,WAAP,KAAuB,UAA3B,EAAuC;AACnCA,uBAAW,GAAG,IAAd;AACH;;AACD,eAAK,IAAIC,eAAT,IAA4BT,cAA5B,EAA4C;AACxC,gBAAIU,aAAa,GAAGV,cAAc,CAACS,eAAD,CAAlC,CADwC,CAExC;;AACA,gBAAInQ,eAAe,CAAC8P,YAAD,EAAeM,aAAa,CAAC37C,KAA7B,CAAnB,EAAwD;AACpD,kBAAI47C,YAAY,GAAGV,YAAY,CAACS,aAAa,CAAC95B,KAAf,CAAZ,CAAkCyzB,OAArD,CADoD,CAEpD;;AACA,kBAAIsG,YAAY,KAAK,KAAjB,IAA0Bx7B,WAAW,CAACG,OAA1C,EAAmD;AAC/C,uBAAO,KAAP;AACH;;AACD,kBAAI+6B,aAAa,CAAChG,OAAd,KAA0B,KAA9B,EAAqC;AACjC,uBAAO,KAAP;AACH;;AACD,kBAAImG,WAAW,IAAI,CAACA,WAAW,CAAC,IAAIrI,QAAJ,CAAarxC,QAAb,EAAuBi5C,SAAS,CAACW,aAAa,CAAC95B,KAAf,CAAhC,EAAuD85B,aAAvD,CAAD,EAAwE;AACvG,kBAAIvI,QAAJ,CAAarxC,QAAb,EAAuBw5C,UAAvB,EAAmCH,eAAnC,CAD+B,CACqB;AADrB,eAA/B,EAEG;AACC,uBAAO,KAAP;AACH;AACJ;AACJ,WAhC2C,CAiC5C;;;AACA,cAAIS,kBAAkB,GAAG95C,QAAQ,CAAC0d,KAAT,CAAeld,UAAxC,CAlC4C,CAkCQ;;AACpD,eAAK,IAAIQ,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGy8C,aAAa,CAAC/F,MAApC,EAA4CxyC,EAAE,GAAGlE,EAAE,CAACN,MAApD,EAA4DwE,EAAE,EAA9D,EAAkE;AAC9D,gBAAI+4C,YAAY,GAAGj9C,EAAE,CAACkE,EAAD,CAArB;;AACA,gBAAIg5C,eAAe,GAAG5vC,QAAQ,CAAC,EAAD,EAAKmuC,YAAL,EAAmB;AAAEt6C,mBAAK,EAAEo7C,eAAe,CAACp7C,KAAzB;AAAgCD,oBAAM,EAAEw7C,UAAU,CAACx7C;AAAnD,aAAnB,CAA9B;;AACA,gBAAIi8C,OAAO,GAAGH,kBAAkB,CAACj6B,IAAnB,CAAwB25B,UAAU,CAAC15B,KAAnC,CAAd;AACA,gBAAIo6B,YAAY,GAAGJ,kBAAkB,CAAC/5B,SAAnB,CAA6Bq5B,iBAA7B,CAAnB;AACA,gBAAIh6B,QAAQ,GAAG,KAAK,CAApB;;AACA,gBAAI66B,OAAJ,EAAa;AAAE;AACX76B,sBAAQ,GAAG,IAAIiyB,QAAJ,CAAarxC,QAAb,EAAuBi6C,OAAvB,EAAgCC,YAAhC,CAAX;AACH,aAFD,MAGK;AAAE;AACH96B,sBAAQ,GAAG,IAAIiyB,QAAJ,CAAarxC,QAAb,EAAuBw5C,UAAvB,CAAX,CADC,CAC8C;AAClD;;AACD,gBAAI,CAACO,YAAY,CAAC/5C,QAAQ,CAACm6C,gBAAT,CAA0BH,eAA1B,CAAD,EAA6C56B,QAA7C,CAAjB,EAAyE;AACrE,qBAAO,KAAP;AACH;AACJ;AACJ;;AACD,eAAO,IAAP;AACH,O,CACD;AACA;;;AACA,eAASs5B,yBAAT,CAAmCh7B,KAAnC,EAA0C1d,QAA1C,EAAoDu4C,YAApD,EAAkEC,YAAlE,EAAgF;AAC5E,YAAI4B,kBAAkB,GAAG18B,KAAK,CAACld,UAA/B;AACA,YAAI65C,YAAY,GAAGD,kBAAkB,CAACv6B,IAAtC;AACA,YAAIy6B,iBAAiB,GAAGF,kBAAkB,CAACr6B,SAA3C;AACA,YAAI5D,SAAS,GAAGuB,KAAK,CAAC4E,aAAtB;AACA,YAAIi4B,cAAc,GAAGp+B,SAAS,CAACle,KAA/B;AACA,YAAI86C,eAAe,GAAG/4C,QAAQ,CAAC+4C,eAA/B;;AACA,YAAIP,YAAJ,EAAkB;AACdO,yBAAe,GAAGP,YAAY,CAACO,eAAD,CAA9B;AACH,SAT2E,CAU5E;;;AACA,YAAI,CAACU,kBAAkB,CAACV,eAAe,CAACzF,WAAjB,EAA8BiH,cAA9B,EAA8CH,kBAA9C,EAAkE18B,KAAK,CAACoM,aAAxE,EAAuF9pB,QAAvF,CAAvB,EAAyH;AACrH,iBAAO,KAAP;AACH,SAb2E,CAc5E;;;AACA,YAAI05C,WAAW,GAAG15C,QAAQ,CAACsjB,GAAT,CAAa,eAAb,CAAlB;;AACA,YAAI,OAAOo2B,WAAP,KAAuB,UAA3B,EAAuC;AACnCA,qBAAW,GAAG,IAAd;AACH;;AACD,aAAK,IAAIc,kBAAT,IAA+BF,iBAA/B,EAAkD;AAC9C,cAAIG,gBAAgB,GAAGH,iBAAiB,CAACE,kBAAD,CAAxC,CAD8C,CAE9C;;AACA,cAAIhR,eAAe,CAAC+Q,cAAD,EAAiBE,gBAAgB,CAACx8C,KAAlC,CAAnB,EAA6D;AACzD,gBAAI86C,eAAe,CAACxF,OAAhB,KAA4B,KAAhC,EAAuC;AACnC,qBAAO,KAAP;AACH;;AACD,gBAAImG,WAAW,IAAI,CAACA,WAAW,CAAC,IAAIrI,QAAJ,CAAarxC,QAAb,EAAuBq6C,YAAY,CAACI,gBAAgB,CAAC36B,KAAlB,CAAnC,EAA6D26B,gBAA7D,CAAD,CAA/B,EAAiH;AAC7G,qBAAO,KAAP;AACH;AACJ;AACJ,SA9B2E,CA+B5E;;;AACA,aAAK,IAAIz5C,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGi8C,eAAe,CAACvF,MAAtC,EAA8CxyC,EAAE,GAAGlE,EAAE,CAACN,MAAtD,EAA8DwE,EAAE,EAAhE,EAAoE;AAChE,cAAI05C,cAAc,GAAG59C,EAAE,CAACkE,EAAD,CAAvB;;AACA,cAAI25C,YAAY,GAAGvwC,QAAQ,CAAC,EAAD,EAAKmuC,YAAL,EAAmBp8B,SAAnB,CAA3B;;AACA,cAAI,CAACu+B,cAAc,CAAC16C,QAAQ,CAACm6C,gBAAT,CAA0BQ,YAA1B,CAAD,EAA0C,IAA1C,CAAnB,EAAoE;AAChE,mBAAO,KAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH,O,CACD;AACA;;;AACA,eAASlB,kBAAT,CAA4BnG,WAA5B,EAAyCgG,YAAzC,EAAuDN,eAAvD,EAAwE4B,uBAAxE,EAAiG56C,QAAjG,EAA2G;AACvG,aAAK,IAAIgB,EAAE,GAAG,CAAT,EAAY65C,aAAa,GAAGvH,WAAjC,EAA8CtyC,EAAE,GAAG65C,aAAa,CAACr+C,MAAjE,EAAyEwE,EAAE,EAA3E,EAA+E;AAC3E,cAAI85C,UAAU,GAAGD,aAAa,CAAC75C,EAAD,CAA9B;;AACA,cAAI,CAAC+5C,qBAAqB,CAACC,kBAAkB,CAACF,UAAD,EAAaxB,YAAb,EAA2BN,eAA3B,EAA4C4B,uBAA5C,EAAqE56C,QAArE,CAAnB,EAAmGs5C,YAAnG,CAA1B,EAA4I;AACxI,mBAAO,KAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH;;AACD,eAAS0B,kBAAT,CAA4BF,UAA5B,EAAwCxB,YAAxC,EAAsD;AACtDN,qBADA,EACiB;AACjB4B,6BAFA,EAEyB;AACzB56C,cAHA,CAGS;AAHT,QAIE;AACE,YAAI86C,UAAU,KAAK,eAAnB,EAAoC;AAChC,iBAAOG,kBAAkB,CAAC9T,eAAe,CAACyT,uBAAD,EAA0BtB,YAA1B,EAAwCt5C,QAAxC,CAAhB,CAAzB;AACH,SAFD,MAGK,IAAI,OAAO86C,UAAP,KAAsB,QAA1B,EAAoC;AAAE;AACvC,iBAAOG,kBAAkB,CAACvT,oBAAoB,CAACsR,eAAD,EAAkB,UAAU77C,QAAV,EAAoB;AAChF,mBAAOA,QAAQ,CAAC0K,OAAT,KAAqBizC,UAA5B;AACH,WAF6C,CAArB,CAAzB;AAGH,SAJI,MAKA,IAAI,OAAOA,UAAP,KAAsB,QAAtB,IAAkCA,UAAtC,EAAkD;AAAE;AACrD,iBAAOG,kBAAkB,CAAC9T,eAAe,CAAC2T,UAAD,EAAaxB,YAAb,EAA2Bt5C,QAA3B,CAAhB,CAAzB;AACH;;AACD,eAAO,EAAP,CAZF,CAYa;AACd,O,CACD;;;AACA,eAASi7C,kBAAT,CAA4Bz6C,UAA5B,EAAwC;AACpC,YAAIuf,SAAS,GAAGvf,UAAU,CAACuf,SAA3B;AACA,YAAI+oB,MAAM,GAAG,EAAb;;AACA,aAAK,IAAIrrB,UAAT,IAAuBsC,SAAvB,EAAkC;AAC9B+oB,gBAAM,CAACtqC,IAAP,CAAYuhB,SAAS,CAACtC,UAAD,CAAT,CAAsBxf,KAAlC;AACH;;AACD,eAAO6qC,MAAP;AACH,O,CACD;;;AACA,eAASiS,qBAAT,CAA+BG,WAA/B,EAA4CvR,UAA5C,EAAwD;AACpD,aAAK,IAAI3oC,EAAE,GAAG,CAAT,EAAYm6C,aAAa,GAAGD,WAAjC,EAA8Cl6C,EAAE,GAAGm6C,aAAa,CAAC3+C,MAAjE,EAAyEwE,EAAE,EAA3E,EAA+E;AAC3E,cAAI0oC,UAAU,GAAGyR,aAAa,CAACn6C,EAAD,CAA9B;;AACA,cAAIyoC,kBAAkB,CAACC,UAAD,EAAaC,UAAb,CAAtB,EAAgD;AAC5C,mBAAO,IAAP;AACH;AACJ;;AACD,eAAO,KAAP;AACH,O,CACD;AACA;;;AACA,eAASyR,mBAAT,CAA6B/1B,KAA7B,EAAoCrlB,QAApC,EAA8C;AAC1C,YAAIvE,KAAK,CAAC6pB,OAAN,CAAcD,KAAd,CAAJ,EAA0B;AACtB,iBAAOqhB,WAAW,CAACrhB,KAAD,EAAQ,EAAR,EAAYrlB,QAAZ,EAAsB,IAAtB,CAAlB,CADsB,CACyB;AAClD,SAFD,MAGK,IAAI,OAAOqlB,KAAP,KAAiB,QAAjB,IAA6BA,KAAjC,EAAwC;AAAE;AAC3C,iBAAOqhB,WAAW,CAAC,CAACrhB,KAAD,CAAD,EAAU,EAAV,EAAcrlB,QAAd,EAAwB,IAAxB,CAAlB,CADyC,CACQ;AACpD,SAFI,MAGA,IAAIqlB,KAAK,IAAI,IAAb,EAAmB;AACpB,iBAAO+K,MAAM,CAAC/K,KAAD,CAAb;AACH,SAFI,MAGA;AACD,iBAAO,IAAP;AACH;AACJ;;AAED,eAASg2B,UAAT,CAAoB/wC,CAApB,EAAuB;AACnB,eAAO,CAACA,CAAC,GAAG,EAAL,EAASwjC,OAAT,CAAiB,IAAjB,EAAuB,OAAvB,EACFA,OADE,CACM,IADN,EACY,MADZ,EAEFA,OAFE,CAEM,IAFN,EAEY,MAFZ,EAGFA,OAHE,CAGM,IAHN,EAGY,QAHZ,EAIFA,OAJE,CAIM,IAJN,EAIY,QAJZ,EAKFA,OALE,CAKM,KALN,EAKa,QALb,CAAP;AAMH,O,CACD;AACA;;;AACA,eAASwN,QAAT,CAAkBC,QAAlB,EAA4B;AACxB,YAAIC,UAAU,GAAG,EAAjB;;AACA,aAAK,IAAI3P,MAAT,IAAmB0P,QAAnB,EAA6B;AACzB,cAAIvmB,GAAG,GAAGumB,QAAQ,CAAC1P,MAAD,CAAlB;;AACA,cAAI7W,GAAG,IAAI,IAAP,IAAeA,GAAG,KAAK,EAA3B,EAA+B;AAC3BwmB,sBAAU,CAACh9C,IAAX,CAAgBqtC,MAAM,GAAG,GAAT,GAAe7W,GAA/B;AACH;AACJ;;AACD,eAAOwmB,UAAU,CAAC/8C,IAAX,CAAgB,GAAhB,CAAP;AACH,O,CACD;AACA;;;AACA,eAASg9C,UAAT,CAAoB9pB,KAApB,EAA2B;AACvB,YAAIyc,KAAK,GAAG,EAAZ;;AACA,aAAK,IAAIU,MAAT,IAAmBnd,KAAnB,EAA0B;AACtB,cAAIqD,GAAG,GAAGrD,KAAK,CAACmd,MAAD,CAAf;;AACA,cAAI9Z,GAAG,IAAI,IAAX,EAAiB;AACboZ,iBAAK,CAAC5vC,IAAN,CAAWswC,MAAM,GAAG,IAAT,GAAgBuM,UAAU,CAACrmB,GAAD,CAA1B,GAAkC,GAA7C;AACH;AACJ;;AACD,eAAOoZ,KAAK,CAAC3vC,IAAN,CAAW,GAAX,CAAP;AACH;;AACD,eAASi9C,cAAT,CAAwBC,GAAxB,EAA6B;AACzB,YAAIlgD,KAAK,CAAC6pB,OAAN,CAAcq2B,GAAd,CAAJ,EAAwB;AACpB,iBAAOA,GAAP;AACH,SAFD,MAGK,IAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC9B,iBAAOA,GAAG,CAAC56C,KAAJ,CAAU,KAAV,CAAP;AACH,SAFI,MAGA;AACD,iBAAO,EAAP;AACH;AACJ;;AAED,UAAI8wC,uBAAuB,GAAG;AAC1BjzB,gBAAQ,EAAEjE,OADgB;AAE1Bo3B,qBAAa,EAAEp3B,OAFW;AAG1Bq3B,wBAAgB,EAAEr3B,OAHQ;AAI1BmgC,kBAAU,EAAE,IAJc;AAK1BvH,eAAO,EAAE,IALiB;AAM1BqI,aAAK,EAAE,IANmB;AAO1B/3C,iBAAS,EAAE63C,cAPe;AAQ1B99C,kBAAU,EAAE89C,cARc;AAS1BG,aAAK,EAAEzrB,MATmB;AAU1BtyB,uBAAe,EAAEsyB,MAVS;AAW1B0hB,mBAAW,EAAE1hB,MAXa;AAY1BqjB,iBAAS,EAAErjB;AAZe,OAA9B;;AAcA,eAAS0rB,sBAAT,CAAgCnY,QAAhC,EAA0C3jC,QAA1C,EAAoD+kC,SAApD,EAA+D;AAC3D,YAAI3kC,KAAK,GAAGsjC,WAAW,CAACC,QAAD,EAAWkO,uBAAX,EAAoC,EAApC,EAAwC9M,SAAxC,CAAvB;AACA,YAAI+V,UAAU,GAAGM,mBAAmB,CAACh7C,KAAK,CAAC06C,UAAP,EAAmB96C,QAAnB,CAApC;AACA,eAAO;AACH+xC,uBAAa,EAAE3xC,KAAK,CAAC2xC,aAAN,IAAuB,IAAvB,GAA8B3xC,KAAK,CAAC2xC,aAApC,GAAoD3xC,KAAK,CAACwe,QADtE;AAEHozB,0BAAgB,EAAE5xC,KAAK,CAAC4xC,gBAAN,IAA0B,IAA1B,GAAiC5xC,KAAK,CAAC4xC,gBAAvC,GAA0D5xC,KAAK,CAACwe,QAF/E;AAGH00B,qBAAW,EAAEwH,UAAU,IAAI,IAAd,GAAqB,CAACA,UAAD,CAArB,GAAoC,EAH9C;AAIHvH,iBAAO,EAAEnzC,KAAK,CAACmzC,OAJZ;AAKHC,gBAAM,EAAEpzC,KAAK,CAACw7C,KAAN,IAAe,IAAf,GAAsB,CAACx7C,KAAK,CAACw7C,KAAP,CAAtB,GAAsC,EAL3C;AAMH99C,yBAAe,EAAEsC,KAAK,CAACtC,eAAN,IAAyBsC,KAAK,CAACy7C,KAN7C;AAOH/J,qBAAW,EAAE1xC,KAAK,CAAC0xC,WAAN,IAAqB1xC,KAAK,CAACy7C,KAPrC;AAQHpI,mBAAS,EAAErzC,KAAK,CAACqzC,SARd;AASH71C,oBAAU,EAAEwC,KAAK,CAACxC,UAAN,CAAiBD,MAAjB,CAAwByC,KAAK,CAACyD,SAA9B;AATT,SAAP;AAWH;;AACD,eAASk4C,oBAAT,CAA8B53B,MAA9B,EAAsC63B,SAAtC,EAAiDh8C,QAAjD,EAA2D+kC,SAA3D,EAAsE;AAClE,YAAIkX,WAAW,GAAG,EAAlB;AACA,YAAIC,QAAQ,GAAG,EAAf;;AACA,aAAK,IAAIx2B,GAAT,IAAgBmsB,uBAAhB,EAAyC;AACrC,cAAIsK,SAAS,GAAGh4B,MAAM,GAAGue,qBAAqB,CAAChd,GAAD,CAA9C;AACAu2B,qBAAW,CAACv2B,GAAD,CAAX,GAAmBs2B,SAAS,CAACG,SAAD,CAA5B;AACAD,kBAAQ,CAACC,SAAD,CAAR,GAAsB,IAAtB;AACH;;AACD,YAAIh4B,MAAM,KAAK,OAAf,EAAwB;AACpB83B,qBAAW,CAACr9B,QAAZ,GAAuBo9B,SAAS,CAACp9B,QAAjC,CADoB,CACuB;AAC9C;;AACD,YAAImmB,SAAJ,EAAe;AACX,eAAK,IAAIrf,GAAT,IAAgBs2B,SAAhB,EAA2B;AACvB,gBAAI,CAACE,QAAQ,CAACx2B,GAAD,CAAb,EAAoB;AAChBqf,uBAAS,CAACrf,GAAD,CAAT,GAAiBs2B,SAAS,CAACt2B,GAAD,CAA1B;AACH;AACJ;AACJ;;AACD,eAAOo2B,sBAAsB,CAACG,WAAD,EAAcj8C,QAAd,CAA7B;AACH;;AACD,UAAIo8C,cAAc,GAAG;AACjBrK,qBAAa,EAAE,IADE;AAEjBC,wBAAgB,EAAE,IAFD;AAGjBsB,mBAAW,EAAE,EAHI;AAIjBC,eAAO,EAAE,IAJQ;AAKjBC,cAAM,EAAE,EALS;AAMjB11C,uBAAe,EAAE,EANA;AAOjBg0C,mBAAW,EAAE,EAPI;AAQjB2B,iBAAS,EAAE,EARM;AASjB71C,kBAAU,EAAE;AATK,OAArB,C,CAWA;;AACA,eAASy3C,eAAT,CAAyBD,GAAzB,EAA8B;AAC1B,eAAOA,GAAG,CAACxc,MAAJ,CAAWyjB,kBAAX,EAA+BD,cAA/B,CAAP;AACH;;AACD,eAASC,kBAAT,CAA4BC,KAA5B,EAAmCC,KAAnC,EAA0C;AACtC,eAAO;AACHxK,uBAAa,EAAEwK,KAAK,CAACxK,aAAN,IAAuB,IAAvB,GAA8BwK,KAAK,CAACxK,aAApC,GAAoDuK,KAAK,CAACvK,aADtE;AAEHC,0BAAgB,EAAEuK,KAAK,CAACvK,gBAAN,IAA0B,IAA1B,GAAiCuK,KAAK,CAACvK,gBAAvC,GAA0DsK,KAAK,CAACtK,gBAF/E;AAGHsB,qBAAW,EAAEgJ,KAAK,CAAChJ,WAAN,CAAkB31C,MAAlB,CAAyB4+C,KAAK,CAACjJ,WAA/B,CAHV;AAIHC,iBAAO,EAAE,OAAOgJ,KAAK,CAAChJ,OAAb,KAAyB,SAAzB,GAAqCgJ,KAAK,CAAChJ,OAA3C,GAAqD+I,KAAK,CAAC/I,OAJjE;AAKHC,gBAAM,EAAE8I,KAAK,CAAC9I,MAAN,CAAa71C,MAAb,CAAoB4+C,KAAK,CAAC/I,MAA1B,CALL;AAMH11C,yBAAe,EAAEy+C,KAAK,CAACz+C,eAAN,IAAyBw+C,KAAK,CAACx+C,eAN7C;AAOHg0C,qBAAW,EAAEyK,KAAK,CAACzK,WAAN,IAAqBwK,KAAK,CAACxK,WAPrC;AAQH2B,mBAAS,EAAE8I,KAAK,CAAC9I,SAAN,IAAmB6I,KAAK,CAAC7I,SARjC;AASH71C,oBAAU,EAAE0+C,KAAK,CAAC1+C,UAAN,CAAiBD,MAAjB,CAAwB4+C,KAAK,CAAC3+C,UAA9B;AATT,SAAP;AAWH;;AAED,UAAI+zC,cAAc,GAAG;AACjB9qC,UAAE,EAAEupB,MADa;AAEjBvoB,eAAO,EAAEuoB,MAFQ;AAGjBxxB,aAAK,EAAEwxB,MAHU;AAIjB3yB,WAAG,EAAE2yB,MAJY;AAKjBijB,iBAAS,EAAEjjB,MALM;AAMjBloB,qBAAa,EAAE;AANE,OAArB;AAQA,UAAIwpC,UAAU,GAAG;AACbtzC,aAAK,EAAE,IADM;AAEbw+B,YAAI,EAAE,IAFO;AAGbv+B,WAAG,EAAE,IAHQ;AAIbL,cAAM,EAAE;AAJK,OAAjB;AAMA,UAAIw+C,GAAG,GAAG,CAAV;;AACA,eAASvV,UAAT,CAAoB0U,GAApB,EAAyBj4B,QAAzB,EAAmC1jB,QAAnC,EAA6C4mC,cAA7C,EAA6D;AACzD,YAAInZ,aAAa,GAAGgvB,sBAAsB,CAAC/4B,QAAD,EAAW1jB,QAAX,CAA1C;AACA,YAAI08C,UAAU,GAAG,EAAjB;AACA,YAAIC,YAAY,GAAG/X,cAAc,CAAC+W,GAAD,EAAM;AACvCluB,qBADiC,EAClBztB,QAAQ,CAACuC,OADS,EACAvC,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4B+oB,cAD5B,EAC4C4X,UAD5C,CACuD;AADvD,SAAjC;;AAGA,YAAIC,YAAJ,EAAkB;AACd,cAAIv/C,GAAG,GAAGw/C,aAAa,CAACF,UAAD,EAAah5B,QAAb,EAAuBi5B,YAAY,CAAC3+C,MAApC,EAA4C2c,OAAO,CAACgiC,YAAY,CAAC73C,QAAd,CAAnD,EAA4E9E,QAA5E,CAAvB;AACA5C,aAAG,CAACooC,YAAJ,GAAmB;AACfJ,kBAAM,EAAEuX,YAAY,CAACvX,MADN;AAEfD,oBAAQ,EAAEwX,YAAY,CAACxX,QAFR;AAGfrgC,oBAAQ,EAAE63C,YAAY,CAAC73C;AAHR,WAAnB;AAKA,iBAAO;AAAE1H,eAAG,EAAEA,GAAP;AAAYE,oBAAQ,EAAE;AAAtB,WAAP;AACH,SARD,MASK;AACD,cAAIu/C,UAAU,GAAG,EAAjB;AACA,cAAIC,SAAS,GAAGC,WAAW,CAACpB,GAAD,EAAMluB,aAAN,EAAqBztB,QAArB,EAA+B68C,UAA/B,EAA2CjW,cAA3C,CAA3B;;AACA,cAAIkW,SAAJ,EAAe;AACX,gBAAI1/C,GAAG,GAAGw/C,aAAa,CAACC,UAAD,EAAan5B,QAAb,EAAuBo5B,SAAS,CAAC9+C,MAAjC,EAAyC8+C,SAAS,CAACl8B,MAAnD,EAA2D5gB,QAA3D,CAAvB;AACA,gBAAI1C,QAAQ,GAAGgqC,mBAAmB,CAAClqC,GAAG,CAAC0iB,KAAL,EAAYg9B,SAAS,CAAC7+C,KAAtB,EAA6B6+C,SAAS,CAAC9J,cAAvC,EAAuD8J,SAAS,CAAC7J,YAAjE,CAAlC;AACA,mBAAO;AAAE71C,iBAAG,EAAEA,GAAP;AAAYE,sBAAQ,EAAEA;AAAtB,aAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH;AACD;;;;;;;AAKA,eAASs/C,aAAT,CAAuBjB,GAAvB,EAA4Bj4B,QAA5B,EAAsC1lB,MAAtC,EAA8C4iB,MAA9C,EAAsD5gB,QAAtD,EAAgE;AAC5D,YAAI+kC,SAAS,GAAG,EAAhB;AACA,YAAI3nC,GAAG,GAAG4/C,iBAAiB,CAACrB,GAAD,EAAM37C,QAAN,EAAgB+kC,SAAhB,CAA3B;AACA3nC,WAAG,CAAC0iB,KAAJ,GAAYsQ,MAAM,CAACosB,GAAG,EAAJ,CAAlB;AACAp/C,WAAG,CAACsmB,QAAJ,GAAeA,QAAf;AACAtmB,WAAG,CAACY,MAAJ,GAAaA,MAAb;AACAZ,WAAG,CAACwjB,MAAJ,GAAaA,MAAb;;AACA,aAAK,IAAI5f,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGkD,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4BkhC,eAAlD,EAAmEj8C,EAAE,GAAGlE,EAAE,CAACN,MAA3E,EAAmFwE,EAAE,EAArF,EAAyF;AACrF,cAAIk8C,cAAc,GAAGpgD,EAAE,CAACkE,EAAD,CAAvB;AACA,cAAIm8C,YAAY,GAAG,EAAnB;AACAD,wBAAc,CAAC9/C,GAAD,EAAM2nC,SAAN,EAAiBoY,YAAjB,CAAd;AACApY,mBAAS,GAAGoY,YAAZ;AACH;;AACD//C,WAAG,CAAC8K,aAAJ,GAAoBkC,QAAQ,CAAC26B,SAAD,EAAY3nC,GAAG,CAAC8K,aAAJ,IAAqB,EAAjC,CAA5B,CAb4D,CAc5D;;AACA5M,cAAM,CAAC8hD,MAAP,CAAchgD,GAAG,CAACI,EAAJ,CAAOI,UAArB;AACAtC,cAAM,CAAC8hD,MAAP,CAAchgD,GAAG,CAAC8K,aAAlB;AACA,eAAO9K,GAAP;AACH;;AACD,eAASkqC,mBAAT,CAA6BxnB,KAA7B,EAAoC7hB,KAApC,EAA2C+0C,cAA3C,EAA2DC,YAA3D,EAAyE;AACrE,eAAO;AACHx1B,oBAAU,EAAE2S,MAAM,CAACosB,GAAG,EAAJ,CADf;AAEH18B,eAAK,EAAEA,KAFJ;AAGH7hB,eAAK,EAAEA,KAHJ;AAIH+0C,wBAAc,EAAEA,cAAc,IAAI,IAAlB,GAAyB,IAAzB,GAAgCA,cAJ7C;AAKHC,sBAAY,EAAEA,YAAY,IAAI,IAAhB,GAAuB,IAAvB,GAA8BA;AALzC,SAAP;AAOH;;AACD,eAAS8J,WAAT,CAAqBpB,GAArB,EAA0BluB,aAA1B,EAAyCztB,QAAzC,EAAmD+kC,SAAnD,EAA8D6B,cAA9D,EAA8E;AAC1E,YAAIxmC,KAAK,GAAGi9C,cAAc,CAAC1B,GAAD,EAAM5W,SAAN,CAA1B;AACA,YAAI/mC,MAAM,GAAGoC,KAAK,CAACpC,MAAnB;AACA,YAAIs/C,SAAJ;AACA,YAAIC,WAAW,GAAG,IAAlB;AACA,YAAI38B,MAAM,GAAG,KAAb;AACA,YAAI48B,OAAJ;AACA,YAAIC,SAAS,GAAG,IAAhB;AACAH,iBAAS,GAAGt9C,QAAQ,CAACuC,OAAT,CAAiBm7C,gBAAjB,CAAkCt9C,KAAK,CAAChC,KAAxC,CAAZ;;AACA,YAAIk/C,SAAJ,EAAe;AACXC,qBAAW,GAAGD,SAAS,CAACxhB,MAAxB;AACH,SAFD,MAGK,IAAI,CAAC8K,cAAL,EAAqB;AACtB,iBAAO,IAAP;AACH;;AACD,YAAIxmC,KAAK,CAAC/B,GAAN,IAAa,IAAjB,EAAuB;AACnBm/C,iBAAO,GAAGx9C,QAAQ,CAACuC,OAAT,CAAiBm7C,gBAAjB,CAAkCt9C,KAAK,CAAC/B,GAAxC,CAAV;AACH;;AACD,YAAIL,MAAM,IAAI,IAAd,EAAoB;AAChB,cAAIyvB,aAAa,IAAI,IAArB,EAA2B;AACvBzvB,kBAAM,GAAGyvB,aAAT;AACH,WAFD,MAGK;AACD;AACAzvB,kBAAM,GAAG,CAAC,CAACs/C,SAAD,IAAcA,SAAS,CAACK,iBAAzB,MACJ,CAACH,OAAD,IAAYA,OAAO,CAACG,iBADhB,CAAT;AAEH;AACJ;;AACD,YAAI3/C,MAAM,IAAIu/C,WAAd,EAA2B;AACvBA,qBAAW,GAAG1iB,UAAU,CAAC0iB,WAAD,CAAxB;AACH;;AACD,YAAIC,OAAJ,EAAa;AACTC,mBAAS,GAAGD,OAAO,CAAC1hB,MAApB;;AACA,cAAI99B,MAAJ,EAAY;AACRy/C,qBAAS,GAAG5iB,UAAU,CAAC4iB,SAAD,CAAtB;AACH;;AACD,cAAIF,WAAW,IAAIE,SAAS,IAAIF,WAAhC,EAA6C;AACzCE,qBAAS,GAAG,IAAZ;AACH;AACJ;;AACD,YAAIA,SAAJ,EAAe;AACX78B,gBAAM,GAAG,IAAT;AACH,SAFD,MAGK,IAAI,CAACgmB,cAAL,EAAqB;AACtBhmB,gBAAM,GAAG5gB,QAAQ,CAACsjB,GAAT,CAAa,oBAAb,KAAsC,KAA/C;AACAm6B,mBAAS,GAAGz9C,QAAQ,CAACuC,OAAT,CAAiB1B,GAAjB,CAAqB08C,WAArB,EAAkCv/C,MAAM,GAChDgC,QAAQ,CAACusB,0BADuC,GAEhDvsB,QAAQ,CAACwsB,yBAFD,CAAZ;AAGH;;AACD,eAAO;AACHxuB,gBAAM,EAAEA,MADL;AAEH4iB,gBAAM,EAAEA,MAFL;AAGH3iB,eAAK,EAAE;AAAEG,iBAAK,EAAEm/C,WAAT;AAAsBl/C,eAAG,EAAEo/C;AAA3B,WAHJ;AAIHzK,wBAAc,EAAEsK,SAAS,GAAGA,SAAS,CAACpK,SAAb,GAAyB,IAJ/C;AAKHD,sBAAY,EAAEuK,OAAO,GAAGA,OAAO,CAACtK,SAAX,GAAuB;AALzC,SAAP;AAOH;;AACD,eAASmK,cAAT,CAAwB1B,GAAxB,EAA6B5W,SAA7B,EAAwC;AACpC,YAAI3kC,KAAK,GAAGsjC,WAAW,CAACiY,GAAD,EAAMjK,UAAN,EAAkB,EAAlB,EAAsB3M,SAAtB,CAAvB;AACA3kC,aAAK,CAAChC,KAAN,GAAegC,KAAK,CAAChC,KAAN,KAAgB,IAAjB,GAAyBgC,KAAK,CAAChC,KAA/B,GAAuCgC,KAAK,CAACw8B,IAA3D;AACA,eAAOx8B,KAAK,CAACw8B,IAAb;AACA,eAAOx8B,KAAP;AACH;;AACD,eAAS48C,iBAAT,CAA2BrB,GAA3B,EAAgC37C,QAAhC,EAA0C+kC,SAA1C,EAAqD;AACjD,YAAI6Y,YAAY,GAAG,EAAnB;AACA,YAAIx9C,KAAK,GAAGsjC,WAAW,CAACiY,GAAD,EAAMhK,cAAN,EAAsB,EAAtB,EAA0BiM,YAA1B,CAAvB;AACA,YAAIpgD,EAAE,GAAGs+C,sBAAsB,CAAC8B,YAAD,EAAe59C,QAAf,EAAyB+kC,SAAzB,CAA/B;AACA3kC,aAAK,CAAC6wC,QAAN,GAAiB7wC,KAAK,CAACyG,EAAvB;AACA,eAAOzG,KAAK,CAACyG,EAAb;AACAzG,aAAK,CAAC5C,EAAN,GAAWA,EAAX;AACA,eAAO4C,KAAP;AACH;;AACD,eAASq8C,sBAAT,CAAgC/4B,QAAhC,EAA0C1jB,QAA1C,EAAoD;AAChD,YAAI+c,GAAG,GAAG,IAAV;;AACA,YAAI2G,QAAJ,EAAc;AACV,cAAIm6B,MAAM,GAAG79C,QAAQ,CAAC0d,KAAT,CAAeqI,YAAf,CAA4BrC,QAA5B,CAAb;AACA3G,aAAG,GAAG8gC,MAAM,CAACpwB,aAAb;AACH;;AACD,YAAI1Q,GAAG,IAAI,IAAX,EAAiB;AACbA,aAAG,GAAG/c,QAAQ,CAACsjB,GAAT,CAAa,eAAb,CAAN;AACH;;AACD,eAAOvG,GAAP;AACH;;AAED,UAAI+gC,YAAY,GAAG;AACfn6B,iBAAS,EAAE,OADI;AAEfo6B,eAAO,EAAE,OAFM;AAGfC,kBAAU,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAHG;AAIf3K,iBAAS,EAAE,oBAJI;AAKfz1C,kBAAU,EAAE,gBALG;AAMfiK,eAAO,EAAE,gBANM,CAMW;;AANX,OAAnB;AAQA;;;;AAGA,eAASo2C,kBAAT,CAA4B54B,KAA5B,EAAmCrlB,QAAnC,EAA6C;AACzC,eAAO0mC,WAAW,CAACwX,YAAY,CAAC74B,KAAD,CAAb,EAAsB,EAAtB,EAA0BrlB,QAA1B,CAAlB;AACH;;AACD,eAASk+C,YAAT,CAAsB74B,KAAtB,EAA6B;AACzB,YAAI84B,OAAJ;;AACA,YAAI94B,KAAK,KAAK,IAAd,EAAoB;AAChB84B,iBAAO,GAAG,CAAC,EAAD,CAAV,CADgB,CACA;AACnB,SAFD,MAGK,IAAI1iD,KAAK,CAAC6pB,OAAN,CAAcD,KAAd,CAAJ,EAA0B;AAC3B;AACA84B,iBAAO,GAAG94B,KAAK,CAACrc,MAAN,CAAa,UAAUo1C,MAAV,EAAkB;AACrC,mBAAOA,MAAM,CAACJ,UAAd;AACH,WAFS,CAAV;AAGH,SALI,MAMA,IAAI,OAAO34B,KAAP,KAAiB,QAAjB,IAA6BA,KAAjC,EAAwC;AAAE;AAC3C84B,iBAAO,GAAG,CAAC94B,KAAD,CAAV;AACH,SAFI,MAGA;AAAE;AACH84B,iBAAO,GAAG,EAAV;AACH;;AACDA,eAAO,GAAGA,OAAO,CAAC1oC,GAAR,CAAY,UAAU2oC,MAAV,EAAkB;AACpC,iBAAOh0C,QAAQ,CAAC,EAAD,EAAK0zC,YAAL,EAAmBM,MAAnB,CAAf;AACH,SAFS,CAAV;AAGA,eAAOD,OAAP;AACH;;AAED,eAASE,gBAAT,CAA0BC,UAA1B,EAAsCC,YAAtC,EAAoDC,YAApD,EAAkE;AAC9D,YAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,sBAAY,GAAG,EAAf;AAAoB;;AACnD,YAAIC,UAAU,GAAG,EAAjB;AACA,YAAIC,WAAJ;AACA,YAAIC,QAAJ;;AACA,iBAAS7+C,QAAT,GAAoB;AAChB,cAAI6+C,QAAJ,EAAc;AACV,iBAAK,IAAI39C,EAAE,GAAG,CAAT,EAAY49C,YAAY,GAAGH,UAAhC,EAA4Cz9C,EAAE,GAAG49C,YAAY,CAACpiD,MAA9D,EAAsEwE,EAAE,EAAxE,EAA4E;AACxE,kBAAI69C,SAAS,GAAGD,YAAY,CAAC59C,EAAD,CAA5B;AACA69C,uBAAS,CAAC/+C,QAAV;AACH;;AACD,gBAAIy+C,YAAJ,EAAkB;AACdA,0BAAY,CAACl8C,KAAb,CAAmBq8C,WAAnB,EAAgCC,QAAhC;AACH;;AACDA,oBAAQ,GAAG,IAAX;AACH;AACJ;;AACD,iBAAS5hC,GAAT,GAAe;AACX,cAAI,CAAC4hC,QAAD,IAAa,CAACxU,aAAa,CAACwU,QAAD,EAAWn0C,SAAX,CAA/B,EAAsD;AAClD1K,oBAAQ;AACR4+C,uBAAW,GAAG,IAAd;AACAC,oBAAQ,GAAGn0C,SAAX;AACA8zC,sBAAU,CAACj8C,KAAX,CAAiB,IAAjB,EAAuBmI,SAAvB;AACH;AACJ;;AACDuS,WAAG,CAAC0hC,UAAJ,GAAiBA,UAAjB;AACA1hC,WAAG,CAACjd,QAAJ,GAAeA,QAAf;;AACA,aAAK,IAAIkB,EAAE,GAAG,CAAT,EAAY89C,cAAc,GAAGN,YAAlC,EAAgDx9C,EAAE,GAAG89C,cAAc,CAACtiD,MAApE,EAA4EwE,EAAE,EAA9E,EAAkF;AAC9E,cAAI+9C,UAAU,GAAGD,cAAc,CAAC99C,EAAD,CAA/B;AACA+9C,oBAAU,CAACN,UAAX,CAAsBjgD,IAAtB,CAA2Bue,GAA3B;AACH;;AACD,eAAOA,GAAP;AACH;;AAED,UAAIiiC,iBAAiB,GAAGnY,qBAAqB,EAA7C,C,CAAiD;;AACjD,UAAIoY,QAAQ;AAAG;AAAe,kBAAY;AACtC,iBAASA,QAAT,GAAoB;AAChB,eAAKC,mBAAL,GAA2B5U,OAAO,CAAC,KAAK6U,oBAAN,CAAlC;AACA,eAAKC,kBAAL,GAA0B9U,OAAO,CAAC,KAAK+U,cAAN,CAAjC;AACA,eAAKC,eAAL,GAAuBhV,OAAO,CAAC,KAAKiV,gBAAN,CAA9B;AACA,eAAKC,iBAAL,GAAyBlV,OAAO,CAAC,KAAKmV,kBAAN,CAAhC;AACA,eAAKC,cAAL,GAAsBpV,OAAO,CAAC,KAAKqV,iBAAN,CAA7B;AACA,eAAKC,gBAAL,GAAwBtV,OAAO,CAAC,KAAKqV,iBAAN,CAA/B;AACA,eAAKE,eAAL,GAAuB,EAAvB,CAPgB,CAOW;AAC9B;;AACDZ,gBAAQ,CAACljD,SAAT,CAAmB+jD,UAAnB,GAAgC,UAAU1/C,KAAV,EAAiB;AAC7C,cAAIhE,KAAK,GAAG,IAAZ;;AACA,cAAI2jD,QAAQ,GAAG,KAAKC,UAAL,CAAgB5/C,KAAhB,CAAf;AACA,cAAI6/C,OAAO,GAAG,KAAKf,mBAAL,CAAyB9+C,KAAK,CAACI,UAA/B,CAAd;AACA,cAAI0/C,cAAc,GAAG,KAAKd,kBAAL,CAAwBh/C,KAAK,CAACkiB,aAA9B,CAArB;AACA,cAAI69B,YAAY,GAAG,KAAKX,iBAAL,CAAuBp/C,KAAK,CAACK,YAA7B,EAA2Cw/C,OAA3C,CAAnB,CAL6C,CAK2B;;AACxE,cAAIG,WAAW,GAAG,KAAKd,eAAL,CAAqBl/C,KAAK,CAACI,UAA3B,EAAuCy/C,OAAvC,CAAlB;AACA,cAAII,UAAU,GAAG,KAAKX,cAAL,CAAoBt/C,KAAK,CAACg4C,SAA1B,CAAjB;AACA,cAAIkI,YAAY,GAAG,KAAKV,gBAAL,CAAsBx/C,KAAK,CAAC6mB,WAA5B,CAAnB;AACA,cAAI64B,UAAU,GAAG,EAAjB;AACA,eAAKD,eAAL,GAAuBt6B,OAAO,CAACw6B,QAAD,EAAW,UAAUl3C,IAAV,EAAgB6c,GAAhB,EAAqB;AAC1D,mBAAOtpB,KAAK,CAACyjD,eAAN,CAAsBn6B,GAAtB,KAA8B4kB,OAAO,CAACiW,kBAAD,CAA5C;AACH,WAF6B,CAA9B;;AAGA,eAAK,IAAI76B,GAAT,IAAgBq6B,QAAhB,EAA0B;AACtB,gBAAIS,OAAO,GAAGT,QAAQ,CAACr6B,GAAD,CAAtB;AACA,gBAAIllB,UAAU,GAAG4/C,WAAW,CAAC16B,GAAD,CAAX,IAAoBs5B,iBAArC;AACA,gBAAIyB,YAAY,GAAG,KAAKZ,eAAL,CAAqBn6B,GAArB,CAAnB;AACAo6B,sBAAU,CAACp6B,GAAD,CAAV,GAAkB;AACdoE,2BAAa,EAAE02B,OAAO,CAAC12B,aAAR,IAAyB1pB,KAAK,CAAC0pB,aADhC;AAEdxH,2BAAa,EAAE49B,cAAc,CAACx6B,GAAD,CAAd,IAAuB,IAFxB;AAGdllB,wBAAU,EAAEA,UAHE;AAIdC,0BAAY,EAAEggD,YAAY,CAACrgD,KAAK,CAACK,YAAN,CAAmB,EAAnB,CAAD,EAAyB+/C,OAAO,CAAChjD,EAAjC,EAAqC2iD,YAAY,CAACz6B,GAAD,CAAjD,CAJZ;AAKd9H,4BAAc,EAAEpd,UAAU,CAACuf,SAAX,CAAqB3f,KAAK,CAACwd,cAA3B,IAA6Cxd,KAAK,CAACwd,cAAnD,GAAoE,EALtE;AAMdw6B,uBAAS,EAAEiI,UAAU,CAAC36B,GAAD,CAAV,IAAmB,IANhB;AAOduB,yBAAW,EAAEq5B,YAAY,CAAC56B,GAAD,CAAZ,IAAqB;AAPpB,aAAlB;AASH;;AACD,iBAAOo6B,UAAP;AACH,SA5BD;;AA6BAb,gBAAQ,CAACljD,SAAT,CAAmBsjD,cAAnB,GAAoC,UAAU9kC,QAAV,EAAoB;AACpD,cAAImmC,SAAS,GAAG,EAAhB;;AACA,cAAInmC,QAAJ,EAAc;AACV,gBAAIoO,IAAI,GAAG,KAAKg4B,kBAAL,CAAwBpmC,QAAxB,CAAX;;AACA,iBAAK,IAAIvZ,EAAE,GAAG,CAAT,EAAY4/C,MAAM,GAAGj4B,IAA1B,EAAgC3nB,EAAE,GAAG4/C,MAAM,CAACpkD,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,kBAAI0kB,GAAG,GAAGk7B,MAAM,CAAC5/C,EAAD,CAAhB;AACA0/C,uBAAS,CAACh7B,GAAD,CAAT,GAAiBnL,QAAjB;AACH;AACJ;;AACD,iBAAOmmC,SAAP;AACH,SAVD;;AAWAzB,gBAAQ,CAACljD,SAAT,CAAmBojD,oBAAnB,GAA0C,UAAU3+C,UAAV,EAAsB;AAC5D,cAAIpE,KAAK,GAAG,IAAZ;;AACA,iBAAOmpB,OAAO,CAAC/kB,UAAU,CAACqf,IAAZ,EAAkB,UAAU1iB,QAAV,EAAoB;AAChD,mBAAOf,KAAK,CAACykD,kBAAN,CAAyB1jD,QAAzB,CAAP;AACH,WAFa,CAAd;AAGH,SALD;;AAMA8hD,gBAAQ,CAACljD,SAAT,CAAmBwjD,gBAAnB,GAAsC,UAAU/+C,UAAV,EAAsBy/C,OAAtB,EAA+B;AACjE,cAAIpgC,IAAI,GAAGrf,UAAU,CAACqf,IAAtB;AAAA,cAA4BE,SAAS,GAAGvf,UAAU,CAACuf,SAAnD;AACA,cAAI+gC,WAAW,GAAG,EAAlB;;AACA,eAAK,IAAIhhC,KAAT,IAAkBD,IAAlB,EAAwB;AACpB,iBAAK,IAAI7e,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGmjD,OAAO,CAACngC,KAAD,CAA7B,EAAsC9e,EAAE,GAAGlE,EAAE,CAACN,MAA9C,EAAsDwE,EAAE,EAAxD,EAA4D;AACxD,kBAAI0kB,GAAG,GAAG5oB,EAAE,CAACkE,EAAD,CAAZ;;AACA,kBAAI,CAAC8/C,WAAW,CAACp7B,GAAD,CAAhB,EAAuB;AACnBo7B,2BAAW,CAACp7B,GAAD,CAAX,GAAmBmhB,qBAAqB,EAAxC;AACH;;AACDia,yBAAW,CAACp7B,GAAD,CAAX,CAAiB7F,IAAjB,CAAsBC,KAAtB,IAA+BD,IAAI,CAACC,KAAD,CAAnC;AACH;AACJ;;AACD,eAAK,IAAIrC,UAAT,IAAuBsC,SAAvB,EAAkC;AAC9B,gBAAIziB,QAAQ,GAAGyiB,SAAS,CAACtC,UAAD,CAAxB;;AACA,iBAAK,IAAIzC,EAAE,GAAG,CAAT,EAAY+lC,EAAE,GAAGd,OAAO,CAAC3iD,QAAQ,CAACwiB,KAAV,CAA7B,EAA+C9E,EAAE,GAAG+lC,EAAE,CAACvkD,MAAvD,EAA+Dwe,EAAE,EAAjE,EAAqE;AACjE,kBAAI0K,GAAG,GAAGq7B,EAAE,CAAC/lC,EAAD,CAAZ;;AACA,kBAAI8lC,WAAW,CAACp7B,GAAD,CAAf,EAAsB;AAAE;AACpBo7B,2BAAW,CAACp7B,GAAD,CAAX,CAAiB3F,SAAjB,CAA2BtC,UAA3B,IAAyCngB,QAAzC;AACH;AACJ;AACJ;;AACD,iBAAOwjD,WAAP;AACH,SAtBD;;AAuBA7B,gBAAQ,CAACljD,SAAT,CAAmB0jD,kBAAnB,GAAwC,UAAUh/C,YAAV,EAAwBw/C,OAAxB,EAAiC;AACrE,cAAIe,WAAW,GAAG,EAAlB;;AACA,eAAK,IAAIlhC,KAAT,IAAkBrf,YAAlB,EAAgC;AAC5B,gBAAIqf,KAAJ,EAAW;AAAE;AACT,mBAAK,IAAI9e,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGmjD,OAAO,CAACngC,KAAD,CAA7B,EAAsC9e,EAAE,GAAGlE,EAAE,CAACN,MAA9C,EAAsDwE,EAAE,EAAxD,EAA4D;AACxD,oBAAI0kB,GAAG,GAAG5oB,EAAE,CAACkE,EAAD,CAAZ;;AACA,oBAAI,CAACggD,WAAW,CAACt7B,GAAD,CAAhB,EAAuB;AACnBs7B,6BAAW,CAACt7B,GAAD,CAAX,GAAmB,EAAnB;AACH;;AACDs7B,2BAAW,CAACt7B,GAAD,CAAX,CAAiB5F,KAAjB,IAA0Brf,YAAY,CAACqf,KAAD,CAAtC;AACH;AACJ;AACJ;;AACD,iBAAOkhC,WAAP;AACH,SAdD;;AAeA/B,gBAAQ,CAACljD,SAAT,CAAmB4jD,iBAAnB,GAAuC,UAAUthC,WAAV,EAAuB;AAC1D,cAAI4iC,WAAW,GAAG,EAAlB;;AACA,cAAI5iC,WAAJ,EAAiB;AACb,gBAAI6iC,gBAAgB,GAAG,KAAK3B,gBAAL,CAAsBlhC,WAAW,CAACC,cAAlC,EAAkD,KAAK6gC,oBAAL,CAA0B9gC,WAAW,CAACC,cAAtC,CAAlD,CAAwG;AAAxG,aAAvB,CADa,CAGb;;;AACA,gBAAI6iC,kBAAkB,GAAG,KAAKhC,oBAAL,CAA0B9gC,WAAW,CAACE,aAAtC,CAAzB;;AACA,gBAAI6iC,eAAe,GAAG,KAAK7B,gBAAL,CAAsBlhC,WAAW,CAACE,aAAlC,EAAiD4iC,kBAAjD,CAAtB;;AACA,gBAAIE,QAAQ,GAAG,SAAXA,QAAW,CAAU37B,GAAV,EAAe;AAC1B,kBAAI,CAACu7B,WAAW,CAACv7B,GAAD,CAAhB,EAAuB;AACnBu7B,2BAAW,CAACv7B,GAAD,CAAX,GAAmB;AACfpH,gCAAc,EAAE4iC,gBAAgB,CAACx7B,GAAD,CAAhB,IAAyBs5B,iBAD1B;AAEfzgC,+BAAa,EAAE6iC,eAAe,CAAC17B,GAAD,CAAf,IAAwBs5B,iBAFxB;AAGfxgC,yBAAO,EAAEH,WAAW,CAACG,OAHN;AAIfC,yBAAO,EAAEJ,WAAW,CAACI;AAJN,iBAAnB;AAMH;AACJ,aATD;;AAUA,iBAAK,IAAIiH,GAAT,IAAgBw7B,gBAAhB,EAAkC;AAC9BG,sBAAQ,CAAC37B,GAAD,CAAR;AACH;;AACD,iBAAK,IAAIA,GAAT,IAAgB07B,eAAhB,EAAiC;AAC7BC,sBAAQ,CAAC37B,GAAD,CAAR;AACH;AACJ;;AACD,iBAAOu7B,WAAP;AACH,SA1BD;;AA2BA,eAAOhC,QAAP;AACH,OA1H6B,EAA9B;;AA2HA,eAASsB,kBAAT,CAA4Be,KAA5B,EAAmCC,aAAnC,EAAkDpB,YAAlD,EAAgE;AAC5D,YAAIqB,SAAS,GAAG,EAAhB;;AACA,YAAIF,KAAJ,EAAW;AACPE,mBAAS,CAAChjD,IAAV,CAAe8iD,KAAf;AACH;;AACD,YAAIC,aAAJ,EAAmB;AACfC,mBAAS,CAAChjD,IAAV,CAAe+iD,aAAf;AACH;;AACD,YAAIE,KAAK,GAAG;AACR,cAAIpM,eAAe,CAACmM,SAAD;AADX,SAAZ;;AAGA,YAAIrB,YAAJ,EAAkB;AACd/1C,kBAAQ,CAACq3C,KAAD,EAAQtB,YAAR,CAAR;AACH;;AACD,eAAOsB,KAAP;AACH,O,CAED;AACA;AACA;AACA;AACA;AACA;;;AACA,eAASC,mBAAT,CAA6BC,UAA7B,EAAyCp/C,OAAzC,EAAkDq/C,WAAlD,EAA+DjwB,KAA/D,EAAsEkwB,SAAtE,EAAiF;AAC7E,YAAIjlB,IAAJ;AACA,YAAI/3B,IAAJ;AACA,YAAIi9C,QAAJ;AACA,YAAIC,YAAJ;;AACA,YAAIH,WAAW,YAAYv8C,IAA3B,EAAiC;AAC7Bu3B,cAAI,GAAGglB,WAAP,CAD6B,CACT;AACvB,SAFD,MAGK;AACDhlB,cAAI,GAAGglB,WAAW,CAAChlB,IAAnB;AACA/3B,cAAI,GAAG+8C,WAAW,CAAC/8C,IAAnB;AACAi9C,kBAAQ,GAAGF,WAAW,CAACE,QAAvB;AACH;;AACDC,oBAAY,GAAG;AACXnlB,cAAI,EAAEr6B,OAAO,CAACuB,SAAR,CAAkB84B,IAAlB,EAAwB;AAAE74B,oBAAQ,EAAE;AAAZ,WAAxB,CADK;AAEXc,cAAI,EAAEA,IAAI,IAAI;AAFH,SAAf;;AAIA,YAAI,OAAO8sB,KAAP,KAAiB,QAArB,EAA+B;AAC3BkwB,mBAAS,GAAGlwB,KAAZ;AACAA,eAAK,GAAG,IAAR;AACH;;AACDA,aAAK,GAAGA,KAAK,GAAG,MAAM8pB,UAAU,CAAC9pB,KAAD,CAAnB,GAA6B,EAA1C,CArB6E,CAqB/B;;AAC9CkwB,iBAAS,GAAGA,SAAS,IAAI,EAAzB;;AACA,YAAI,CAACC,QAAD,IAAaH,UAAU,CAACt1B,QAA5B,EAAsC;AAClC,iBAAO,OAAOsF,KAAP,GACH,cADG,GACc0pB,UAAU,CAACr3B,IAAI,CAACg+B,SAAL,CAAeD,YAAf,CAAD,CADxB,GACyD,IADzD,GAEHF,SAFG,GAGH,MAHJ;AAIH,SALD,MAMK;AACD,iBAAO,UAAUlwB,KAAV,GAAkB,GAAlB,GACHkwB,SADG,GAEH,SAFJ;AAGH;AACJ;;AACD,eAASI,aAAT,CAAuBN,UAAvB,EAAmC;AAC/B,eAAOA,UAAU,CAACzzB,UAAX,IAAyBmtB,UAAU,CAACsG,UAAU,CAACl3B,UAAZ,CAA1C;AACH,O,CACD;;;AACA,eAASy3B,aAAT,CAAuBtlB,IAAvB,EAA6Bv8B,WAA7B,EAA0CtD,OAA1C,EAAmDolD,gBAAnD,EAAqE;AACjE,YAAIniD,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;AAAA,YAAiC/C,OAAO,GAAGF,OAAO,CAACE,OAAnD;AAAA,YAA4DD,KAAK,GAAGD,OAAO,CAACC,KAA5E;AAAA,YAAmFuF,OAAO,GAAGxF,OAAO,CAACwF,OAArG;AACA,YAAI7E,OAAO,GAAG,EAAd;AACA,YAAI0kD,UAAJ;AACA,YAAIC,QAAJ;;AACA,YAAI,CAACzY,mBAAmB,CAACvpC,WAAW,CAAC2B,WAAb,EAA0B46B,IAA1B,CAAxB,EAAyD;AACrDl/B,iBAAO,CAACc,IAAR,CAAa,iBAAb;AACH,SAFD,MAGK;AACDd,iBAAO,CAACc,IAAR,CAAa,QAAQo7B,OAAO,CAACgD,IAAI,CAACF,SAAL,EAAD,CAA5B;;AACA,cAAIz/B,OAAO,CAACqlD,SAAR,IACA//C,OAAO,CAACgD,QAAR,CAAiBq3B,IAAjB,MAA2Br6B,OAAO,CAACgD,QAAR,CAAiBlF,WAAW,CAACkiD,YAAZ,CAAyBnkD,KAA1C,CAD/B,EACiF;AAC7EV,mBAAO,CAACc,IAAR,CAAa,gBAAb;AACH;;AACD4jD,oBAAU,GAAGvnB,UAAU,CAAC76B,QAAQ,CAACwiD,MAAT,EAAD,CAAvB;AACAH,kBAAQ,GAAGnoB,OAAO,CAACkoB,UAAD,EAAa,CAAb,CAAlB;;AACA,cAAIxlB,IAAI,GAAGwlB,UAAX,EAAuB;AACnB1kD,mBAAO,CAACc,IAAR,CAAa,SAAb;AACH,WAFD,MAGK,IAAIo+B,IAAI,IAAIylB,QAAZ,EAAsB;AACvB3kD,mBAAO,CAACc,IAAR,CAAa,WAAb;AACH,WAFI,MAGA;AACDd,mBAAO,CAACc,IAAR,CAAa,UAAb;;AACA,gBAAI2jD,gBAAgB,KAAK,IAAzB,EAA+B;AAC3BzkD,qBAAO,CAACc,IAAR,CAAaxB,KAAK,CAAC2B,QAAN,CAAe,OAAf,CAAb;AACH;AACJ;AACJ;;AACD,eAAOjB,OAAP;AACH,O,CAED;AACA;AACA;AACA;;;AACA,eAAS+kD,WAAT,CAAqBj9B,IAArB,EAA2Bk9B,OAA3B,EAAoCC,OAApC,EAA6C;AACzC;AACA;AACA,YAAIC,UAAU,GAAG,KAAjB;;AACA,YAAIC,cAAc,GAAG,SAAjBA,cAAiB,GAAY;AAC7B,cAAI,CAACD,UAAL,EAAiB;AACbA,sBAAU,GAAG,IAAb;AACAF,mBAAO,CAACrgD,KAAR,CAAc,IAAd,EAAoBmI,SAApB;AACH;AACJ,SALD;;AAMA,YAAIs4C,cAAc,GAAG,SAAjBA,cAAiB,GAAY;AAC7B,cAAI,CAACF,UAAL,EAAiB;AACbA,sBAAU,GAAG,IAAb;;AACA,gBAAID,OAAJ,EAAa;AACTA,qBAAO,CAACtgD,KAAR,CAAc,IAAd,EAAoBmI,SAApB;AACH;AACJ;AACJ,SAPD;;AAQA,YAAIuS,GAAG,GAAGyI,IAAI,CAACq9B,cAAD,EAAiBC,cAAjB,CAAd;;AACA,YAAI/lC,GAAG,IAAI,OAAOA,GAAG,CAACgmC,IAAX,KAAoB,UAA/B,EAA2C;AACvChmC,aAAG,CAACgmC,IAAJ,CAASF,cAAT,EAAyBC,cAAzB;AACH;AACJ;;AAED,UAAIE,KAAK;AAAG;AAAe,kBAAY;AACnC,iBAASA,KAAT,GAAiB,CAChB,CAFkC,CAGnC;;;AACAA,aAAK,CAACC,OAAN,GAAgB,UAAUC,SAAV,EAAqB;AACjC,eAAKC,UAAL,CAAgBD,SAAS,CAACnnD,SAA1B;AACH,SAFD,CAJmC,CAOnC;;;AACAinD,aAAK,CAACG,UAAN,GAAmB,UAAUC,OAAV,EAAmB;AAClC,cAAIhnD,KAAK,GAAG,IAAZ;;AACAd,gBAAM,CAAC+nD,mBAAP,CAA2B,KAAKtnD,SAAhC,EAA2CoM,OAA3C,CAAmD,UAAUnC,IAAV,EAAgB;AAC/D,gBAAI,CAACo9C,OAAO,CAACp9C,IAAD,CAAZ,EAAoB;AAAE;AAClBo9C,qBAAO,CAACp9C,IAAD,CAAP,GAAgB5J,KAAK,CAACL,SAAN,CAAgBiK,IAAhB,CAAhB;AACH;AACJ,WAJD;AAKH,SAPD;AAQA;;;;;;AAIAg9C,aAAK,CAACM,OAAN,GAAgB,UAAUJ,SAAV,EAAqB;AACjC,cAAI9mD,KAAK,GAAG,IAAZ;;AACAd,gBAAM,CAAC+nD,mBAAP,CAA2B,KAAKtnD,SAAhC,EAA2CoM,OAA3C,CAAmD,UAAUnC,IAAV,EAAgB;AAC/Dk9C,qBAAS,CAACnnD,SAAV,CAAoBiK,IAApB,IAA4B5J,KAAK,CAACL,SAAN,CAAgBiK,IAAhB,CAA5B;AACH,WAFD;AAGH,SALD;;AAMA,eAAOg9C,KAAP;AACH,OA3B0B,EAA3B;AA6BA;;;;;;;;;;;;;;;AAaA,UAAIO,YAAY;AAAG;AAAe,gBAAUrnD,MAAV,EAAkB;AAChDN,iBAAS,CAAC2nD,YAAD,EAAernD,MAAf,CAAT;;AACA,iBAASqnD,YAAT,GAAwB;AACpB,iBAAOrnD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACD+4C,oBAAY,CAACxnD,SAAb,CAAuBkb,EAAvB,GAA4B,UAAUpS,IAAV,EAAgBm0B,OAAhB,EAAyB;AACjDwqB,mBAAS,CAAC,KAAKC,SAAL,KAAmB,KAAKA,SAAL,GAAiB,EAApC,CAAD,EAA0C5+C,IAA1C,EAAgDm0B,OAAhD,CAAT;AACA,iBAAO,IAAP,CAFiD,CAEpC;AAChB,SAHD,CALgD,CAShD;;;AACAuqB,oBAAY,CAACxnD,SAAb,CAAuB2nD,GAAvB,GAA6B,UAAU7+C,IAAV,EAAgBm0B,OAAhB,EAAyB;AAClDwqB,mBAAS,CAAC,KAAKG,YAAL,KAAsB,KAAKA,YAAL,GAAoB,EAA1C,CAAD,EAAgD9+C,IAAhD,EAAsDm0B,OAAtD,CAAT;AACA,iBAAO,IAAP,CAFkD,CAErC;AAChB,SAHD;;AAIAuqB,oBAAY,CAACxnD,SAAb,CAAuB2mB,GAAvB,GAA6B,UAAU7d,IAAV,EAAgBm0B,OAAhB,EAAyB;AAClD,cAAI,KAAKyqB,SAAT,EAAoB;AAChBG,0BAAc,CAAC,KAAKH,SAAN,EAAiB5+C,IAAjB,EAAuBm0B,OAAvB,CAAd;AACH;;AACD,cAAI,KAAK2qB,YAAT,EAAuB;AACnBC,0BAAc,CAAC,KAAKD,YAAN,EAAoB9+C,IAApB,EAA0Bm0B,OAA1B,CAAd;AACH;;AACD,iBAAO,IAAP,CAPkD,CAOrC;AAChB,SARD;;AASAuqB,oBAAY,CAACxnD,SAAb,CAAuBgQ,OAAvB,GAAiC,UAAUlH,IAAV,EAAgB;AAC7C,cAAI+rB,IAAI,GAAG,EAAX;;AACA,eAAK,IAAI5vB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1C4vB,gBAAI,CAAC5vB,EAAE,GAAG,CAAN,CAAJ,GAAewJ,SAAS,CAACxJ,EAAD,CAAxB;AACH;;AACD,eAAK6iD,WAAL,CAAiBh/C,IAAjB,EAAuB,IAAvB,EAA6B+rB,IAA7B;AACA,iBAAO,IAAP,CAN6C,CAMhC;AAChB,SAPD;;AAQA2yB,oBAAY,CAACxnD,SAAb,CAAuB8nD,WAAvB,GAAqC,UAAUh/C,IAAV,EAAgB9H,OAAhB,EAAyB6zB,IAAzB,EAA+B;AAChE,cAAI,KAAK6yB,SAAT,EAAoB;AAChB1gB,oBAAQ,CAAC,KAAK0gB,SAAL,CAAe5+C,IAAf,CAAD,EAAuB9H,OAAvB,EAAgC6zB,IAAhC,CAAR;AACH;;AACD,cAAI,KAAK+yB,YAAT,EAAuB;AACnB5gB,oBAAQ,CAAC,KAAK4gB,YAAL,CAAkB9+C,IAAlB,CAAD,EAA0B9H,OAA1B,EAAmC6zB,IAAnC,CAAR;AACA,mBAAO,KAAK+yB,YAAL,CAAkB9+C,IAAlB,CAAP,CAFmB,CAEa;AACnC;;AACD,iBAAO,IAAP,CARgE,CAQnD;AAChB,SATD;;AAUA0+C,oBAAY,CAACxnD,SAAb,CAAuB+nD,WAAvB,GAAqC,UAAUj/C,IAAV,EAAgB;AACjD,iBAAQ,KAAK4+C,SAAL,IAAkB,KAAKA,SAAL,CAAe5+C,IAAf,CAAlB,IAA0C,KAAK4+C,SAAL,CAAe5+C,IAAf,EAAqBrI,MAAhE,IACF,KAAKmnD,YAAL,IAAqB,KAAKA,YAAL,CAAkB9+C,IAAlB,CAArB,IAAgD,KAAK8+C,YAAL,CAAkB9+C,IAAlB,EAAwBrI,MAD7E;AAEH,SAHD;;AAIA,eAAO+mD,YAAP;AACH,OA9CiC,CA8ChCP,KA9CgC,CAAlC;;AA+CA,eAASQ,SAAT,CAAmBrd,IAAnB,EAAyBthC,IAAzB,EAA+Bm0B,OAA/B,EAAwC;AACpC,SAACmN,IAAI,CAACthC,IAAD,CAAJ,KAAeshC,IAAI,CAACthC,IAAD,CAAJ,GAAa,EAA5B,CAAD,EACKrG,IADL,CACUw6B,OADV;AAEH;;AACD,eAAS4qB,cAAT,CAAwBzd,IAAxB,EAA8BthC,IAA9B,EAAoCm0B,OAApC,EAA6C;AACzC,YAAIA,OAAJ,EAAa;AACT,cAAImN,IAAI,CAACthC,IAAD,CAAR,EAAgB;AACZshC,gBAAI,CAACthC,IAAD,CAAJ,GAAashC,IAAI,CAACthC,IAAD,CAAJ,CAAWmE,MAAX,CAAkB,UAAUwc,IAAV,EAAgB;AAC3C,qBAAOA,IAAI,KAAKwT,OAAhB;AACH,aAFY,CAAb;AAGH;AACJ,SAND,MAOK;AACD,iBAAOmN,IAAI,CAACthC,IAAD,CAAX,CADC,CACkB;AACtB;AACJ;AAED;;;;;;;AAKA,UAAIk/C,aAAa;AAAG;AAAe,kBAAY;AAC3C,iBAASA,aAAT,CAAuBC,QAAvB,EAAiCtuC,GAAjC,EAAsCuuC,YAAtC,EAAoDC,UAApD,EAAgE;AAC5D,eAAKF,QAAL,GAAgBA,QAAhB;AACA,eAAKtuC,GAAL,GAAWA,GAAX;AACA,eAAKuuC,YAAL,GAAoBA,YAApB;AACA,eAAKC,UAAL,GAAkBA,UAAlB;AACH,SAN0C,CAO3C;AACA;;;AACAH,qBAAa,CAAChoD,SAAd,CAAwBooD,KAAxB,GAAgC,YAAY;AACxC,cAAIH,QAAQ,GAAG,KAAKA,QAApB;AACA,cAAII,gBAAgB,GAAG,KAAKA,gBAAL,GACnBJ,QAAQ,CAAC30C,qBAAT,EADJ,CAFwC,CAGF;;AACtC,cAAI,KAAK40C,YAAT,EAAuB;AACnB,iBAAKI,kBAAL,CAAwBD,gBAAgB,CAAC/zC,IAAzC;AACH;;AACD,cAAI,KAAK6zC,UAAT,EAAqB;AACjB,iBAAKI,gBAAL,CAAsBF,gBAAgB,CAAC9zC,GAAvC;AACH;AACJ,SAVD,CAT2C,CAoB3C;;;AACAyzC,qBAAa,CAAChoD,SAAd,CAAwBsoD,kBAAxB,GAA6C,UAAUE,gBAAV,EAA4B;AACrE,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,MAAM,GAAG,EAAb;;AACA,eAAK,IAAIzjD,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAK4Y,GAA3B,EAAgC1U,EAAE,GAAGlE,EAAE,CAACN,MAAxC,EAAgDwE,EAAE,EAAlD,EAAsD;AAClD,gBAAId,EAAE,GAAGpD,EAAE,CAACkE,EAAD,CAAX;AACA,gBAAI+T,IAAI,GAAG7U,EAAE,CAACmP,qBAAH,EAAX;AACAm1C,iBAAK,CAAChmD,IAAN,CAAWuW,IAAI,CAAC1E,IAAL,GAAYk0C,gBAAvB;AACAE,kBAAM,CAACjmD,IAAP,CAAYuW,IAAI,CAAClE,KAAL,GAAa0zC,gBAAzB;AACH;;AACD,eAAKC,KAAL,GAAaA,KAAb;AACA,eAAKC,MAAL,GAAcA,MAAd;AACH,SAXD,CArB2C,CAiC3C;;;AACAV,qBAAa,CAAChoD,SAAd,CAAwBuoD,gBAAxB,GAA2C,UAAUI,eAAV,EAA2B;AAClE,cAAIC,IAAI,GAAG,EAAX;AACA,cAAIC,OAAO,GAAG,EAAd;;AACA,eAAK,IAAI5jD,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAK4Y,GAA3B,EAAgC1U,EAAE,GAAGlE,EAAE,CAACN,MAAxC,EAAgDwE,EAAE,EAAlD,EAAsD;AAClD,gBAAId,EAAE,GAAGpD,EAAE,CAACkE,EAAD,CAAX;AACA,gBAAI+T,IAAI,GAAG7U,EAAE,CAACmP,qBAAH,EAAX;AACAs1C,gBAAI,CAACnmD,IAAL,CAAUuW,IAAI,CAACzE,GAAL,GAAWo0C,eAArB;AACAE,mBAAO,CAACpmD,IAAR,CAAauW,IAAI,CAAChE,MAAL,GAAc2zC,eAA3B;AACH;;AACD,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKC,OAAL,GAAeA,OAAf;AACH,SAXD,CAlC2C,CA8C3C;AACA;;;AACAb,qBAAa,CAAChoD,SAAd,CAAwB8oD,WAAxB,GAAsC,UAAUC,YAAV,EAAwB;AAC1D,cAAIN,KAAK,GAAG,KAAKA,KAAjB;AACA,cAAIC,MAAM,GAAG,KAAKA,MAAlB;AACA,cAAI5hB,GAAG,GAAG2hB,KAAK,CAAChoD,MAAhB;AACA,cAAI0G,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2/B,GAAhB,EAAqB3/B,CAAC,EAAtB,EAA0B;AACtB,gBAAI4hD,YAAY,IAAIN,KAAK,CAACthD,CAAD,CAArB,IAA4B4hD,YAAY,GAAGL,MAAM,CAACvhD,CAAD,CAArD,EAA0D;AACtD,qBAAOA,CAAP;AACH;AACJ;AACJ,SAVD,CAhD2C,CA2D3C;AACA;;;AACA6gD,qBAAa,CAAChoD,SAAd,CAAwBgpD,UAAxB,GAAqC,UAAUC,WAAV,EAAuB;AACxD,cAAIL,IAAI,GAAG,KAAKA,IAAhB;AACA,cAAIC,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAI/hB,GAAG,GAAG8hB,IAAI,CAACnoD,MAAf;AACA,cAAI0G,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2/B,GAAhB,EAAqB3/B,CAAC,EAAtB,EAA0B;AACtB,gBAAI8hD,WAAW,IAAIL,IAAI,CAACzhD,CAAD,CAAnB,IAA0B8hD,WAAW,GAAGJ,OAAO,CAAC1hD,CAAD,CAAnD,EAAwD;AACpD,qBAAOA,CAAP;AACH;AACJ;AACJ,SAVD,CA7D2C,CAwE3C;;;AACA6gD,qBAAa,CAAChoD,SAAd,CAAwBkpD,QAAxB,GAAmC,UAAUC,SAAV,EAAqB;AACpD,iBAAO,KAAKT,MAAL,CAAYS,SAAZ,IAAyB,KAAKV,KAAL,CAAWU,SAAX,CAAhC;AACH,SAFD,CAzE2C,CA4E3C;;;AACAnB,qBAAa,CAAChoD,SAAd,CAAwBopD,SAAxB,GAAoC,UAAUC,QAAV,EAAoB;AACpD,iBAAO,KAAKR,OAAL,CAAaQ,QAAb,IAAyB,KAAKT,IAAL,CAAUS,QAAV,CAAhC;AACH,SAFD;;AAGA,eAAOrB,aAAP;AACH,OAjFkC,EAAnC;AAmFA;;;;;;;AAKA,UAAIsB,gBAAgB;AAAG;AAAe,kBAAY;AAC9C,iBAASA,gBAAT,GAA4B,CAC3B;;AACDA,wBAAgB,CAACtpD,SAAjB,CAA2B0W,eAA3B,GAA6C,YAAY;AACrD,iBAAO,KAAKX,eAAL,KAAyB,KAAKI,eAAL,EAAhC;AACH,SAFD;;AAGAmzC,wBAAgB,CAACtpD,SAAjB,CAA2B4W,gBAA3B,GAA8C,YAAY;AACtD,iBAAO,KAAKf,cAAL,KAAwB,KAAKI,cAAL,EAA/B;AACH,SAFD;;AAGAqzC,wBAAgB,CAACtpD,SAAjB,CAA2BupD,mBAA3B,GAAiD,YAAY;AACzD,iBAAO,KAAK7yC,eAAL,KAAyB,CAAhC;AACH,SAFD;;AAGA4yC,wBAAgB,CAACtpD,SAAjB,CAA2BwpD,qBAA3B,GAAmD,YAAY;AAC3D,iBAAO,KAAK5yC,gBAAL,KAA0B,CAAjC;AACH,SAFD;;AAGA0yC,wBAAgB,CAACtpD,SAAjB,CAA2BqZ,WAA3B,GAAyC,YAAY;AACjD,iBAAO,KAAK/D,YAAL,KAAsB,CAA7B;AACH,SAFD;;AAGAg0C,wBAAgB,CAACtpD,SAAjB,CAA2BsZ,aAA3B,GAA2C,YAAY;AACnD,iBAAO,KAAKhE,YAAL,KAAsB,KAAKoB,eAAL,EAA7B;AACH,SAFD;;AAGA4yC,wBAAgB,CAACtpD,SAAjB,CAA2BuZ,aAA3B,GAA2C,YAAY;AACnD,iBAAO,KAAK/D,aAAL,KAAuB,CAA9B;AACH,SAFD;;AAGA8zC,wBAAgB,CAACtpD,SAAjB,CAA2BwZ,cAA3B,GAA4C,YAAY;AACpD,iBAAO,KAAKhE,aAAL,KAAuB,KAAKoB,gBAAL,EAA9B;AACH,SAFD;;AAGA,eAAO0yC,gBAAP;AACH,OA5BqC,EAAtC;;AA6BA,UAAIG,uBAAuB;AAAG;AAAe,gBAAUtpD,MAAV,EAAkB;AAC3DN,iBAAS,CAAC4pD,uBAAD,EAA0BtpD,MAA1B,CAAT;;AACA,iBAASspD,uBAAT,CAAiCtlD,EAAjC,EAAqC;AACjC,cAAI9D,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAAC8D,EAAN,GAAWA,EAAX;AACA,iBAAO9D,KAAP;AACH;;AACDopD,+BAAuB,CAACzpD,SAAxB,CAAkCsV,YAAlC,GAAiD,YAAY;AACzD,iBAAO,KAAKnR,EAAL,CAAQkR,SAAf;AACH,SAFD;;AAGAo0C,+BAAuB,CAACzpD,SAAxB,CAAkCwV,aAAlC,GAAkD,YAAY;AAC1D,iBAAO,KAAKrR,EAAL,CAAQoR,UAAf;AACH,SAFD;;AAGAk0C,+BAAuB,CAACzpD,SAAxB,CAAkCuW,YAAlC,GAAiD,UAAUhC,GAAV,EAAe;AAC5D,eAAKpQ,EAAL,CAAQkR,SAAR,GAAoBd,GAApB;AACH,SAFD;;AAGAk1C,+BAAuB,CAACzpD,SAAxB,CAAkC2W,aAAlC,GAAkD,UAAUrC,IAAV,EAAgB;AAC9D,eAAKnQ,EAAL,CAAQoR,UAAR,GAAqBjB,IAArB;AACH,SAFD;;AAGAm1C,+BAAuB,CAACzpD,SAAxB,CAAkC6V,cAAlC,GAAmD,YAAY;AAC3D,iBAAO,KAAK1R,EAAL,CAAQyR,WAAf;AACH,SAFD;;AAGA6zC,+BAAuB,CAACzpD,SAAxB,CAAkC+V,eAAlC,GAAoD,YAAY;AAC5D,iBAAO,KAAK5R,EAAL,CAAQ2R,YAAf;AACH,SAFD;;AAGA2zC,+BAAuB,CAACzpD,SAAxB,CAAkCmW,eAAlC,GAAoD,YAAY;AAC5D,iBAAO,KAAKhS,EAAL,CAAQ+R,YAAf;AACH,SAFD;;AAGAuzC,+BAAuB,CAACzpD,SAAxB,CAAkCiW,cAAlC,GAAmD,YAAY;AAC3D,iBAAO,KAAK9R,EAAL,CAAQ6R,WAAf;AACH,SAFD;;AAGA,eAAOyzC,uBAAP;AACH,OAhC4C,CAgC3CH,gBAhC2C,CAA7C;;AAiCA,UAAII,sBAAsB;AAAG;AAAe,gBAAUvpD,MAAV,EAAkB;AAC1DN,iBAAS,CAAC6pD,sBAAD,EAAyBvpD,MAAzB,CAAT;;AACA,iBAASupD,sBAAT,GAAkC;AAC9B,iBAAOvpD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDi7C,8BAAsB,CAAC1pD,SAAvB,CAAiCsV,YAAjC,GAAgD,YAAY;AACxD,iBAAOxE,MAAM,CAACS,WAAd;AACH,SAFD;;AAGAm4C,8BAAsB,CAAC1pD,SAAvB,CAAiCwV,aAAjC,GAAiD,YAAY;AACzD,iBAAO1E,MAAM,CAACK,WAAd;AACH,SAFD;;AAGAu4C,8BAAsB,CAAC1pD,SAAvB,CAAiCuW,YAAjC,GAAgD,UAAU/H,CAAV,EAAa;AACzDsC,gBAAM,CAAC64C,MAAP,CAAc74C,MAAM,CAACK,WAArB,EAAkC3C,CAAlC;AACH,SAFD;;AAGAk7C,8BAAsB,CAAC1pD,SAAvB,CAAiC2W,aAAjC,GAAiD,UAAUnI,CAAV,EAAa;AAC1DsC,gBAAM,CAAC64C,MAAP,CAAcn7C,CAAd,EAAiBsC,MAAM,CAACS,WAAxB;AACH,SAFD;;AAGAm4C,8BAAsB,CAAC1pD,SAAvB,CAAiC6V,cAAjC,GAAkD,YAAY;AAC1D,iBAAO3F,QAAQ,CAAC4nB,eAAT,CAAyBliB,WAAhC;AACH,SAFD;;AAGA8zC,8BAAsB,CAAC1pD,SAAvB,CAAiC+V,eAAjC,GAAmD,YAAY;AAC3D,iBAAO7F,QAAQ,CAAC4nB,eAAT,CAAyBhiB,YAAhC;AACH,SAFD;;AAGA4zC,8BAAsB,CAAC1pD,SAAvB,CAAiCmW,eAAjC,GAAmD,YAAY;AAC3D,iBAAOjG,QAAQ,CAAC4nB,eAAT,CAAyB5hB,YAAhC;AACH,SAFD;;AAGAwzC,8BAAsB,CAAC1pD,SAAvB,CAAiCiW,cAAjC,GAAkD,YAAY;AAC1D,iBAAO/F,QAAQ,CAAC4nB,eAAT,CAAyB9hB,WAAhC;AACH,SAFD;;AAGA,eAAO0zC,sBAAP;AACH,OA9B2C,CA8B1CJ,gBA9B0C,CAA5C;AAgCA;;;;;AAGA,UAAIM,eAAe;AAAG;AAAe,gBAAUzpD,MAAV,EAAkB;AACnDN,iBAAS,CAAC+pD,eAAD,EAAkBzpD,MAAlB,CAAT;;AACA,iBAASypD,eAAT,CAAyBjtB,SAAzB,EAAoCD,SAApC,EAA+C;AAC3C,cAAIr8B,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBq1B,aAAa,CAAC,KAAD,EAAQ;AAC/C7tB,qBAAS,EAAE;AADoC,WAAR,CAA/B,KAEL,IAFP;;AAGAzH,eAAK,CAACs8B,SAAN,GAAkBA,SAAlB;AACAt8B,eAAK,CAACq8B,SAAN,GAAkBA,SAAlB;;AACAr8B,eAAK,CAACwpD,aAAN;;AACA,iBAAOxpD,KAAP;AACH,SAVkD,CAWnD;;;AACAupD,uBAAe,CAAC5pD,SAAhB,CAA0B6F,KAA1B,GAAkC,YAAY;AAC1C,eAAKC,SAAL,CAAe,MAAf;AACA,eAAK+jD,aAAL;AACH,SAHD;;AAIAD,uBAAe,CAAC5pD,SAAhB,CAA0B2E,OAA1B,GAAoC,YAAY;AAC5C2yB,uBAAa,CAAC,KAAKnzB,EAAN,CAAb;AACH,SAFD,CAhBmD,CAmBnD;AACA;;;AACAylD,uBAAe,CAAC5pD,SAAhB,CAA0B6pD,aAA1B,GAA0C,YAAY;AAClD9zB,oBAAU,CAAC,KAAK5xB,EAAN,EAAU;AAChBw4B,qBAAS,EAAE,KAAKA,SADA;AAEhBD,qBAAS,EAAE,KAAKA;AAFA,WAAV,CAAV;AAIH,SALD,CArBmD,CA2BnD;AACA;AACA;;;AACAktB,uBAAe,CAAC5pD,SAAhB,CAA0B8pD,YAA1B,GAAyC,UAAUnmB,eAAV,EAA2B;AAChE,cAAIhH,SAAS,GAAG,KAAKA,SAArB;AACA,cAAID,SAAS,GAAG,KAAKA,SAArB;AACAiH,yBAAe,GAAGA,eAAe,IAAI,KAAKomB,kBAAL,EAArC;;AACA,cAAIptB,SAAS,KAAK,MAAlB,EAA0B;AACtBA,qBAAS,GAAIgH,eAAe,CAAC3uB,MAAhB,IAA0B;AACnC,iBAAKw0C,qBAAL,EADQ,CACqB;AADrB,cAER,QAFQ,GAEG,QAFf;AAGH;;AACD,cAAI9sB,SAAS,KAAK,MAAlB,EAA0B;AACtBA,qBAAS,GAAIiH,eAAe,CAACrvB,IAAhB,IAAwBqvB,eAAe,CAAC7uB,KAAxC,IAAiD;AAC1D,iBAAKy0C,mBAAL,EADQ,CACmB;AADnB,cAER,QAFQ,GAEG,QAFf;AAGH;;AACDxzB,oBAAU,CAAC,KAAK5xB,EAAN,EAAU;AAAEw4B,qBAAS,EAAEA,SAAb;AAAwBD,qBAAS,EAAEA;AAAnC,WAAV,CAAV;AACH,SAfD;;AAgBAktB,uBAAe,CAAC5pD,SAAhB,CAA0B8F,SAA1B,GAAsC,UAAUiP,MAAV,EAAkB;AACpDikB,wBAAc,CAAC,KAAK70B,EAAN,EAAU,QAAV,EAAoB4Q,MAApB,CAAd;AACH,SAFD;;AAGA60C,uBAAe,CAAC5pD,SAAhB,CAA0B+pD,kBAA1B,GAA+C,YAAY;AACvD,cAAI7tB,KAAK,GAAG3B,YAAY,CAAC,KAAKp2B,EAAN,CAAxB;AACA,iBAAO;AACHmQ,gBAAI,EAAE4nB,KAAK,CAACV,aADT;AAEH1mB,iBAAK,EAAEonB,KAAK,CAACT,cAFV;AAGHzmB,kBAAM,EAAEknB,KAAK,CAACZ;AAHX,WAAP;AAKH,SAPD;;AAQA,eAAOsuB,eAAP;AACH,OA1DoC,CA0DnCH,uBA1DmC,CAArC;;AA4DA,UAAIO,KAAK;AAAG;AAAe,kBAAY;AACnC,iBAASA,KAAT,CAAeC,eAAf,EAAgC;AAC5B,eAAKA,eAAL,GAAuBA,eAAvB;AACA,eAAKC,mBAAL;AACH;;AACDF,aAAK,CAAChqD,SAAN,CAAgBkqD,mBAAhB,GAAsC,YAAY;AAC9C,cAAI,KAAKC,kBAAT,EAA6B;AACzB,iBAAKC,eAAL,CAAqB,KAAKH,eAAL,CAAqB,KAAKE,kBAA1B,CAArB;AACH;AACJ,SAJD;;AAKAH,aAAK,CAAChqD,SAAN,CAAgBoqD,eAAhB,GAAkC,UAAUC,gBAAV,EAA4B;AAC1D,cAAIC,eAAJ;AACA,cAAIC,UAAJ;;AACA,cAAI,OAAOF,gBAAP,KAA4B,QAA5B,IAAwCA,gBAA5C,EAA8D;AAAE;AAC5DC,2BAAe,GAAGj8C,QAAQ,CAAC,EAAD,EAAK,KAAKm8C,WAAV,CAA1B;;AACA,iBAAKD,UAAL,IAAmBF,gBAAnB,EAAqC;AACjCC,6BAAe,CAACC,UAAD,CAAf,GAA8B,KAAKE,uBAAL,CAA6BJ,gBAAgB,CAACE,UAAD,CAA7C,CAA9B;AACH;;AACD,iBAAKC,WAAL,GAAmBF,eAAnB;AACH,WAND,MAOK,IAAID,gBAAgB,KAAK,KAAzB,EAAgC;AACjC,iBAAKG,WAAL,GAAmB,EAAnB;AACH;AACJ,SAbD;;AAcAR,aAAK,CAAChqD,SAAN,CAAgByqD,uBAAhB,GAA0C,UAAU3iD,SAAV,EAAqB;AAC3D,cAAIsgB,MAAM,GAAG,KAAKsiC,kBAAlB;;AACA,cAAItiC,MAAM,IAAItgB,SAAS,CAACorC,OAAV,CAAkB9qB,MAAlB,MAA8B,CAA5C,EAA+C;AAAE;AAC7CtgB,qBAAS,GAAGsgB,MAAM,GAAGtgB,SAArB;AACH;;AACD,iBAAOA,SAAP;AACH,SAND;;AAOAkiD,aAAK,CAAChqD,SAAN,CAAgB4C,QAAhB,GAA2B,UAAU+mB,GAAV,EAAe;AACtC,iBAAO,KAAKhoB,OAAL,CAAagoB,GAAb,KAAqB,EAA5B;AACH,SAFD;;AAGAqgC,aAAK,CAAChqD,SAAN,CAAgB2qD,YAAhB,GAA+B,UAAUJ,UAAV,EAAsB;AACjD,cAAIziD,SAAS,GAAG,KAAK0iD,WAAL,CAAiBD,UAAjB,CAAhB;;AACA,cAAIziD,SAAJ,EAAe;AACX,mBAAO,KAAK8iD,aAAL,GAAqB,GAArB,GAA2B9iD,SAAlC;AACH;;AACD,iBAAO,EAAP;AACH,SAND;;AAOAkiD,aAAK,CAAChqD,SAAN,CAAgB6qD,wBAAhB,GAA2C,UAAUC,iBAAV,EAA6B;AACpE,cAAIhjD,SAAJ;;AACA,cAAI,KAAKijD,8BAAT,EAAyC;AACrCjjD,qBAAS,GAAGgjD,iBAAiB,CAAC,KAAKC,8BAAN,CAA7B;;AACA,gBAAIjjD,SAAJ,EAAe;AACX,qBAAO,KAAK8iD,aAAL,GAAqB,GAArB,GAA2B,KAAKH,uBAAL,CAA6B3iD,SAA7B,CAAlC;AACH;AACJ;;AACD,iBAAO,EAAP;AACH,SATD;;AAUA,eAAOkiD,KAAP;AACH,OApD0B,EAA3B;;AAqDAA,WAAK,CAAChqD,SAAN,CAAgB2B,OAAhB,GAA0B,EAA1B;AACAqoD,WAAK,CAAChqD,SAAN,CAAgBwqD,WAAhB,GAA8B,EAA9B;AACAR,WAAK,CAAChqD,SAAN,CAAgB4qD,aAAhB,GAAgC,EAAhC;AACAZ,WAAK,CAAChqD,SAAN,CAAgB0qD,kBAAhB,GAAqC,EAArC;AAEA,UAAIM,IAAI,GAAG,CAAX;;AACA,UAAIC,gBAAgB;AAAG;AAAe,kBAAY;AAC9C,iBAASA,gBAAT,CAA0BhnD,QAA1B,EAAoChD,KAApC,EAA2CuF,OAA3C,EAAoDtF,OAApD,EAA6D8d,IAA7D,EAAmE;AAC/D,eAAK/a,QAAL,GAAgBA,QAAhB;AACA,eAAKhD,KAAL,GAAaA,KAAb;AACA,eAAKuF,OAAL,GAAeA,OAAf;AACA,eAAKtF,OAAL,GAAeA,OAAf;AACA,eAAK8d,IAAL,GAAYA,IAAZ;AACA,eAAKuzB,KAAL,GAAarxC,OAAO,CAACssB,GAAR,KAAgB,KAA7B;AACA,eAAK09B,eAAL,GAAuBxlB,eAAe,CAACxkC,OAAO,CAAC4wB,UAAT,CAAtC;AACA,eAAK5rB,gBAAL,GAAwBu7B,cAAc,CAACvgC,OAAO,CAACgF,gBAAT,CAAtC;AACH;;AACD+kD,wBAAgB,CAACjrD,SAAjB,CAA2BmrD,MAA3B,GAAoC,UAAUjqD,OAAV,EAAmB8d,IAAnB,EAAyB;AACzD,iBAAO,IAAIisC,gBAAJ,CAAqB,KAAKhnD,QAA1B,EAAoC,KAAKhD,KAAzC,EAAgD,KAAKuF,OAArD,EAA8DtF,OAAO,IAAI,KAAKA,OAA9E,EAAuF8d,IAAI,IAAI,KAAKA,IAApG,CAAP;AACH,SAFD;;AAGA,eAAOisC,gBAAP;AACH,OAfqC,EAAtC;;AAgBA,UAAIG,SAAS;AAAG;AAAe,kBAAY;AACvC,iBAASA,SAAT,GAAqB;AACjB,eAAKC,YAAL,GAAoB,KAApB;AACA,eAAK5K,GAAL,GAAWpsB,MAAM,CAAC22B,IAAI,EAAL,CAAjB;AACH;;AACDI,iBAAS,CAACE,gBAAV,GAA6B,UAAUC,QAAV,EAAoB;AAC7C,eAAKvrD,SAAL,CAAewrD,aAAf,GAA+Bn9C,QAAQ,CAAC,EAAD,EAAK,KAAKrO,SAAL,CAAewrD,aAApB,EAAmCD,QAAnC,CAAvC;AACH,SAFD;;AAGAH,iBAAS,CAACprD,SAAV,CAAoByrD,YAApB,GAAmC,UAAUpnD,KAAV,EAAiBrD,OAAjB,EAA0B;AACzD,eAAK0qD,cAAL,CAAoB1qD,OAApB;;AACA,cAAID,EAAE,GAAG4qD,YAAY,CAAC,KAAKtnD,KAAL,IAAc,EAAf,EAAmBA,KAAnB,EAA0B,KAAKmnD,aAA/B,CAArB;AAAA,cAAoEI,UAAU,GAAG7qD,EAAE,CAAC6qD,UAApF;AAAA,cAAgGC,UAAU,GAAG9qD,EAAE,CAAC8qD,UAAhH;;AACA,eAAKxnD,KAAL,GAAawnD,UAAb;;AACA,cAAID,UAAJ,EAAgB;AACZ,gBAAI,KAAKP,YAAT,EAAuB;AACnB,mBAAKS,YAAL;AACH;;AACD,iBAAK1nD,MAAL,CAAYynD,UAAZ,EAAwB7qD,OAAxB;;AACA,gBAAI,KAAKqqD,YAAT,EAAuB;AACnB,mBAAKU,WAAL;AACH;AACJ;;AACD,eAAKV,YAAL,GAAoB,IAApB;AACH,SAdD;;AAeAD,iBAAS,CAACprD,SAAV,CAAoB0rD,cAApB,GAAqC,UAAU1qD,OAAV,EAAmB;AACpD,cAAIgrD,UAAU,GAAG,KAAKhrD,OAAtB;AACA,eAAKA,OAAL,GAAeA,OAAf;;AACA,cAAI,CAACgrD,UAAL,EAAiB;AACb,iBAAKhoD,YAAL,CAAkBhD,OAAlB;AACH;AACJ,SAND;;AAOAoqD,iBAAS,CAACprD,SAAV,CAAoBoE,MAApB,GAA6B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B,CACtD,CADD;;AAEAoqD,iBAAS,CAACprD,SAAV,CAAoBgE,YAApB,GAAmC,UAAUhD,OAAV,EAAmB,CACrD,CADD;;AAEAoqD,iBAAS,CAACprD,SAAV,CAAoB8rD,YAApB,GAAmC,YAAY,CAC9C,CADD;;AAEAV,iBAAS,CAACprD,SAAV,CAAoB+rD,WAApB,GAAkC,YAAY,CAC7C,CADD,CApCuC,CAsCvC;;;AACAX,iBAAS,CAACprD,SAAV,CAAoB2E,OAApB,GAA8B,YAAY,CACzC,CADD;;AAEA,eAAOymD,SAAP;AACH,OA1C8B,EAA/B;;AA2CAA,eAAS,CAACprD,SAAV,CAAoBwrD,aAApB,GAAoC,EAApC;AACA;;;;;AAIA,eAASG,YAAT,CAAsBM,QAAtB,EAAgC3P,QAAhC,EAA0CkP,aAA1C,EAAyD;AACrD,YAAIK,UAAU,GAAG,EAAjB,CADqD,CAChC;;AACrB,YAAID,UAAU,GAAG,KAAjB;;AACA,aAAK,IAAIjiC,GAAT,IAAgB2yB,QAAhB,EAA0B;AACtB,cAAI3yB,GAAG,IAAIsiC,QAAP,KAAoBA,QAAQ,CAACtiC,GAAD,CAAR,KAAkB2yB,QAAQ,CAAC3yB,GAAD,CAA1B,IACnB6hC,aAAa,CAAC7hC,GAAD,CAAb,IAAsB6hC,aAAa,CAAC7hC,GAAD,CAAb,CAAmBsiC,QAAQ,CAACtiC,GAAD,CAA3B,EAAkC2yB,QAAQ,CAAC3yB,GAAD,CAA1C,CADvB,CAAJ,EAC+E;AAC3E;AACAkiC,sBAAU,CAACliC,GAAD,CAAV,GAAkBsiC,QAAQ,CAACtiC,GAAD,CAA1B;AACH,WAJD,MAKK;AACDkiC,sBAAU,CAACliC,GAAD,CAAV,GAAkB2yB,QAAQ,CAAC3yB,GAAD,CAA1B;AACAiiC,sBAAU,GAAG,IAAb;AACH;AACJ;;AACD,aAAK,IAAIjiC,GAAT,IAAgBsiC,QAAhB,EAA0B;AACtB,cAAI,EAAEtiC,GAAG,IAAI2yB,QAAT,CAAJ,EAAwB;AACpBsP,sBAAU,GAAG,IAAb;AACA;AACH;AACJ;;AACD,eAAO;AAAEA,oBAAU,EAAEA,UAAd;AAA0BC,oBAAU,EAAEA;AAAtC,SAAP;AACH;AAED;;;;;;;AAKA,UAAIK,aAAa;AAAG;AAAe,gBAAU/rD,MAAV,EAAkB;AACjDN,iBAAS,CAACqsD,aAAD,EAAgB/rD,MAAhB,CAAT;;AACA,iBAAS+rD,aAAT,CAAuB/nD,EAAvB,EAA2B;AACvB,cAAI9D,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAAC8D,EAAN,GAAWA,EAAX;AACA,iBAAO9D,KAAP;AACH;;AACD6rD,qBAAa,CAAClsD,SAAd,CAAwB2E,OAAxB,GAAkC,YAAY;AAC1CxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACAg3B,uBAAa,CAAC,KAAKnzB,EAAN,CAAb;AACH,SAHD,CAPiD,CAWjD;AACA;;;AACA+nD,qBAAa,CAAClsD,SAAd,CAAwB8d,mBAAxB,GAA8C,YAAY,CACzD,CADD;;AAEAouC,qBAAa,CAAClsD,SAAd,CAAwBue,QAAxB,GAAmC,UAAUF,YAAV,EAAwBC,WAAxB,EAAqC6tC,OAArC,EAA8CC,QAA9C,EAAwD;AACvF,iBAAO,IAAP,CADuF,CAC1E;AAChB,SAFD,CAfiD,CAkBjD;AACA;;;AACAF,qBAAa,CAAClsD,SAAd,CAAwBijB,kBAAxB,GAA6C,UAAUX,WAAV,EAAuB;AAChE,cAAIre,QAAQ,GAAG,KAAKjD,OAAL,CAAaiD,QAA5B;AACA,cAAIK,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B,CAFgE,CAEtB;;AAC1C,cAAI0f,SAAS,GAAG1B,WAAW,CAACE,aAAZ,CAA0BwB,SAA1C;;AACA,cAAI1f,WAAJ,EAAiB;AAAE;AACf,iBAAK,IAAIod,UAAT,IAAuBsC,SAAvB,EAAkC;AAC9B,kBAAI,CAAC0pB,kBAAkB,CAACppC,WAAW,CAACgrB,UAAb,EAAyBtL,SAAS,CAACtC,UAAD,CAAT,CAAsBxf,KAA/C,CAAvB,EAA8E;AAC1E,uBAAO,KAAP;AACH;AACJ;AACJ;;AACD,iBAAO+gB,kBAAkB,CAACX,WAAD,EAAcre,QAAd,CAAzB;AACH,SAZD;;AAaAioD,qBAAa,CAAClsD,SAAd,CAAwBkgB,oBAAxB,GAA+C,UAAUE,SAAV,EAAqB;AAChE,cAAInc,QAAQ,GAAG,KAAKjD,OAAL,CAAaiD,QAA5B;AACA,cAAIK,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B,CAFgE,CAEtB;;AAC1C,cAAIA,WAAW,IAAI;AACf,WAACopC,kBAAkB,CAACppC,WAAW,CAACgrB,UAAb,EAAyBlP,SAAS,CAACle,KAAnC,CADvB,EACkE;AAC9D,mBAAO,KAAP;AACH;;AACD,iBAAOge,oBAAoB,CAACE,SAAD,EAAYnc,QAAZ,CAA3B;AACH,SARD,CAjCiD,CA0CjD;AACA;;;AACAioD,qBAAa,CAAClsD,SAAd,CAAwBiiB,gBAAxB,GAA2C,UAAU9d,EAAV,EAAc;AACrD,iBAAO,CAAC,KAAKE,KAAL,CAAWg4C,SAAZ,IAAyB;AAC5B,WAAC,KAAKh4C,KAAL,CAAW6mB,WADT,IACwB;AAC3B,WAACgN,cAAc,CAAC/zB,EAAD,EAAK,YAAL,CAFZ,KAGF,KAAKkoD,SAAL,MAAoB,CAAC,KAAKC,WAAL,CAAiBnoD,EAAjB,CAHnB,CAAP,CADqD,CAKrD;AACA;AACH,SAPD;;AAQA+nD,qBAAa,CAAClsD,SAAd,CAAwB+e,iBAAxB,GAA4C,UAAU5a,EAAV,EAAc;AACtD,cAAIooD,KAAK,GAAGr0B,cAAc,CAAC/zB,EAAD,EAAK,KAAK+D,aAAV,CAA1B;AACA,iBAAO,CAAC,CAACqkD,KAAD,IAAUA,KAAK,CAAC1nD,SAAN,CAAgBqd,QAAhB,CAAyB,WAAzB,CAAX,KACH,CAACgW,cAAc,CAAC/zB,EAAD,EAAK,UAAL,CADZ,IACgC;AACnC,WAAC+zB,cAAc,CAAC/zB,EAAD,EAAK,cAAL,CAFZ,IAEoC;AACvC,WAAC,KAAKmoD,WAAL,CAAiBnoD,EAAjB,CAHL;AAIH,SAND;;AAOA+nD,qBAAa,CAAClsD,SAAd,CAAwBqsD,SAAxB,GAAoC,YAAY;AAC5C,iBAAO,KAAKloD,EAAL,CAAQU,SAAR,CAAkBqd,QAAlB,CAA2B,YAA3B,CAAP;AACH,SAFD;;AAGAgqC,qBAAa,CAAClsD,SAAd,CAAwBssD,WAAxB,GAAsC,UAAUnoD,EAAV,EAAc;AAChD,iBAAOya,OAAO,CAACsZ,cAAc,CAAC/zB,EAAD,EAAK,aAAL,CAAf,CAAd;AACH,SAFD;;AAGA,eAAO+nD,aAAP;AACH,OAlEkC,CAkEjCd,SAlEiC,CAAnC;;AAmEAc,mBAAa,CAAClsD,SAAd,CAAwBkI,aAAxB,GAAwC,yBAAxC;AACAgkD,mBAAa,CAAClsD,SAAd,CAAwBwsD,aAAxB,GAAwC,kCAAxC;AAEA,UAAIC,KAAK,GAAG,CAAZ;;AACA,eAASC,YAAT,CAAsBpjC,KAAtB,EAA6B;AACzB,eAAO;AACHxe,YAAE,EAAEupB,MAAM,CAACo4B,KAAK,EAAN,CADP;AAEHE,cAAI,EAAErjC,KAAK,CAACqjC,IAAN,IAAc,EAFjB;AAGHC,kBAAQ,EAAEtjC,KAAK,CAACsjC,QAAN,IAAkB,EAHzB;AAIH1L,yBAAe,EAAE53B,KAAK,CAAC43B,eAAN,IAAyB,EAJvC;AAKH/G,iCAAuB,EAAE7wB,KAAK,CAAC6wB,uBAAN,IAAiC,EALvD;AAMHn3B,oCAA0B,EAAEsG,KAAK,CAACtG,0BAAN,IAAoC,EAN7D;AAOH23B,kCAAwB,EAAErxB,KAAK,CAACqxB,wBAAN,IAAkC,EAPzD;AAQH16B,mCAAyB,EAAEqJ,KAAK,CAACrJ,yBAAN,IAAmC,EAR3D;AASH4sC,6BAAmB,EAAEvjC,KAAK,CAACujC,mBAAN,IAA6B,EAT/C;AAUHC,4BAAkB,EAAExjC,KAAK,CAACwjC,kBAAN,IAA4B,EAV7C;AAWHvkD,eAAK,EAAE+gB,KAAK,CAAC/gB,KAAN,IAAe,EAXnB;AAYHwkD,+BAAqB,EAAEzjC,KAAK,CAACyjC,qBAAN,IAA+B,EAZnD;AAaHxQ,sBAAY,EAAEjzB,KAAK,CAACizB,YAAN,IAAsB,IAbjC;AAcH70B,+BAAqB,EAAE4B,KAAK,CAAC5B,qBAAN,IAA+B,EAdnD;AAeHlC,mCAAyB,EAAE8D,KAAK,CAAC9D,yBAAN,IAAmC,EAf3D;AAgBHwnC,gCAAsB,EAAE1jC,KAAK,CAAC0jC,sBAAN,IAAgC,EAhBrD;AAiBHvpC,+BAAqB,EAAE6F,KAAK,CAAC7F,qBAAN,IAA+B,EAjBnD;AAkBHyF,+BAAqB,EAAEI,KAAK,CAACJ,qBAAN,IAA+B,EAlBnD;AAmBHC,8BAAoB,EAAEG,KAAK,CAACH,oBAAN,IAA8B,EAnBjD;AAoBH8jC,sBAAY,EAAE3jC,KAAK,CAAC2jC,YAAN,IAAsB,EApBjC;AAqBHC,yBAAe,EAAE5jC,KAAK,CAAC4jC,eAAN,IAAyB,EArBvC;AAsBHx8B,sBAAY,EAAEpH,KAAK,CAACoH,YAtBjB;AAuBHqY,wBAAc,EAAEzf,KAAK,CAACyf,cAAN,IAAwB,EAvBrC;AAwBHokB,4BAAkB,EAAE7jC,KAAK,CAAC6jC,kBAxBvB;AAyBH3+B,qBAAW,EAAElF,KAAK,CAACkF,WAAN,IAAqB,EAzB/B;AA0BHpF,6BAAmB,EAAEE,KAAK,CAACF,mBA1BxB;AA2BHgkC,8BAAoB,EAAE9jC,KAAK,CAAC8jC,oBAAN,IAA8B;AA3BjD,SAAP;AA6BH;;AACD,UAAIC,YAAY;AAAG;AAAe,kBAAY;AAC1C,iBAASA,YAAT,GAAwB;AACpB,eAAKrtC,KAAL,GAAa;AACT4sC,oBAAQ,EAAE,EADD;AAET1L,2BAAe,EAAE,EAFR;AAGT/G,mCAAuB,EAAE,EAHhB;AAITn3B,sCAA0B,EAAE,EAJnB;AAKT23B,oCAAwB,EAAE,EALjB;AAMT16B,qCAAyB,EAAE,EANlB;AAOT4sC,+BAAmB,EAAE,EAPZ;AAQTC,8BAAkB,EAAE,EARX;AASTvkD,iBAAK,EAAE,EATE;AAUTwkD,iCAAqB,EAAE,EAVd;AAWTxQ,wBAAY,EAAE,IAXL;AAYT70B,iCAAqB,EAAE,EAZd;AAaTlC,qCAAyB,EAAE,EAblB;AAcTwnC,kCAAsB,EAAE,EAdf;AAeTvpC,iCAAqB,EAAE,EAfd;AAgBTyF,iCAAqB,EAAE,EAhBd;AAiBTC,gCAAoB,EAAE,EAjBb;AAkBT8jC,wBAAY,EAAE,EAlBL;AAmBTC,2BAAe,EAAE,EAnBR;AAoBTx8B,wBAAY,EAAE,IApBL;AAqBTqY,0BAAc,EAAE,EArBP;AAsBTokB,8BAAkB,EAAE,IAtBX;AAuBT3+B,uBAAW,EAAE,EAvBJ;AAwBTpF,+BAAmB,EAAE,IAxBZ;AAyBTgkC,gCAAoB,EAAE;AAzBb,WAAb;AA2BA,eAAKE,SAAL,GAAiB,EAAjB;AACH;;AACDD,oBAAY,CAACrtD,SAAb,CAAuB8E,GAAvB,GAA6B,UAAUyoD,MAAV,EAAkB;AAC3C,cAAI,CAAC,KAAKD,SAAL,CAAeC,MAAM,CAACziD,EAAtB,CAAL,EAAgC;AAC5B,iBAAKwiD,SAAL,CAAeC,MAAM,CAACziD,EAAtB,IAA4B,IAA5B;;AACA,iBAAK,IAAI7F,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGwsD,MAAM,CAACZ,IAA7B,EAAmC1nD,EAAE,GAAGlE,EAAE,CAACN,MAA3C,EAAmDwE,EAAE,EAArD,EAAyD;AACrD,kBAAIuoD,GAAG,GAAGzsD,EAAE,CAACkE,EAAD,CAAZ;AACA,mBAAKH,GAAL,CAAS0oD,GAAT;AACH;;AACD,iBAAKxtC,KAAL,GAAaytC,YAAY,CAAC,KAAKztC,KAAN,EAAautC,MAAb,CAAzB;AACH;AACJ,SATD;;AAUA,eAAOF,YAAP;AACH,OA1CiC,EAAlC;;AA2CA,eAASI,YAAT,CAAsBC,MAAtB,EAA8BC,MAA9B,EAAsC;AAClC,eAAO;AACHf,kBAAQ,EAAEc,MAAM,CAACd,QAAP,CAAgBhrD,MAAhB,CAAuB+rD,MAAM,CAACf,QAA9B,CADP;AAEH1L,yBAAe,EAAEwM,MAAM,CAACxM,eAAP,CAAuBt/C,MAAvB,CAA8B+rD,MAAM,CAACzM,eAArC,CAFd;AAGH/G,iCAAuB,EAAEuT,MAAM,CAACvT,uBAAP,CAA+Bv4C,MAA/B,CAAsC+rD,MAAM,CAACxT,uBAA7C,CAHtB;AAIHn3B,oCAA0B,EAAE0qC,MAAM,CAAC1qC,0BAAP,CAAkCphB,MAAlC,CAAyC+rD,MAAM,CAAC3qC,0BAAhD,CAJzB;AAKH23B,kCAAwB,EAAE+S,MAAM,CAAC/S,wBAAP,CAAgC/4C,MAAhC,CAAuC+rD,MAAM,CAAChT,wBAA9C,CALvB;AAMH16B,mCAAyB,EAAEytC,MAAM,CAACztC,yBAAP,CAAiCre,MAAjC,CAAwC+rD,MAAM,CAAC1tC,yBAA/C,CANxB;AAOH4sC,6BAAmB,EAAEa,MAAM,CAACb,mBAAP,CAA2BjrD,MAA3B,CAAkC+rD,MAAM,CAACd,mBAAzC,CAPlB;AAQHC,4BAAkB,EAAEY,MAAM,CAACZ,kBAAP,CAA0BlrD,MAA1B,CAAiC+rD,MAAM,CAACb,kBAAxC,CARjB;AASHvkD,eAAK,EAAE8F,QAAQ,CAAC,EAAD,EAAKq/C,MAAM,CAACnlD,KAAZ,EAAmBolD,MAAM,CAACplD,KAA1B,CATZ;AAUHwkD,+BAAqB,EAAEW,MAAM,CAACX,qBAAP,CAA6BnrD,MAA7B,CAAoC+rD,MAAM,CAACZ,qBAA3C,CAVpB;AAWHxQ,sBAAY,EAAEoR,MAAM,CAACpR,YAAP,IAAuBmR,MAAM,CAACnR,YAXzC;AAYH70B,+BAAqB,EAAEgmC,MAAM,CAAChmC,qBAAP,CAA6B9lB,MAA7B,CAAoC+rD,MAAM,CAACjmC,qBAA3C,CAZpB;AAaHlC,mCAAyB,EAAEkoC,MAAM,CAACloC,yBAAP,CAAiC5jB,MAAjC,CAAwC+rD,MAAM,CAACnoC,yBAA/C,CAbxB;AAcHwnC,gCAAsB,EAAEU,MAAM,CAACV,sBAAP,CAA8BprD,MAA9B,CAAqC+rD,MAAM,CAACX,sBAA5C,CAdrB;AAeHvpC,+BAAqB,EAAEiqC,MAAM,CAACjqC,qBAAP,CAA6B7hB,MAA7B,CAAoC+rD,MAAM,CAAClqC,qBAA3C,CAfpB;AAgBH0F,8BAAoB,EAAEukC,MAAM,CAACvkC,oBAAP,CAA4BvnB,MAA5B,CAAmC+rD,MAAM,CAACxkC,oBAA1C,CAhBnB;AAiBHD,+BAAqB,EAAEwkC,MAAM,CAACxkC,qBAAP,CAA6BtnB,MAA7B,CAAoC+rD,MAAM,CAACzkC,qBAA3C,CAjBpB;AAkBH+jC,sBAAY,EAAE5+C,QAAQ,CAAC,EAAD,EAAKq/C,MAAM,CAACT,YAAZ,EAA0BU,MAAM,CAACV,YAAjC,CAlBnB;AAmBHC,yBAAe,EAAEQ,MAAM,CAACR,eAAP,CAAuBtrD,MAAvB,CAA8B+rD,MAAM,CAACT,eAArC,CAnBd;AAoBHx8B,sBAAY,EAAEi9B,MAAM,CAACj9B,YAAP,IAAuBg9B,MAAM,CAACh9B,YApBzC;AAqBHqY,wBAAc,EAAE2kB,MAAM,CAAC3kB,cAAP,CAAsBnnC,MAAtB,CAA6B+rD,MAAM,CAAC5kB,cAApC,CArBb;AAsBHokB,4BAAkB,EAAEQ,MAAM,CAACR,kBAAP,IAA6BO,MAAM,CAACP,kBAtBrD;AAuBH3+B,qBAAW,EAAEk/B,MAAM,CAACl/B,WAAP,IAAsBm/B,MAAM,CAACn/B,WAvBvC;AAwBHpF,6BAAmB,EAAEskC,MAAM,CAACtkC,mBAAP,IAA8BukC,MAAM,CAACvkC,mBAxBvD;AAyBHgkC,8BAAoB,EAAE/+C,QAAQ,CAAC,EAAD,EAAKq/C,MAAM,CAACN,oBAAZ,EAAkCO,MAAM,CAACP,oBAAzC;AAzB3B,SAAP;AA2BH;;AAED,UAAIQ,cAAc,GAAG;AACjBC,mBAAW,EAAE,IADI;AAEjBC,iBAAS,EAAE,mBAAUlO,GAAV,EAAe;AACtB,cAAIlgD,KAAK,CAAC6pB,OAAN,CAAcq2B,GAAd,CAAJ,EAAwB;AAAE;AACtB,mBAAOA,GAAP;AACH,WAFD,MAGK,IAAIlgD,KAAK,CAAC6pB,OAAN,CAAcq2B,GAAG,CAACj1C,MAAlB,CAAJ,EAA+B;AAChC,mBAAOi1C,GAAG,CAACj1C,MAAX;AACH;;AACD,iBAAO,IAAP;AACH,SAVgB;AAWjBojD,aAAK,EAAE,eAAU3mC,GAAV,EAAeu/B,OAAf,EAAwB;AAC3BA,iBAAO,CAAC;AACJ/b,qBAAS,EAAExjB,GAAG,CAAC6kB,WAAJ,CAAgBoJ;AADvB,WAAD,CAAP;AAGH;AAfgB,OAArB;AAiBA,UAAI2Y,sBAAsB,GAAGtB,YAAY,CAAC;AACtCQ,uBAAe,EAAE,CAACU,cAAD;AADqB,OAAD,CAAzC;AAIA,UAAIK,gBAAgB,GAAG;AACnBH,iBAAS,EAAE,mBAAUlO,GAAV,EAAe;AACtB,cAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B;AAAE;AAC7B,mBAAOA,GAAP;AACH,WAFD,MAGK,IAAI,OAAOA,GAAG,CAACj1C,MAAX,KAAsB,UAA1B,EAAsC;AACvC,mBAAOi1C,GAAG,CAACj1C,MAAX;AACH;;AACD,iBAAO,IAAP;AACH,SATkB;AAUnBojD,aAAK,EAAE,eAAU3mC,GAAV,EAAeu/B,OAAf,EAAwBC,OAAxB,EAAiC;AACpC,cAAIpgD,OAAO,GAAG4gB,GAAG,CAACnjB,QAAJ,CAAauC,OAA3B;AACA,cAAIijB,IAAI,GAAGrC,GAAG,CAAC6kB,WAAJ,CAAgBoJ,IAA3B;AACAqR,qBAAW,CAACj9B,IAAI,CAAC3lB,IAAL,CAAU,IAAV,EAAgB;AACxBzB,iBAAK,EAAEmE,OAAO,CAAC6wC,MAAR,CAAejwB,GAAG,CAACllB,KAAJ,CAAUG,KAAzB,CADiB;AAExBC,eAAG,EAAEkE,OAAO,CAAC6wC,MAAR,CAAejwB,GAAG,CAACllB,KAAJ,CAAUI,GAAzB,CAFmB;AAGxB4rD,oBAAQ,EAAE1nD,OAAO,CAACuB,SAAR,CAAkBqf,GAAG,CAACllB,KAAJ,CAAUG,KAA5B,CAHc;AAIxB8rD,kBAAM,EAAE3nD,OAAO,CAACuB,SAAR,CAAkBqf,GAAG,CAACllB,KAAJ,CAAUI,GAA5B,CAJgB;AAKxBisB,oBAAQ,EAAE/nB,OAAO,CAAC+nB;AALM,WAAhB,CAAD,EAMP,UAAUqc,SAAV,EAAqB;AACrB+b,mBAAO,CAAC;AAAE/b,uBAAS,EAAEA;AAAb,aAAD,CAAP,CADqB,CACc;AACtC,WARU,EAQRgc,OARQ,CAQA;AARA,WAAX;AAUH;AAvBkB,OAAvB;AAyBA,UAAIwH,qBAAqB,GAAG1B,YAAY,CAAC;AACrCQ,uBAAe,EAAE,CAACe,gBAAD;AADoB,OAAD,CAAxC;;AAIA,eAASI,WAAT,CAAqBC,MAArB,EAA6B5sD,GAA7B,EAAkC6sD,MAAlC,EAA0CC,eAA1C,EAA2DC,eAA3D,EAA4E;AACxEH,cAAM,GAAGA,MAAM,CAAC1nB,WAAP,EAAT;AACA,YAAIzzB,IAAI,GAAG,IAAX;;AACA,YAAIm7C,MAAM,KAAK,KAAf,EAAsB;AAClB5sD,aAAG,GAAGgtD,uBAAuB,CAAChtD,GAAD,EAAM6sD,MAAN,CAA7B;AACH,SAFD,MAGK;AACDp7C,cAAI,GAAGw7C,YAAY,CAACJ,MAAD,CAAnB;AACH;;AACD,YAAIK,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,WAAG,CAACtjD,IAAJ,CAASgjD,MAAT,EAAiB5sD,GAAjB,EAAsB,IAAtB;;AACA,YAAI4sD,MAAM,KAAK,KAAf,EAAsB;AAClBM,aAAG,CAACE,gBAAJ,CAAqB,cAArB,EAAqC,mCAArC;AACH;;AACDF,WAAG,CAACG,MAAJ,GAAa,YAAY;AACrB,cAAIH,GAAG,CAACI,MAAJ,IAAc,GAAd,IAAqBJ,GAAG,CAACI,MAAJ,GAAa,GAAtC,EAA2C;AACvC,gBAAI;AACA,kBAAIhuC,GAAG,GAAGiH,IAAI,CAACC,KAAL,CAAW0mC,GAAG,CAACK,YAAf,CAAV;AACAT,6BAAe,CAACxtC,GAAD,EAAM4tC,GAAN,CAAf;AACH,aAHD,CAIA,OAAOM,GAAP,EAAY;AACRT,6BAAe,CAAC,sBAAD,EAAyBG,GAAzB,CAAf;AACH;AACJ,WARD,MASK;AACDH,2BAAe,CAAC,gBAAD,EAAmBG,GAAnB,CAAf;AACH;AACJ,SAbD;;AAcAA,WAAG,CAACO,OAAJ,GAAc,YAAY;AACtBV,yBAAe,CAAC,gBAAD,EAAmBG,GAAnB,CAAf;AACH,SAFD;;AAGAA,WAAG,CAACQ,IAAJ,CAASj8C,IAAT;AACH;;AACD,eAASu7C,uBAAT,CAAiChtD,GAAjC,EAAsC6sD,MAAtC,EAA8C;AAC1C,eAAO7sD,GAAG,IACLA,GAAG,CAACwxC,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAAtB,GAA0B,GAA1B,GAAgC,GAD3B,CAAH,GAEHyb,YAAY,CAACJ,MAAD,CAFhB;AAGH;;AACD,eAASI,YAAT,CAAsBJ,MAAtB,EAA8B;AAC1B,YAAIlc,KAAK,GAAG,EAAZ;;AACA,aAAK,IAAI1oB,GAAT,IAAgB4kC,MAAhB,EAAwB;AACpBlc,eAAK,CAAC5vC,IAAN,CAAW4sD,kBAAkB,CAAC1lC,GAAD,CAAlB,GAA0B,GAA1B,GAAgC0lC,kBAAkB,CAACd,MAAM,CAAC5kC,GAAD,CAAP,CAA7D;AACH;;AACD,eAAO0oB,KAAK,CAAC3vC,IAAN,CAAW,GAAX,CAAP;AACH;;AAED,UAAI4sD,gBAAgB,GAAG;AACnBxB,iBAAS,EAAE,mBAAUlO,GAAV,EAAe;AACtB,cAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAAE;AAC3BA,eAAG,GAAG;AAAEl+C,iBAAG,EAAEk+C;AAAP,aAAN;AACH,WAFD,MAGK,IAAI,CAACA,GAAD,IAAQ,OAAOA,GAAP,KAAe,QAAvB,IAAmC,CAACA,GAAG,CAACl+C,GAA5C,EAAiD;AAClD,mBAAO,IAAP;AACH;;AACD,iBAAO;AACHA,eAAG,EAAEk+C,GAAG,CAACl+C,GADN;AAEH4sD,kBAAM,EAAE,CAAC1O,GAAG,CAAC0O,MAAJ,IAAc,KAAf,EAAsB1nB,WAAtB,EAFL;AAGH2oB,uBAAW,EAAE3P,GAAG,CAAC2P,WAHd;AAIH59B,sBAAU,EAAEiuB,GAAG,CAACjuB,UAJb;AAKHC,oBAAQ,EAAEguB,GAAG,CAAChuB,QALX;AAMHY,yBAAa,EAAEotB,GAAG,CAACptB;AANhB,WAAP;AAQH,SAhBkB;AAiBnBu7B,aAAK,EAAE,eAAU3mC,GAAV,EAAeu/B,OAAf,EAAwBC,OAAxB,EAAiC;AACpC,cAAIvR,IAAI,GAAGjuB,GAAG,CAAC6kB,WAAJ,CAAgBoJ,IAA3B;AACA,cAAIma,aAAa,GAAGC,kBAAkB,CAACpa,IAAD,EAAOjuB,GAAG,CAACllB,KAAX,EAAkBklB,GAAG,CAACnjB,QAAtB,CAAtC;AACAoqD,qBAAW,CAAChZ,IAAI,CAACiZ,MAAN,EAAcjZ,IAAI,CAAC3zC,GAAnB,EAAwB8tD,aAAxB,EAAuC,UAAU5kB,SAAV,EAAqBgkB,GAArB,EAA0B;AACxEjI,mBAAO,CAAC;AAAE/b,uBAAS,EAAEA,SAAb;AAAwBgkB,iBAAG,EAAEA;AAA7B,aAAD,CAAP;AACH,WAFU,EAER,UAAUc,YAAV,EAAwBd,GAAxB,EAA6B;AAC5BhI,mBAAO,CAAC;AAAE+I,qBAAO,EAAED,YAAX;AAAyBd,iBAAG,EAAEA;AAA9B,aAAD,CAAP;AACH,WAJU,CAAX;AAKH;AAzBkB,OAAvB;AA2BA,UAAIgB,yBAAyB,GAAGlD,YAAY,CAAC;AACzCQ,uBAAe,EAAE,CAACoC,gBAAD;AADwB,OAAD,CAA5C;;AAGA,eAASG,kBAAT,CAA4Bpa,IAA5B,EAAkCnzC,KAAlC,EAAyC+B,QAAzC,EAAmD;AAC/C,YAAIuC,OAAO,GAAGvC,QAAQ,CAACuC,OAAvB;AACA,YAAImrB,UAAJ;AACA,YAAIC,QAAJ;AACA,YAAIY,aAAJ;AACA,YAAIq9B,mBAAJ;AACA,YAAItB,MAAM,GAAG,EAAb;AACA58B,kBAAU,GAAG0jB,IAAI,CAAC1jB,UAAlB;;AACA,YAAIA,UAAU,IAAI,IAAlB,EAAwB;AACpBA,oBAAU,GAAG1tB,QAAQ,CAACsjB,GAAT,CAAa,YAAb,CAAb;AACH;;AACDqK,gBAAQ,GAAGyjB,IAAI,CAACzjB,QAAhB;;AACA,YAAIA,QAAQ,IAAI,IAAhB,EAAsB;AAClBA,kBAAQ,GAAG3tB,QAAQ,CAACsjB,GAAT,CAAa,UAAb,CAAX;AACH;;AACDiL,qBAAa,GAAG6iB,IAAI,CAAC7iB,aAArB;;AACA,YAAIA,aAAa,IAAI,IAArB,EAA2B;AACvBA,uBAAa,GAAGvuB,QAAQ,CAACsjB,GAAT,CAAa,eAAb,CAAhB;AACH,SAlB8C,CAmB/C;;;AACA,YAAI,OAAO8tB,IAAI,CAACka,WAAZ,KAA4B,UAAhC,EAA4C;AACxC;AACAM,6BAAmB,GAAGxa,IAAI,CAACka,WAAL,EAAtB;AACH,SAHD,MAIK;AACD;AACAM,6BAAmB,GAAGxa,IAAI,CAACka,WAAL,IAAoB,EAA1C;AACH;;AACDlhD,gBAAQ,CAACkgD,MAAD,EAASsB,mBAAT,CAAR;;AACAtB,cAAM,CAAC58B,UAAD,CAAN,GAAqBnrB,OAAO,CAACuB,SAAR,CAAkB7F,KAAK,CAACG,KAAxB,CAArB;AACAksD,cAAM,CAAC38B,QAAD,CAAN,GAAmBprB,OAAO,CAACuB,SAAR,CAAkB7F,KAAK,CAACI,GAAxB,CAAnB;;AACA,YAAIkE,OAAO,CAAC+nB,QAAR,KAAqB,OAAzB,EAAkC;AAC9BggC,gBAAM,CAAC/7B,aAAD,CAAN,GAAwBhsB,OAAO,CAAC+nB,QAAhC;AACH;;AACD,eAAOggC,MAAP;AACH;;AAED,UAAIuB,SAAS,GAAG;AACZ5nC,aAAK,EAAE,eAAU8iB,QAAV,EAAoBvjB,aAApB,EAAmCjhB,OAAnC,EAA4C;AAC/C,cAAIqmC,YAAY,GAAGrmC,OAAO,CAACqmC,YAAR,CAAqB/oC,IAArB,CAA0B0C,OAA1B,CAAnB;AACA,cAAIqhC,UAAU,GAAG;AACboa,sBAAU,EAAE,IADC;AAEbr6B,qBAAS,EAAE6Z,cAFE;AAGbugB,mBAAO,EAAEvgB,cAHI;AAIbsuB,sBAAU,EAAEljB,YAJC;AAKbmjB,oBAAQ,EAAEnjB;AALG,WAAjB;AAOA,cAAIxoC,KAAK,GAAGsjC,WAAW,CAACqD,QAAD,EAAWnD,UAAX,EAAuB,EAAvB,EAA2BpgB,aAA3B,CAAvB;AACA,cAAIwoC,QAAQ,GAAG,KAAf;;AACA,eAAK,IAAIl3B,QAAT,IAAqB10B,KAArB,EAA4B;AACxB,gBAAIA,KAAK,CAAC00B,QAAD,CAAL,IAAmB,IAAvB,EAA6B;AACzBk3B,sBAAQ,GAAG,IAAX;AACA;AACH;AACJ;;AACD,cAAIA,QAAJ,EAAc;AACV,gBAAIlnD,QAAQ,GAAG,IAAf;;AACA,gBAAI,cAAc0e,aAAlB,EAAiC;AAC7B1e,sBAAQ,GAAG04B,cAAc,CAACha,aAAa,CAAC1e,QAAf,CAAzB;AACA,qBAAO0e,aAAa,CAAC1e,QAArB;AACH;;AACD,gBAAI,CAACA,QAAD,IAAa1E,KAAK,CAACujB,SAAnB,IAAgCvjB,KAAK,CAAC29C,OAA1C,EAAmD;AAC/Cj5C,sBAAQ,GAAG25B,iBAAiB,CAACr+B,KAAK,CAAC29C,OAAP,EAAgB39C,KAAK,CAACujB,SAAtB,CAA5B;AACH;;AACD,mBAAO;AACHuhB,yBAAW,EAAEvqB,OAAO,CAAC,CAACva,KAAK,CAACujB,SAAP,IAAoB,CAACvjB,KAAK,CAAC29C,OAA5B,CADjB;AAEHj5C,sBAAQ,EAAEA,QAFP;AAGHqgC,sBAAQ,EAAE/kC,KAHP,CAGa;;AAHb,aAAP;AAKH;;AACD,iBAAO,IAAP;AACH,SAlCW;AAmCZslC,cAAM,EAAE,gBAAUP,QAAV,EAAoBG,YAApB,EAAkC/iC,OAAlC,EAA2C;AAC/C,cAAI0pD,mBAAmB,GAAG5iB,eAAe,CAAC/D,YAAD,EAAe;AAAElnC,iBAAK,EAAE+mC,QAAQ,CAAC2mB,UAAlB;AAA8BztD,eAAG,EAAE8mC,QAAQ,CAAC4mB;AAA5C,WAAf,CAAzC;;AACA,cAAIE,mBAAJ,EAAyB;AACrB,mBAAOC,YAAY,CAAC/mB,QAAQ,CAAC6Y,UAAV,EAAsB7Y,QAAQ,CAACxhB,SAA/B,EAA0CsoC,mBAA1C,EAA+D1pD,OAA/D,CAAnB;AACH,WAFD,MAGK;AACD,mBAAO,EAAP;AACH;AACJ;AA3CW,OAAhB;AA6CA,UAAI4pD,sBAAsB,GAAG1D,YAAY,CAAC;AACtC3jB,sBAAc,EAAE,CAAC+mB,SAAD;AADsB,OAAD,CAAzC;;AAGA,eAASK,YAAT,CAAsBlO,UAAtB,EAAkCr6B,SAAlC,EAA6C2hB,YAA7C,EAA2D/iC,OAA3D,EAAoE;AAChE,YAAI6pD,OAAO,GAAGpO,UAAU,GAAG1X,WAAW,CAAC0X,UAAD,CAAd,GAA6B,IAArD;AACA,YAAIqO,SAAS,GAAGxxB,UAAU,CAACyK,YAAY,CAAClnC,KAAd,CAA1B;AACA,YAAIq/C,SAAS,GAAGnY,YAAY,CAACjnC,GAA7B;AACA,YAAIiuD,cAAc,GAAG,EAArB;;AACA,eAAOD,SAAS,GAAG5O,SAAnB,EAA8B;AAC1B,cAAI8O,aAAa,CACjB;AADiB,YAEf,KAAK,CAFP,CAD0B,CAI1B;;AACA,cAAI,CAACH,OAAD,IAAYA,OAAO,CAACC,SAAS,CAAC3vB,SAAV,EAAD,CAAvB,EAAgD;AAC5C,gBAAI/Y,SAAJ,EAAe;AACX4oC,2BAAa,GAAGhqD,OAAO,CAAC1B,GAAR,CAAYwrD,SAAZ,EAAuB1oC,SAAvB,CAAhB;AACH,aAFD,MAGK;AACD4oC,2BAAa,GAAGF,SAAhB;AACH;;AACDC,0BAAc,CAAC9tD,IAAf,CAAoB+tD,aAApB;AACH;;AACDF,mBAAS,GAAGnyB,OAAO,CAACmyB,SAAD,EAAY,CAAZ,CAAnB;AACH;;AACD,eAAOC,cAAP;AACH;;AAED,UAAIE,2BAA2B,GAAG/D,YAAY,CAAC;AAC3CU,4BAAoB,EAAE;AAClBziD,gBAAM,EAAE,gBAAUA,OAAV,EAAkB1G,QAAlB,EAA4BysD,SAA5B,EAAuC;AAC3CC,8BAAkB,CAAC,CAAChmD,OAAD,CAAD,EAAW1G,QAAX,EAAqBysD,SAArB,CAAlB;AACH,WAHiB;AAIlB1mC,sBAAY,EAAE2mC,kBAJI;AAKlBh+B,iBAAO,EAAEi+B;AALS;AADqB,OAAD,CAA9C;;AASA,eAASD,kBAAT,CAA4BzjC,MAA5B,EAAoCjpB,QAApC,EAA8CysD,SAA9C,EAAyD;AACrD,YAAIG,cAAc,GAAGpmB,iBAAiB,CAACxmC,QAAQ,CAAC0d,KAAT,CAAeqI,YAAhB,CAAtC;AACA,YAAI8mC,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAI7rD,EAAE,GAAG,CAAT,EAAY8rD,QAAQ,GAAG7jC,MAA5B,EAAoCjoB,EAAE,GAAG8rD,QAAQ,CAACtwD,MAAlD,EAA0DwE,EAAE,EAA5D,EAAgE;AAC5D,cAAIqkB,KAAK,GAAGynC,QAAQ,CAAC9rD,EAAD,CAApB;AACA,cAAI+rD,UAAU,GAAG,KAAjB;;AACA,eAAK,IAAI7pD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0pD,cAAc,CAACpwD,MAAnC,EAA2C0G,CAAC,EAA5C,EAAgD;AAC5C,gBAAIupD,SAAS,CAACG,cAAc,CAAC1pD,CAAD,CAAd,CAAkB8pD,IAAnB,EAAyB3nC,KAAzB,CAAb,EAA8C;AAC1CunC,4BAAc,CAAC1iB,MAAf,CAAsBhnC,CAAtB,EAAyB,CAAzB,EAD0C,CACb;;AAC7B6pD,wBAAU,GAAG,IAAb;AACA;AACH;AACJ;;AACD,cAAI,CAACA,UAAL,EAAiB;AACbF,qBAAS,CAACruD,IAAV,CAAe6mB,KAAf;AACH;AACJ;;AACD,aAAK,IAAIvoB,EAAE,GAAG,CAAT,EAAYmwD,gBAAgB,GAAGL,cAApC,EAAoD9vD,EAAE,GAAGmwD,gBAAgB,CAACzwD,MAA1E,EAAkFM,EAAE,EAApF,EAAwF;AACpF,cAAIowD,aAAa,GAAGD,gBAAgB,CAACnwD,EAAD,CAApC;AACAkD,kBAAQ,CAACkc,QAAT,CAAkB;AACdrX,gBAAI,EAAE,qBADQ;AAEd6e,oBAAQ,EAAEwpC,aAAa,CAACxpC;AAFV,WAAlB;AAIH;;AACD,aAAK,IAAI1I,EAAE,GAAG,CAAT,EAAYmyC,WAAW,GAAGN,SAA/B,EAA0C7xC,EAAE,GAAGmyC,WAAW,CAAC3wD,MAA3D,EAAmEwe,EAAE,EAArE,EAAyE;AACrE,cAAIoyC,QAAQ,GAAGD,WAAW,CAACnyC,EAAD,CAA1B;AACAhb,kBAAQ,CAACqtD,cAAT,CAAwBD,QAAxB;AACH;AACJ,O,CACD;;;AACA,eAAST,aAAT,CAAuB1jC,MAAvB,EAA+BjpB,QAA/B,EAAyC;AACrCA,gBAAQ,CAACstD,eAAT,CAAyBrkC,MAAzB,EADqC,CACH;AACrC;;AAED,UAAIskC,MAAM,GAAG,EAAb,C,CAAiB;;AACjB,UAAIC,cAAc,GAAG;AACjB9gC,6BAAqB,EAAE,KADN;AAEjB8B,2BAAmB,EAAE,UAFJ;AAGjBhC,iCAAyB,EAAE,UAHV;AAIjBD,kCAA0B,EAAE;AAAE7nB,aAAG,EAAE;AAAP,SAJX;AAKjB2pB,0BAAkB,EAAE,KALH;AAMjBpsB,wBAAgB,EAAE,UAND;AAOjB;AACA2pB,oBAAY,EAAE,IARG;AASjBrB,mBAAW,EAAE,EATI;AAUjBN,mBAAW,EAAE,IAVI;AAWjBpE,cAAM,EAAE;AACJxV,cAAI,EAAE,OADF;AAEJo9C,gBAAM,EAAE,EAFJ;AAGJ58C,eAAK,EAAE;AAHH,SAXS;AAgBjB2Y,gBAAQ,EAAE,IAhBO;AAiBjBG,mBAAW,EAAE,KAjBI;AAkBjBE,6BAAqB,EAAE,OAlBN;AAmBjBjL,gBAAQ,EAAE,KAnBO;AAoBjB;AACAkM,kBAAU,EAAE,UArBK;AAsBjBC,eAAO,EAAE,UAtBQ;AAuBjBC,eAAO,EAAE,UAvBQ;AAwBjBjB,2BAAmB,EAAE,IAxBJ;AAyBjB;AACA6D,oBAAY,EAAE,IA1BG;AA2BjBF,kBAAU,EAAE,OA3BK;AA4BjBC,gBAAQ,EAAE,KA5BO;AA6BjBY,qBAAa,EAAE,UA7BE;AA8BjBjE,gBAAQ,EAAE,OA9BO;AA+BjB;AACA;AACAmB,eAAO,EAAE,EAjCQ;AAkCjBC,cAAM,EAAE,EAlCS;AAmCjB;AACA;AACA;AACAuC,8BAAsB,EAAE,CAtCP;AAuCjB7E,mBAAW,EAAE,UAvCI;AAwCjB;AACAtL,0BAAkB,EAAE,GAzCH;AA0CjBxB,kBAAU,EAAE,IA1CK;AA2CjBuE,8BAAsB,EAAE,KA3CP;AA4CjB;AACA0B,oBAAY,EAAE,IA7CG;AA8CjB;AACAc,kBAAU,EAAE,GA/CK;AAgDjBwK,kBAAU,EAAE,8BAhDK;AAiDjB;AACA;AACAzD,kBAAU,EAAE,KAnDK;AAoDjBC,uBAAe,EAAE,SApDA;AAqDjB+B,wBAAgB,EAAE;AAAE3nB,eAAK,EAAE,MAAT;AAAiBC,aAAG,EAAE,SAAtB;AAAiCC,cAAI,EAAE;AAAvC,SArDD;AAsDjBulB,0BAAkB,EAAE,IAtDH;AAuDjBC,yBAAiB,EAAE,GAvDF;AAwDjB3N,sBAAc,EAAE,IAxDC;AAyDjBmB,4BAAoB,EAAE,CAzDL,CAyDO;;AAzDP,OAArB;AA2DA,UAAI+vC,WAAW,GAAG;AACd7nC,cAAM,EAAE;AACJxV,cAAI,EAAE,iBADF;AAEJo9C,gBAAM,EAAE,EAFJ;AAGJ58C,eAAK,EAAE;AAHH,SADM;AAMdsY,mBAAW,EAAE;AACT;AACAwkC,cAAI,EAAE,uBAFG;AAGTC,cAAI,EAAE,sBAHG;AAITC,kBAAQ,EAAE,wBAJD;AAKTC,kBAAQ,EAAE;AALD;AANC,OAAlB;AAcA,UAAIC,cAAc,GAAG,CACjB,QADiB,EAEjB,QAFiB,EAGjB,YAHiB,EAIjB,aAJiB,CAArB,C,CAMA;;AACA,eAASC,YAAT,CAAsBC,UAAtB,EAAkC;AAC9B,eAAOroB,UAAU,CAACqoB,UAAD,EAAaF,cAAb,CAAjB;AACH,O,CACD;;;AACA,UAAIG,gBAAgB,GAAG,CACnBnE,sBADmB,EAEnBI,qBAFmB,EAGnBwB,yBAHmB,EAInBQ,sBAJmB,EAKnBK,2BALmB,CAAvB;;AAOA,eAAS2B,gBAAT,CAA0BC,YAA1B,EAAwC;AACpC,YAAI1/B,OAAO,GAAG,EAAd;;AACA,aAAK,IAAI1tB,EAAE,GAAG,CAAT,EAAYqtD,cAAc,GAAGD,YAAlC,EAAgDptD,EAAE,GAAGqtD,cAAc,CAAC7xD,MAApE,EAA4EwE,EAAE,EAA9E,EAAkF;AAC9E,cAAIstD,WAAW,GAAGD,cAAc,CAACrtD,EAAD,CAAhC;;AACA,cAAI,OAAOstD,WAAP,KAAuB,QAA3B,EAAqC;AACjC,gBAAIC,UAAU,GAAG,iBAAiB7rB,qBAAqB,CAAC4rB,WAAD,CAAvD;;AACA,gBAAI,CAACzhD,MAAM,CAAC0hD,UAAD,CAAX,EAAyB;AACrBC,qBAAO,CAACC,IAAR,CAAa,gCAAgCH,WAA7C;AACH,aAFD,MAGK;AACD5/B,qBAAO,CAAClwB,IAAR,CAAaqO,MAAM,CAAC0hD,UAAD,CAAN,WAAb,EADC,CACyC;AAC7C;AACJ,WARD,MASK;AACD7/B,mBAAO,CAAClwB,IAAR,CAAa8vD,WAAb;AACH;AACJ;;AACD,eAAOJ,gBAAgB,CAACvwD,MAAjB,CAAwB+wB,OAAxB,CAAP;AACH;;AAED,UAAIggC,aAAa,GAAG;AAChBC,YAAI,EAAE,IADU;AAEhBzwB,YAAI,EAAE;AACFnC,aAAG,EAAE,CADH;AAEFC,aAAG,EAAE,CAFH,CAEK;;AAFL,SAFU;AAMhBzS,WAAG,EAAE,KANW;AAOhBkF,kBAAU,EAAE;AACRk/B,cAAI,EAAE,MADE;AAERC,cAAI,EAAE,MAFE;AAGRC,kBAAQ,EAAE,WAHF;AAIRC,kBAAQ,EAAE,WAJF;AAKRnpD,cAAI,EAAE,MALE;AAMRiqD,eAAK,EAAE,OANC;AAORnqD,eAAK,EAAE,OAPC;AAQRy5B,cAAI,EAAE,MARE;AASRx5B,aAAG,EAAE,KATG;AAURH,cAAI,EAAE;AAVE,SAPI;AAmBhB0nB,iBAAS,EAAE,GAnBK;AAoBhBxB,kBAAU,EAAE,SApBI;AAqBhB0B,sBAAc,EAAE,MArBA;AAsBhBtpB,uBAAe,EAAE;AAtBD,OAApB;;AAwBA,eAASgsD,eAAT,CAAyBC,kBAAzB,EAA6C;AACzC,YAAIC,WAAW,GAAGD,kBAAkB,CAACtyD,MAAnB,GAA4B,CAA5B,GAAgCsyD,kBAAkB,CAAC,CAAD,CAAlB,CAAsBH,IAAtD,GAA6D,IAA/E;AACA,YAAIK,WAAW,GAAGniD,MAAM,CAAC,wBAAD,CAAN,IAAoC,EAAtD,CAFyC,CAEiB;;AAC1D,YAAIoiD,YAAY,GAAGpiD,MAAM,CAAC,qBAAD,CAAN,IAAiC,EAApD,CAHyC,CAGe;;AACxD,YAAIqiD,aAAa,GAAGF,WAAW,CAACrxD,MAAZ,EAAmB;AACvC6oC,yBAAiB,CAACyoB,YAAD,CADG,EACa;AACjCH,0BAFoB,CAED;AAFC,SAApB;AAIA,YAAIK,YAAY,GAAG;AACfC,YAAE,EAAEV,aADW,CACG;;AADH,SAAnB;;AAGA,aAAK,IAAI1tD,EAAE,GAAG,CAAT,EAAYquD,eAAe,GAAGH,aAAnC,EAAkDluD,EAAE,GAAGquD,eAAe,CAAC7yD,MAAvE,EAA+EwE,EAAE,EAAjF,EAAqF;AACjF,cAAIsuD,SAAS,GAAGD,eAAe,CAACruD,EAAD,CAA/B;AACAmuD,sBAAY,CAACG,SAAS,CAACX,IAAX,CAAZ,GAA+BW,SAA/B;AACH;;AACD,eAAO;AACH75C,aAAG,EAAE05C,YADF;AAEHJ,qBAAW,EAAEA;AAFV,SAAP;AAIH;;AACD,eAASQ,WAAT,CAAqBC,aAArB,EAAoCC,SAApC,EAA+C;AAC3C,YAAI,OAAOD,aAAP,KAAyB,QAAzB,IAAqC,CAAC/zD,KAAK,CAAC6pB,OAAN,CAAckqC,aAAd,CAA1C,EAAwE;AACpE,iBAAOE,WAAW,CAACF,aAAa,CAACb,IAAf,EAAqB,CAACa,aAAa,CAACb,IAAf,CAArB,EAA2Ca,aAA3C,CAAlB;AACH,SAFD,MAGK;AACD,iBAAOG,WAAW,CAACH,aAAD,EAAgBC,SAAhB,CAAlB;AACH;AACJ;;AACD,eAASE,WAAT,CAAqBC,OAArB,EAA8BH,SAA9B,EAAyC;AACrC,YAAI/hB,KAAK,GAAG,GAAG/vC,MAAH,CAAUiyD,OAAO,IAAI,EAArB,CAAZ,CADqC,CACC;;AACtC,YAAIjU,GAAG,GAAGkU,cAAc,CAACniB,KAAD,EAAQ+hB,SAAR,CAAd,IAAoCf,aAA9C;AACA,eAAOgB,WAAW,CAACE,OAAD,EAAUliB,KAAV,EAAiBiO,GAAjB,CAAlB;AACH;;AACD,eAASkU,cAAT,CAAwBniB,KAAxB,EAA+B+hB,SAA/B,EAA0C;AACtC,aAAK,IAAIvsD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwqC,KAAK,CAAClxC,MAA1B,EAAkC0G,CAAC,EAAnC,EAAuC;AACnC,cAAIkrC,KAAK,GAAGV,KAAK,CAACxqC,CAAD,CAAL,CAAS8qC,iBAAT,GAA6BjtC,KAA7B,CAAmC,GAAnC,CAAZ;;AACA,eAAK,IAAIuzB,CAAC,GAAG8Z,KAAK,CAAC5xC,MAAnB,EAA2B83B,CAAC,GAAG,CAA/B,EAAkCA,CAAC,EAAnC,EAAuC;AACnC,gBAAIw7B,QAAQ,GAAG1hB,KAAK,CAAC3lC,KAAN,CAAY,CAAZ,EAAe6rB,CAAf,EAAkB71B,IAAlB,CAAuB,GAAvB,CAAf;;AACA,gBAAIgxD,SAAS,CAACK,QAAD,CAAb,EAAyB;AACrB,qBAAOL,SAAS,CAACK,QAAD,CAAhB;AACH;AACJ;AACJ;;AACD,eAAO,IAAP;AACH;;AACD,eAASJ,WAAT,CAAqBE,OAArB,EAA8BliB,KAA9B,EAAqCiO,GAArC,EAA0C;AACtC,YAAIoU,MAAM,GAAGnqB,UAAU,CAAC,CAAC8oB,aAAD,EAAgB/S,GAAhB,CAAD,EAAuB,CAAC,YAAD,CAAvB,CAAvB;AACA,eAAOoU,MAAM,CAACpB,IAAd,CAFsC,CAElB;;AACpB,YAAIzwB,IAAI,GAAG6xB,MAAM,CAAC7xB,IAAlB;AACA,eAAO6xB,MAAM,CAAC7xB,IAAd;AACA,eAAO;AACH0xB,iBAAO,EAAEA,OADN;AAEHliB,eAAK,EAAEA,KAFJ;AAGHxP,cAAI,EAAEA,IAHH;AAIHmQ,4BAAkB,EAAE,IAAIb,IAAI,CAACwiB,YAAT,CAAsBJ,OAAtB,CAJjB;AAKH3yD,iBAAO,EAAE8yD;AALN,SAAP;AAOH;;AAED,UAAIE,cAAc;AAAG;AAAe,kBAAY;AAC5C,iBAASA,cAAT,CAAwBC,SAAxB,EAAmC;AAC/B,eAAKA,SAAL,GAAiB9lD,QAAQ,CAAC,EAAD,EAAK8lD,SAAL,CAAzB,CAD+B,CACW;;AAC1C,eAAKC,gBAAL,GAAwB,EAAxB;AACA,eAAKC,OAAL;AACH;;AACDH,sBAAc,CAACl0D,SAAf,CAAyB61C,MAAzB,GAAkC,UAAUye,OAAV,EAAmBnY,QAAnB,EAA6BoY,SAA7B,EAAwC;AACtE,cAAI,CAACh1D,MAAM,CAACqtB,IAAP,CAAY0nC,OAAZ,EAAqB7zD,MAAtB,IAAgC,CAAC07C,QAAQ,CAAC17C,MAA9C,EAAsD;AAClD;AACH;;AACD,cAAI+zD,YAAY,GAAGD,SAAS,GAAG,KAAKH,gBAAR,GAA2B,KAAKD,SAA5D;;AACA9lD,kBAAQ,CAACmmD,YAAD,EAAeF,OAAf,CAAR;;AACA,eAAK,IAAIrvD,EAAE,GAAG,CAAT,EAAYwvD,UAAU,GAAGtY,QAA9B,EAAwCl3C,EAAE,GAAGwvD,UAAU,CAACh0D,MAAxD,EAAgEwE,EAAE,EAAlE,EAAsE;AAClE,gBAAI8zB,QAAQ,GAAG07B,UAAU,CAACxvD,EAAD,CAAzB;AACA,mBAAOuvD,YAAY,CAACz7B,QAAD,CAAnB;AACH;;AACD,eAAKs7B,OAAL;AACH,SAXD,CAN4C,CAkB5C;AACA;;;AACAH,sBAAc,CAACl0D,SAAf,CAAyBq0D,OAAzB,GAAmC,YAAY;AAC3C;AACA,cAAI3kC,OAAO,GAAG0X,YAAY,EAAC;AAC3B,eAAKgtB,gBAAL,CAAsB1kC,OADI,EACK,KAAKykC,SAAL,CAAezkC,OADpB,EAC6B+hC,cAAc,CAAC/hC,OAD5C,CAA1B;AAEA,cAAIC,MAAM,GAAGyX,YAAY,EAAC;AAC1B,eAAKgtB,gBAAL,CAAsBzkC,MADG,EACK,KAAKwkC,SAAL,CAAexkC,MADpB,EAC4B8hC,cAAc,CAAC9hC,MAD3C,CAAzB;AAEA,cAAI+jC,SAAS,GAAGZ,eAAe,CAACpjC,OAAD,CAA/B;AACA,cAAIglC,cAAc,GAAGlB,WAAW,CAAC7jC,MAAM,IAAI+jC,SAAS,CAACV,WAArB,EAAkCU,SAAS,CAACh6C,GAA5C,CAAX,CAA4DxY,OAAjF;AACA,cAAIssB,GAAG,GAAG4Z,YAAY,EAAC;AACvB,eAAKgtB,gBAAL,CAAsB5mC,GADA,EACK,KAAK2mC,SAAL,CAAe3mC,GADpB,EACyBknC,cAAc,CAAClnC,GADxC,CAAtB;AAEA,cAAImnC,WAAW,GAAGnnC,GAAG,KAAK,KAAR,GAAgBmkC,WAAhB,GAA8B,EAAhD;AACA,eAAKgD,WAAL,GAAmBA,WAAnB;AACA,eAAKD,cAAL,GAAsBA,cAAtB;AACA,eAAKp4B,QAAL,GAAgB21B,YAAY,CAAC,CACzBR,cADyB,EAEzBkD,WAFyB,EAGzBD,cAHyB,EAIzB,KAAKP,SAJoB,EAKzB,KAAKC,gBALoB,CAAD,CAA5B;AAOH,SApBD;;AAqBA,eAAOF,cAAP;AACH,OA1CmC,EAApC;;AA4CA,UAAIU,sBAAsB,GAAG,EAA7B;;AACA,eAASC,sBAAT,CAAgC5qD,IAAhC,EAAsC6qD,QAAtC,EAAgD;AAC5CF,8BAAsB,CAAC3qD,IAAD,CAAtB,GAA+B6qD,QAA/B;AACH;;AACD,eAASC,oBAAT,CAA8B9qD,IAA9B,EAAoC;AAChC,eAAO,IAAI2qD,sBAAsB,CAAC3qD,IAAD,CAA1B,EAAP;AACH;;AACD,UAAI+qD,uBAAuB;AAAG;AAAe,kBAAY;AACrD,iBAASA,uBAAT,GAAmC,CAClC;;AACDA,+BAAuB,CAACh1D,SAAxB,CAAkC0yC,aAAlC,GAAkD,UAAUrzC,CAAV,EAAa;AAC3D,iBAAOA,CAAC,CAACggC,cAAF,EAAP;AACH,SAFD;;AAGA21B,+BAAuB,CAACh1D,SAAxB,CAAkC2yC,cAAlC,GAAmD,UAAUtzC,CAAV,EAAa;AAC5D,iBAAOA,CAAC,CAACigC,WAAF,EAAP;AACH,SAFD;;AAGA01B,+BAAuB,CAACh1D,SAAxB,CAAkC4yC,YAAlC,GAAiD,UAAUvzC,CAAV,EAAa;AAC1D,iBAAOA,CAAC,CAACkgC,UAAF,EAAP;AACH,SAFD;;AAGAy1B,+BAAuB,CAACh1D,SAAxB,CAAkCi1D,aAAlC,GAAkD,UAAUC,GAAV,EAAe;AAC7D,iBAAOh3B,cAAc,CAACg3B,GAAD,CAArB;AACH,SAFD;;AAGAF,+BAAuB,CAACh1D,SAAxB,CAAkC20C,aAAlC,GAAkD,UAAU5U,MAAV,EAAkB;AAChE,iBAAO9B,cAAc,CAAC8B,MAAD,CAArB;AACH,SAFD;;AAGA,eAAOi1B,uBAAP;AACH,OAnB4C,EAA7C;;AAoBAH,4BAAsB,CAAC,SAAD,EAAYG,uBAAZ,CAAtB;AAEA,UAAIG,MAAM,GAAG,+GAAb;;AACA,eAASjtC,KAAT,CAAeJ,GAAf,EAAoB;AAChB,YAAIiW,CAAC,GAAGo3B,MAAM,CAACtzB,IAAP,CAAY/Z,GAAZ,CAAR;;AACA,YAAIiW,CAAJ,EAAO;AACH,cAAIgC,MAAM,GAAG,IAAIz2B,IAAJ,CAASA,IAAI,CAAC83B,GAAL,CAAS9M,MAAM,CAACyJ,CAAC,CAAC,CAAD,CAAF,CAAf,EAAuBA,CAAC,CAAC,CAAD,CAAD,GAAOzJ,MAAM,CAACyJ,CAAC,CAAC,CAAD,CAAF,CAAN,GAAe,CAAtB,GAA0B,CAAjD,EAAoDzJ,MAAM,CAACyJ,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAT,CAA1D,EAAuEzJ,MAAM,CAACyJ,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAT,CAA7E,EAA0FzJ,MAAM,CAACyJ,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAT,CAAhG,EAA6GzJ,MAAM,CAACyJ,CAAC,CAAC,EAAD,CAAD,IAAS,CAAV,CAAnH,EAAiIA,CAAC,CAAC,EAAD,CAAD,GAAQzJ,MAAM,CAAC,OAAOyJ,CAAC,CAAC,EAAD,CAAT,CAAN,GAAuB,IAA/B,GAAsC,CAAvK,CAAT,CAAb;;AACA,cAAIsD,WAAW,CAACtB,MAAD,CAAf,EAAyB;AACrB,gBAAIoR,cAAc,GAAG,IAArB;;AACA,gBAAIpT,CAAC,CAAC,EAAD,CAAL,EAAW;AACPoT,4BAAc,GAAG,CAACpT,CAAC,CAAC,EAAD,CAAD,KAAU,GAAV,GAAgB,CAAC,CAAjB,GAAqB,CAAtB,KAA4BzJ,MAAM,CAACyJ,CAAC,CAAC,EAAD,CAAD,IAAS,CAAV,CAAN,GAAqB,EAArB,GACzCzJ,MAAM,CAACyJ,CAAC,CAAC,EAAD,CAAD,IAAS,CAAV,CADO,CAAjB;AAEH;;AACD,mBAAO;AACHgC,oBAAM,EAAEA,MADL;AAEH6hB,+BAAiB,EAAE,CAAC7jB,CAAC,CAAC,CAAD,CAFlB;AAGHoT,4BAAc,EAAEA;AAHb,aAAP;AAKH;AACJ;;AACD,eAAO,IAAP;AACH;;AAED,UAAIikB,OAAO;AAAG;AAAe,kBAAY;AACrC,iBAASA,OAAT,CAAiBt2C,QAAjB,EAA2B;AACvB,cAAIyP,QAAQ,GAAG,KAAKA,QAAL,GAAgBzP,QAAQ,CAACyP,QAAxC;AACA,cAAI8mC,eAAe,GAAG9mC,QAAQ,KAAK,OAAb,IAAwBA,QAAQ,KAAK,KAA3D;;AACA,cAAIzP,QAAQ,CAACw2C,iBAAT,IAA8BD,eAAlC,EAAmD;AAC/C,iBAAKC,iBAAL,GAAyB,IAAIx2C,QAAQ,CAACw2C,iBAAb,CAA+B/mC,QAA/B,CAAzB;AACH;;AACD,eAAK0tB,gBAAL,GAAwBr9B,OAAO,CAAC,CAACy2C,eAAD,IAAoB,KAAKC,iBAA1B,CAA/B;AACA,eAAKnlB,cAAL,GAAsB4kB,oBAAoB,CAACj2C,QAAQ,CAACqxB,cAAV,CAA1C;AACA,eAAKxgB,MAAL,GAAc7Q,QAAQ,CAAC6Q,MAAvB;AACA,eAAK4lC,OAAL,GAAez2C,QAAQ,CAAC6Q,MAAT,CAAgBwS,IAAhB,CAAqBnC,GAApC;AACA,eAAKw1B,OAAL,GAAe12C,QAAQ,CAAC6Q,MAAT,CAAgBwS,IAAhB,CAAqBlC,GAApC;;AACA,cAAInhB,QAAQ,CAACgP,qBAAT,KAAmC,KAAvC,EAA8C;AAC1C,iBAAKynC,OAAL,GAAe,CAAf;AACA,iBAAKC,OAAL,GAAe,CAAf;AACH;;AACD,cAAI,OAAO12C,QAAQ,CAACyO,QAAhB,KAA6B,QAAjC,EAA2C;AACvC,iBAAKgoC,OAAL,GAAez2C,QAAQ,CAACyO,QAAxB;AACH;;AACD,cAAI,OAAOzO,QAAQ,CAACgP,qBAAhB,KAA0C,UAA9C,EAA0D;AACtD,iBAAK2nC,cAAL,GAAsB32C,QAAQ,CAACgP,qBAA/B;AACH;;AACD,eAAKoC,SAAL,GAAiBpR,QAAQ,CAACoR,SAAT,IAAsB,IAAtB,GAA6BpR,QAAQ,CAACoR,SAAtC,GAAkDpR,QAAQ,CAAC6Q,MAAT,CAAgBzuB,OAAhB,CAAwBgvB,SAA3F;AACA,eAAKQ,YAAL,GAAoB5R,QAAQ,CAAC4R,YAA7B;AACH,SAxBoC,CAyBrC;;;AACA0kC,eAAO,CAACp1D,SAAR,CAAkB6sC,YAAlB,GAAiC,UAAUvjB,KAAV,EAAiB;AAC9C,cAAI+rB,IAAI,GAAG,KAAKsM,gBAAL,CAAsBr4B,KAAtB,CAAX;;AACA,cAAI+rB,IAAI,KAAK,IAAb,EAAmB;AACf,mBAAO,IAAP;AACH;;AACD,iBAAOA,IAAI,CAACtV,MAAZ;AACH,SAND;;AAOAq1B,eAAO,CAACp1D,SAAR,CAAkB01D,eAAlB,GAAoC,YAAY;AAC5C,cAAI,KAAKzZ,gBAAT,EAA2B;AACvB,mBAAO,KAAK0Z,iBAAL,CAAuB,IAAIrsD,IAAJ,GAAW1C,OAAX,EAAvB,CAAP;AACH,WAFD,MAGK;AACD;AACA;AACA,mBAAOs3B,cAAc,CAAC0C,gBAAgB,CAAC,IAAIt3B,IAAJ,EAAD,CAAjB,CAArB;AACH;AACJ,SATD;;AAUA8rD,eAAO,CAACp1D,SAAR,CAAkB2hD,gBAAlB,GAAqC,UAAUr4B,KAAV,EAAiB;AAClD,cAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,mBAAO,KAAKpB,KAAL,CAAWoB,KAAX,CAAP;AACH;;AACD,cAAIyW,MAAM,GAAG,IAAb;;AACA,cAAI,OAAOzW,KAAP,KAAiB,QAArB,EAA+B;AAC3ByW,kBAAM,GAAG,KAAK41B,iBAAL,CAAuBrsC,KAAvB,CAAT;AACH,WAFD,MAGK,IAAIA,KAAK,YAAYhgB,IAArB,EAA2B;AAC5BggB,iBAAK,GAAGA,KAAK,CAAC1iB,OAAN,EAAR;;AACA,gBAAI,CAAC06B,KAAK,CAAChY,KAAD,CAAV,EAAmB;AACfyW,oBAAM,GAAG,KAAK41B,iBAAL,CAAuBrsC,KAAvB,CAAT;AACH;AACJ,WALI,MAMA,IAAI5pB,KAAK,CAAC6pB,OAAN,CAAcD,KAAd,CAAJ,EAA0B;AAC3ByW,kBAAM,GAAG7B,cAAc,CAAC5U,KAAD,CAAvB;AACH;;AACD,cAAIyW,MAAM,KAAK,IAAX,IAAmB,CAACsB,WAAW,CAACtB,MAAD,CAAnC,EAA6C;AACzC,mBAAO,IAAP;AACH;;AACD,iBAAO;AAAEA,kBAAM,EAAEA,MAAV;AAAkB6hB,6BAAiB,EAAE,KAArC;AAA4CzK,qBAAS,EAAE;AAAvD,WAAP;AACH,SArBD;;AAsBAie,eAAO,CAACp1D,SAAR,CAAkBkoB,KAAlB,GAA0B,UAAU3Z,CAAV,EAAa;AACnC,cAAI8jC,KAAK,GAAGnqB,KAAK,CAAC3Z,CAAD,CAAjB;;AACA,cAAI8jC,KAAK,KAAK,IAAd,EAAoB;AAChB,mBAAO,IAAP;AACH;;AACD,cAAItS,MAAM,GAAGsS,KAAK,CAACtS,MAAnB;AACA,cAAIoX,SAAS,GAAG,IAAhB;;AACA,cAAI9E,KAAK,CAAClB,cAAN,KAAyB,IAA7B,EAAmC;AAC/B,gBAAI,KAAK8K,gBAAT,EAA2B;AACvBlc,oBAAM,GAAG,KAAK41B,iBAAL,CAAuB51B,MAAM,CAACn5B,OAAP,KAAmByrC,KAAK,CAAClB,cAAN,GAAuB,EAAvB,GAA4B,IAAtE,CAAT;AACH,aAFD,MAGK;AACDgG,uBAAS,GAAG9E,KAAK,CAAClB,cAAlB;AACH;AACJ;;AACD,iBAAO;AAAEpR,kBAAM,EAAEA,MAAV;AAAkB6hB,6BAAiB,EAAEvP,KAAK,CAACuP,iBAA3C;AAA8DzK,qBAAS,EAAEA;AAAzE,WAAP;AACH,SAhBD,CAjEqC,CAkFrC;;;AACAie,eAAO,CAACp1D,SAAR,CAAkB41D,OAAlB,GAA4B,UAAU71B,MAAV,EAAkB;AAC1C,iBAAO,KAAKoQ,cAAL,CAAoBuC,aAApB,CAAkC3S,MAAlC,CAAP;AACH,SAFD;;AAGAq1B,eAAO,CAACp1D,SAAR,CAAkBwJ,QAAlB,GAA6B,UAAUu2B,MAAV,EAAkB;AAC3C,iBAAO,KAAKoQ,cAAL,CAAoBwC,cAApB,CAAmC5S,MAAnC,CAAP;AACH,SAFD,CAtFqC,CAyFrC;;;AACAq1B,eAAO,CAACp1D,SAAR,CAAkB8E,GAAlB,GAAwB,UAAUi7B,MAAV,EAAkByC,GAAlB,EAAuB;AAC3C,cAAIxE,CAAC,GAAG,KAAKmS,cAAL,CAAoBwE,aAApB,CAAkC5U,MAAlC,CAAR;AACA/B,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACxD,KAAZ;AACAhB,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACvD,MAAZ;AACAjB,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACx5B,IAAZ;AACAg1B,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACxd,YAAZ;AACA,iBAAO,KAAKmrB,cAAL,CAAoB8kB,aAApB,CAAkCj3B,CAAlC,CAAP;AACH,SAPD;;AAQAo3B,eAAO,CAACp1D,SAAR,CAAkB4pC,QAAlB,GAA6B,UAAU7J,MAAV,EAAkByC,GAAlB,EAAuB;AAChD,cAAIxE,CAAC,GAAG,KAAKmS,cAAL,CAAoBwE,aAApB,CAAkC5U,MAAlC,CAAR;AACA/B,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACxD,KAAZ;AACAhB,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACvD,MAAZ;AACAjB,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACx5B,IAAZ;AACAg1B,WAAC,CAAC,CAAD,CAAD,IAAQwE,GAAG,CAACxd,YAAZ;AACA,iBAAO,KAAKmrB,cAAL,CAAoB8kB,aAApB,CAAkCj3B,CAAlC,CAAP;AACH,SAPD;;AAQAo3B,eAAO,CAACp1D,SAAR,CAAkB61D,QAAlB,GAA6B,UAAU91B,MAAV,EAAkBvxB,CAAlB,EAAqB;AAC9C,cAAIwvB,CAAC,GAAG,KAAKmS,cAAL,CAAoBwE,aAApB,CAAkC5U,MAAlC,CAAR;AACA/B,WAAC,CAAC,CAAD,CAAD,IAAQxvB,CAAR;AACA,iBAAO,KAAK2hC,cAAL,CAAoB8kB,aAApB,CAAkCj3B,CAAlC,CAAP;AACH,SAJD;;AAKAo3B,eAAO,CAACp1D,SAAR,CAAkB81D,SAAlB,GAA8B,UAAU/1B,MAAV,EAAkBvxB,CAAlB,EAAqB;AAC/C,cAAIwvB,CAAC,GAAG,KAAKmS,cAAL,CAAoBwE,aAApB,CAAkC5U,MAAlC,CAAR;AACA/B,WAAC,CAAC,CAAD,CAAD,IAAQxvB,CAAR;AACA,iBAAO,KAAK2hC,cAAL,CAAoB8kB,aAApB,CAAkCj3B,CAAlC,CAAP;AACH,SAJD,CA/GqC,CAoHrC;;;AACAo3B,eAAO,CAACp1D,SAAR,CAAkB2oC,cAAlB,GAAmC,UAAUrK,EAAV,EAAcC,EAAd,EAAkB;AACjD,cAAI4R,cAAc,GAAG,KAAKA,cAA1B;;AACA,cAAI/Q,QAAQ,CAACd,EAAD,CAAR,KAAiBc,QAAQ,CAACb,EAAD,CAAzB,IACA4R,cAAc,CAACyC,YAAf,CAA4BtU,EAA5B,MAAoC6R,cAAc,CAACyC,YAAf,CAA4BrU,EAA5B,CADpC,IAEA4R,cAAc,CAACwC,cAAf,CAA8BrU,EAA9B,MAAsC6R,cAAc,CAACwC,cAAf,CAA8BpU,EAA9B,CAF1C,EAE6E;AACzE,mBAAO4R,cAAc,CAACuC,aAAf,CAA6BnU,EAA7B,IAAmC4R,cAAc,CAACuC,aAAf,CAA6BpU,EAA7B,CAA1C;AACH;;AACD,iBAAO,IAAP;AACH,SARD;;AASA82B,eAAO,CAACp1D,SAAR,CAAkB4oC,eAAlB,GAAoC,UAAUtK,EAAV,EAAcC,EAAd,EAAkB;AAClD,cAAI4R,cAAc,GAAG,KAAKA,cAA1B;;AACA,cAAI/Q,QAAQ,CAACd,EAAD,CAAR,KAAiBc,QAAQ,CAACb,EAAD,CAAzB,IACA4R,cAAc,CAACyC,YAAf,CAA4BtU,EAA5B,MAAoC6R,cAAc,CAACyC,YAAf,CAA4BrU,EAA5B,CADxC,EACyE;AACrE,mBAAQ4R,cAAc,CAACwC,cAAf,CAA8BpU,EAA9B,IAAoC4R,cAAc,CAACwC,cAAf,CAA8BrU,EAA9B,CAArC,GACH,CAAC6R,cAAc,CAACuC,aAAf,CAA6BnU,EAA7B,IAAmC4R,cAAc,CAACuC,aAAf,CAA6BpU,EAA7B,CAApC,IAAwE,EAD5E;AAEH;;AACD,iBAAO,IAAP;AACH,SARD,CA9HqC,CAuIrC;;;AACA82B,eAAO,CAACp1D,SAAR,CAAkB+1D,iBAAlB,GAAsC,UAAUz3B,EAAV,EAAcC,EAAd,EAAkB;AACpD,cAAI/vB,CAAC,GAAG,KAAKm6B,cAAL,CAAoBrK,EAApB,EAAwBC,EAAxB,CAAR;;AACA,cAAI/vB,CAAC,KAAK,IAAV,EAAgB;AACZ,mBAAO;AAAEkzB,kBAAI,EAAE,MAAR;AAAgBx3B,mBAAK,EAAEsE;AAAvB,aAAP;AACH;;AACDA,WAAC,GAAG,KAAKo6B,eAAL,CAAqBtK,EAArB,EAAyBC,EAAzB,CAAJ;;AACA,cAAI/vB,CAAC,KAAK,IAAV,EAAgB;AACZ,mBAAO;AAAEkzB,kBAAI,EAAE,OAAR;AAAiBx3B,mBAAK,EAAEsE;AAAxB,aAAP;AACH;;AACDA,WAAC,GAAG0wB,cAAc,CAACZ,EAAD,EAAKC,EAAL,CAAlB;;AACA,cAAI/vB,CAAC,KAAK,IAAV,EAAgB;AACZ,mBAAO;AAAEkzB,kBAAI,EAAE,MAAR;AAAgBx3B,mBAAK,EAAEsE;AAAvB,aAAP;AACH;;AACDA,WAAC,GAAG2wB,aAAa,CAACb,EAAD,EAAKC,EAAL,CAAjB;;AACA,cAAI/vB,CAAC,KAAK,IAAV,EAAgB;AACZ,mBAAO;AAAEkzB,kBAAI,EAAE,KAAR;AAAex3B,mBAAK,EAAEsE;AAAtB,aAAP;AACH;;AACDA,WAAC,GAAGiwB,SAAS,CAACH,EAAD,EAAKC,EAAL,CAAb;;AACA,cAAI+E,KAAK,CAAC90B,CAAD,CAAT,EAAc;AACV,mBAAO;AAAEkzB,kBAAI,EAAE,MAAR;AAAgBx3B,mBAAK,EAAEsE;AAAvB,aAAP;AACH;;AACDA,WAAC,GAAGkwB,WAAW,CAACJ,EAAD,EAAKC,EAAL,CAAf;;AACA,cAAI+E,KAAK,CAAC90B,CAAD,CAAT,EAAc;AACV,mBAAO;AAAEkzB,kBAAI,EAAE,QAAR;AAAkBx3B,mBAAK,EAAEsE;AAAzB,aAAP;AACH;;AACDA,WAAC,GAAGmwB,WAAW,CAACL,EAAD,EAAKC,EAAL,CAAf;;AACA,cAAI+E,KAAK,CAAC90B,CAAD,CAAT,EAAc;AACV,mBAAO;AAAEkzB,kBAAI,EAAE,QAAR;AAAkBx3B,mBAAK,EAAEsE;AAAzB,aAAP;AACH;;AACD,iBAAO;AAAEkzB,gBAAI,EAAE,aAAR;AAAuBx3B,iBAAK,EAAEq0B,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH;AAA7C,WAAP;AACH,SA9BD;;AA+BAwuD,eAAO,CAACp1D,SAAR,CAAkBg2D,qBAAlB,GAA0C,UAAU13B,EAAV,EAAcC,EAAd,EAAkBl/B,CAAlB,EAAqB;AAC3D;AACA,cAAI+lC,IAAJ;;AACA,cAAI/lC,CAAC,CAAC2/B,KAAN,EAAa;AACToG,gBAAI,GAAG,KAAKuD,cAAL,CAAoBrK,EAApB,EAAwBC,EAAxB,CAAP;;AACA,gBAAI6G,IAAI,KAAK,IAAb,EAAmB;AACf,qBAAOA,IAAI,GAAGxC,YAAY,CAACvjC,CAAD,CAA1B;AACH;AACJ;;AACD,cAAIA,CAAC,CAAC4/B,MAAN,EAAc;AACVmG,gBAAI,GAAG,KAAKwD,eAAL,CAAqBtK,EAArB,EAAyBC,EAAzB,CAAP;;AACA,gBAAI6G,IAAI,KAAK,IAAb,EAAmB;AACf,qBAAOA,IAAI,GAAGtC,aAAa,CAACzjC,CAAD,CAA3B;AACH;AACJ;;AACD,cAAIA,CAAC,CAAC2J,IAAN,EAAY;AACRo8B,gBAAI,GAAGjG,aAAa,CAACb,EAAD,EAAKC,EAAL,CAApB;;AACA,gBAAI6G,IAAI,KAAK,IAAb,EAAmB;AACf,qBAAOA,IAAI,GAAGvC,WAAW,CAACxjC,CAAD,CAAzB;AACH;AACJ;;AACD,iBAAO,CAACk/B,EAAE,CAAC33B,OAAH,KAAe03B,EAAE,CAAC13B,OAAH,EAAhB,IAAgCm8B,SAAS,CAAC1jC,CAAD,CAAhD;AACH,SAtBD,CAvKqC,CA8LrC;;;AACA+1D,eAAO,CAACp1D,SAAR,CAAkBi2D,OAAlB,GAA4B,UAAUl4B,CAAV,EAAa2D,IAAb,EAAmB;AAC3C,cAAIA,IAAI,KAAK,MAAb,EAAqB;AACjB,mBAAO,KAAKw0B,WAAL,CAAiBn4B,CAAjB,CAAP;AACH,WAFD,MAGK,IAAI2D,IAAI,KAAK,OAAb,EAAsB;AACvB,mBAAO,KAAKy0B,YAAL,CAAkBp4B,CAAlB,CAAP;AACH,WAFI,MAGA,IAAI2D,IAAI,KAAK,MAAb,EAAqB;AACtB,mBAAO,KAAK00B,WAAL,CAAiBr4B,CAAjB,CAAP;AACH,WAFI,MAGA,IAAI2D,IAAI,KAAK,KAAb,EAAoB;AACrB,mBAAO5C,UAAU,CAACf,CAAD,CAAjB;AACH,WAFI,MAGA,IAAI2D,IAAI,KAAK,MAAb,EAAqB;AACtB,mBAAOlC,WAAW,CAACzB,CAAD,CAAlB;AACH,WAFI,MAGA,IAAI2D,IAAI,KAAK,QAAb,EAAuB;AACxB,mBAAOhC,aAAa,CAAC3B,CAAD,CAApB;AACH,WAFI,MAGA,IAAI2D,IAAI,KAAK,QAAb,EAAuB;AACxB,mBAAO9B,aAAa,CAAC7B,CAAD,CAApB;AACH;AACJ,SAtBD;;AAuBAq3B,eAAO,CAACp1D,SAAR,CAAkBk2D,WAAlB,GAAgC,UAAUn4B,CAAV,EAAa;AACzC,iBAAO,KAAKoS,cAAL,CAAoB8kB,aAApB,CAAkC,CACrC,KAAK9kB,cAAL,CAAoBuC,aAApB,CAAkC3U,CAAlC,CADqC,CAAlC,CAAP;AAGH,SAJD;;AAKAq3B,eAAO,CAACp1D,SAAR,CAAkBm2D,YAAlB,GAAiC,UAAUp4B,CAAV,EAAa;AAC1C,iBAAO,KAAKoS,cAAL,CAAoB8kB,aAApB,CAAkC,CACrC,KAAK9kB,cAAL,CAAoBuC,aAApB,CAAkC3U,CAAlC,CADqC,EAErC,KAAKoS,cAAL,CAAoBwC,cAApB,CAAmC5U,CAAnC,CAFqC,CAAlC,CAAP;AAIH,SALD;;AAMAq3B,eAAO,CAACp1D,SAAR,CAAkBo2D,WAAlB,GAAgC,UAAUr4B,CAAV,EAAa;AACzC,iBAAO,KAAKoS,cAAL,CAAoB8kB,aAApB,CAAkC,CACrC,KAAK9kB,cAAL,CAAoBuC,aAApB,CAAkC3U,CAAlC,CADqC,EAErC,KAAKoS,cAAL,CAAoBwC,cAApB,CAAmC5U,CAAnC,CAFqC,EAGrCA,CAAC,CAACwB,UAAF,KAAkB,CAACxB,CAAC,CAAC4C,SAAF,KAAgB,KAAK40B,OAArB,GAA+B,CAAhC,IAAqC,CAHlB,CAAlC,CAAP;AAKH,SAND,CAjOqC,CAwOrC;;;AACAH,eAAO,CAACp1D,SAAR,CAAkBqxC,iBAAlB,GAAsC,UAAUtR,MAAV,EAAkB;AACpD,cAAI,KAAK01B,cAAT,EAAyB;AACrB,mBAAO,KAAKA,cAAL,CAAoB,KAAKpe,MAAL,CAAYtX,MAAZ,CAApB,CAAP;AACH,WAFD,MAGK;AACD,mBAAOD,UAAU,CAACC,MAAD,EAAS,KAAKw1B,OAAd,EAAuB,KAAKC,OAA5B,CAAjB;AACH;AACJ,SAPD,CAzOqC,CAiPrC;;;AACAJ,eAAO,CAACp1D,SAAR,CAAkBiI,MAAlB,GAA2B,UAAU83B,MAAV,EAAkBiX,SAAlB,EAA6Bqf,WAA7B,EAA0C;AACjE,cAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,uBAAW,GAAG,EAAd;AAAmB;;AACjD,iBAAOrf,SAAS,CAAC/uC,MAAV,CAAiB;AACpB83B,kBAAM,EAAEA,MADY;AAEpBoR,0BAAc,EAAEklB,WAAW,CAAClf,SAAZ,IAAyB,IAAzB,GACZkf,WAAW,CAAClf,SADA,GAEZ,KAAKmf,eAAL,CAAqBv2B,MAArB;AAJgB,WAAjB,EAKJ,IALI,CAAP;AAMH,SARD;;AASAq1B,eAAO,CAACp1D,SAAR,CAAkBgwC,WAAlB,GAAgC,UAAU3tC,KAAV,EAAiBC,GAAjB,EAAsB00C,SAAtB,EAAiCqf,WAAjC,EAA8C;AAC1E,cAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,uBAAW,GAAG,EAAd;AAAmB;;AACjD,cAAIA,WAAW,CAACE,cAAhB,EAAgC;AAC5Bj0D,eAAG,GAAG87B,KAAK,CAAC97B,GAAD,EAAM,CAAC,CAAP,CAAX;AACH;;AACD,iBAAO00C,SAAS,CAAChH,WAAV,CAAsB;AACzBjQ,kBAAM,EAAE19B,KADiB;AAEzB8uC,0BAAc,EAAEklB,WAAW,CAACpf,cAAZ,IAA8B,IAA9B,GACZof,WAAW,CAACpf,cADA,GAEZ,KAAKqf,eAAL,CAAqBj0D,KAArB;AAJqB,WAAtB,EAKJ;AACC09B,kBAAM,EAAEz9B,GADT;AAEC6uC,0BAAc,EAAEklB,WAAW,CAACnf,YAAZ,IAA4B,IAA5B,GACZmf,WAAW,CAACnf,YADA,GAEZ,KAAKof,eAAL,CAAqBh0D,GAArB;AAJL,WALI,EAUJ,IAVI,CAAP;AAWH,SAhBD;;AAiBA8yD,eAAO,CAACp1D,SAAR,CAAkB+H,SAAlB,GAA8B,UAAUg4B,MAAV,EAAkBy2B,YAAlB,EAAgC;AAC1D,cAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,wBAAY,GAAG,EAAf;AAAoB;;AACnD,cAAIrlB,cAAc,GAAG,IAArB;;AACA,cAAI,CAACqlB,YAAY,CAACC,kBAAlB,EAAsC;AAClC,gBAAID,YAAY,CAACrf,SAAb,IAA0B,IAA9B,EAAoC;AAChChG,4BAAc,GAAGqlB,YAAY,CAACrf,SAA9B;AACH,aAFD,MAGK;AACDhG,4BAAc,GAAG,KAAKmlB,eAAL,CAAqBv2B,MAArB,CAAjB;AACH;AACJ;;AACD,iBAAOgU,cAAc,CAAChU,MAAD,EAASoR,cAAT,EAAyBqlB,YAAY,CAACxuD,QAAtC,CAArB;AACH,SAZD,CA5QqC,CAyRrC;;;AACAotD,eAAO,CAACp1D,SAAR,CAAkB21D,iBAAlB,GAAsC,UAAU/0C,EAAV,EAAc;AAChD,cAAI,KAAK2N,QAAL,KAAkB,OAAtB,EAA+B;AAC3B,mBAAO2P,cAAc,CAAC0C,gBAAgB,CAAC,IAAIt3B,IAAJ,CAASsX,EAAT,CAAD,CAAjB,CAArB;AACH,WAFD,MAGK,IAAI,KAAK2N,QAAL,KAAkB,KAAlB,IAA2B,CAAC,KAAK+mC,iBAArC,EAAwD;AACzD,mBAAO,IAAIhsD,IAAJ,CAASsX,EAAT,CAAP;AACH,WAFI,MAGA;AACD,mBAAOsd,cAAc,CAAC,KAAKo3B,iBAAL,CAAuBoB,gBAAvB,CAAwC91C,EAAxC,CAAD,CAArB;AACH;AACJ,SAVD;;AAWAw0C,eAAO,CAACp1D,SAAR,CAAkBs2D,eAAlB,GAAoC,UAAUv4B,CAAV,EAAa;AAC7C,cAAI,KAAKxP,QAAL,KAAkB,OAAtB,EAA+B;AAC3B,mBAAO,CAAC2S,gBAAgB,CAACjD,cAAc,CAACF,CAAD,CAAf,CAAhB,CAAoC44B,iBAApC,EAAR,CAD2B,CACsC;AACpE,WAFD,MAGK,IAAI,KAAKpoC,QAAL,KAAkB,KAAtB,EAA6B;AAC9B,mBAAO,CAAP;AACH,WAFI,MAGA,IAAI,KAAK+mC,iBAAT,EAA4B;AAC7B,mBAAO,KAAKA,iBAAL,CAAuBsB,cAAvB,CAAsC34B,cAAc,CAACF,CAAD,CAApD,CAAP;AACH;;AACD,iBAAO,IAAP;AACH,SAXD,CArSqC,CAiTrC;;;AACAq3B,eAAO,CAACp1D,SAAR,CAAkBq3C,MAAlB,GAA2B,UAAUtZ,CAAV,EAAaoZ,SAAb,EAAwB;AAC/C,cAAI,KAAK5oB,QAAL,KAAkB,OAAtB,EAA+B;AAC3B,mBAAO2S,gBAAgB,CAACjD,cAAc,CAACF,CAAD,CAAf,CAAvB;AACH,WAFD,MAGK,IAAI,KAAKxP,QAAL,KAAkB,KAAtB,EAA6B;AAC9B,mBAAO,IAAIjlB,IAAJ,CAASy0B,CAAC,CAACn3B,OAAF,EAAT,CAAP,CAD8B,CACA;AACjC,WAFI,MAGA,IAAI,CAAC,KAAK0uD,iBAAV,EAA6B;AAC9B,mBAAO,IAAIhsD,IAAJ,CAASy0B,CAAC,CAACn3B,OAAF,MAAeuwC,SAAS,IAAI,CAA5B,CAAT,CAAP;AACH,WAFI,MAGA;AACD,mBAAO,IAAI7tC,IAAJ,CAASy0B,CAAC,CAACn3B,OAAF,KACZ,KAAK0uD,iBAAL,CAAuBsB,cAAvB,CAAsC34B,cAAc,CAACF,CAAD,CAApD,IAA2D,IAA3D,GAAkE,EAD/D,CACkE;AADlE,aAAP;AAGH;AACJ,SAfD;;AAgBA,eAAOq3B,OAAP;AACH,OAnU4B,EAA7B;;AAqUA,UAAIyB,mBAAmB,GAAG;AACtB/rD,UAAE,EAAEupB,MADkB;AAEtB3C,qBAAa,EAAE9S,OAFO;AAGtBoT,0BAAkB,EAAEiW,QAHE;AAItB0e,eAAO,EAAE1e,QAJa;AAKtB2e,eAAO,EAAE3e;AALa,OAA1B;AAOA,UAAI6uB,KAAK,GAAG,CAAZ;;AACA,eAASC,mBAAT,CAA6B9qB,WAA7B,EAA0ChoC,QAA1C,EAAoD;AAChD,YAAI6f,IAAI,GAAG7f,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4BktC,eAAvC;AACA,eAAO,CAACppC,IAAI,CAACmoB,WAAW,CAAC+qB,WAAb,CAAJ,CAA8BnJ,WAAtC;AACH;;AACD,eAASoJ,gBAAT,CAA0BrX,GAA1B,EAA+B37C,QAA/B,EAAyC;AACrC,YAAI6f,IAAI,GAAG7f,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4BktC,eAAvC;;AACA,aAAK,IAAI/lD,CAAC,GAAG2c,IAAI,CAACrjB,MAAL,GAAc,CAA3B,EAA8B0G,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AAAE;AACzC,cAAI9F,GAAG,GAAGyiB,IAAI,CAAC3c,CAAD,CAAd;AACA,cAAIkuC,IAAI,GAAGh0C,GAAG,CAACysD,SAAJ,CAAclO,GAAd,CAAX;;AACA,cAAIvK,IAAJ,EAAU;AACN,gBAAIr0B,GAAG,GAAGk2C,qBAAqB,CAAC,OAAOtX,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgC,EAAjC,EAAqCvK,IAArC,EAA2CluC,CAA3C,EAA8ClD,QAA9C,CAA/B;AACA+c,eAAG,CAACiwC,IAAJ,GAAWrR,GAAX;AACA,mBAAO5+B,GAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH;;AACD,eAASk2C,qBAAT,CAA+BtX,GAA/B,EAAoCvK,IAApC,EAA0C2hB,WAA1C,EAAuD/yD,QAAvD,EAAiE;AAC7D,YAAI08C,UAAU,GAAG,EAAjB;AACA,YAAIt8C,KAAK,GAAGsjC,WAAW,CAACiY,GAAD,EAAMiX,mBAAN,EAA2B,EAA3B,EAA+BlW,UAA/B,CAAvB;AACA,YAAIG,UAAU,GAAG,EAAjB;AACA,YAAIr/C,EAAE,GAAGs+C,sBAAsB,CAACY,UAAD,EAAa18C,QAAb,EAAuB68C,UAAvB,CAA/B;AACAz8C,aAAK,CAAC8yD,UAAN,GAAmB,KAAnB;AACA9yD,aAAK,CAACw3C,aAAN,GAAsB,EAAtB;AACAx3C,aAAK,CAACi3C,UAAN,GAAmB,IAAnB;AACAj3C,aAAK,CAAC6wC,QAAN,GAAiB7gB,MAAM,CAACurB,GAAG,CAAC90C,EAAJ,IAAU,EAAX,CAAvB;AACAzG,aAAK,CAACsjB,QAAN,GAAiB0M,MAAM,CAACyiC,KAAK,EAAN,CAAvB;AACAzyD,aAAK,CAAC2yD,WAAN,GAAoBA,WAApB;AACA3yD,aAAK,CAACgxC,IAAN,GAAaA,IAAb;AACAhxC,aAAK,CAAC5C,EAAN,GAAWA,EAAX;AACA4C,aAAK,CAAC8H,aAAN,GAAsB20C,UAAtB;AACA,eAAOz8C,KAAP;AACH;;AAED,eAAS+yD,kBAAT,CAA6BptC,YAA7B,EAA2Cxe,MAA3C,EAAmDlH,WAAnD,EAAgEL,QAAhE,EAA0E;AACtE,gBAAQuH,MAAM,CAAC1C,IAAf;AACI,eAAK,mBAAL;AAA0B;AACtB,mBAAOuuD,UAAU,CAACrtC,YAAD,EAAexe,MAAM,CAAC8rD,OAAtB,EAA+BhzD,WAAW,GAAGA,WAAW,CAAC2B,WAAf,GAA6B,IAAvE,EAA6EhC,QAA7E,CAAjB;;AACJ,eAAK,qBAAL;AACI,mBAAOszD,YAAY,CAACvtC,YAAD,EAAexe,MAAM,CAACmc,QAAtB,CAAnB;;AACJ,eAAK,MAAL,CALJ,CAKiB;;AACb,eAAK,MAAL;AACA,eAAK,UAAL;AACA,eAAK,eAAL;AACI,gBAAIrjB,WAAJ,EAAiB;AACb,qBAAOkzD,iBAAiB,CAACxtC,YAAD,EAAe1lB,WAAW,CAAC2B,WAA3B,EAAwChC,QAAxC,CAAxB;AACH,aAFD,MAGK;AACD,qBAAO+lB,YAAP;AACH;;AACL,eAAK,qBAAL;AACA,eAAK,iBAAL;AACI,mBAAOytC,iBAAiB,CAACztC,YAAD,EAAexe,MAAM,CAACupC,SAAP,GACnCxK,WAAW,CAAC/+B,MAAM,CAACupC,SAAR,CADwB,GAEnC2iB,oBAAoB,CAAC1tC,YAAD,EAAe/lB,QAAf,CAFA,EAE0BK,WAAW,GAAGA,WAAW,CAAC2B,WAAf,GAA6B,IAFlE,EAEwEhC,QAFxE,CAAxB;;AAGJ,eAAK,gBAAL;AACA,eAAK,qBAAL;AACI,mBAAO0zD,eAAe,CAAC3tC,YAAD,EAAexe,MAAM,CAACmc,QAAtB,EAAgCnc,MAAM,CAAC6vC,OAAvC,EAAgD7vC,MAAM,CAAC8vC,UAAvD,CAAtB;;AACJ,eAAK,0BAAL;AACI,mBAAO,EAAP;;AACJ;AACI,mBAAOtxB,YAAP;AA1BR;AA4BH;;AACD,UAAI4tC,KAAK,GAAG,CAAZ;;AACA,eAASP,UAAT,CAAoBQ,eAApB,EAAqCP,OAArC,EAA8Chc,UAA9C,EAA0Dr3C,QAA1D,EAAoE;AAChE,YAAImmC,IAAI,GAAG,EAAX;;AACA,aAAK,IAAInlC,EAAE,GAAG,CAAT,EAAY6yD,SAAS,GAAGR,OAA7B,EAAsCryD,EAAE,GAAG6yD,SAAS,CAACr3D,MAArD,EAA6DwE,EAAE,EAA/D,EAAmE;AAC/D,cAAI68C,MAAM,GAAGgW,SAAS,CAAC7yD,EAAD,CAAtB;AACAmlC,cAAI,CAAC0X,MAAM,CAACn6B,QAAR,CAAJ,GAAwBm6B,MAAxB;AACH;;AACD,YAAIxG,UAAJ,EAAgB;AACZlR,cAAI,GAAGotB,iBAAiB,CAACptB,IAAD,EAAOkR,UAAP,EAAmBr3C,QAAnB,CAAxB;AACH;;AACD,eAAOoK,QAAQ,CAAC,EAAD,EAAKwpD,eAAL,EAAsBztB,IAAtB,CAAf;AACH;;AACD,eAASmtB,YAAT,CAAsBM,eAAtB,EAAuClwC,QAAvC,EAAiD;AAC7C,eAAOwiB,UAAU,CAAC0tB,eAAD,EAAkB,UAAU5rB,WAAV,EAAuB;AACtD,iBAAOA,WAAW,CAACtkB,QAAZ,KAAyBA,QAAhC;AACH,SAFgB,CAAjB;AAGH;;AACD,eAAS6vC,iBAAT,CAA2BO,UAA3B,EAAuCzc,UAAvC,EAAmDr3C,QAAnD,EAA6D;AACzD,eAAOwzD,iBAAiB,CAACM,UAAD,EAAa5tB,UAAU,CAAC4tB,UAAD,EAAa,UAAU9rB,WAAV,EAAuB;AAC/E,iBAAO+rB,aAAa,CAAC/rB,WAAD,EAAcqP,UAAd,EAA0Br3C,QAA1B,CAApB;AACH,SAF8C,CAAvB,EAEpBq3C,UAFoB,EAERr3C,QAFQ,CAAxB;AAGH;;AACD,eAAS+zD,aAAT,CAAuB/rB,WAAvB,EAAoCqP,UAApC,EAAgDr3C,QAAhD,EAA0D;AACtD,YAAI,CAAC8yD,mBAAmB,CAAC9qB,WAAD,EAAchoC,QAAd,CAAxB,EAAiD;AAC7C,iBAAO,CAACgoC,WAAW,CAAC4P,aAApB;AACH,SAFD,MAGK;AACD,iBAAO,CAAC53C,QAAQ,CAACsjB,GAAT,CAAa,cAAb,CAAD,IACH,CAAC0kB,WAAW,CAACqP,UADV,IAEHrP,WAAW,CAACkrB,UAFT,IAEuB;AAC1B7b,oBAAU,CAACj5C,KAAX,GAAmB4pC,WAAW,CAACqP,UAAZ,CAAuBj5C,KAHvC,IAIHi5C,UAAU,CAACh5C,GAAX,GAAiB2pC,WAAW,CAACqP,UAAZ,CAAuBh5C,GAJ5C;AAKH;AACJ;;AACD,eAASm1D,iBAAT,CAA2BQ,WAA3B,EAAwCC,YAAxC,EAAsD5c,UAAtD,EAAkEr3C,QAAlE,EAA4E;AACxE,YAAIk0D,WAAW,GAAG,EAAlB;;AACA,aAAK,IAAIxwC,QAAT,IAAqBswC,WAArB,EAAkC;AAC9B,cAAInW,MAAM,GAAGmW,WAAW,CAACtwC,QAAD,CAAxB;;AACA,cAAIuwC,YAAY,CAACvwC,QAAD,CAAhB,EAA4B;AACxBwwC,uBAAW,CAACxwC,QAAD,CAAX,GAAwBywC,WAAW,CAACtW,MAAD,EAASxG,UAAT,EAAqBr3C,QAArB,CAAnC;AACH,WAFD,MAGK;AACDk0D,uBAAW,CAACxwC,QAAD,CAAX,GAAwBm6B,MAAxB;AACH;AACJ;;AACD,eAAOqW,WAAP;AACH;;AACD,eAASC,WAAT,CAAqBnsB,WAArB,EAAkCqP,UAAlC,EAA8Cr3C,QAA9C,EAAwD;AACpD,YAAIo0D,SAAS,GAAGp0D,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4BktC,eAA5B,CAA4CjhB,WAAW,CAAC+qB,WAAxD,CAAhB;AACA,YAAI3b,OAAO,GAAGhnB,MAAM,CAACujC,KAAK,EAAN,CAApB;AACAS,iBAAS,CAACtK,KAAV,CAAgB;AACZ9hB,qBAAW,EAAEA,WADD;AAEZhoC,kBAAQ,EAAEA,QAFE;AAGZ/B,eAAK,EAAEo5C;AAHK,SAAhB,EAIG,UAAUt6B,GAAV,EAAe;AACd,cAAI4pB,SAAS,GAAG5pB,GAAG,CAAC4pB,SAApB;AACA,cAAI0tB,UAAU,GAAGr0D,QAAQ,CAACsjB,GAAT,CAAa,oBAAb,CAAjB;AACA,cAAIgxC,aAAJ;AACA,cAAIC,gBAAJ;;AACA,cAAIvsB,WAAW,CAAC0a,OAAhB,EAAyB;AACrB6R,4BAAgB,GAAGvsB,WAAW,CAAC0a,OAAZ,CAAoB/b,SAApB,EAA+B5pB,GAAG,CAAC4tC,GAAnC,CAAnB;AACH;;AACD,cAAI0J,UAAJ,EAAgB;AACZC,yBAAa,GAAGD,UAAU,CAAC1tB,SAAD,EAAY5pB,GAAG,CAAC4tC,GAAhB,CAA1B;AACH;;AACDhkB,mBAAS,GAAG4tB,gBAAgB,IAAID,aAApB,IAAqC3tB,SAAjD;AACA3mC,kBAAQ,CAACkc,QAAT,CAAkB;AACdrX,gBAAI,EAAE,gBADQ;AAEd6e,oBAAQ,EAAEskB,WAAW,CAACtkB,QAFR;AAGd0zB,mBAAO,EAAEA,OAHK;AAIdC,sBAAU,EAAEA,UAJE;AAKd1Q,qBAAS,EAAEA;AALG,WAAlB;AAOH,SAvBD,EAuBG,UAAU6tB,KAAV,EAAiB;AAChB,cAAIC,WAAW,GAAGz0D,QAAQ,CAACsjB,GAAT,CAAa,oBAAb,CAAlB;AACAkrC,iBAAO,CAACC,IAAR,CAAa+F,KAAK,CAAC9I,OAAnB,EAA4B8I,KAA5B;;AACA,cAAIxsB,WAAW,CAAC2a,OAAhB,EAAyB;AACrB3a,uBAAW,CAAC2a,OAAZ,CAAoB6R,KAApB;AACH;;AACD,cAAIC,WAAJ,EAAiB;AACbA,uBAAW,CAACD,KAAD,CAAX;AACH;;AACDx0D,kBAAQ,CAACkc,QAAT,CAAkB;AACdrX,gBAAI,EAAE,qBADQ;AAEd6e,oBAAQ,EAAEskB,WAAW,CAACtkB,QAFR;AAGd0zB,mBAAO,EAAEA,OAHK;AAIdC,sBAAU,EAAEA,UAJE;AAKdmd,iBAAK,EAAEA;AALO,WAAlB;AAOH,SAvCD;AAwCA,eAAOpqD,QAAQ,CAAC,EAAD,EAAK49B,WAAL,EAAkB;AAAEkrB,oBAAU,EAAE,IAAd;AAAoBtb,uBAAa,EAAER;AAAnC,SAAlB,CAAf;AACH;;AACD,eAASsc,eAAT,CAAyBI,UAAzB,EAAqCpwC,QAArC,EAA+C0zB,OAA/C,EAAwDC,UAAxD,EAAoE;AAChE,YAAIv6C,EAAJ;;AACA,YAAIkrC,WAAW,GAAG8rB,UAAU,CAACpwC,QAAD,CAA5B;;AACA,YAAIskB,WAAW,IAAI;AACfoP,eAAO,KAAKpP,WAAW,CAAC4P,aAD5B,EAC2C;AACvC,iBAAOxtC,QAAQ,CAAC,EAAD,EAAK0pD,UAAL,GAAkBh3D,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC4mB,QAAD,CAAF,GAAetZ,QAAQ,CAAC,EAAD,EAAK49B,WAAL,EAAkB;AAAEkrB,sBAAU,EAAE,KAAd;AAAqB7b,sBAAU,EAAEA,UAAjC,CAA4C;;AAA5C,WAAlB,CAAhC,EAC5Bv6C,EADU,EAAf;AAEH;;AACD,eAAOg3D,UAAP;AACH;;AACD,eAASL,oBAAT,CAA8B1tC,YAA9B,EAA4C/lB,QAA5C,EAAsD;AAClD,eAAOkmC,UAAU,CAACngB,YAAD,EAAe,UAAUiiB,WAAV,EAAuB;AACnD,iBAAO8qB,mBAAmB,CAAC9qB,WAAD,EAAchoC,QAAd,CAA1B;AACH,SAFgB,CAAjB;AAGH;;AAED,UAAI00D,oBAAoB;AAAG;AAAe,kBAAY;AAClD,iBAASA,oBAAT,CAA8Bx1D,QAA9B,EAAwCc,QAAxC,EAAkD;AAC9C,eAAKd,QAAL,GAAgBA,QAAhB;AACA,eAAKjC,OAAL,GAAeiC,QAAQ,CAACjC,OAAxB;AACA,eAAKsF,OAAL,GAAevC,QAAQ,CAACuC,OAAxB;AACA,eAAKvC,QAAL,GAAgBA,QAAhB;AACA,eAAK20D,cAAL;AACH;AACD;;AAEA;;;AACAD,4BAAoB,CAAC34D,SAArB,CAA+B64D,SAA/B,GAA2C,UAAUC,kBAAV,EAA8BC,WAA9B,EAA2C;AAClF,cAAIvyD,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIwyD,QAAQ,GAAGxyD,OAAO,CAACojC,QAAR,CAAiBpjC,OAAO,CAACyvD,OAAR,CAAgB8C,WAAhB,EAA6BD,kBAAkB,CAACG,gBAAhD,CAAjB,EAAoF;AACnGH,4BAAkB,CAACvpC,aADJ,CAAf;AAEA,iBAAO,KAAK64B,KAAL,CAAW4Q,QAAX,EAAqB,CAAC,CAAtB,CAAP;AACH,SALD,CAXkD,CAiBlD;;;AACAL,4BAAoB,CAAC34D,SAArB,CAA+Bk5D,SAA/B,GAA2C,UAAUJ,kBAAV,EAA8BC,WAA9B,EAA2C;AAClF,cAAIvyD,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAI2yD,QAAQ,GAAG3yD,OAAO,CAAC1B,GAAR,CAAY0B,OAAO,CAACyvD,OAAR,CAAgB8C,WAAhB,EAA6BD,kBAAkB,CAACG,gBAAhD,CAAZ,EAA+E;AAC9FH,4BAAkB,CAACvpC,aADJ,CAAf;AAEA,iBAAO,KAAK64B,KAAL,CAAW+Q,QAAX,EAAqB,CAArB,CAAP;AACH,SALD,CAlBkD,CAwBlD;AACA;AACA;;;AACAR,4BAAoB,CAAC34D,SAArB,CAA+BooD,KAA/B,GAAuC,UAAU2Q,WAAV,EAAuB3+B,SAAvB,EAAkCg/B,YAAlC,EAAgD;AACnF,cAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,wBAAY,GAAG,KAAf;AAAuB;;AACtD,cAAI9pC,UAAJ;AACA,cAAIN,OAAO,GAAG,IAAd;AACA,cAAIC,OAAO,GAAG,IAAd;AACA,cAAIoqC,WAAJ;AACA,cAAIC,aAAJ;AACA,cAAIlxD,WAAJ;AACA,cAAInC,WAAJ;AACA,cAAI+b,OAAJ;AACAsN,oBAAU,GAAG,KAAKiqC,eAAL,EAAb;AACAjqC,oBAAU,GAAG,KAAKkqC,cAAL,CAAoBlqC,UAApB,CAAb;;AACA,cAAI8pC,YAAJ,EAAkB;AACdL,uBAAW,GAAGjrB,sBAAsB,CAACirB,WAAD,EAAczpC,UAAd,CAApC;AACH;;AACD+pC,qBAAW,GAAG,KAAKI,qBAAL,CAA2BV,WAA3B,EAAwC3+B,SAAxC,CAAd;AACAk/B,uBAAa,GAAG,0BAA0BpgC,IAA1B,CAA+BmgC,WAAW,CAAC33B,IAA3C,CAAhB;AACAt5B,qBAAW,GAAG,KAAKsxD,gBAAL,CAAsB,KAAKF,cAAL,CAAoBH,WAAW,CAACn3D,KAAhC,CAAtB,EAA8Dm3D,WAAW,CAAC33B,IAA1E,EAAgF43B,aAAhF,CAAd;AACAlxD,qBAAW,GAAG,KAAKoxD,cAAL,CAAoBpxD,WAApB,CAAd;AACAnC,qBAAW,GAAGmC,WAAd;;AACA,cAAI,CAAC,KAAKlH,OAAL,CAAa8sB,mBAAlB,EAAuC;AACnC/nB,uBAAW,GAAGqnC,eAAe,CAACrnC,WAAD,EAAcozD,WAAW,CAACn3D,KAA1B,CAA7B;AACH;;AACD8sB,iBAAO,GAAGyS,cAAc,CAAC,KAAKvgC,OAAL,CAAa8tB,OAAd,CAAxB;AACAC,iBAAO,GAAGwS,cAAc,CAAC,KAAKvgC,OAAL,CAAa+tB,OAAd,CAAxB;AACAhpB,qBAAW,GAAG,KAAK0zD,iBAAL,CAAuB1zD,WAAvB,EAAoC+oB,OAApC,EAA6CC,OAA7C,CAAd;AACAhpB,qBAAW,GAAGqnC,eAAe,CAACrnC,WAAD,EAAcqpB,UAAd,CAA7B,CA1BmF,CA0B3B;AACxD;AACA;;AACAtN,iBAAO,GAAGyrB,eAAe,CAAC4rB,WAAW,CAACn3D,KAAb,EAAoBotB,UAApB,CAAzB;AACA,iBAAO;AACH;AACA;AACAA,sBAAU,EAAEA,UAHT;AAIH;AACA;AACAk3B,wBAAY,EAAE6S,WAAW,CAACn3D,KANvB;AAOH;AACA+2D,4BAAgB,EAAEI,WAAW,CAAC33B,IAR3B;AASH43B,yBAAa,EAAEA,aATZ;AAUH;AACA;AACArzD,uBAAW,EAAEA,WAZV;AAaH;AACA;AACAmC,uBAAW,EAAEA,WAfV;AAgBH;AACA4mB,mBAAO,EAAEA,OAjBN;AAkBH;AACAC,mBAAO,EAAEA,OAnBN;AAoBHjN,mBAAO,EAAEA,OApBN;AAqBH;AACAuN,yBAAa,EAAE,KAAKqqC,kBAAL,CAAwBP,WAAW,CAACtwD,QAApC,CAtBZ,CAuBH;;AAvBG,WAAP;AAyBH,SAvDD,CA3BkD,CAmFlD;AACA;AACA;;;AACA4vD,4BAAoB,CAAC34D,SAArB,CAA+Bu5D,eAA/B,GAAiD,YAAY;AACzD,iBAAO,KAAKM,cAAL,CAAoB,YAApB,EAAkC,KAAK51D,QAAL,CAAcwiD,MAAd,EAAlC,KACH;AAAEpkD,iBAAK,EAAE,IAAT;AAAeC,eAAG,EAAE;AAApB,WADJ,CADyD,CAEzB;AACnC,SAHD,CAtFkD,CA0FlD;AACA;AACA;AACA;;;AACAq2D,4BAAoB,CAAC34D,SAArB,CAA+By5D,qBAA/B,GAAuD,UAAU54B,IAAV,EAAgBzG,SAAhB,EAA2B;AAC9E,cAAIr5B,EAAE,GAAG,IAAT;AAAA,cAAeoC,QAAQ,GAAGpC,EAAE,CAACoC,QAA7B;AAAA,cAAuCqD,OAAO,GAAGzF,EAAE,CAACyF,OAApD;;AACA,cAAIuC,QAAQ,GAAG,IAAf;AACA,cAAI24B,IAAI,GAAG,IAAX;AACA,cAAIx/B,KAAK,GAAG,IAAZ;AACA,cAAIutB,QAAJ;;AACA,cAAItsB,QAAQ,CAAC4F,QAAb,EAAuB;AACnBA,oBAAQ,GAAG5F,QAAQ,CAAC4F,QAApB;AACA24B,gBAAI,GAAGv+B,QAAQ,CAAC22D,YAAhB;AACA53D,iBAAK,GAAG,KAAK63D,sBAAL,CAA4Bl5B,IAA5B,EAAkCzG,SAAlC,EAA6CrxB,QAA7C,EAAuD24B,IAAvD,CAAR;AACH,WAJD,MAKK,IAAKjS,QAAQ,GAAG,KAAKvuB,OAAL,CAAauuB,QAA7B,EAAwC;AACzCiS,gBAAI,GAAG,KAAP;AACAx/B,iBAAK,GAAG,KAAK83D,sBAAL,CAA4Bn5B,IAA5B,EAAkCzG,SAAlC,EAA6C3K,QAA7C,CAAR;AACH,WAHI,MAIA,IAAKvtB,KAAK,GAAG,KAAK+3D,uBAAL,CAA6Bp5B,IAA7B,CAAb,EAAkD;AACnDa,gBAAI,GAAGl7B,OAAO,CAACuvD,iBAAR,CAA0B7zD,KAAK,CAACG,KAAhC,EAAuCH,KAAK,CAACI,GAA7C,EAAkDo/B,IAAzD;AACH,WAFI,MAGA;AACD34B,oBAAQ,GAAG,KAAKmxD,mBAAL,EAAX;AACAx4B,gBAAI,GAAG6B,2BAA2B,CAACx6B,QAAD,CAA3B,CAAsC24B,IAA7C;AACAx/B,iBAAK,GAAG,KAAK63D,sBAAL,CAA4Bl5B,IAA5B,EAAkCzG,SAAlC,EAA6CrxB,QAA7C,EAAuD24B,IAAvD,CAAR;AACH;;AACD,iBAAO;AAAE34B,oBAAQ,EAAEA,QAAZ;AAAsB24B,gBAAI,EAAEA,IAA5B;AAAkCx/B,iBAAK,EAAEA;AAAzC,WAAP;AACH,SAxBD;;AAyBAy2D,4BAAoB,CAAC34D,SAArB,CAA+Bk6D,mBAA/B,GAAqD,YAAY;AAC7D,iBAAOz4B,cAAc,CAAC;AAAE94B,eAAG,EAAE;AAAP,WAAD,CAArB;AACH,SAFD,CAvHkD,CA0HlD;AACA;;;AACAgwD,4BAAoB,CAAC34D,SAArB,CAA+B25D,iBAA/B,GAAmD,UAAUz3D,KAAV,EAAiB8sB,OAAjB,EAA0BC,OAA1B,EAAmC;AAClF,cAAIzoB,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAInE,KAAK,GAAGH,KAAK,CAACG,KAAlB;AACA,cAAIC,GAAG,GAAGJ,KAAK,CAACI,GAAhB;;AACA,cAAI,KAAKa,QAAL,UAAoBnD,SAApB,CAA8Bm6D,cAAlC,EAAkD;AAC9C;AACA,gBAAIt3B,WAAW,CAAC7T,OAAD,CAAX,GAAuB,CAA3B,EAA8B;AAC1B3sB,mBAAK,GAAGy8B,UAAU,CAACz8B,KAAD,CAAlB,CAD0B,CACC;;AAC3BA,mBAAK,GAAGmE,OAAO,CAAC1B,GAAR,CAAYzC,KAAZ,EAAmB2sB,OAAnB,CAAR;AACH,aAL6C,CAM9C;;;AACA,gBAAI6T,WAAW,CAAC5T,OAAD,CAAX,GAAuB,CAA3B,EAA8B;AAC1B3sB,iBAAG,GAAGw8B,UAAU,CAACx8B,GAAD,CAAhB,CAD0B,CACH;;AACvBA,iBAAG,GAAG67B,OAAO,CAAC77B,GAAD,EAAM,CAAC,CAAP,CAAb;AACAA,iBAAG,GAAGkE,OAAO,CAAC1B,GAAR,CAAYxC,GAAZ,EAAiB2sB,OAAjB,CAAN;AACH;AACJ;;AACD,iBAAO;AAAE5sB,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAEA;AAArB,WAAP;AACH,SAlBD,CA5HkD,CA+IlD;AACA;;;AACAq2D,4BAAoB,CAAC34D,SAArB,CAA+B+5D,sBAA/B,GAAwD,UAAUl5B,IAAV,EAAgBzG,SAAhB,EAA2BrxB,QAA3B,EAAqC24B,IAArC,EAA2C;AAC/F,cAAIl7B,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAI4zD,SAAS,GAAG,KAAKl5D,OAAL,CAAasuB,aAA7B;AACA,cAAI6qC,kBAAJ;AACA,cAAIC,qBAAJ;AACA,cAAIj4D,KAAJ;AACA,cAAIC,GAAJ;AACA,cAAI0e,GAAJ,CAP+F,CAQ/F;;AACA,cAAI,CAACo5C,SAAL,EAAgB;AACZC,8BAAkB,GAAG,KAAKn5D,OAAL,CAAaquB,aAAlC;;AACA,gBAAI8qC,kBAAJ,EAAwB;AACpBC,mCAAqB,GAAG74B,cAAc,CAAC44B,kBAAD,CAAtC,CADoB,CAEpB;;AACA,kBAAIt3B,SAAS,CAACu3B,qBAAD,CAAT,GAAmCv3B,SAAS,CAACh6B,QAAD,CAAhD,EAA4D;AACxDqxD,yBAAS,GAAG72B,2BAA2B,CAAC+2B,qBAAD,EAAwB,CAACx4B,iBAAiB,CAACu4B,kBAAD,CAA1C,CAA3B,CAA2F34B,IAAvG;AACH,eAFD,MAGK;AACD04B,yBAAS,GAAG14B,IAAZ;AACH;AACJ,aATD,MAUK;AACD04B,uBAAS,GAAG14B,IAAZ;AACH;AACJ,WAxB8F,CAyB/F;;;AACA,cAAImB,WAAW,CAAC95B,QAAD,CAAX,IAAyB,CAA7B,EAAgC;AAC5B,gBAAI,KAAKwxD,WAAL,CAAiBl4D,KAAjB,CAAJ,EAA6B;AACzBA,mBAAK,GAAG,KAAKm4D,cAAL,CAAoBn4D,KAApB,EAA2B+3B,SAA3B,CAAR;AACA/3B,mBAAK,GAAGy8B,UAAU,CAACz8B,KAAD,CAAlB;AACH;AACJ;;AACD,mBAASo4D,UAAT,GAAsB;AAClBp4D,iBAAK,GAAGmE,OAAO,CAACyvD,OAAR,CAAgBp1B,IAAhB,EAAsBu5B,SAAtB,CAAR;AACA93D,eAAG,GAAGkE,OAAO,CAAC1B,GAAR,CAAYzC,KAAZ,EAAmB0G,QAAnB,CAAN;AACAiY,eAAG,GAAG;AAAE3e,mBAAK,EAAEA,KAAT;AAAgBC,iBAAG,EAAEA;AAArB,aAAN;AACH;;AACDm4D,oBAAU,GArCqF,CAsC/F;;AACA,cAAI,CAAC,KAAKjB,cAAL,CAAoBx4C,GAApB,CAAL,EAA+B;AAC3B6f,gBAAI,GAAG,KAAK25B,cAAL,CAAoB35B,IAApB,EAA0BzG,SAA1B,CAAP;AACAqgC,sBAAU;AACb;;AACD,iBAAOz5C,GAAP;AACH,SA5CD,CAjJkD,CA8LlD;;;AACA23C,4BAAoB,CAAC34D,SAArB,CAA+Bg6D,sBAA/B,GAAwD,UAAUn5B,IAAV,EAAgBzG,SAAhB,EAA2B3K,QAA3B,EAAqC;AACzF,cAAIjpB,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIk0D,eAAe,GAAG,KAAKx5D,OAAL,CAAasuB,aAAnC;AACA,cAAImrC,YAAY,GAAG,CAAnB;AACA,cAAIt4D,KAAK,GAAGw+B,IAAZ;AACA,cAAIv+B,GAAJ;;AACA,cAAIo4D,eAAJ,EAAqB;AACjBr4D,iBAAK,GAAGmE,OAAO,CAACyvD,OAAR,CAAgB5zD,KAAhB,EAAuBq4D,eAAvB,CAAR;AACH;;AACDr4D,eAAK,GAAGy8B,UAAU,CAACz8B,KAAD,CAAlB;AACAA,eAAK,GAAG,KAAKm4D,cAAL,CAAoBn4D,KAApB,EAA2B+3B,SAA3B,CAAR;AACA93B,aAAG,GAAGD,KAAN;;AACA,aAAG;AACCC,eAAG,GAAG67B,OAAO,CAAC77B,GAAD,EAAM,CAAN,CAAb;;AACA,gBAAI,CAAC,KAAKi4D,WAAL,CAAiBj4D,GAAjB,CAAL,EAA4B;AACxBq4D,0BAAY;AACf;AACJ,WALD,QAKSA,YAAY,GAAGlrC,QALxB;;AAMA,iBAAO;AAAEptB,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAEA;AAArB,WAAP;AACH,SAnBD,CA/LkD,CAmNlD;AACA;;;AACAq2D,4BAAoB,CAAC34D,SAArB,CAA+Bi6D,uBAA/B,GAAyD,UAAUp5B,IAAV,EAAgB;AACrE,cAAIr6B,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAI6oB,YAAY,GAAG,KAAKwqC,cAAL,CAAoB,cAApB,EAAoCrzD,OAAO,CAAC6wC,MAAR,CAAexW,IAAf,CAApC,CAAnB;;AACA,cAAIxR,YAAY,KAAKA,YAAY,CAAChtB,KAAb,IAAsB,IAAtB,IAA8BgtB,YAAY,CAAC/sB,GAAb,IAAoB,IAAvD,CAAhB,EAA8E;AAC1E,mBAAO,IAAP;AACH;;AACD,iBAAO+sB,YAAP;AACH,SAPD,CArNkD,CA6NlD;AACA;AACA;;;AACAspC,4BAAoB,CAAC34D,SAArB,CAA+B05D,gBAA/B,GAAkD,UAAUlT,YAAV,EAAwByS,gBAAxB,EAA0CK,aAA1C,EAAyD;AACvG,iBAAO9S,YAAP;AACH,SAFD,CAhOkD,CAmOlD;AACA;;;AACAmS,4BAAoB,CAAC34D,SAArB,CAA+B45D,kBAA/B,GAAoD,UAAUgB,QAAV,EAAoB;AACpE,cAAIP,kBAAkB,GAAG,KAAKn5D,OAAL,CAAaquB,aAAtC;AACA,cAAImrC,eAAJ;;AACA,cAAIL,kBAAJ,EAAwB;AACpB,mBAAO54B,cAAc,CAAC44B,kBAAD,CAArB;AACH,WAFD,MAGK,IAAKK,eAAe,GAAG,KAAKx5D,OAAL,CAAasuB,aAApC,EAAoD;AACrD,mBAAOiS,cAAc,CAAC,CAAD,EAAIi5B,eAAJ,CAArB;AACH,WAFI,MAGA,IAAIE,QAAJ,EAAc;AACf,mBAAOA,QAAP;AACH,WAFI,MAGA;AACD,mBAAOn5B,cAAc,CAAC;AAAEz4B,kBAAI,EAAE;AAAR,aAAD,CAArB;AACH;AACJ,SAfD,CArOkD,CAqPlD;AACA;AACA;;;AACA2vD,4BAAoB,CAAC34D,SAArB,CAA+B65D,cAA/B,GAAgD,UAAU5vD,IAAV,EAAgB;AAC5D,cAAI4wD,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAI51D,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1C41D,qBAAS,CAAC51D,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAIg0B,GAAG,GAAG,KAAK/3B,OAAL,CAAa+I,IAAb,CAAV;;AACA,cAAI,OAAOgvB,GAAP,KAAe,UAAnB,EAA+B;AAC3BA,eAAG,GAAGA,GAAG,CAAC3yB,KAAJ,CAAU,IAAV,EAAgBu0D,SAAhB,CAAN;AACH;;AACD,cAAI5hC,GAAJ,EAAS;AACLA,eAAG,GAAG2T,UAAU,CAAC3T,GAAD,EAAM,KAAKzyB,OAAX,CAAhB;AACH;;AACD,cAAIyyB,GAAJ,EAAS;AACLA,eAAG,GAAGoP,sBAAsB,CAACpP,GAAD,CAA5B;AACH;;AACD,iBAAOA,GAAP;AACH,SAhBD;AAiBA;;AAEA;;;AACA0/B,4BAAoB,CAAC34D,SAArB,CAA+B44D,cAA/B,GAAgD,YAAY;AACxD,cAAIlrC,UAAU,GAAG,KAAKxsB,OAAL,CAAawsB,UAAb,IAA2B,EAA5C,CADwD,CACR;;AAChD,cAAIotC,eAAe,GAAG,EAAtB,CAFwD,CAE9B;;AAC1B,cAAI1yB,MAAM,GAAG,CAAb;AACA,cAAIjhC,CAAJ;;AACA,cAAI,KAAKjG,OAAL,CAAausB,QAAb,KAA0B,KAA9B,EAAqC;AACjCC,sBAAU,CAACjrB,IAAX,CAAgB,CAAhB,EAAmB,CAAnB,EADiC,CACV;AAC1B;;AACD,eAAK0E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAwB;AACpB,gBAAI,EAAE2zD,eAAe,CAAC3zD,CAAD,CAAf,GAAqBumB,UAAU,CAACwlB,OAAX,CAAmB/rC,CAAnB,MAA0B,CAAC,CAAlD,CAAJ,EAA0D;AACtDihC,oBAAM;AACT;AACJ;;AACD,cAAI,CAACA,MAAL,EAAa;AACT,kBAAM,IAAI2yB,KAAJ,CAAU,oBAAV,CAAN,CADS,CAC8B;AAC1C;;AACD,eAAKD,eAAL,GAAuBA,eAAvB;AACH,SAjBD,CA5QkD,CA8RlD;AACA;;;AACAnC,4BAAoB,CAAC34D,SAArB,CAA+Bw5D,cAA/B,GAAgD,UAAUt3D,KAAV,EAAiB;AAC7D,cAAIG,KAAK,GAAGH,KAAK,CAACG,KAAlB;AACA,cAAIC,GAAG,GAAGJ,KAAK,CAACI,GAAhB;;AACA,cAAID,KAAJ,EAAW;AACPA,iBAAK,GAAG,KAAKm4D,cAAL,CAAoBn4D,KAApB,CAAR;AACH;;AACD,cAAIC,GAAJ,EAAS;AACLA,eAAG,GAAG,KAAKk4D,cAAL,CAAoBl4D,GAApB,EAAyB,CAAC,CAA1B,EAA6B,IAA7B,CAAN;AACH;;AACD,cAAID,KAAK,IAAI,IAAT,IAAiBC,GAAG,IAAI,IAAxB,IAAgCD,KAAK,GAAGC,GAA5C,EAAiD;AAC7C,mBAAO;AAAED,mBAAK,EAAEA,KAAT;AAAgBC,iBAAG,EAAEA;AAArB,aAAP;AACH;;AACD,iBAAO,IAAP;AACH,SAbD,CAhSkD,CA8SlD;AACA;;;AACAq2D,4BAAoB,CAAC34D,SAArB,CAA+Bu6D,WAA/B,GAA6C,UAAU5xD,GAAV,EAAe;AACxD,cAAIA,GAAG,YAAYW,IAAnB,EAAyB;AACrBX,eAAG,GAAGA,GAAG,CAACg4B,SAAJ,EAAN;AACH;;AACD,iBAAO,KAAKm6B,eAAL,CAAqBnyD,GAArB,CAAP;AACH,SALD,CAhTkD,CAsTlD;AACA;AACA;AACA;AACA;;;AACAgwD,4BAAoB,CAAC34D,SAArB,CAA+Bw6D,cAA/B,GAAgD,UAAU35B,IAAV,EAAgBm6B,GAAhB,EAAqBC,WAArB,EAAkC;AAC9E,cAAID,GAAG,KAAK,KAAK,CAAjB,EAAoB;AAAEA,eAAG,GAAG,CAAN;AAAU;;AAChC,cAAIC,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,uBAAW,GAAG,KAAd;AAAsB;;AACpD,iBAAO,KAAKH,eAAL,CAAqB,CAACj6B,IAAI,CAACF,SAAL,MAAoBs6B,WAAW,GAAGD,GAAH,GAAS,CAAxC,IAA6C,CAA9C,IAAmD,CAAxE,CAAP,EAAmF;AAC/En6B,gBAAI,GAAG1C,OAAO,CAAC0C,IAAD,EAAOm6B,GAAP,CAAd;AACH;;AACD,iBAAOn6B,IAAP;AACH,SAPD;;AAQA,eAAO83B,oBAAP;AACH,OApUyC,EAA1C,C,CAqUA;;;AACA,eAASuC,mBAAT,CAA6BC,EAA7B,EAAiCC,EAAjC,EAAqC;AACjC,eAAO5tB,WAAW,CAAC2tB,EAAE,CAAC7rC,UAAJ,EAAgB8rC,EAAE,CAAC9rC,UAAnB,CAAX,IACHke,WAAW,CAAC2tB,EAAE,CAACl1D,WAAJ,EAAiBm1D,EAAE,CAACn1D,WAApB,CADR,IAEHunC,WAAW,CAAC2tB,EAAE,CAAC/yD,WAAJ,EAAiBgzD,EAAE,CAAChzD,WAApB,CAFR,IAGHg6B,cAAc,CAAC+4B,EAAE,CAACnsC,OAAJ,EAAaosC,EAAE,CAACpsC,OAAhB,CAHX,IAIHoT,cAAc,CAAC+4B,EAAE,CAAClsC,OAAJ,EAAamsC,EAAE,CAACnsC,OAAhB,CAJlB;AAKA;;;;;;;;AAQH;;AAED,eAAS4N,MAAT,CAAiBlb,KAAjB,EAAwBnW,MAAxB,EAAgCvH,QAAhC,EAA0C;AACtC,YAAIo3D,QAAQ,GAAGC,cAAc,CAAC35C,KAAK,CAAC05C,QAAP,EAAiB7vD,MAAjB,CAA7B;AACA,YAAIlH,WAAW,GAAGi3D,iBAAiB,CAAC55C,KAAK,CAACrd,WAAP,EAAoBkH,MAApB,EAA4BmW,KAAK,CAACo3C,WAAlC,EAA+CsC,QAA/C,EAAyDp3D,QAAzD,CAAnC;AACA,YAAI+lB,YAAY,GAAGotC,kBAAkB,CAACz1C,KAAK,CAACqI,YAAP,EAAqBxe,MAArB,EAA6BlH,WAA7B,EAA0CL,QAA1C,CAArC;;AACA,YAAIu3D,SAAS,GAAGntD,QAAQ,CAAC,EAAD,EAAKsT,KAAL,EAAY;AAAE05C,kBAAQ,EAAEA,QAAZ;AAChC/2D,qBAAW,EAAEA,WADmB;AACNy0D,qBAAW,EAAE0C,iBAAiB,CAAC95C,KAAK,CAACo3C,WAAP,EAAoBvtD,MAApB,EAA4BlH,WAA5B,CADxB;AACkE0lB,sBAAY,EAAEA,YADhF;AAC8FvlB,oBAAU,EAAE02C,gBAAgB,CAACx5B,KAAK,CAACld,UAAP,EAAmB+G,MAAnB,EAA2Bwe,YAA3B,EAAyC1lB,WAAzC,EAAsDL,QAAtD,CAD1H;AAC2LsiB,uBAAa,EAAEm1C,mBAAmB,CAAC/5C,KAAK,CAAC4E,aAAP,EAAsB/a,MAAtB,EAA8BvH,QAA9B,CAD7N;AACsQ4d,wBAAc,EAAE85C,mBAAmB,CAACh6C,KAAK,CAACE,cAAP,EAAuBrW,MAAvB,CADzS;AACyU6wC,mBAAS,EAAEuf,eAAe,CAACj6C,KAAK,CAAC06B,SAAP,EAAkB7wC,MAAlB,EAA0Bwe,YAA1B,EAAwC/lB,QAAxC,CADnW;AACsZinB,qBAAW,EAAE2wC,iBAAiB,CAACl6C,KAAK,CAACuJ,WAAP,EAAoB1f,MAApB,EAA4Bwe,YAA5B,EAA0C/lB,QAA1C,CADpb;AACye01C,iCAAuB,EAAEmiB,mBAAmB,CAAC9xC,YAAD,CADrhB;AACqiB+xC,sBAAY,EAAED,mBAAmB,CAAC9xC,YAAD;AADtkB,SAAZ,CAAxB;;AAEA,aAAK,IAAI/kB,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGkD,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4B4sC,QAAlD,EAA4D3nD,EAAE,GAAGlE,EAAE,CAACN,MAApE,EAA4EwE,EAAE,EAA9E,EAAkF;AAC9E,cAAI+2D,WAAW,GAAGj7D,EAAE,CAACkE,EAAD,CAApB;AACAu2D,mBAAS,GAAGQ,WAAW,CAACR,SAAD,EAAYhwD,MAAZ,EAAoBvH,QAApB,CAAvB;AACH,SATqC,CAUtC;;;AACA,eAAOu3D,SAAP;AACH;;AACD,eAASF,cAAT,CAAwBW,eAAxB,EAAyCzwD,MAAzC,EAAiD;AAC7C,gBAAQA,MAAM,CAAC1C,IAAf;AACI,eAAK,eAAL;AACI,mBAAO0C,MAAM,CAAC6vD,QAAd;;AACJ;AACI,mBAAOY,eAAP;AAJR;AAMH;;AACD,eAASV,iBAAT,CAA2BzC,kBAA3B,EAA+CttD,MAA/C,EAAuDutD,WAAvD,EAAoEsC,QAApE,EAA8Ep3D,QAA9E,EAAwF;AACpF,YAAIi4D,cAAJ;;AACA,gBAAQ1wD,MAAM,CAAC1C,IAAf;AACI,eAAK,MAAL;AACIozD,0BAAc,GAAGj4D,QAAQ,CAACk4D,qBAAT,CAA+Bd,QAA/B,EAAyCxC,SAAzC,CAAmDC,kBAAnD,EAAuEC,WAAvE,CAAjB;AACA;;AACJ,eAAK,MAAL;AACImD,0BAAc,GAAGj4D,QAAQ,CAACk4D,qBAAT,CAA+Bd,QAA/B,EAAyCnC,SAAzC,CAAmDJ,kBAAnD,EAAuEC,WAAvE,CAAjB;AACA;;AACJ,eAAK,UAAL;AACI,gBAAI,CAACD,kBAAkB,CAAC7yD,WAApB,IACA,CAAC4nC,mBAAmB,CAACirB,kBAAkB,CAACtS,YAApB,EAAkCh7C,MAAM,CAAC4wD,UAAzC,CADxB,EAC8E;AAC1EF,4BAAc,GAAGj4D,QAAQ,CAACk4D,qBAAT,CAA+Bd,QAA/B,EAAyCjT,KAAzC,CAA+C58C,MAAM,CAAC4wD,UAAtD,EAAkE7vC,SAAlE,EAA6E,IAA7E,CAAkF;AAAlF,eAAjB;AAEH;;AACD;;AACJ,eAAK,eAAL;AACI,gBAAI8vC,SAAS,GAAGp4D,QAAQ,CAACk4D,qBAAT,CAA+Bd,QAA/B,CAAhB;;AACA,gBAAI,CAACgB,SAAL,EAAgB;AACZ,oBAAM,IAAItB,KAAJ,CAAUM,QAAQ,GACpB,4BAA4BA,QAA5B,GAAuC,gEADnB,GAEpB,yCAFE,CAAN;AAGH;;AACDa,0BAAc,GAAGG,SAAS,CAACjU,KAAV,CAAgB58C,MAAM,CAAC4wD,UAAP,IAAqBrD,WAArC,EAAkDxsC,SAAlD,EAA6D,IAA7D,CAAkE;AAAlE,aAAjB;AAEA;AAvBR;;AAyBA,YAAI2vC,cAAc,IACdA,cAAc,CAACl6C,OADf,IAEA,EAAE82C,kBAAkB,IAAIoC,mBAAmB,CAACpC,kBAAD,EAAqBoD,cAArB,CAA3C,CAFJ,EAEsF;AAClF,iBAAOA,cAAP;AACH,SAJD,MAKK;AACD,iBAAOpD,kBAAP;AACH;AACJ;;AACD,eAAS2C,iBAAT,CAA2B1C,WAA3B,EAAwCvtD,MAAxC,EAAgDlH,WAAhD,EAA6D;AACzD,gBAAQkH,MAAM,CAAC1C,IAAf;AACI,eAAK,MAAL;AACA,eAAK,MAAL;AACI,gBAAI,CAAC+kC,mBAAmB,CAACvpC,WAAW,CAACkiD,YAAb,EAA2BuS,WAA3B,CAAxB,EAAiE;AAC7D,qBAAOz0D,WAAW,CAACkiD,YAAZ,CAAyBnkD,KAAhC;AACH,aAFD,MAGK;AACD,qBAAO02D,WAAP;AACH;;AACL,eAAK,UAAL;AACA,eAAK,eAAL;AACI,gBAAIuD,OAAO,GAAG9wD,MAAM,CAAC4wD,UAAP,IAAqBrD,WAAnC;;AACA,gBAAIz0D,WAAW,CAAC2B,WAAZ,IAA2B,CAAC4nC,mBAAmB,CAACvpC,WAAW,CAAC2B,WAAb,EAA0Bq2D,OAA1B,CAAnD,EAAuF;AACnF,qBAAOh4D,WAAW,CAACkiD,YAAZ,CAAyBnkD,KAAhC;AACH,aAFD,MAGK;AACD,qBAAOi6D,OAAP;AACH;;AACL;AACI,mBAAOvD,WAAP;AAnBR;AAqBH;;AACD,eAAS2C,mBAAT,CAA6Ba,gBAA7B,EAA+C/wD,MAA/C,EAAuDvH,QAAvD,EAAiE;AAC7D,gBAAQuH,MAAM,CAAC1C,IAAf;AACI,eAAK,cAAL;AACI,mBAAO0C,MAAM,CAAC4U,SAAd;;AACJ,eAAK,gBAAL;AACI,mBAAO,IAAP;;AACJ;AACI,mBAAOm8C,gBAAP;AANR;AAQH;;AACD,eAASZ,mBAAT,CAA6Ba,iBAA7B,EAAgDhxD,MAAhD,EAAwD;AACpD,gBAAQA,MAAM,CAAC1C,IAAf;AACI,eAAK,cAAL;AACI,mBAAO0C,MAAM,CAACiW,eAAd;;AACJ,eAAK,gBAAL;AACI,mBAAO,EAAP;;AACJ;AACI,mBAAO+6C,iBAAP;AANR;AAQH;;AACD,eAASZ,eAAT,CAAyBa,WAAzB,EAAsCjxD,MAAtC,EAA8C8rD,OAA9C,EAAuDrzD,QAAvD,EAAiE;AAC7D,gBAAQuH,MAAM,CAAC1C,IAAf;AACI,eAAK,gBAAL;AACI,gBAAI4zD,OAAO,GAAGlxD,MAAM,CAACmW,KAArB;AACA,mBAAO;AACHY,4BAAc,EAAEm6C,OAAO,CAACn6C,cADrB;AAEHC,2BAAa,EAAEk6C,OAAO,CAACl6C,aAFpB;AAGHC,qBAAO,EAAEi6C,OAAO,CAACj6C,OAHd;AAIHC,qBAAO,EAAEg6C,OAAO,CAACh6C;AAJd,aAAP;;AAMJ,eAAK,kBAAL;AACI,mBAAO,IAAP;;AACJ;AACI,mBAAO+5C,WAAP;AAZR;AAcH;;AACD,eAASZ,iBAAT,CAA2Bc,aAA3B,EAA0CnxD,MAA1C,EAAkD8rD,OAAlD,EAA2DrzD,QAA3D,EAAqE;AACjE,gBAAQuH,MAAM,CAAC1C,IAAf;AACI,eAAK,kBAAL;AACI,gBAAI8zD,SAAS,GAAGpxD,MAAM,CAACmW,KAAvB;AACA,mBAAO;AACHY,4BAAc,EAAEq6C,SAAS,CAACr6C,cADvB;AAEHC,2BAAa,EAAEo6C,SAAS,CAACp6C,aAFtB;AAGHC,qBAAO,EAAEm6C,SAAS,CAACn6C,OAHhB;AAIHC,qBAAO,EAAEk6C,SAAS,CAACl6C;AAJhB,aAAP;;AAMJ,eAAK,oBAAL;AACI,mBAAO,IAAP;;AACJ;AACI,mBAAOi6C,aAAP;AAZR;AAcH;;AACD,eAASb,mBAAT,CAA6B9xC,YAA7B,EAA2C;AACvC,YAAI6yC,GAAG,GAAG,CAAV;;AACA,aAAK,IAAIl1C,QAAT,IAAqBqC,YAArB,EAAmC;AAC/B,cAAIA,YAAY,CAACrC,QAAD,CAAZ,CAAuBwvC,UAA3B,EAAuC;AACnC0F,eAAG;AACN;AACJ;;AACD,eAAOA,GAAP;AACH;;AAED,UAAIC,cAAc,GAAG;AACjBz6D,aAAK,EAAE,IADU;AAEjBC,WAAG,EAAE,IAFY;AAGjBL,cAAM,EAAE2c;AAHS,OAArB;;AAKA,eAASm+C,aAAT,CAAuBnd,GAAvB,EAA4Bp5C,OAA5B,EAAqCw2D,eAArC,EAAsD;AAClD,YAAIC,IAAI,GAAGC,iBAAiB,CAACtd,GAAD,EAAMp5C,OAAN,CAA5B;AACA,YAAItE,KAAK,GAAG+6D,IAAI,CAAC/6D,KAAjB;;AACA,YAAI,CAACA,KAAK,CAACG,KAAX,EAAkB;AACd,iBAAO,IAAP;AACH;;AACD,YAAI,CAACH,KAAK,CAACI,GAAX,EAAgB;AACZ,cAAI06D,eAAe,IAAI,IAAvB,EAA6B;AACzB,mBAAO,IAAP;AACH,WAFD,MAGK;AACD96D,iBAAK,CAACI,GAAN,GAAYkE,OAAO,CAAC1B,GAAR,CAAY5C,KAAK,CAACG,KAAlB,EAAyB26D,eAAzB,CAAZ;AACH;AACJ;;AACD,eAAOC,IAAP;AACH;AACD;;;;;;AAIA,eAASC,iBAAT,CAA2Btd,GAA3B,EAAgCp5C,OAAhC,EAAyC;AACrC,YAAIwiC,SAAS,GAAG,EAAhB;AACA,YAAIpkB,aAAa,GAAG+iB,WAAW,CAACiY,GAAD,EAAMkd,cAAN,EAAsB,EAAtB,EAA0B9zB,SAA1B,CAA/B;AACA,YAAIuY,SAAS,GAAG38B,aAAa,CAACviB,KAAd,GAAsBmE,OAAO,CAACm7C,gBAAR,CAAyB/8B,aAAa,CAACviB,KAAvC,CAAtB,GAAsE,IAAtF;AACA,YAAIo/C,OAAO,GAAG78B,aAAa,CAACtiB,GAAd,GAAoBkE,OAAO,CAACm7C,gBAAR,CAAyB/8B,aAAa,CAACtiB,GAAvC,CAApB,GAAkE,IAAhF;AACA,YAAIL,MAAM,GAAG2iB,aAAa,CAAC3iB,MAA3B;;AACA,YAAIA,MAAM,IAAI,IAAd,EAAoB;AAChBA,gBAAM,GAAIs/C,SAAS,IAAIA,SAAS,CAACK,iBAAxB,KACJ,CAACH,OAAD,IAAYA,OAAO,CAACG,iBADhB,CAAT;AAEH,SAToC,CAUrC;;;AACA5Y,iBAAS,CAAC9mC,KAAV,GAAkB;AACdG,eAAK,EAAEk/C,SAAS,GAAGA,SAAS,CAACxhB,MAAb,GAAsB,IADxB;AAEdz9B,aAAG,EAAEm/C,OAAO,GAAGA,OAAO,CAAC1hB,MAAX,GAAoB;AAFlB,SAAlB;AAIAiJ,iBAAS,CAAC/mC,MAAV,GAAmBA,MAAnB;AACA,eAAO+mC,SAAP;AACH;;AACD,eAASm0B,gBAAT,CAA0BC,KAA1B,EAAiCC,KAAjC,EAAwC;AACpC,eAAO7vB,WAAW,CAAC4vB,KAAK,CAACl7D,KAAP,EAAcm7D,KAAK,CAACn7D,KAApB,CAAX,IACHk7D,KAAK,CAACn7D,MAAN,KAAiBo7D,KAAK,CAACp7D,MADpB,IAEHq7D,gBAAgB,CAACF,KAAD,EAAQC,KAAR,CAFpB;AAGH,O,CACD;;;AACA,eAASC,gBAAT,CAA0BF,KAA1B,EAAiCC,KAAjC,EAAwC;AACpC,aAAK,IAAItkC,QAAT,IAAqBskC,KAArB,EAA4B;AACxB,cAAItkC,QAAQ,KAAK,OAAb,IAAwBA,QAAQ,KAAK,QAAzC,EAAmD;AAC/C,gBAAIqkC,KAAK,CAACrkC,QAAD,CAAL,KAAoBskC,KAAK,CAACtkC,QAAD,CAA7B,EAAyC;AACrC,qBAAO,KAAP;AACH;AACJ;AACJ,SAPmC,CAQpC;AACA;;;AACA,aAAK,IAAIA,QAAT,IAAqBqkC,KAArB,EAA4B;AACxB,cAAI,EAAErkC,QAAQ,IAAIskC,KAAd,CAAJ,EAA0B;AACtB,mBAAO,KAAP;AACH;AACJ;;AACD,eAAO,IAAP;AACH;;AACD,eAASjf,gBAAT,CAA0B6e,IAA1B,EAAgCz2D,OAAhC,EAAyC;AACrC,eAAO;AACHnE,eAAK,EAAEmE,OAAO,CAAC6wC,MAAR,CAAe4lB,IAAI,CAAC/6D,KAAL,CAAWG,KAA1B,CADJ;AAEHC,aAAG,EAAEkE,OAAO,CAAC6wC,MAAR,CAAe4lB,IAAI,CAAC/6D,KAAL,CAAWI,GAA1B,CAFF;AAGH4rD,kBAAQ,EAAE1nD,OAAO,CAACuB,SAAR,CAAkBk1D,IAAI,CAAC/6D,KAAL,CAAWG,KAA7B,EAAoC;AAAE2F,oBAAQ,EAAEi1D,IAAI,CAACh7D;AAAjB,WAApC,CAHP;AAIHksD,gBAAM,EAAE3nD,OAAO,CAACuB,SAAR,CAAkBk1D,IAAI,CAAC/6D,KAAL,CAAWI,GAA7B,EAAkC;AAAE0F,oBAAQ,EAAEi1D,IAAI,CAACh7D;AAAjB,WAAlC,CAJL;AAKHA,gBAAM,EAAEg7D,IAAI,CAACh7D;AALV,SAAP;AAOH;;AACD,eAASmiB,iBAAT,CAA2B64C,IAA3B,EAAiCz2D,OAAjC,EAA0C;AACtC,eAAO;AACHq6B,cAAI,EAAEr6B,OAAO,CAAC6wC,MAAR,CAAe4lB,IAAI,CAAC/6D,KAAL,CAAWG,KAA1B,CADH;AAEHk7D,iBAAO,EAAE/2D,OAAO,CAACuB,SAAR,CAAkBk1D,IAAI,CAAC/6D,KAAL,CAAWG,KAA7B,EAAoC;AAAE2F,oBAAQ,EAAEi1D,IAAI,CAACh7D;AAAjB,WAApC,CAFN;AAGHA,gBAAM,EAAEg7D,IAAI,CAACh7D;AAHV,SAAP;AAKH;;AACD,eAASu7D,mBAAT,CAA6Bh/C,QAA7B,EAAuC9Z,YAAvC,EAAqDT,QAArD,EAA+D;AAC3D,YAAI5C,GAAG,GAAGw/C,aAAa,CAAC;AAAEh+B,kBAAQ,EAAE;AAAZ,SAAD,EAAsB,EAAtB,EAA0B;AACjDrE,gBAAQ,CAACvc,MADc,EACN,IADM,EACA;AACvBgC,gBAFuB,CAAvB;AAGA,eAAO;AACH5C,aAAG,EAAEA,GADF;AAEHI,YAAE,EAAE23C,cAAc,CAAC/3C,GAAD,EAAMqD,YAAN,CAFf;AAGHnD,kBAAQ,EAAEgqC,mBAAmB,CAAClqC,GAAG,CAAC0iB,KAAL,EAAYvF,QAAQ,CAACtc,KAArB,CAH1B;AAIHA,eAAK,EAAEsc,QAAQ,CAACtc,KAJb;AAKHC,iBAAO,EAAE,IALN;AAMHI,eAAK,EAAE;AANJ,SAAP;AAQH;;AAED,eAASk7D,eAAT,CAAyBC,cAAzB,EAAyCC,eAAzC,EAA0D;AACtD,YAAIvzB,IAAI,GAAG,EAAX;AACA,YAAIixB,QAAJ;;AACA,aAAKA,QAAL,IAAiBqC,cAAjB,EAAiC;AAC7BE,uBAAa,CAACvC,QAAD,EAAWjxB,IAAX,EAAiBszB,cAAjB,EAAiCC,eAAjC,CAAb;AACH;;AACD,aAAKtC,QAAL,IAAiBsC,eAAjB,EAAkC;AAC9BC,uBAAa,CAACvC,QAAD,EAAWjxB,IAAX,EAAiBszB,cAAjB,EAAiCC,eAAjC,CAAb;AACH;;AACD,eAAOvzB,IAAP;AACH;;AACD,eAASwzB,aAAT,CAAuBvC,QAAvB,EAAiCjxB,IAAjC,EAAuCszB,cAAvC,EAAuDC,eAAvD,EAAwE;AACpE,YAAIvzB,IAAI,CAACixB,QAAD,CAAR,EAAoB;AAChB,iBAAOjxB,IAAI,CAACixB,QAAD,CAAX;AACH;;AACD,YAAIwC,OAAO,GAAGC,YAAY,CAACzC,QAAD,EAAWjxB,IAAX,EAAiBszB,cAAjB,EAAiCC,eAAjC,CAA1B;;AACA,YAAIE,OAAJ,EAAa;AACTzzB,cAAI,CAACixB,QAAD,CAAJ,GAAiBwC,OAAjB;AACH;;AACD,eAAOA,OAAP;AACH;;AACD,eAASC,YAAT,CAAsBzC,QAAtB,EAAgCjxB,IAAhC,EAAsCszB,cAAtC,EAAsDC,eAAtD,EAAuE;AACnE,YAAII,aAAa,GAAGL,cAAc,CAACrC,QAAD,CAAlC;AACA,YAAI2C,cAAc,GAAGL,eAAe,CAACtC,QAAD,CAApC;;AACA,YAAI4C,SAAS,GAAG,SAAZA,SAAY,CAAUh0D,IAAV,EAAgB;AAC5B,iBAAQ8zD,aAAa,IAAIA,aAAa,CAAC9zD,IAAD,CAAb,KAAwB,IAA1C,GAAkD8zD,aAAa,CAAC9zD,IAAD,CAA/D,GACD+zD,cAAc,IAAIA,cAAc,CAAC/zD,IAAD,CAAd,KAAyB,IAA5C,GAAoD+zD,cAAc,CAAC/zD,IAAD,CAAlE,GAA2E,IADhF;AAEH,SAHD;;AAIA,YAAI6qD,QAAQ,GAAGmJ,SAAS,CAAC,OAAD,CAAxB;AACA,YAAIC,SAAS,GAAGD,SAAS,CAAC,WAAD,CAAzB;;AACA,YAAI,CAACC,SAAD,IAAcpJ,QAAlB,EAA4B;AACxBoJ,mBAAS,GACLC,sBAAsB,CAACrJ,QAAD,EAAW6I,eAAX,CAAtB,IACIQ,sBAAsB,CAACrJ,QAAD,EAAW4I,cAAX,CAF9B;AAGH;;AACD,YAAIU,QAAQ,GAAG,IAAf;;AACA,YAAIF,SAAJ,EAAe;AACX,cAAIA,SAAS,KAAK7C,QAAlB,EAA4B;AACxB,kBAAM,IAAIN,KAAJ,CAAU,uDAAV,CAAN;AACH;;AACDqD,kBAAQ,GAAGR,aAAa,CAACM,SAAD,EAAY9zB,IAAZ,EAAkBszB,cAAlB,EAAkCC,eAAlC,CAAxB;AACH;;AACD,YAAI,CAAC7I,QAAD,IAAasJ,QAAjB,EAA2B;AACvBtJ,kBAAQ,GAAGsJ,QAAQ,SAAnB;AACH;;AACD,YAAI,CAACtJ,QAAL,EAAe;AACX,iBAAO,IAAP,CADW,CACE;AAChB;;AACD,eAAO;AACHhsD,cAAI,EAAEuyD,QADH;AAEH,mBAAOvG,QAFJ;AAGHhtB,kBAAQ,EAAEz5B,QAAQ,CAAC,EAAD,EAAM+vD,QAAQ,GAAGA,QAAQ,CAACt2B,QAAZ,GAAuB,EAArC,EAA2Ci2B,aAAa,GAAGA,aAAa,CAAC78D,OAAjB,GAA2B,EAAnF,CAHf;AAIHizD,mBAAS,EAAE9lD,QAAQ,CAAC,EAAD,EAAM+vD,QAAQ,GAAGA,QAAQ,CAACjK,SAAZ,GAAwB,EAAtC,EAA4C6J,cAAc,GAAGA,cAAc,CAAC98D,OAAlB,GAA4B,EAAtF;AAJhB,SAAP;AAMH;;AACD,eAASi9D,sBAAT,CAAgCE,YAAhC,EAA8CC,OAA9C,EAAuD;AACnD,YAAIC,UAAU,GAAGh/D,MAAM,CAACi/D,cAAP,CAAsBH,YAAY,CAACr+D,SAAnC,CAAjB;;AACA,aAAK,IAAIq7D,QAAT,IAAqBiD,OAArB,EAA8B;AAC1B,cAAIp1B,MAAM,GAAGo1B,OAAO,CAACjD,QAAD,CAApB,CAD0B,CAE1B;;AACA,cAAInyB,MAAM,SAAN,IAAgBA,MAAM,SAAN,CAAalpC,SAAb,KAA2Bu+D,UAA/C,EAA2D;AACvD,mBAAOlD,QAAP;AACH;AACJ;;AACD,eAAO,EAAP;AACH;;AAED,eAASoD,gBAAT,CAA0BvxC,MAA1B,EAAkC;AAC9B,eAAO1D,OAAO,CAAC0D,MAAD,EAASwxC,eAAT,CAAd;AACH;;AACD,UAAIC,cAAc,GAAG;AACjB71D,YAAI,EAAEurB,MADW;AAEjB,iBAAO;AAFU,OAArB;;AAIA,eAASqqC,eAAT,CAAyBp1C,KAAzB,EAAgC;AAC5B,YAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC7BA,eAAK,GAAG;AAAE,qBAAOA;AAAT,WAAR;AACH;;AACD,YAAIpoB,OAAO,GAAG,EAAd;AACA,YAAImD,KAAK,GAAGsjC,WAAW,CAACre,KAAD,EAAQq1C,cAAR,EAAwB,EAAxB,EAA4Bz9D,OAA5B,CAAvB;AACA,eAAO;AACHg9D,mBAAS,EAAE75D,KAAK,CAACyE,IADd;AAEH,mBAAOzE,KAAK,SAFT;AAGHnD,iBAAO,EAAEA;AAHN,SAAP;AAKH;;AAED,eAAS09D,cAAT,CAAwBC,aAAxB,EAAuCC,cAAvC,EAAuD;AACnD,YAAIpB,cAAc,GAAGe,gBAAgB,CAACI,aAAD,CAArC;AACA,YAAIlB,eAAe,GAAGc,gBAAgB,CAACK,cAAc,CAAC3K,SAAf,CAAyB5rD,KAA1B,CAAtC;AACA,YAAIw2D,QAAQ,GAAGtB,eAAe,CAACC,cAAD,EAAiBC,eAAjB,CAA9B;AACA,eAAOn0C,OAAO,CAACu1C,QAAD,EAAW,UAAUlB,OAAV,EAAmB;AACxC,iBAAOmB,aAAa,CAACnB,OAAD,EAAUF,eAAV,EAA2BmB,cAA3B,CAApB;AACH,SAFa,CAAd;AAGH;;AACD,eAASE,aAAT,CAAuBnB,OAAvB,EAAgCF,eAAhC,EAAiDmB,cAAjD,EAAiE;AAC7D,YAAIG,aAAa,GAAGpB,OAAO,CAAC1J,SAAR,CAAkBprD,QAAlB,IAChB80D,OAAO,CAAC/1B,QAAR,CAAiB/+B,QADD,IAEhB+1D,cAAc,CAAC1K,gBAAf,CAAgCrrD,QAFhB,IAGhB+1D,cAAc,CAAC3K,SAAf,CAAyBprD,QAH7B;AAIA,YAAIA,QAAQ,GAAG,IAAf;AACA,YAAI+wD,YAAY,GAAG,EAAnB;AACA,YAAIoF,UAAU,GAAG,EAAjB;AACA,YAAIC,mBAAmB,GAAG,EAA1B;;AACA,YAAIF,aAAJ,EAAmB;AACfl2D,kBAAQ,GAAG04B,cAAc,CAACw9B,aAAD,CAAzB;;AACA,cAAIl2D,QAAJ,EAAc;AAAE;AACZ,gBAAIq2D,KAAK,GAAG77B,2BAA2B,CAACx6B,QAAD,EAAW,CAAC+4B,iBAAiB,CAACm9B,aAAD,CAA7B,CAAvC;AACAnF,wBAAY,GAAGsF,KAAK,CAAC19B,IAArB;;AACA,gBAAI09B,KAAK,CAACl1D,KAAN,KAAgB,CAApB,EAAuB;AACnBg1D,wBAAU,GAAGpF,YAAb;AACAqF,iCAAmB,GAAGxB,eAAe,CAAC7D,YAAD,CAAf,GAAgC6D,eAAe,CAAC7D,YAAD,CAAf,CAA8B54D,OAA9D,GAAwE,EAA9F;AACH;AACJ;AACJ;;AACD,YAAIm+D,eAAe,GAAG,SAAlBA,eAAkB,CAAUn+D,OAAV,EAAmB;AACrC,cAAIo+D,aAAa,GAAGp+D,OAAO,CAACwxB,UAAR,IAAsB,EAA1C;AACA,cAAIjqB,aAAa,GAAGo1D,OAAO,CAAC/1B,QAAR,CAAiBr/B,aAArC;;AACA,cAAIA,aAAa,IAAI,IAAjB,IAAyB62D,aAAa,CAAC72D,aAAD,CAAb,IAAgC,IAA7D,EAAmE;AAC/D,mBAAO62D,aAAa,CAAC72D,aAAD,CAApB;AACH;;AACD,cAAI62D,aAAa,CAACzB,OAAO,CAAC/0D,IAAT,CAAb,IAA+B,IAAnC,EAAyC;AACrC,mBAAOw2D,aAAa,CAACzB,OAAO,CAAC/0D,IAAT,CAApB;AACH;;AACD,cAAIw2D,aAAa,CAACJ,UAAD,CAAb,IAA6B,IAAjC,EAAuC;AACnC,mBAAOI,aAAa,CAACJ,UAAD,CAApB;AACH;AACJ,SAZD;;AAaA,eAAO;AACHp2D,cAAI,EAAE+0D,OAAO,CAAC/0D,IADX;AAEH,mBAAO+0D,OAAO,SAFX;AAGH90D,kBAAQ,EAAEA,QAHP;AAIH+wD,sBAAY,EAAEA,YAJX;AAKHoF,oBAAU,EAAEA,UALT;AAMHh+D,iBAAO,EAAEmN,QAAQ,CAAC,EAAD,EAAKojD,cAAL,EAAqBoM,OAAO,CAAC/1B,QAA7B,EAAuCg3B,cAAc,CAACnK,WAAtD,EAAmEmK,cAAc,CAACpK,cAAlF,EAAkGoK,cAAc,CAAC3K,SAAjH,EAA4HgL,mBAA5H,EAAiJtB,OAAO,CAAC1J,SAAzJ,EAAoK2K,cAAc,CAAC1K,gBAAnL,CANd;AAOHmL,4BAAkB,EAAEF,eAAe,CAACP,cAAc,CAAC1K,gBAAhB,CAAf,IAChBiL,eAAe,CAACP,cAAc,CAAC3K,SAAhB,CADC,IAC6B;AAC7C0J,iBAAO,CAAC1J,SAAR,CAAkBzhC,UATnB;AAUH8sC,2BAAiB,EAAEH,eAAe,CAACP,cAAc,CAACpK,cAAhB,CAAf,IACf2K,eAAe,CAACP,cAAc,CAACnK,WAAhB,CADA,IAEfkJ,OAAO,CAAC/1B,QAAR,CAAiBpV,UAFF,IAGf2sC,eAAe,CAAC5N,cAAD,CAHA,IAIfoM,OAAO,CAAC/0D,IAdT,CAcc;;AAdd,SAAP;AAgBH;;AAED,UAAI22D,OAAO;AAAG;AAAe,gBAAUt/D,MAAV,EAAkB;AAC3CN,iBAAS,CAAC4/D,OAAD,EAAUt/D,MAAV,CAAT;;AACA,iBAASs/D,OAAT,CAAiBC,cAAjB,EAAiC;AAC7B,cAAIr/D,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACs/D,aAAN,GAAsBrd,gBAAgB,CAACjiD,KAAK,CAACu/D,YAAP,EAAqBv/D,KAAK,CAACw/D,cAA3B,CAAtC;AACAx/D,eAAK,CAACy/D,YAAN,GAAqBxd,gBAAgB,CAACjiD,KAAK,CAAC0/D,WAAP,EAAoB,IAApB,EAA0B,CAAC1/D,KAAK,CAACs/D,aAAP,CAA1B,CAArC;AACAt/D,eAAK,CAAC2/D,mBAAN,GAA4B1d,gBAAgB,CAACjiD,KAAK,CAAC4/D,kBAAP,EAA2B,IAA3B,EAAiC,CAAC5/D,KAAK,CAACs/D,aAAP,CAAjC,CAA5C;AACAt/D,eAAK,CAAC6/D,YAAN,GAAqB5d,gBAAgB,CAACjiD,KAAK,CAAC8/D,WAAP,EAAoB,IAApB,EAA0B,CAAC9/D,KAAK,CAACs/D,aAAP,CAA1B,CAArC;AACAt/D,eAAK,CAAC+/D,WAAN,GAAoB9d,gBAAgB,CAACjiD,KAAK,CAACggE,UAAP,EAAmB,IAAnB,EAAyB,CAAChgE,KAAK,CAACs/D,aAAP,CAAzB,CAApC;AACAt/D,eAAK,CAACigE,WAAN,GAAoBhe,gBAAgB,CAACjiD,KAAK,CAACkgE,UAAP,EAAmB,IAAnB,EAAyB,CAAClgE,KAAK,CAACs/D,aAAP,CAAzB,CAApC;AACAt/D,eAAK,CAAC8D,EAAN,GAAWwxB,aAAa,CAAC,KAAD,EAAQ;AAAE7tB,qBAAS,EAAE,gBAAgB43D;AAA7B,WAAR,CAAxB;AACA,iBAAOr/D,KAAP;AACH;;AACDo/D,eAAO,CAACz/D,SAAR,CAAkB2E,OAAlB,GAA4B,YAAY;AACpCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKq/D,aAAL,CAAmB57D,QAAnB,GAFoC,CAEL;;;AAC/BuzB,uBAAa,CAAC,KAAKnzB,EAAN,CAAb;AACH,SAJD;;AAKAs7D,eAAO,CAACz/D,SAAR,CAAkBoE,MAAlB,GAA2B,UAAUC,KAAV,EAAiB;AACxC,eAAKs7D,aAAL,CAAmBt7D,KAAK,CAACm8D,MAAzB;;AACA,eAAKV,YAAL,CAAkBz7D,KAAK,CAACxB,KAAxB;;AACA,eAAKm9D,mBAAL,CAAyB37D,KAAK,CAACo8D,YAA/B;;AACA,eAAKP,YAAL,CAAkB77D,KAAK,CAACq8D,cAAxB;;AACA,eAAKN,WAAL,CAAiB/7D,KAAK,CAACs8D,aAAvB;;AACA,eAAKL,WAAL,CAAiBj8D,KAAK,CAACu8D,aAAvB;AACH,SAPD;;AAQAnB,eAAO,CAACz/D,SAAR,CAAkB4/D,YAAlB,GAAiC,UAAUY,MAAV,EAAkB;AAC/C,cAAIr8D,EAAE,GAAG,KAAKA,EAAd;AACA,eAAK08D,gBAAL,GAAwB,EAAxB;AACA5qC,yBAAe,CAAC9xB,EAAD,EAAK,KAAK28D,aAAL,CAAmB,MAAnB,EAA2BN,MAAM,CAAClsD,IAAlC,CAAL,CAAf;AACA2hB,yBAAe,CAAC9xB,EAAD,EAAK,KAAK28D,aAAL,CAAmB,QAAnB,EAA6BN,MAAM,CAAC9O,MAApC,CAAL,CAAf;AACAz7B,yBAAe,CAAC9xB,EAAD,EAAK,KAAK28D,aAAL,CAAmB,OAAnB,EAA4BN,MAAM,CAAC1rD,KAAnC,CAAL,CAAf;AACH,SAND;;AAOA2qD,eAAO,CAACz/D,SAAR,CAAkB6/D,cAAlB,GAAmC,YAAY;AAC3C,eAAK17D,EAAL,CAAQ0C,SAAR,GAAoB,EAApB;AACH,SAFD;;AAGA44D,eAAO,CAACz/D,SAAR,CAAkB8gE,aAAlB,GAAkC,UAAUpsD,QAAV,EAAoBqsD,SAApB,EAA+B;AAC7D,cAAI1gE,KAAK,GAAG,IAAZ;;AACA,cAAIU,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBC,KAAK,GAAGF,EAAE,CAACE,KAAlC;AAAA,cAAyCgD,QAAQ,GAAGlD,EAAE,CAACkD,QAAvD;AACA,cAAI66D,cAAc,GAAG76D,QAAQ,CAAC66D,cAA9B;AACA,cAAIkC,SAAS,GAAG/8D,QAAQ,CAAC+8D,SAAzB;AACA,cAAIC,SAAS,GAAGtrC,aAAa,CAAC,KAAD,EAAQ;AAAE7tB,qBAAS,EAAE,QAAQ4M;AAArB,WAAR,CAA7B;AACA,cAAIwsD,qBAAqB,GAAGpC,cAAc,CAACxiC,QAAf,CAAwBnP,aAAxB,IAAyC,EAArE;AACA,cAAIg0C,2BAA2B,GAAGrC,cAAc,CAAC3K,SAAf,CAAyBzhC,UAAzB,IAAuC,EAAzE;AACA,cAAI0uC,kBAAkB,GAAGtC,cAAc,CAACxiC,QAAf,CAAwB5J,UAAxB,IAAsC,EAA/D;;AACA,cAAIquC,SAAJ,EAAe;AACXA,qBAAS,CAAC/7D,KAAV,CAAgB,GAAhB,EAAqBoH,OAArB,CAA6B,UAAUi1D,cAAV,EAA0Bl6D,CAA1B,EAA6B;AACtD,kBAAIm6D,aAAa,GAAG,EAApB;AACA,kBAAIC,aAAa,GAAG,IAApB;AACA,kBAAIC,OAAJ;AACAH,4BAAc,CAACr8D,KAAf,CAAqB,GAArB,EAA0BoH,OAA1B,CAAkC,UAAUm+C,UAAV,EAAsBhyB,CAAtB,EAAyB;AACvD,oBAAIuyB,iBAAJ;AACA,oBAAI3nD,QAAJ;AACA,oBAAIs+D,WAAJ;AACA,oBAAIC,UAAJ,CAJuD,CAIvC;;AAChB,oBAAIhvC,UAAJ,CALuD,CAKvC;;AAChB,oBAAIivC,eAAJ;AACA,oBAAIC,aAAJ;AACA,oBAAIC,QAAJ;AACA,oBAAIC,cAAJ;;AACA,oBAAIvX,UAAU,KAAK,OAAnB,EAA4B;AACxB+W,+BAAa,CAAC7+D,IAAd,CAAmByzB,aAAa,CAAC,iBAAD,CAAhC,EADwB,CAC8B;;AACtDqrC,+BAAa,GAAG,KAAhB;AACH,iBAHD,MAIK;AACD,sBAAKzW,iBAAiB,GAAGoW,qBAAqB,CAAC3W,UAAD,CAA9C,EAA6D;AACzDkX,+BAAW,GAAG,qBAAUhyD,EAAV,EAAc;AACxB,0BAAIq7C,iBAAiB,CAACiX,KAAtB,EAA6B;AACzBjX,yCAAiB,CAACiX,KAAlB,CAAwBzhE,IAAxB,CAA6BuhE,QAA7B,EAAuCpyD,EAAvC;AACH;AACJ,qBAJD;;AAKA,qBAACiyD,UAAU,GAAGzgE,KAAK,CAAC4pD,wBAAN,CAA+BC,iBAA/B,CAAd,MACK4W,UAAU,GAAGzgE,KAAK,CAAC0pD,YAAN,CAAmBJ,UAAnB,CADlB,MAEK73B,UAAU,GAAGo4B,iBAAiB,CAAC19C,IAFpC;AAGH,mBATD,MAUK,IAAKjK,QAAQ,GAAG69D,SAAS,CAACzW,UAAD,CAAzB,EAAwC;AACzClqD,yBAAK,CAACwgE,gBAAN,CAAuBp+D,IAAvB,CAA4B8nD,UAA5B;;AACAkX,+BAAW,GAAG,uBAAY;AACtBx9D,8BAAQ,CAAC+9D,UAAT,CAAoBzX,UAApB;AACH,qBAFD;;AAGA,qBAAC73B,UAAU,GAAGvvB,QAAQ,CAACo8D,kBAAvB,MACKmC,UAAU,GAAGzgE,KAAK,CAAC0pD,YAAN,CAAmBJ,UAAnB,CADlB,MAEK73B,UAAU,GAAGvvB,QAAQ,CAACq8D,iBAF3B;AAGH,mBARI,MASA,IAAIv7D,QAAQ,CAACsmD,UAAD,CAAZ,EAA0B;AAAE;AAC7BkX,+BAAW,GAAG,uBAAY;AACtBx9D,8BAAQ,CAACsmD,UAAD,CAAR;AACH,qBAFD;;AAGA,qBAAC73B,UAAU,GAAGyuC,2BAA2B,CAAC5W,UAAD,CAAzC,MACKmX,UAAU,GAAGzgE,KAAK,CAAC0pD,YAAN,CAAmBJ,UAAnB,CADlB,MAEK73B,UAAU,GAAG0uC,kBAAkB,CAAC7W,UAAD,CAFpC,EAJ2B,CAO3B;AACH;;AACD,sBAAIkX,WAAJ,EAAiB;AACbG,iCAAa,GAAG,CACZ,QAAQrX,UAAR,GAAqB,SADT,EAEZtpD,KAAK,CAAC2B,QAAN,CAAe,QAAf,CAFY,CAAhB;;AAIA,wBAAI8vB,UAAJ,EAAgB;AACZivC,qCAAe,GAAGriB,UAAU,CAAC5sB,UAAD,CAA5B;AACAovC,oCAAc,GAAG,EAAjB;AACH,qBAHD,MAIK,IAAIJ,UAAJ,EAAgB;AACjBC,qCAAe,GAAG,kBAAkBD,UAAlB,GAA+B,WAAjD;AACAI,oCAAc,GAAG,kBAAkBvX,UAAlB,GAA+B,GAAhD;AACH;;AACDsX,4BAAQ,GAAG3rC,aAAa,EAAC;AACzB,sDAAkC0rC,aAAa,CAACl/D,IAAd,CAAmB,GAAnB,CAAlC,GAA4D,GAA5D,GACIo/D,cADJ,GAEI,GAFJ,GAEUH,eAFV,GAE4B,WAHJ,CAAxB;AAIAE,4BAAQ,CAAC1xD,gBAAT,CAA0B,OAA1B,EAAmCsxD,WAAnC;AACAH,iCAAa,CAAC7+D,IAAd,CAAmBo/D,QAAnB;AACH;AACJ;AACJ,eAhED;;AAiEA,kBAAIP,aAAa,CAAC7gE,MAAd,GAAuB,CAA3B,EAA8B;AAC1B+gE,uBAAO,GAAGtxD,QAAQ,CAACylB,aAAT,CAAuB,KAAvB,CAAV;AACA,oBAAIssC,oBAAoB,GAAGhhE,KAAK,CAAC2B,QAAN,CAAe,aAAf,CAA3B;;AACA,oBAAI2+D,aAAa,IAAIU,oBAArB,EAA2C;AACvCT,yBAAO,CAAC38D,SAAR,CAAkBC,GAAlB,CAAsBm9D,oBAAtB;AACH;;AACDhsC,+BAAe,CAACurC,OAAD,EAAUF,aAAV,CAAf;AACAL,yBAAS,CAAC57D,WAAV,CAAsBm8D,OAAtB;AACH,eARD,MASK;AACDvrC,+BAAe,CAACgrC,SAAD,EAAYK,aAAZ,CAAf,CADC,CAC0C;AAC9C;AACJ,aAjFD;AAkFH;;AACD,iBAAOL,SAAP;AACH,SA9FD;;AA+FAxB,eAAO,CAACz/D,SAAR,CAAkBmgE,WAAlB,GAAgC,UAAUO,cAAV,EAA0B;AACtD,eAAKwB,mBAAL,CAAyB,OAAzB,EAAkCxB,cAAlC;AACH,SAFD;;AAGAjB,eAAO,CAACz/D,SAAR,CAAkBqgE,UAAlB,GAA+B,UAAUM,aAAV,EAAyB;AACpD,eAAKuB,mBAAL,CAAyB,MAAzB,EAAiCvB,aAAjC;AACH,SAFD;;AAGAlB,eAAO,CAACz/D,SAAR,CAAkBugE,UAAlB,GAA+B,UAAUK,aAAV,EAAyB;AACpD,eAAKsB,mBAAL,CAAyB,MAAzB,EAAiCtB,aAAjC;AACH,SAFD;;AAGAnB,eAAO,CAACz/D,SAAR,CAAkB+/D,WAAlB,GAAgC,UAAU3yD,IAAV,EAAgB;AAC5C+qB,sBAAY,CAAC,KAAKh0B,EAAN,EAAU,IAAV,CAAZ,CAA4BiI,OAA5B,CAAoC,UAAU+1D,OAAV,EAAmB;AACnDA,mBAAO,CAACC,SAAR,GAAoBh1D,IAApB;AACH,WAFD;AAGH,SAJD;;AAKAqyD,eAAO,CAACz/D,SAAR,CAAkBigE,kBAAlB,GAAuC,UAAU1V,UAAV,EAAsB;AACzD,cAAItpD,KAAK,GAAG,KAAKD,OAAL,CAAaC,KAAzB;AACA,cAAI6G,SAAS,GAAG7G,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAAhB;AACAu1B,sBAAY,CAAC,KAAKh0B,EAAN,EAAU,QAAV,CAAZ,CAAgCiI,OAAhC,CAAwC,UAAUy1D,QAAV,EAAoB;AACxD,gBAAItX,UAAU,IAAIsX,QAAQ,CAACh9D,SAAT,CAAmBqd,QAAnB,CAA4B,QAAQqoC,UAAR,GAAqB,SAAjD,CAAlB,EAA+E;AAC3EsX,sBAAQ,CAACh9D,SAAT,CAAmBC,GAAnB,CAAuBgD,SAAvB;AACH,aAFD,MAGK;AACD+5D,sBAAQ,CAACh9D,SAAT,CAAmBg0B,MAAnB,CAA0B/wB,SAA1B;AACH;AACJ,WAPD;AAQH,SAXD;;AAYA23D,eAAO,CAACz/D,SAAR,CAAkBkiE,mBAAlB,GAAwC,UAAU3X,UAAV,EAAsB32C,IAAtB,EAA4B;AAChEukB,sBAAY,CAAC,KAAKh0B,EAAN,EAAU,SAASomD,UAAT,GAAsB,SAAhC,CAAZ,CAAuDn+C,OAAvD,CAA+D,UAAUy1D,QAAV,EAAoB;AAC/EA,oBAAQ,CAACQ,QAAT,GAAoB,CAACzuD,IAArB;AACH,WAFD;AAGH,SAJD;;AAKA,eAAO6rD,OAAP;AACH,OAnK4B,CAmK3BrU,SAnK2B,CAA7B;;AAqKA,UAAI1hD,iBAAiB;AAAG;AAAe,gBAAUvJ,MAAV,EAAkB;AACrDN,iBAAS,CAAC6J,iBAAD,EAAoBvJ,MAApB,CAAT;;AACA,iBAASuJ,iBAAT,CAA2BvF,EAA3B,EAA+B;AAC3B,cAAI9D,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACiiE,YAAN,GAAqB,EAArB;AACAjiE,eAAK,CAACmD,cAAN,GAAuB8+C,gBAAgB,CAACjiD,KAAK,CAACoD,eAAP,EAAwBpD,KAAK,CAACqD,iBAA9B,CAAvC;AACArD,eAAK,CAACkiE,cAAN,GAAuBjgB,gBAAgB,CAACjiD,KAAK,CAACmiE,eAAP,EAAwBniE,KAAK,CAACoiE,iBAA9B,EAAiD,CAACpiE,KAAK,CAACmD,cAAP,CAAjD,CAAvC;AACAnD,eAAK,CAACqiE,qBAAN,GAA8Bn0B,OAAO,CAACm0B,qBAAD,CAArC;AACAriE,eAAK,CAACsiE,yBAAN,GAAkCp0B,OAAO,CAACo0B,yBAAD,CAAzC;AACAtiE,eAAK,CAAC8D,EAAN,GAAWA,EAAX;AACA9D,eAAK,CAACuiE,YAAN,GAAqBr0B,OAAO,CAACq0B,YAAD,CAA5B;AACAviE,eAAK,CAAC6hD,kBAAN,GAA2B3T,OAAO,CAAC,UAAUjlB,KAAV,EAAiB;AAChD,mBAAO44B,kBAAkB,CAAC54B,KAAD,EAAQjpB,KAAK,CAACW,OAAN,CAAciD,QAAtB,CAAzB;AACH,WAFiC,CAAlC;AAGA,iBAAO5D,KAAP;AACH;;AACDqJ,yBAAiB,CAAC1J,SAAlB,CAA4BoE,MAA5B,GAAqC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AAC3D,eAAK6hE,YAAL;AACA,cAAIhgE,KAAK,GAAG,KAAK+/D,YAAL,CAAkBv+D,KAAK,CAACC,WAAxB,EAAqCD,KAAK,CAAClB,QAAN,CAAejC,OAApD,CAAZ;AACA,eAAKsC,cAAL,CAAoBxC,OAApB;AACA,eAAKuhE,cAAL,CAAoBl+D,KAAK,CAAClB,QAA1B,EAAoCkB,KAAK,CAACC,WAA1C,EAAuDD,KAAK,CAAC00D,WAA7D,EAA0El2D,KAA1E;AACA,eAAKigE,UAAL,CAAgBz+D,KAAhB,EAAuBxB,KAAvB;AACA,eAAK0C,UAAL;AACA,eAAKw9D,UAAL;AACH,SARD;;AASAr5D,yBAAiB,CAAC1J,SAAlB,CAA4B2E,OAA5B,GAAsC,YAAY;AAC9C,cAAI,KAAKmlB,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYnlB,OAAZ;AACH;;AACD,cAAI,KAAKolB,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYplB,OAAZ;AACH;;AACD,eAAKnB,cAAL,CAAoBO,QAApB,GAP8C,CAOd;;AAChC5D,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;AACH,SATD;;AAUAoJ,yBAAiB,CAAC1J,SAAlB,CAA4ByD,eAA5B,GAA8C,UAAUzC,OAAV,EAAmB;AAC7D,eAAKgiE,kBAAL,CAAwBhiE,OAAxB;AACA61B,0BAAgB,CAAC,KAAK1yB,EAAN,EAAU,KAAKmB,SAAL,GAAiBqwB,aAAa,CAAC,KAAD,EAAQ;AAAE7tB,qBAAS,EAAE;AAAb,WAAR,CAAxC,CAAhB;AACA,cAAI7D,QAAQ,GAAGjD,OAAO,CAACiD,QAAvB;;AACA,eAAK,IAAIgB,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGkD,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4BgtC,sBAAlD,EAA0E/nD,EAAE,GAAGlE,EAAE,CAACN,MAAlF,EAA0FwE,EAAE,EAA5F,EAAgG;AAC5F,gBAAIg+D,mBAAmB,GAAGliE,EAAE,CAACkE,EAAD,CAA5B;AACAg+D,+BAAmB,CAAC,KAAK39D,SAAN,EAAiBrB,QAAjB,CAAnB;AACH;AACJ,SARD;;AASAyF,yBAAiB,CAAC1J,SAAlB,CAA4B0D,iBAA5B,GAAgD,YAAY;AACxD;AACA,cAAI,KAAKsb,IAAT,EAAe;AACX,iBAAKkkD,WAAL,GAAmB,KAAKlkD,IAAL,CAAUmkD,WAAV,EAAnB;AACA,iBAAKnkD,IAAL,CAAUra,OAAV;AACA,iBAAKqa,IAAL,GAAY,IAAZ;AACH;;AACDsY,uBAAa,CAAC,KAAKhyB,SAAN,CAAb;AACA,eAAK89D,kBAAL;AACH,SATD;;AAUA15D,yBAAiB,CAAC1J,SAAlB,CAA4BojE,kBAA5B,GAAiD,YAAY;AACzD,cAAIv+D,SAAS,GAAG,KAAKV,EAAL,CAAQU,SAAxB;;AACA,eAAK,IAAII,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKuhE,YAA3B,EAAyCr9D,EAAE,GAAGlE,EAAE,CAACN,MAAjD,EAAyDwE,EAAE,EAA3D,EAA+D;AAC3D,gBAAI6C,SAAS,GAAG/G,EAAE,CAACkE,EAAD,CAAlB;AACAJ,qBAAS,CAACg0B,MAAV,CAAiB/wB,SAAjB;AACH;;AACD,eAAKw6D,YAAL,GAAoB,EAApB;AACH,SAPD;;AAQA54D,yBAAiB,CAAC1J,SAAlB,CAA4BgjE,kBAA5B,GAAiD,UAAUhiE,OAAV,EAAmB;AAChE,eAAKoiE,kBAAL;AACA,cAAIniE,KAAK,GAAGD,OAAO,CAACC,KAApB;AAAA,cAA2BC,OAAO,GAAGF,OAAO,CAACE,OAA7C;AACA,eAAKohE,YAAL,GAAoB,CAChB,IADgB,EAEhB,QAAQphE,OAAO,CAACssB,GAFA,EAGhBvsB,KAAK,CAAC2B,QAAN,CAAe,QAAf,CAHgB,CAApB;AAKA,cAAIiC,SAAS,GAAG,KAAKV,EAAL,CAAQU,SAAxB;;AACA,eAAK,IAAII,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKuhE,YAA3B,EAAyCr9D,EAAE,GAAGlE,EAAE,CAACN,MAAjD,EAAyDwE,EAAE,EAA3D,EAA+D;AAC3D,gBAAI6C,SAAS,GAAG/G,EAAE,CAACkE,EAAD,CAAlB;AACAJ,qBAAS,CAACC,GAAV,CAAcgD,SAAd;AACH;AACJ,SAbD;;AAcA4B,yBAAiB,CAAC1J,SAAlB,CAA4BwiE,eAA5B,GAA8C,UAAUr/D,QAAV,EAAoBmB,WAApB,EAAiCy0D,WAAjC,EAA8Cl2D,KAA9C,EAAqD;AAC/F,cAAI9B,EAAE,GAAG,IAAT;AAAA,cAAeC,OAAO,GAAGD,EAAE,CAACC,OAA5B;AAAA,cAAqC8oB,MAAM,GAAG/oB,EAAE,CAAC+oB,MAAjD;AAAA,cAAyDC,MAAM,GAAGhpB,EAAE,CAACgpB,MAArE;;AACA,cAAI7oB,OAAO,GAAGF,OAAO,CAACE,OAAtB;AAAA,cAA+B+C,QAAQ,GAAGjD,OAAO,CAACiD,QAAlD;AACA,cAAIo/D,YAAY,GAAGniE,OAAO,CAAC4oB,MAA3B;AACA,cAAIw5C,YAAY,GAAGpiE,OAAO,CAAC6oB,MAA3B;AACA,cAAIw5C,oBAAoB,GAAG,KAAKl/D,KAAL,CAAWk/D,oBAAtC;AACA,cAAItsD,GAAG,GAAGhT,QAAQ,CAACwiD,MAAT,EAAV;AACA,cAAI+c,SAAS,GAAGD,oBAAoB,CAACnb,KAArB,CAA2BnxC,GAA3B,CAAhB;AACA,cAAIwsD,QAAQ,GAAGF,oBAAoB,CAAC1K,SAArB,CAA+Bv0D,WAA/B,EAA4Cy0D,WAA5C,CAAf;AACA,cAAI2K,QAAQ,GAAGH,oBAAoB,CAACrK,SAArB,CAA+B50D,WAA/B,EAA4Cy0D,WAA5C,CAAf;AACA,cAAI4K,YAAY,GAAG;AACf9gE,iBAAK,EAAEA,KADQ;AAEf49D,wBAAY,EAAEt9D,QAAQ,CAAC2F,IAFR;AAGf43D,0BAAc,EAAE8C,SAAS,CAACxhD,OAAV,IAAqB,CAAC6rB,mBAAmB,CAACvpC,WAAW,CAACkiD,YAAb,EAA2BvvC,GAA3B,CAH1C;AAIf0pD,yBAAa,EAAE8C,QAAQ,CAACzhD,OAJT;AAKf4+C,yBAAa,EAAE8C,QAAQ,CAAC1hD;AALT,WAAnB;;AAOA,cAAIqhD,YAAJ,EAAkB;AACd,gBAAI,CAACv5C,MAAL,EAAa;AACTA,oBAAM,GAAG,KAAKA,MAAL,GAAc,IAAI21C,OAAJ,CAAY,mBAAZ,CAAvB;AACA5oC,8BAAgB,CAAC,KAAK1yB,EAAN,EAAU2lB,MAAM,CAAC3lB,EAAjB,CAAhB;AACH;;AACD2lB,kBAAM,CAAC2hC,YAAP,CAAoBp9C,QAAQ,CAAC;AAAEmyD,oBAAM,EAAE6C;AAAV,aAAD,EAA2BM,YAA3B,CAA5B,EAAsE3iE,OAAtE;AACH,WAND,MAOK,IAAI8oB,MAAJ,EAAY;AACbA,kBAAM,CAACnlB,OAAP;AACAmlB,kBAAM,GAAG,KAAKA,MAAL,GAAc,IAAvB;AACH;;AACD,cAAIw5C,YAAJ,EAAkB;AACd,gBAAI,CAACv5C,MAAL,EAAa;AACTA,oBAAM,GAAG,KAAKA,MAAL,GAAc,IAAI01C,OAAJ,CAAY,mBAAZ,CAAvB;AACAxpC,6BAAe,CAAC,KAAK9xB,EAAN,EAAU4lB,MAAM,CAAC5lB,EAAjB,CAAf;AACH;;AACD4lB,kBAAM,CAAC0hC,YAAP,CAAoBp9C,QAAQ,CAAC;AAAEmyD,oBAAM,EAAE8C;AAAV,aAAD,EAA2BK,YAA3B,CAA5B,EAAsE3iE,OAAtE;AACH,WAND,MAOK,IAAI+oB,MAAJ,EAAY;AACbA,kBAAM,CAACplB,OAAP;AACAolB,kBAAM,GAAG,KAAKA,MAAL,GAAc,IAAvB;AACH;AACJ,SAvCD;;AAwCArgB,yBAAiB,CAAC1J,SAAlB,CAA4ByiE,iBAA5B,GAAgD,YAAY;AACxD,cAAI,KAAK34C,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYnlB,OAAZ;AACA,iBAAKmlB,MAAL,GAAc,IAAd;AACH;;AACD,cAAI,KAAKC,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYplB,OAAZ;AACA,iBAAKolB,MAAL,GAAc,IAAd;AACH;AACJ,SATD;;AAUArgB,yBAAiB,CAAC1J,SAAlB,CAA4B8iE,UAA5B,GAAyC,UAAUz+D,KAAV,EAAiBxB,KAAjB,EAAwB;AAC7D,cAAImc,IAAI,GAAG,KAAKA,IAAhB;AACA,cAAIje,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+C/C,OAAO,GAAGH,EAAE,CAACG,OAA5D;AACA,cAAIiC,QAAQ,GAAGkB,KAAK,CAAClB,QAArB;AAAA,cAA+BogE,oBAAoB,GAAGl/D,KAAK,CAACk/D,oBAA5D;;AACA,cAAI,CAACvkD,IAAD,IAASA,IAAI,CAAC7b,QAAL,KAAkBA,QAA/B,EAAyC;AACrC,gBAAI6b,IAAJ,EAAU;AACNA,kBAAI,CAACra,OAAL;AACH;;AACDqa,gBAAI,GAAG,KAAKA,IAAL,GAAY,IAAI7b,QAAQ,CAAC,OAAD,CAAZ,CAAsBA,QAAtB,EAAgC,KAAKmC,SAArC,CAAnB;;AACA,gBAAI,KAAK49D,WAAT,EAAsB;AAClBlkD,kBAAI,CAAC4kD,SAAL,CAAe,KAAKV,WAApB,EAAiC,IAAjC;AACA,mBAAKA,WAAL,GAAmB,IAAnB;AACH;AACJ;;AACDlkD,cAAI,CAACnc,KAAL,GAAaA,KAAb,CAd6D,CAczC;;AACpB,cAAIghE,SAAS,GAAG;AACZN,gCAAoB,EAAEA,oBADV;AAEZj/D,uBAAW,EAAED,KAAK,CAACC,WAFP;AAGZypB,yBAAa,EAAE,KAAKm0B,kBAAL,CAAwB/+C,QAAQ,CAACjC,OAAT,CAAiB6sB,aAAzC,CAHH;AAIZtpB,sBAAU,EAAEJ,KAAK,CAACI,UAJN;AAKZC,wBAAY,EAAEL,KAAK,CAACK,YALR;AAMZ6hB,yBAAa,EAAEliB,KAAK,CAACkiB,aANT;AAOZ1E,0BAAc,EAAExd,KAAK,CAACwd,cAPV;AAQZw6B,qBAAS,EAAEh4C,KAAK,CAACg4C,SARL;AASZnxB,uBAAW,EAAE7mB,KAAK,CAAC6mB;AATP,WAAhB;AAWA,cAAIgvB,YAAY,GAAG,KAAKyoB,yBAAL,CAA+B1+D,QAAQ,CAAC8b,YAAT,CAAsBC,KAAtB,CAA4B+sC,qBAA3D,CAAnB;;AACA,eAAK,IAAI9nD,EAAE,GAAG,CAAT,EAAYm1C,cAAc,GAAGF,YAAlC,EAAgDj1C,EAAE,GAAGm1C,cAAc,CAAC35C,MAApE,EAA4EwE,EAAE,EAA9E,EAAkF;AAC9E,gBAAI8b,WAAW,GAAGq5B,cAAc,CAACn1C,EAAD,CAAhC;;AACAoJ,oBAAQ,CAACw1D,SAAD,EAAY9iD,WAAW,CAACiF,SAAZ,CAAsB69C,SAAtB,EAAiC1gE,QAAjC,EAA2CkB,KAA3C,EAAkDnD,OAAlD,CAAZ,CAAR;AACH;;AACD8d,cAAI,CAACysC,YAAL,CAAkBoY,SAAlB,EAA6B,KAAKnB,qBAAL,CAA2B,KAAK1hE,OAAhC,EAAyCmC,QAAzC,EAAmD6b,IAAnD,CAA7B;AACH,SAhCD,CA9HqD,CA+JrD;AACA;;;AACAtV,yBAAiB,CAAC1J,SAAlB,CAA4BuF,UAA5B,GAAyC,UAAUC,QAAV,EAAoB;AACzD,cAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,oBAAQ,GAAG,KAAX;AAAmB;;AAC9C,cAAIwZ,IAAI,GAAG,KAAKA,IAAhB;;AACA,cAAI,CAACA,IAAL,EAAW;AACP,mBADO,CACC;AACX;;AACD,cAAIxZ,QAAQ,IAAI,KAAKs+D,YAAL,IAAqB,IAArC,EAA2C;AACvC,iBAAKC,iBAAL;AACH;;AACD/kD,cAAI,CAACzZ,UAAL,CAAgBC,QAAhB,EAA0B,KAAKC,UAA/B,EAA2C,KAAKq+D,YAAhD;AACA9kD,cAAI,CAACglD,kBAAL,GAVyD,CAU9B;;AAC3BhlD,cAAI,CAACilD,SAAL,CAAez+D,QAAf;AACH,SAZD;;AAaAkE,yBAAiB,CAAC1J,SAAlB,CAA4B+jE,iBAA5B,GAAgD,YAAY;AACxD,cAAI9/D,QAAQ,GAAG,KAAKjD,OAAL,CAAaiD,QAA5B,CADwD,CAClB;;AACtC,cAAIigE,WAAW,GAAGjgE,QAAQ,CAACsjB,GAAT,CAAa,QAAb,CAAlB;AACA,cAAI48C,kBAAkB,GAAGlgE,QAAQ,CAACsjB,GAAT,CAAa,eAAb,CAAzB;AACA,eAAKu8C,YAAL,GAAoBI,WAAW,KAAK,MAAhB,IAA0BC,kBAAkB,KAAK,MAArE;;AACA,cAAI,OAAOA,kBAAP,KAA8B,QAAlC,EAA4C;AAAE;AAC1C,iBAAK1+D,UAAL,GAAkB0+D,kBAAlB;AACH,WAFD,MAGK,IAAI,OAAOA,kBAAP,KAA8B,UAAlC,EAA8C;AAAE;AACjD,iBAAK1+D,UAAL,GAAkB0+D,kBAAkB,EAApC;AACH,WAFI,MAGA,IAAI,OAAOD,WAAP,KAAuB,QAA3B,EAAqC;AAAE;AACxC,iBAAKz+D,UAAL,GAAkBy+D,WAAW,GAAG,KAAKE,mBAAL,EAAhC;AACH,WAFI,MAGA,IAAI,OAAOF,WAAP,KAAuB,UAA3B,EAAuC;AAAE;AAC1C,iBAAKz+D,UAAL,GAAkBy+D,WAAW,KAAK,KAAKE,mBAAL,EAAlC;AACH,WAFI,MAGA,IAAIF,WAAW,KAAK,QAApB,EAA8B;AAAE;AACjC,gBAAI9gE,QAAQ,GAAG,KAAKe,EAAL,CAAQ+O,UAAvB;AACA,iBAAKzN,UAAL,GAAkBrC,QAAQ,CAACkQ,qBAAT,GAAiCyB,MAAjC,GAA0C,KAAKqvD,mBAAL,EAA5D;AACH,WAHI,MAIA;AACD,iBAAK3+D,UAAL,GAAkBkI,IAAI,CAACC,KAAL,CAAW,KAAKtI,SAAL,CAAegO,qBAAf,GAAuCuB,KAAvC,GACzBlH,IAAI,CAAC6I,GAAL,CAASvS,QAAQ,CAACsjB,GAAT,CAAa,aAAb,CAAT,EAAsC,EAAtC,CADc,CAAlB;AAEH;AACJ,SAzBD;;AA0BA7d,yBAAiB,CAAC1J,SAAlB,CAA4BokE,mBAA5B,GAAkD,YAAY;AAC1D,cAAIrvD,MAAM,GAAG,CAAb;;AACA,cAAI,KAAK+U,MAAT,EAAiB;AACb/U,kBAAM,IAAIqnB,uBAAuB,CAAC,KAAKtS,MAAL,CAAY3lB,EAAb,CAAjC;AACH;;AACD,cAAI,KAAK4lB,MAAT,EAAiB;AACbhV,kBAAM,IAAIqnB,uBAAuB,CAAC,KAAKrS,MAAL,CAAY5lB,EAAb,CAAjC;AACH;;AACD,iBAAO4Q,MAAP;AACH,SATD,CAxMqD,CAkNrD;AACA;;;AACArL,yBAAiB,CAAC1J,SAAlB,CAA4B6iE,YAA5B,GAA2C,YAAY;AACnD9sC,oBAAU,CAAC,KAAK5xB,EAAN,EAAU;AAChB4Q,kBAAM,EAAE,KAAK5Q,EAAL,CAAQmP,qBAAR,GAAgCyB,MADxB;AAEhBolB,oBAAQ,EAAE;AAFM,WAAV,CAAV;AAIH,SALD;;AAMAzwB,yBAAiB,CAAC1J,SAAlB,CAA4B+iE,UAA5B,GAAyC,YAAY;AACjDhtC,oBAAU,CAAC,KAAK5xB,EAAN,EAAU;AAChB4Q,kBAAM,EAAE,EADQ;AAEhBolB,oBAAQ,EAAE;AAFM,WAAV,CAAV;AAIH,SALD;;AAMA,eAAOzwB,iBAAP;AACH,OAjOsC,CAiOrC0hD,SAjOqC,CAAvC,C,CAkOA;AACA;AACA;;;AACA,eAASwX,YAAT,CAAsBt+D,WAAtB,EAAmC+/D,WAAnC,EAAgD;AAC5C,YAAIniE,KAAJ,CAD4C,CAE5C;;AACA,YAAI,iBAAiBg3B,IAAjB,CAAsB50B,WAAW,CAAC20D,gBAAlC,CAAJ,EAAyD;AACrD/2D,eAAK,GAAGoC,WAAW,CAACkiD,YAApB;AACH,SAFD,MAGK;AAAE;AACHtkD,eAAK,GAAGoC,WAAW,CAAC2B,WAApB;AACH;;AACD,eAAO,KAAKjF,OAAL,CAAawF,OAAb,CAAqBwpC,WAArB,CAAiC9tC,KAAK,CAACG,KAAvC,EAA8CH,KAAK,CAACI,GAApD,EAAyDuxC,eAAe,CAACwwB,WAAW,CAACp0C,WAAZ,IAA2Bq0C,kBAAkB,CAAChgE,WAAD,CAA9C,EAA6D+/D,WAAW,CAAC5xC,mBAAzE,CAAxE,EAAuK;AAAE8jC,wBAAc,EAAEjyD,WAAW,CAACg1D;AAA9B,SAAvK,CAAP;AACH,O,CACD;AACA;;;AACA,eAASgL,kBAAT,CAA4BhgE,WAA5B,EAAyC;AACrC,YAAI20D,gBAAgB,GAAG30D,WAAW,CAAC20D,gBAAnC;;AACA,YAAIA,gBAAgB,KAAK,MAAzB,EAAiC;AAC7B,iBAAO;AAAErwD,gBAAI,EAAE;AAAR,WAAP;AACH,SAFD,MAGK,IAAIqwD,gBAAgB,KAAK,OAAzB,EAAkC;AACnC,iBAAO;AAAErwD,gBAAI,EAAE,SAAR;AAAmBF,iBAAK,EAAE;AAA1B,WAAP,CADmC,CACQ;AAC9C,SAFI,MAGA;AACD,cAAIM,IAAI,GAAGm2B,aAAa,CAAC76B,WAAW,CAACkiD,YAAZ,CAAyBnkD,KAA1B,EAAiCiC,WAAW,CAACkiD,YAAZ,CAAyBlkD,GAA1D,CAAxB;;AACA,cAAI0G,IAAI,KAAK,IAAT,IAAiBA,IAAI,GAAG,CAA5B,EAA+B;AAC3B;AACA,mBAAO;AAAEJ,kBAAI,EAAE,SAAR;AAAmBF,mBAAK,EAAE,OAA1B;AAAmCC,iBAAG,EAAE;AAAxC,aAAP;AACH,WAHD,MAIK;AACD;AACA,mBAAO;AAAEC,kBAAI,EAAE,SAAR;AAAmBF,mBAAK,EAAE,MAA1B;AAAkCC,iBAAG,EAAE;AAAvC,aAAP;AACH;AACJ;AACJ,O,CACD;;;AACA,eAAS+5D,qBAAT,CAA+B1hE,OAA/B,EAAwCmC,QAAxC,EAAkD6b,IAAlD,EAAwD;AACpD,eAAOhe,OAAO,CAACmqD,MAAR,CAAehoD,QAAQ,CAACjC,OAAxB,EAAiC8d,IAAjC,CAAP;AACH,O,CACD;AACA;;;AACA,eAAS2jD,yBAAT,CAAmC4B,UAAnC,EAA+C;AAC3C,eAAOA,UAAU,CAAC7qD,GAAX,CAAe,UAAUo7C,QAAV,EAAoB;AACtC,iBAAO,IAAIA,QAAJ,EAAP;AACH,SAFM,CAAP;AAGH;;AAED,UAAI0P,WAAW;AAAG;AAAe,kBAAY;AACzC,iBAASA,WAAT,CAAqB1lD,QAArB,EAA+B;AAC3B,eAAKnY,SAAL,GAAiBmY,QAAQ,CAACnY,SAA1B;AACH;;AACD69D,mBAAW,CAACxkE,SAAZ,CAAsB2E,OAAtB,GAAgC,YAAY,CAC3C,CADD;;AAEA,eAAO6/D,WAAP;AACH,OAPgC,EAAjC;;AAQA,eAASC,wBAAT,CAAkC99D,SAAlC,EAA6C2iB,KAA7C,EAAoD;AAChD,eAAO;AACH3iB,mBAAS,EAAEA,SADR;AAEHxC,YAAE,EAAEmlB,KAAK,CAACnlB,EAFP;AAGHmgB,wBAAc,EAAEgF,KAAK,CAAChF,cAAN,IAAwB,IAAxB,GAA+BgF,KAAK,CAAChF,cAArC,GAAsD;AAHnE,SAAP;AAKH;;AACD,eAASogD,0BAAT,CAAoC5lD,QAApC,EAA8C;AAC1C,YAAI/d,EAAJ;;AACA,eAAOA,EAAE,GAAG,EAAL,EACHA,EAAE,CAAC+d,QAAQ,CAACnY,SAAT,CAAmB85C,GAApB,CAAF,GAA6B3hC,QAD1B,EAEH/d,EAFJ;AAGH,O,CACD;;;AACA,UAAI4jE,wBAAwB,GAAG,EAA/B;AAEA;;;;AAGA,UAAIC,aAAa;AAAG;AAAe,gBAAUzkE,MAAV,EAAkB;AACjDN,iBAAS,CAAC+kE,aAAD,EAAgBzkE,MAAhB,CAAT;;AACA,iBAASykE,aAAT,CAAuB9lD,QAAvB,EAAiC;AAC7B,cAAIze,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBwe,QAAlB,KAA+B,IAA3C;;AACAze,eAAK,CAACwkE,cAAN,GAAuB,UAAUp1D,EAAV,EAAc88C,KAAd,EAAqB;AACxC,gBAAI5lD,SAAS,GAAGtG,KAAK,CAACsG,SAAtB;AACA,gBAAI5F,EAAE,GAAG4F,SAAS,CAAC3F,OAAnB;AAAA,gBAA4BiD,QAAQ,GAAGlD,EAAE,CAACkD,QAA1C;AAAA,gBAAoD+a,IAAI,GAAGje,EAAE,CAACie,IAA9D;AACA,gBAAIle,GAAG,GAAGo4C,QAAQ,CAACqT,KAAD,CAAlB;;AACA,gBAAIzrD,GAAG,IAAI;AACP6F,qBAAS,CAACsb,gBAAV,CAA2BxS,EAAE,CAACkB,MAA9B,CADJ,EAC2C;AACvC;AACA;AACA,kBAAIm0D,eAAe,GAAG5sC,cAAc,CAACzoB,EAAE,CAACkB,MAAJ,EAAY,aAAZ,CAApC;AACA,kBAAIjP,GAAG,GAAGojE,eAAe,GAAGA,eAAe,CAACx9D,aAAhB,CAA8B,SAA9B,EAAyCy9D,IAA5C,GAAmD,EAA5E;AACA9gE,sBAAQ,CAACke,eAAT,CAAyB,YAAzB,EAAuC,CACnC;AACIhe,kBAAE,EAAEooD,KADR;AAEIrgD,qBAAK,EAAE,IAAIopC,QAAJ,CAAa3uC,SAAS,CAAC3F,OAAV,CAAkBiD,QAA/B,EAAyCnD,GAAG,CAACK,UAAJ,CAAeE,GAAxD,EAA6DP,GAAG,CAACK,UAAJ,CAAeI,QAA5E,CAFX;AAGI6gB,uBAAO,EAAE3S,EAHb;AAIIuP,oBAAI,EAAEA;AAJV,eADmC,CAAvC;;AAQA,kBAAItd,GAAG,IAAI,CAAC+N,EAAE,CAACu1D,gBAAf,EAAiC;AAC7Bl0D,sBAAM,CAACm0D,QAAP,CAAgBF,IAAhB,GAAuBrjE,GAAvB;AACH;AACJ;AACJ,WAtBD;;AAuBA,cAAIiF,SAAS,GAAGmY,QAAQ,CAACnY,SAAzB;AACAtG,eAAK,CAACsE,OAAN,GAAgBo4B,gBAAgB,CAACp2B,SAAS,CAACxC,EAAX,EAAe,OAAf,EAAwBwC,SAAS,CAACuB,aAAV,GAA0B,GAA1B,GAAgCvB,SAAS,CAAC6lD,aAAlE,EAAiFnsD,KAAK,CAACwkE,cAAvF,CAAhC;AACA,iBAAOxkE,KAAP;AACH;;AACD,eAAOukE,aAAP;AACH,OAhCkC,CAgCjCJ,WAhCiC,CAAnC;AAkCA;;;;;;AAIA,UAAIU,aAAa;AAAG;AAAe,gBAAU/kE,MAAV,EAAkB;AACjDN,iBAAS,CAACqlE,aAAD,EAAgB/kE,MAAhB,CAAT;;AACA,iBAAS+kE,aAAT,CAAuBpmD,QAAvB,EAAiC;AAC7B,cAAIze,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBwe,QAAlB,KAA+B,IAA3C,CAD6B,CAE7B;;;AACAze,eAAK,CAAC8kE,mBAAN,GAA4B,UAAUhhE,EAAV,EAAc;AACtC,gBAAIA,EAAE,KAAK9D,KAAK,CAAC+kE,YAAjB,EAA+B;AAC3B/kE,mBAAK,CAACglE,cAAN,CAAqB,IAArB,EAA2BhlE,KAAK,CAAC+kE,YAAjC;AACH;AACJ,WAJD;;AAKA/kE,eAAK,CAACilE,cAAN,GAAuB,UAAU71D,EAAV,EAAc88C,KAAd,EAAqB;AACxC,gBAAIrT,QAAQ,CAACqT,KAAD,CAAZ,EAAqB;AAAE;AACnBA,mBAAK,CAAC1nD,SAAN,CAAgBC,GAAhB,CAAoB,uBAApB;AACAzE,mBAAK,CAAC+kE,YAAN,GAAqB7Y,KAArB;;AACAlsD,mBAAK,CAACklE,YAAN,CAAmB,iBAAnB,EAAsC91D,EAAtC,EAA0C88C,KAA1C;AACH;AACJ,WAND;;AAOAlsD,eAAK,CAACglE,cAAN,GAAuB,UAAU51D,EAAV,EAAc88C,KAAd,EAAqB;AACxC,gBAAIlsD,KAAK,CAAC+kE,YAAV,EAAwB;AACpB7Y,mBAAK,CAAC1nD,SAAN,CAAgBg0B,MAAhB,CAAuB,uBAAvB;AACAx4B,mBAAK,CAAC+kE,YAAN,GAAqB,IAArB;;AACA/kE,mBAAK,CAACklE,YAAN,CAAmB,iBAAnB,EAAsC91D,EAAtC,EAA0C88C,KAA1C;AACH;AACJ,WAND;;AAOA,cAAI5lD,SAAS,GAAGmY,QAAQ,CAACnY,SAAzB;AACAtG,eAAK,CAACmlE,oBAAN,GAA6BpoC,uBAAuB,CAACz2B,SAAS,CAACxC,EAAX,EAAewC,SAAS,CAACuB,aAAV,GAA0B,GAA1B,GAAgCvB,SAAS,CAAC6lD,aAAzD,EAAwEnsD,KAAK,CAACilE,cAA9E,EAA8FjlE,KAAK,CAACglE,cAApG,CAApD,CAvB6B,CAwB7B;;AACA1+D,mBAAS,CAAC3F,OAAV,CAAkBiD,QAAlB,CAA2BiX,EAA3B,CAA8B,eAA9B,EAA+C7a,KAAK,CAAC8kE,mBAArD;AACA,iBAAO9kE,KAAP;AACH;;AACD6kE,qBAAa,CAACllE,SAAd,CAAwB2E,OAAxB,GAAkC,YAAY;AAC1C,eAAK6gE,oBAAL;AACA,eAAK7+D,SAAL,CAAe3F,OAAf,CAAuBiD,QAAvB,CAAgC0iB,GAAhC,CAAoC,eAApC,EAAqD,KAAKw+C,mBAA1D;AACH,SAHD;;AAIAD,qBAAa,CAACllE,SAAd,CAAwBulE,YAAxB,GAAuC,UAAUE,YAAV,EAAwBh2D,EAAxB,EAA4B88C,KAA5B,EAAmC;AACtE,cAAI5lD,SAAS,GAAG,KAAKA,SAArB;AACA,cAAI5F,EAAE,GAAG4F,SAAS,CAAC3F,OAAnB;AAAA,cAA4BiD,QAAQ,GAAGlD,EAAE,CAACkD,QAA1C;AAAA,cAAoD+a,IAAI,GAAGje,EAAE,CAACie,IAA9D;AACA,cAAIle,GAAG,GAAGo4C,QAAQ,CAACqT,KAAD,CAAlB;;AACA,cAAI,CAAC98C,EAAD,IAAO9I,SAAS,CAACsb,gBAAV,CAA2BxS,EAAE,CAACkB,MAA9B,CAAX,EAAkD;AAC9C1M,oBAAQ,CAACke,eAAT,CAAyBsjD,YAAzB,EAAuC,CACnC;AACIthE,gBAAE,EAAEooD,KADR;AAEIrgD,mBAAK,EAAE,IAAIopC,QAAJ,CAAarxC,QAAb,EAAuBnD,GAAG,CAACK,UAAJ,CAAeE,GAAtC,EAA2CP,GAAG,CAACK,UAAJ,CAAeI,QAA1D,CAFX;AAGI6gB,qBAAO,EAAE3S,EAHb;AAIIuP,kBAAI,EAAEA;AAJV,aADmC,CAAvC;AAQH;AACJ,SAdD;;AAeA,eAAOkmD,aAAP;AACH,OAlDkC,CAkDjCV,WAlDiC,CAAnC;;AAoDA,UAAIkB,aAAa;AAAG;AAAe,gBAAUvlE,MAAV,EAAkB;AACjDN,iBAAS,CAAC6lE,aAAD,EAAgBvlE,MAAhB,CAAT;;AACA,iBAASulE,aAAT,GAAyB;AACrB,iBAAOvlE,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACD,eAAOi3D,aAAP;AACH,OANkC,CAMjC1b,KANiC,CAAnC;;AAOA0b,mBAAa,CAAC1lE,SAAd,CAAwB2B,OAAxB,GAAkC;AAC9BgkE,cAAM,EAAE,aADsB;AAE9BC,oBAAY,EAAE,kBAFgB;AAG9BC,qBAAa,EAAE,mBAHe;AAI9BC,mBAAW,EAAE,iBAJiB;AAK9BtzD,cAAM,EAAE,6BALsB;AAM9BuzD,oBAAY,EAAE,kBANgB;AAO9BC,qBAAa,EAAE,kBAPe;AAQ9BC,sBAAc,EAAE,mBARc;AAS9B;AACAC,iBAAS,EAAE,kBAVmB;AAW9BC,cAAM,EAAE,mBAXsB;AAY9B;AACA/lE,gBAAQ,EAAE;AAboB,OAAlC;AAeAslE,mBAAa,CAAC1lE,SAAd,CAAwB4qD,aAAxB,GAAwC,SAAxC;AACA8a,mBAAa,CAAC1lE,SAAd,CAAwBwqD,WAAxB,GAAsC;AAClC4b,aAAK,EAAE,WAD2B;AAElCxU,YAAI,EAAE,sBAF4B;AAGlCC,YAAI,EAAE,uBAH4B;AAIlCC,gBAAQ,EAAE,uBAJwB;AAKlCC,gBAAQ,EAAE;AALwB,OAAtC;AAOA2T,mBAAa,CAAC1lE,SAAd,CAAwBmqD,kBAAxB,GAA6C,aAA7C;AACAub,mBAAa,CAAC1lE,SAAd,CAAwB+qD,8BAAxB,GAAyD,MAAzD;AACA2a,mBAAa,CAAC1lE,SAAd,CAAwB0qD,kBAAxB,GAA6C,UAA7C;;AAEA,UAAI2b,QAAQ;AAAG;AAAe,kBAAY;AACtC,iBAASA,QAAT,CAAkBliE,EAAlB,EAAsBgwD,SAAtB,EAAiC;AAC7B,cAAI9zD,KAAK,GAAG,IAAZ;;AACA,eAAKqiE,qBAAL,GAA6Bn0B,OAAO,CAAC+3B,uBAAD,CAApC;AACA,eAAKxT,eAAL,GAAuBvkB,OAAO,CAACukB,eAAD,CAA9B;AACA,eAAKU,WAAL,GAAmBjlB,OAAO,CAACilB,WAAD,CAA1B;AACA,eAAK+S,YAAL,GAAoBh4B,OAAO,CAACg4B,YAAD,CAA3B;AACA,eAAKC,UAAL,GAAkBj4B,OAAO,CAACi4B,UAAD,CAAzB;AACA,eAAKC,sBAAL,GAA8Bl4B,OAAO,CAAC,KAAKm4B,uBAAN,CAArC;AACA,eAAKC,oBAAL,GAA4Bp4B,OAAO,CAAC,KAAKq4B,qBAAN,CAAnC;AACA,eAAKC,oBAAL,GAA4Bp4B,aAAa,CAACo4B,oBAAD,EAAuBn8B,YAAvB,CAAzC;AACA,eAAKo8B,iBAAL,GAAyBv4B,OAAO,CAACu4B,iBAAD,CAAhC;AACA,eAAKC,iBAAL,GAAyB,EAAzB;AACA,eAAKC,WAAL,GAAmB,EAAnB;AACA,eAAKC,UAAL,GAAkB,KAAlB,CAb6B,CAc7B;;AACA,eAAKC,aAAL,GAAqB,KAArB,CAf6B,CAeD;;AAC5B,eAAKC,WAAL,GAAmB,KAAnB,CAhB6B,CAgBH;;AAC1B,eAAKC,mBAAL,GAA2B,CAA3B;AACA,eAAKC,oBAAL,GAA4B94B,OAAO,CAAC84B,oBAAD,CAAnC;AACA,eAAKztB,mBAAL,GAA2B,EAA3B;AACA,eAAK0tB,aAAL,GAAqB,KAArB;AACA,eAAKC,cAAL,GAAsB,KAAtB;AACA,eAAKC,eAAL,GAAuB,KAAvB;AACA,eAAKrjE,EAAL,GAAUA,EAAV;AACA,eAAK26D,cAAL,GAAsB,IAAI5K,cAAJ,CAAmBC,SAAS,IAAI,EAAhC,CAAtB;AACA,eAAKp0C,YAAL,GAAoB,IAAIstC,YAAJ,EAApB,CAzB6B,CA0B7B;;AACA,eAAKkE,eAAL,CAAqB,KAAKuN,cAAL,CAAoBxiC,QAApB,CAA6B3J,OAA7B,IAAwC,EAA7D;AACA,eAAK80C,aAAL,CAAmB,KAAK3I,cAAL,CAAoBxiC,QAAvC;AACA,eAAKna,eAAL,CAAqB,OAArB,EA7B6B,CA6BE;;AAC/B,eAAKulD,OAAL;AACA,eAAKv+C,oBAAL,GAA4B,KAAKpJ,YAAL,CAAkBC,KAAlB,CAAwBmJ,oBAAxB,CACvBzP,GADuB,CACnB,UAAUiuD,wBAAV,EAAoC;AACzC,mBAAO,IAAIA,wBAAJ,CAA6BtnE,KAA7B,CAAP;AACH,WAH2B,CAA5B;AAIH;;AACDgmE,gBAAQ,CAACrmE,SAAT,CAAmBuxD,eAAnB,GAAqC,UAAUc,YAAV,EAAwB;AACzD,cAAIuV,UAAU,GAAGxV,gBAAgB,CAACC,YAAD,CAAjC;;AACA,eAAK,IAAIptD,EAAE,GAAG,CAAT,EAAY4iE,YAAY,GAAGD,UAAhC,EAA4C3iE,EAAE,GAAG4iE,YAAY,CAACpnE,MAA9D,EAAsEwE,EAAE,EAAxE,EAA4E;AACxE,gBAAI6iE,SAAS,GAAGD,YAAY,CAAC5iE,EAAD,CAA5B;AACA,iBAAK8a,YAAL,CAAkBjb,GAAlB,CAAsBgjE,SAAtB;AACH;AACJ,SAND;;AAOAvoE,cAAM,CAACy1C,cAAP,CAAsBqxB,QAAQ,CAACrmE,SAA/B,EAA0C,MAA1C,EAAkD;AAC9C;AACAi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKtuC,SAAL,GAAiB,KAAKA,SAAL,CAAeqY,IAAhC,GAAuC,IAA9C;AACH,WAJ6C;AAK9Cm2B,oBAAU,EAAE,IALkC;AAM9CC,sBAAY,EAAE;AANgC,SAAlD,EA5CsC,CAoDtC;AACA;;AACAixB,gBAAQ,CAACrmE,SAAT,CAAmBoE,MAAnB,GAA4B,YAAY;AACpC,cAAI,CAAC,KAAKuC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAI+C,iBAAJ,CAAsB,KAAKvF,EAA3B,CAAjB;AACA,iBAAK4jE,oBAAL,GAA4Bj9B,qBAAqB,EAAjD;AACA,iBAAKk9B,YAAL;AACA,iBAAKC,aAAL;AACH,WALD,MAMK;AACD,iBAAKC,eAAL;AACH;AACJ,SAVD;;AAWA7B,gBAAQ,CAACrmE,SAAT,CAAmB2E,OAAnB,GAA6B,YAAY;AACrC,cAAI,KAAKgC,SAAT,EAAoB;AAChB,iBAAKwhE,cAAL;AACA,iBAAKxhE,SAAL,CAAehC,OAAf,GAFgB,CAEU;;AAC1B,iBAAKgC,SAAL,GAAiB,IAAjB,CAHgB,CAGO;;AACvB,iBAAK,IAAI1B,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKooB,oBAA3B,EAAiDlkB,EAAE,GAAGlE,EAAE,CAACN,MAAzD,EAAiEwE,EAAE,EAAnE,EAAuE;AACnE,kBAAIqd,WAAW,GAAGvhB,EAAE,CAACkE,EAAD,CAApB;AACAqd,yBAAW,CAAC3d,OAAZ;AACH;;AACD,iBAAKwd,eAAL,CAAqB,YAArB;AACH;AACJ,SAXD,CAjEsC,CA6EtC;AACA;;;AACAkkD,gBAAQ,CAACrmE,SAAT,CAAmBgoE,YAAnB,GAAkC,YAAY;AAC1C,cAAI3nE,KAAK,GAAG,IAAZ,CAD0C,CAE1C;;;AACA,eAAK+nE,qBAAL,GAA6BrrC,gBAAgB,CAAC,KAAK54B,EAAN,EAAU,OAAV,EAAmB,cAAnB,EAAmC,UAAUsL,EAAV,EAAc44D,QAAd,EAAwB;AACpG,gBAAIxiB,WAAW,GAAGwiB,QAAQ,CAAC//C,YAAT,CAAsB,WAAtB,CAAlB;AACAu9B,uBAAW,GAAGA,WAAW,GAAG59B,IAAI,CAACC,KAAL,CAAW29B,WAAX,CAAH,GAA6B,EAAtD;AACA,gBAAIr/C,OAAO,GAAGnG,KAAK,CAACmG,OAApB;AACA,gBAAI41D,UAAU,GAAG51D,OAAO,CAACqmC,YAAR,CAAqBgZ,WAAW,CAAChlB,IAAjC,CAAjB;AACA,gBAAIw6B,QAAQ,GAAGxV,WAAW,CAAC/8C,IAA3B,CALoG,CAMpG;;AACA,gBAAIw/D,YAAY,GAAGjoE,KAAK,CAAComB,OAAN,CAAc,YAAYkgB,qBAAqB,CAAC00B,QAAD,CAAjC,GAA8C,OAA5D,CAAnB;;AACA,gBAAI,OAAOiN,YAAP,KAAwB,UAA5B,EAAwC;AACpCA,0BAAY,CAAC9hE,OAAO,CAAC6wC,MAAR,CAAe+kB,UAAf,CAAD,EAA6B3sD,EAA7B,CAAZ;AACH,aAFD,MAGK;AACD,kBAAI,OAAO64D,YAAP,KAAwB,QAA5B,EAAsC;AAClCjN,wBAAQ,GAAGiN,YAAX;AACH;;AACDjoE,mBAAK,CAACkoE,MAAN,CAAanM,UAAb,EAAyBf,QAAzB;AACH;AACJ,WAjB4C,CAA7C;;AAkBA,cAAI,KAAK9zC,GAAL,CAAS,oBAAT,CAAJ,EAAoC;AAChCzW,kBAAM,CAACX,gBAAP,CAAwB,QAAxB,EAAkC,KAAKq4D,iBAAL,GAAyBnhC,QAAQ,EAAC;AACpE,iBAAK/c,YAAL,CAAkBxmB,IAAlB,CAAuB,IAAvB,CADmE,EACrC,KAAKyjB,GAAL,CAAS,mBAAT,CADqC,CAAnE;AAEH;AACJ,SAzBD;;AA0BA8+C,gBAAQ,CAACrmE,SAAT,CAAmBmoE,cAAnB,GAAoC,YAAY;AAC5C,eAAKC,qBAAL;;AACA,cAAI,KAAKI,iBAAT,EAA4B;AACxB13D,kBAAM,CAACP,mBAAP,CAA2B,QAA3B,EAAqC,KAAKi4D,iBAA1C;AACA,iBAAKA,iBAAL,GAAyB,IAAzB;AACH;AACJ,SAND,CAzGsC,CAgHtC;AACA;;;AACAnC,gBAAQ,CAACrmE,SAAT,CAAmB0nE,OAAnB,GAA6B,YAAY;AACrC,cAAIrnE,KAAK,GAAG,IAAZ;;AACA,eAAKshB,KAAL,GAAa,KAAK8mD,iBAAL,EAAb;AACA,cAAIC,UAAU,GAAG,KAAKnhD,GAAL,CAAS,cAAT,KAA4B,EAA7C;AACA,cAAIohD,eAAe,GAAG,KAAKphD,GAAL,CAAS,QAAT,CAAtB;AACA,cAAI+vC,OAAO,GAAG,EAAd,CALqC,CAKnB;;AAClB,cAAIqR,eAAJ,EAAqB;AACjBD,sBAAU,CAACx+B,OAAX,CAAmBy+B,eAAnB;AACH;;AACD,eAAK,IAAI1jE,EAAE,GAAG,CAAT,EAAY2jE,YAAY,GAAGF,UAAhC,EAA4CzjE,EAAE,GAAG2jE,YAAY,CAACnoE,MAA9D,EAAsEwE,EAAE,EAAxE,EAA4E;AACxE,gBAAI4jE,SAAS,GAAGD,YAAY,CAAC3jE,EAAD,CAA5B;AACA,gBAAI68C,MAAM,GAAGmV,gBAAgB,CAAC4R,SAAD,EAAY,IAAZ,CAA7B;;AACA,gBAAI/mB,MAAJ,EAAY;AACRwV,qBAAO,CAAC70D,IAAR,CAAaq/C,MAAb;AACH;AACJ;;AACD,eAAKgnB,cAAL,CAAoB,YAAY;AAC5BzoE,iBAAK,CAAC8f,QAAN,CAAe;AAAErX,kBAAI,EAAE;AAAR,aAAf,EAD4B,CACM;;;AAClCzI,iBAAK,CAAC8f,QAAN,CAAe;AAAErX,kBAAI,EAAE,mBAAR;AAA6BwuD,qBAAO,EAAEA;AAAtC,aAAf;;AACAj3D,iBAAK,CAAC8f,QAAN,CAAe;AACXrX,kBAAI,EAAE,eADK;AAEXuyD,sBAAQ,EAAEh7D,KAAK,CAACknB,GAAN,CAAU,aAAV,KAA4BlnB,KAAK,CAAC0f,YAAN,CAAmBC,KAAnB,CAAyBwO;AAFpD,aAAf;AAIH,WAPD;AAQH,SAxBD;;AAyBA63C,gBAAQ,CAACrmE,SAAT,CAAmByoE,iBAAnB,GAAuC,YAAY;AAC/C,iBAAO;AACHpN,oBAAQ,EAAE,IADP;AAEHU,wBAAY,EAAE,CAFX;AAGHpiB,mCAAuB,EAAE,CAHtB;AAIHof,uBAAW,EAAE,KAAKgQ,cAAL,EAJV;AAKHzkE,uBAAW,EAAE,IALV;AAMH0lB,wBAAY,EAAE,EANX;AAOHvlB,sBAAU,EAAEqmC,qBAAqB,EAP9B;AAQHvkB,yBAAa,EAAE,IARZ;AASH1E,0BAAc,EAAE,EATb;AAUHw6B,qBAAS,EAAE,IAVR;AAWHnxB,uBAAW,EAAE;AAXV,WAAP;AAaH,SAdD;;AAeAm7C,gBAAQ,CAACrmE,SAAT,CAAmBmgB,QAAnB,GAA8B,UAAU3U,MAAV,EAAkB;AAC5C,eAAKw7D,WAAL,CAAiBvkE,IAAjB,CAAsB+I,MAAtB;;AACA,cAAI,CAAC,KAAKy7D,UAAV,EAAsB;AAClB,iBAAKA,UAAL,GAAkB,IAAlB;AACA,gBAAI+B,QAAQ,GAAG,KAAKrnD,KAApB;;AACA,mBAAO,KAAKqlD,WAAL,CAAiBvmE,MAAxB,EAAgC;AAC5B,mBAAKkhB,KAAL,GAAa,KAAKkb,MAAL,CAAY,KAAKlb,KAAjB,EAAwB,KAAKqlD,WAAL,CAAiBiC,KAAjB,EAAxB,EAAkD,IAAlD,CAAb;AACH;;AACD,gBAAIC,QAAQ,GAAG,KAAKvnD,KAApB;AACA,iBAAKslD,UAAL,GAAkB,KAAlB;;AACA,gBAAI,CAAC+B,QAAQ,CAACjN,YAAV,IAA0BmN,QAAQ,CAACnN,YAAvC,EAAqD;AACjD,mBAAK55C,eAAL,CAAqB,SAArB,EAAgC,CAAC,IAAD,CAAhC;AACH,aAFD,MAGK,IAAI6mD,QAAQ,CAACjN,YAAT,IAAyB,CAACmN,QAAQ,CAACnN,YAAvC,EAAqD;AACtD,mBAAK55C,eAAL,CAAqB,SAArB,EAAgC,CAAC,KAAD,CAAhC;AACH;;AACD,gBAAInD,IAAI,GAAG,KAAKrY,SAAL,IAAkB,KAAKA,SAAL,CAAeqY,IAA5C;;AACA,gBAAIgqD,QAAQ,CAACvkE,UAAT,KAAwBykE,QAAQ,CAACzkE,UAArC,EAAiD;AAC7C,kBAAIukE,QAAQ,CAACvkE,UAAb,EAAyB;AACrB,qBAAK+iE,eAAL,GAAuB,IAAvB;AACH;AACJ;;AACD,gBAAIwB,QAAQ,CAAC1kE,WAAT,KAAyB4kE,QAAQ,CAAC5kE,WAAtC,EAAmD;AAC/C,kBAAI0kE,QAAQ,CAAC1kE,WAAT,IAAwB0a,IAA5B,EAAkC;AAAE;AAChC,qBAAKmD,eAAL,CAAqB,cAArB,EAAqC,CACjC;AACInD,sBAAI,EAAEA,IADV;AAEI7a,oBAAE,EAAE6a,IAAI,CAAC7a;AAFb,iBADiC,CAArC;AAMH;;AACD,mBAAKojE,cAAL,GAAsB,IAAtB;AACH;;AACD,gBAAIyB,QAAQ,CAAC3N,QAAT,KAAsB6N,QAAQ,CAAC7N,QAAnC,EAA6C;AACzC,kBAAI2N,QAAQ,CAAC3N,QAAT,IAAqBr8C,IAAzB,EAA+B;AAAE;AAC7B,qBAAKmD,eAAL,CAAqB,qBAArB,EAA4C,CACxC;AACInD,sBAAI,EAAEA,IADV;AAEI7a,oBAAE,EAAE6a,IAAI,CAAC7a;AAFb,iBADwC,CAA5C;AAMH;;AACD,mBAAKmjE,aAAL,GAAqB,IAArB;AACH;;AACD,iBAAKY,eAAL;AACH;AACJ,SA9CD;;AA+CA7B,gBAAQ,CAACrmE,SAAT,CAAmB68B,MAAnB,GAA4B,UAAUlb,KAAV,EAAiBnW,MAAjB,EAAyBvH,QAAzB,EAAmC;AAC3D,iBAAO44B,MAAM,CAAClb,KAAD,EAAQnW,MAAR,EAAgBvH,QAAhB,CAAb;AACH,SAFD,CAzMsC,CA4MtC;AACA;;;AACAoiE,gBAAQ,CAACrmE,SAAT,CAAmBkoE,eAAnB,GAAqC,YAAY;AAC7C,eAAKhB,aAAL,GAAqB,IAArB;AACA,eAAKiC,eAAL,GAF6C,CAErB;AAC3B,SAHD;;AAIA9C,gBAAQ,CAACrmE,SAAT,CAAmBopE,WAAnB,GAAiC,YAAY;AACzC,cAAI,KAAKziE,SAAL,IAAkB;AAClB,eAAKugE,aADL,IACsB;AACtB,WAAC,KAAKE,mBAFN,IAE6B;AAC7B,WAAC,KAAKD,WAHV,CAGsB;AAHtB,YAIE;AACE,mBAAKc,aAAL;AACH;AACJ,SARD;;AASA5B,gBAAQ,CAACrmE,SAAT,CAAmB8oE,cAAnB,GAAoC,UAAUr/C,IAAV,EAAgB;AAChD,eAAK29C,mBAAL;AACA39C,cAAI;AACJ,eAAK29C,mBAAL;;AACA,cAAI,KAAKF,aAAT,EAAwB;AACpB,iBAAKgB,eAAL;AACH;AACJ,SAPD,CA3NsC,CAmOtC;AACA;;;AACA7B,gBAAQ,CAACrmE,SAAT,CAAmBioE,aAAnB,GAAmC,YAAY;AAC3C;AACA,eAAKf,aAAL,GAAqB,KAArB;AACA,eAAKC,WAAL,GAAmB,IAAnB;AACA,eAAKkC,eAAL;AACA,eAAKlC,WAAL,GAAmB,KAAnB,CAL2C,CAM3C;;AACA,cAAI,KAAKD,aAAT,EAAwB;AACpB,iBAAKiC,eAAL;AACH;AACJ,SAVD;AAWA;;;;;AAGA9C,gBAAQ,CAACrmE,SAAT,CAAmBqpE,eAAnB,GAAqC,YAAY;AAC7C,cAAItoE,EAAE,GAAG,IAAT;AAAA,cAAe4gB,KAAK,GAAG5gB,EAAE,CAAC4gB,KAA1B;AAAA,cAAiChb,SAAS,GAAG5F,EAAE,CAAC4F,SAAhD;;AACA,cAAI00D,QAAQ,GAAG15C,KAAK,CAAC05C,QAArB;AACA,cAAIl4D,QAAQ,GAAG,KAAK69D,SAAL,CAAe3F,QAAf,CAAf;;AACA,cAAI,CAACl4D,QAAL,EAAe;AACX,kBAAM,IAAI43D,KAAJ,CAAU,iBAAiBM,QAAjB,GAA4B,iBAAtC,CAAN;AACH,WAN4C,CAO7C;AACA;;;AACA,cAAI0M,oBAAoB,GAAG,KAAKA,oBAAL,GACtBpmD,KAAK,CAACg4B,uBAAN,IAAiC,CAAC,KAAKpyB,GAAL,CAAS,2BAAT,CAAnC,GACI,KAAKwgD,oBADT,GAEIpmD,KAAK,CAACld,UAHd;AAIA,cAAI6kE,iBAAiB,GAAG,KAAK7C,sBAAL,CAA4BtjE,QAAQ,CAACjC,OAArC,CAAxB;AACA,cAAIqoE,eAAe,GAAG,KAAK1C,oBAAL,CAA0BllD,KAAK,CAACqI,YAAhC,CAAtB;AACA,cAAItlB,YAAY,GAAG,KAAKA,YAAL,GAAoB,KAAKoiE,iBAAL,CAAuBiB,oBAAoB,CAACjkD,IAA5C,EAAkDwlD,iBAAlD,EAAqEC,eAArE,CAAvC;AACA5iE,mBAAS,CAAC8kD,YAAV,CAAuBp9C,QAAQ,CAAC,EAAD,EAAKsT,KAAL,EAAY;AAAExe,oBAAQ,EAAEA,QAAZ;AAAsBogE,gCAAoB,EAAE,KAAKpH,qBAAL,CAA2Bd,QAA3B,CAA5C;AAAkF/2D,uBAAW,EAAEqd,KAAK,CAACrd,WAArG;AAAkHG,sBAAU,EAAEsjE,oBAA9H;AAAoJrjE,wBAAY,EAAEA,YAAlK;AAAgL6hB,yBAAa,EAAE5E,KAAK,CAAC4E,aAArM;AAAoN1E,0BAAc,EAAEF,KAAK,CAACE,cAA1O;AAA0Pw6B,qBAAS,EAAE16B,KAAK,CAAC06B,SAA3Q;AAAsRnxB,uBAAW,EAAEvJ,KAAK,CAACuJ;AAAzS,WAAZ,CAA/B,EAAoW,KAAKw3C,qBAAL,CAA2B,KAAKzhE,KAAhC,EAAuC,KAAKuF,OAA5C,EAAqD,KAAKs4D,cAAL,CAAoBxiC,QAAzE,CAApW;;AACA,cAAI,KAAKgrC,aAAT,EAAwB;AACpB,iBAAKA,aAAL,GAAqB,KAArB;AACA,iBAAKnlD,eAAL,CAAqB,oBAArB,EAA2C,CACvC;AACInD,kBAAI,EAAErY,SAAS,CAACqY,IADpB;AAEI7a,gBAAE,EAAEwC,SAAS,CAACqY,IAAV,CAAe7a;AAFvB,aADuC,CAA3C;AAMH;;AACD,cAAI,KAAKojE,cAAT,EAAyB;AACrB,iBAAKA,cAAL,GAAsB,KAAtB;AACA,iBAAKplD,eAAL,CAAqB,aAArB,EAAoC,CAChC;AACInD,kBAAI,EAAErY,SAAS,CAACqY,IADpB;AAEI7a,gBAAE,EAAEwC,SAAS,CAACqY,IAAV,CAAe7a;AAFvB,aADgC,CAApC;AAMH;;AACD,cAAI,KAAKqjE,eAAT,EAA0B;AACtB,iBAAKA,eAAL,GAAuB,KAAvB;AACH;;AACD,eAAKgC,0BAAL;AACH,SAvCD,CAnPsC,CA2RtC;AACA;;;AACAnD,gBAAQ,CAACrmE,SAAT,CAAmBypE,SAAnB,GAA+B,UAAUx/D,IAAV,EAAgBgvB,GAAhB,EAAqB;AAChD,cAAIl4B,EAAJ;;AACA,eAAK8rB,aAAL,EAAoB9rB,EAAE,GAAG,EAAL,EAASA,EAAE,CAACkJ,IAAD,CAAF,GAAWgvB,GAApB,EAAyBl4B,EAA7C,GAAkD,EAAlD,EAAsD,IAAtD;AACH,SAHD;;AAIAslE,gBAAQ,CAACrmE,SAAT,CAAmB0pE,SAAnB,GAA+B,UAAUz/D,IAAV,EAAgB;AAC3C,iBAAO,KAAK60D,cAAL,CAAoBxiC,QAApB,CAA6BryB,IAA7B,CAAP;AACH,SAFD;;AAGAo8D,gBAAQ,CAACrmE,SAAT,CAAmBunB,GAAnB,GAAyB,UAAUtd,IAAV,EAAgB;AACrC,iBAAO,KAAK60D,cAAL,CAAoBxiC,QAApB,CAA6BryB,IAA7B,CAAP;AACH,SAFD;;AAGAo8D,gBAAQ,CAACrmE,SAAT,CAAmBymB,OAAnB,GAA6B,UAAUxc,IAAV,EAAgB;AACzC,iBAAO,KAAK0/D,QAAL,GAAgB1/D,IAAhB,CAAP;AACH,SAFD;;AAGAo8D,gBAAQ,CAACrmE,SAAT,CAAmB2pE,QAAnB,GAA8B,YAAY;AACtC,iBAAO,KAAK3I,SAAL,CAAe,KAAKr/C,KAAL,CAAW05C,QAA1B,EAAoCn6D,OAA3C;AACH,SAFD;AAGA;;;;;AAGAmlE,gBAAQ,CAACrmE,SAAT,CAAmB6sB,aAAnB,GAAmC,UAAUynC,OAAV,EAAmBnY,QAAnB,EAA6BoY,SAA7B,EAAwC7D,SAAxC,EAAmD;AAClF,cAAIrwD,KAAK,GAAG,IAAZ;;AACA,cAAIupE,cAAc,GAAG,KAAK7pD,YAAL,CAAkBC,KAAlB,CAAwBotC,oBAA7C;AACA,cAAIyc,aAAa,GAAG,EAApB;AACA,cAAIC,cAAc,GAAG,EAArB;AACA,cAAIruB,UAAU,GAAG,KAAKj1C,OAAtB,CALkF,CAKnD;;AAC/B,cAAIujE,eAAe,GAAG,KAAtB;AACA,cAAIC,WAAW,GAAG,KAAlB;AACA,cAAIC,mBAAmB,GAAGrrD,OAAO,CAACu9B,QAAQ,CAAC17C,MAAV,CAAjC;;AACA,eAAK,IAAIqvC,MAAT,IAAmBwkB,OAAnB,EAA4B;AACxB,gBAAIsV,cAAc,CAAC95B,MAAD,CAAlB,EAA4B;AACxBg6B,4BAAc,CAACh6B,MAAD,CAAd,GAAyBwkB,OAAO,CAACxkB,MAAD,CAAhC;AACH,aAFD,MAGK;AACD+5B,2BAAa,CAAC/5B,MAAD,CAAb,GAAwBwkB,OAAO,CAACxkB,MAAD,CAA/B;AACH;AACJ;;AACD,eAAK,IAAIiD,MAAT,IAAmB82B,aAAnB,EAAkC;AAC9B,gBAAI,uCAAuC3wC,IAAvC,CAA4C6Z,MAA5C,CAAJ,EAAyD;AACrDi3B,yBAAW,GAAG,IAAd;AACH,aAFD,MAGK,IAAI,8BAA8B9wC,IAA9B,CAAmC6Z,MAAnC,CAAJ,EAAgD,CAAhD,KACA;AACDk3B,iCAAmB,GAAG,IAAtB;;AACA,kBAAIl3B,MAAM,KAAK,UAAf,EAA2B;AACvBg3B,+BAAe,GAAG,IAAlB;AACH;AACJ;AACJ;;AACD,eAAKjL,cAAL,CAAoBjpB,MAApB,CAA2Bg0B,aAA3B,EAA0C1tB,QAA1C,EAAoDoY,SAApD;;AACA,cAAI0V,mBAAJ,EAAyB;AACrB,iBAAKxC,aAAL,CAAmB,KAAK3I,cAAL,CAAoBxiC,QAAvC;AACH;;AACD,eAAKwsC,cAAL,CAAoB,YAAY;AAC5B,gBAAImB,mBAAJ,EAAyB;AACrB,kBAAIF,eAAJ,EAAqB;AACjB1pE,qBAAK,CAAC8f,QAAN,CAAe;AACXrX,sBAAI,EAAE,iBADK;AAEX2yC,4BAAU,EAAEA;AAFD,iBAAf;AAIH;AACD;;;;;;AAIAp7C,mBAAK,CAAC8f,QAAN,CAAe;AACXrX,oBAAI,EAAE,eADK;AAEXuyD,wBAAQ,EAAEh7D,KAAK,CAACshB,KAAN,CAAY05C;AAFX,eAAf;AAIH,aAfD,MAgBK,IAAI2O,WAAJ,EAAiB;AAClB3pE,mBAAK,CAACkF,UAAN;AACH,aAnB2B,CAoB5B;;;AACA,gBAAImrD,SAAJ,EAAe;AACX,mBAAK,IAAIwZ,MAAT,IAAmBJ,cAAnB,EAAmC;AAC/BF,8BAAc,CAACM,MAAD,CAAd,CAAuBJ,cAAc,CAACI,MAAD,CAArC,EAA+C7pE,KAA/C,EAAsDqwD,SAAtD;AACH;AACJ;AACJ,WA1BD;AA2BH,SA5DD;AA6DA;;;;;AAGA2V,gBAAQ,CAACrmE,SAAT,CAAmBynE,aAAnB,GAAmC,UAAUvmE,OAAV,EAAmB;AAClD,cAAIb,KAAK,GAAG,IAAZ;;AACA,cAAI8pE,WAAW,GAAG,KAAKpqD,YAAL,CAAkBC,KAApC;AACA,eAAKwQ,0BAAL,GAAkCiR,cAAc,CAACvgC,OAAO,CAACsvB,0BAAT,CAAhD;AACA,eAAKC,yBAAL,GAAiCgR,cAAc,CAACvgC,OAAO,CAACuvB,yBAAT,CAA/C;AACA,eAAK04C,eAAL,GAAuB,KAAK9B,oBAAL,CAA0BnmE,OAAO,CAAC6wB,aAAlC,CAAvB;AACA,eAAK9wB,KAAL,GAAa,KAAKulE,UAAL,CAAgBtlE,OAAhB,CAAb;AACA,cAAIwyD,SAAS,GAAG,KAAKZ,eAAL,CAAqB5xD,OAAO,CAACwuB,OAA7B,CAAhB;AACA,eAAK06C,mBAAL,GAA2B1W,SAAS,CAACh6C,GAArC;AACA,cAAIiW,MAAM,GAAG,KAAK6jC,WAAL,CAAiBtyD,OAAO,CAACyuB,MAAR,IAAkB+jC,SAAS,CAACV,WAA7C,EAA0DU,SAAS,CAACh6C,GAApE,CAAb;AACA,eAAKlT,OAAL,GAAe,KAAK+/D,YAAL,CAAkB52C,MAAlB,EAA0BzuB,OAAO,CAACqtB,QAAlC,EAA4C47C,WAAW,CAAChd,kBAAxD,EAA4EjsD,OAAO,CAACqsB,QAApF,EAA8FrsB,OAAO,CAAC4sB,qBAAtG,EAA6H5sB,OAAO,CAACgvB,SAArI,EAAgJi6C,WAAW,CAACz5C,YAA5J,CAAf;AACA,eAAKssB,eAAL,GAAuB,KAAK2pB,oBAAL,CAA0BzlE,OAA1B,CAAvB,CAXkD,CAWS;AAC3D;;AACA,eAAK8/D,SAAL,GAAiBpC,cAAc,CAACuL,WAAW,CAAC5hE,KAAb,EAAoB,KAAKu2D,cAAzB,CAA/B,CAbkD,CAclD;;AACA,eAAK3C,qBAAL,GAA6B3yC,OAAO,CAAC,KAAKw3C,SAAN,EAAiB,UAAU79D,QAAV,EAAoB;AACrE,mBAAO,IAAIA,QAAQ,SAAR,CAAenD,SAAf,CAAyBqqE,yBAA7B,CAAuDlnE,QAAvD,EAAiE9C,KAAjE,CAAP;AACH,WAFmC,CAApC;AAGH,SAlBD;;AAmBAgmE,gBAAQ,CAACrmE,SAAT,CAAmBsqE,uBAAnB,GAA6C,YAAY;AACrD,iBAAO/qE,MAAM,CAACqtB,IAAP,CAAY,KAAKw9C,mBAAjB,CAAP;AACH,SAFD;;AAGA/D,gBAAQ,CAACrmE,SAAT,CAAmB4mE,qBAAnB,GAA2C,UAAU2D,OAAV,EAAmB;AAC1D,iBAAOvqB,oBAAoB,CAAC,QAAD,EAAWuqB,OAAX,EAAoB,IAApB,CAA3B;AACH,SAFD;;AAGAlE,gBAAQ,CAACrmE,SAAT,CAAmB0mE,uBAAnB,GAA6C,UAAU6D,OAAV,EAAmB;AAC5D,cAAIA,OAAO,CAAC1nD,QAAZ,EAAsB;AAAE;AACpB0nD,mBAAO,GAAGl8D,QAAQ,CAAC,EAAD,EAAKk8D,OAAL,EAAc;AAAEC,2BAAa,EAAE;AAAjB,aAAd,CAAlB;AACH;;AACD,iBAAOxqB,oBAAoB,CAAC,OAAD,EAAUuqB,OAAV,EAAmB,IAAnB,CAA3B;AACH,SALD,CAzYsC,CA+YtC;AACA;;;AACAlE,gBAAQ,CAACrmE,SAAT,CAAmB64C,iBAAnB,GAAuC,UAAU5uC,IAAV,EAAgB;AACnD,iBAAO,KAAK89C,WAAL,CAAiB99C,IAAjB,KACH,KAAKsd,GAAL,CAAStd,IAAT,CADJ,CADmD,CAE/B;AACvB,SAHD;;AAIAo8D,gBAAQ,CAACrmE,SAAT,CAAmBmiB,eAAnB,GAAqC,UAAUlY,IAAV,EAAgB4qB,IAAhB,EAAsB;AACvD,cAAI41C,UAAU,GAAG,KAAKljD,GAAL,CAAStd,IAAT,CAAjB;AACA,eAAK69C,WAAL,CAAiB79C,IAAjB,EAAuB,IAAvB,EAA6B4qB,IAA7B;;AACA,cAAI41C,UAAJ,EAAgB;AACZ,mBAAOA,UAAU,CAACnkE,KAAX,CAAiB,IAAjB,EAAuBuuB,IAAvB,CAAP;AACH;AACJ,SAND;;AAOAwxC,gBAAQ,CAACrmE,SAAT,CAAmB05C,0BAAnB,GAAgD,UAAUzvC,IAAV,EAAgB4qB,IAAhB,EAAsB;AAClE,cAAI+kB,mBAAmB,GAAG,KAAKA,mBAA/B;AACA,WAACA,mBAAmB,CAAC3vC,IAAD,CAAnB,KAA8B2vC,mBAAmB,CAAC3vC,IAAD,CAAnB,GAA4B,EAA1D,CAAD,EAAgExH,IAAhE,CAAqEoyB,IAArE;AACH,SAHD;;AAIAwxC,gBAAQ,CAACrmE,SAAT,CAAmBwpE,0BAAnB,GAAgD,YAAY;AACxD,cAAI5vB,mBAAmB,GAAG,KAAKA,mBAA/B;;AACA,eAAK,IAAI8wB,MAAT,IAAmB9wB,mBAAnB,EAAwC;AACpC,iBAAK,IAAI30C,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG64C,mBAAmB,CAAC8wB,MAAD,CAAzC,EAAmDzlE,EAAE,GAAGlE,EAAE,CAACN,MAA3D,EAAmEwE,EAAE,EAArE,EAAyE;AACrE,kBAAI4vB,IAAI,GAAG9zB,EAAE,CAACkE,EAAD,CAAb;AACA,mBAAKkd,eAAL,CAAqBuoD,MAArB,EAA6B71C,IAA7B;AACH;AACJ;;AACD,eAAK+kB,mBAAL,GAA2B,EAA3B;AACH,SATD,CAhasC,CA0atC;AACA;AACA;;;AACAysB,gBAAQ,CAACrmE,SAAT,CAAmB2qE,eAAnB,GAAqC,UAAUtP,QAAV,EAAoB;AACrD,iBAAOz8C,OAAO,CAAC,KAAKoiD,SAAL,CAAe3F,QAAf,CAAD,CAAd;AACH,SAFD;;AAGAgL,gBAAQ,CAACrmE,SAAT,CAAmBgiE,UAAnB,GAAgC,UAAU3G,QAAV,EAAoBuP,WAApB,EAAiC;AAC7D,cAAIxO,UAAU,GAAG,IAAjB;;AACA,cAAIwO,WAAJ,EAAiB;AACb,gBAAIA,WAAW,CAACvoE,KAAZ,IAAqBuoE,WAAW,CAACtoE,GAArC,EAA0C;AAAE;AACxC,mBAAKw8D,cAAL,CAAoBjpB,MAApB,CAA2B;AAAExmB,4BAAY,EAAEu7C;AAAhB,eAA3B,EAA0D,EAA1D,EADsC,CACyB;;AAC/D,mBAAKnD,aAAL,CAAmB,KAAK3I,cAAL,CAAoBxiC,QAAvC,EAFsC,CAEY;AACrD,aAHD,MAIK;AAAE;AACH8/B,wBAAU,GAAG,KAAK51D,OAAL,CAAaqmC,YAAb,CAA0B+9B,WAA1B,CAAb,CADC,CACoD;AACxD;AACJ;;AACD,eAAKlrD,QAAL;AACA,eAAKS,QAAL,CAAc;AACVrX,gBAAI,EAAE,eADI;AAEVuyD,oBAAQ,EAAEA,QAFA;AAGVe,sBAAU,EAAEA;AAHF,WAAd;AAKH,SAjBD,CAhbsC,CAkctC;AACA;AACA;;;AACAiK,gBAAQ,CAACrmE,SAAT,CAAmBuoE,MAAnB,GAA4B,UAAUnM,UAAV,EAAsBf,QAAtB,EAAgC;AACxD,cAAIwP,IAAJ;AACAxP,kBAAQ,GAAGA,QAAQ,IAAI,KAAvB,CAFwD,CAE1B;;AAC9BwP,cAAI,GAAG,KAAK7J,SAAL,CAAe3F,QAAf,KACH,KAAKyP,eAAL,CAAqBzP,QAArB,CADJ;AAEA,eAAK37C,QAAL;;AACA,cAAImrD,IAAJ,EAAU;AACN,iBAAK1qD,QAAL,CAAc;AACVrX,kBAAI,EAAE,eADI;AAEVuyD,sBAAQ,EAAEwP,IAAI,CAAC/hE,IAFL;AAGVszD,wBAAU,EAAEA;AAHF,aAAd;AAKH,WAND,MAOK;AACD,iBAAKj8C,QAAL,CAAc;AACVrX,kBAAI,EAAE,UADI;AAEVszD,wBAAU,EAAEA;AAFF,aAAd;AAIH;AACJ,SAnBD,CArcsC,CAydtC;AACA;;;AACAiK,gBAAQ,CAACrmE,SAAT,CAAmB8qE,eAAnB,GAAqC,UAAUppC,IAAV,EAAgB;AACjD,cAAI/6B,SAAS,GAAG,KAAKA,SAArB;AACA,cAAIokE,SAAS,GAAG,EAAhB;AACA,cAAI5jE,CAAJ;AACA,cAAI0jE,IAAJ,CAJiD,CAKjD;;AACA,cAAIlkE,SAAS,CAACmjB,MAAd,EAAsB;AAClBihD,qBAAS,CAACtoE,IAAV,CAAe6D,KAAf,CAAqBykE,SAArB,EAAgCpkE,SAAS,CAACmjB,MAAV,CAAiB+2C,gBAAjD;AACH;;AACD,cAAIl6D,SAAS,CAACojB,MAAd,EAAsB;AAClBghD,qBAAS,CAACtoE,IAAV,CAAe6D,KAAf,CAAqBykE,SAArB,EAAgCpkE,SAAS,CAACojB,MAAV,CAAiB82C,gBAAjD;AACH;;AACD,eAAK,IAAIxF,QAAT,IAAqB,KAAK2F,SAA1B,EAAqC;AACjC+J,qBAAS,CAACtoE,IAAV,CAAe44D,QAAf;AACH;;AACD,eAAKl0D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4jE,SAAS,CAACtqE,MAA1B,EAAkC0G,CAAC,EAAnC,EAAuC;AACnC0jE,gBAAI,GAAG,KAAK7J,SAAL,CAAe+J,SAAS,CAAC5jE,CAAD,CAAxB,CAAP;;AACA,gBAAI0jE,IAAJ,EAAU;AACN,kBAAIA,IAAI,CAAC3L,UAAL,KAAoBx9B,IAAxB,EAA8B;AAC1B,uBAAOmpC,IAAP;AACH;AACJ;AACJ;AACJ,SAvBD,CA3dsC,CAmftC;AACA;;;AACAxE,gBAAQ,CAACrmE,SAAT,CAAmB+oE,cAAnB,GAAoC,YAAY;AAC5C,cAAIiC,gBAAgB,GAAG,KAAKzjD,GAAL,CAAS,aAAT,CAAvB,CAD4C,CAE5C;;AACA,cAAIyjD,gBAAgB,IAAI,IAAxB,EAA8B;AAC1B,mBAAO,KAAKxkE,OAAL,CAAaqmC,YAAb,CAA0Bm+B,gBAA1B,CAAP;AACH,WAFD,MAGK;AACD,mBAAO,KAAKvkB,MAAL,EAAP,CADC,CACqB;AACzB;AACJ,SATD;;AAUA4f,gBAAQ,CAACrmE,SAAT,CAAmB4xD,IAAnB,GAA0B,YAAY;AAClC,eAAKlyC,QAAL;AACA,eAAKS,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAHD;;AAIAu9D,gBAAQ,CAACrmE,SAAT,CAAmB6xD,IAAnB,GAA0B,YAAY;AAClC,eAAKnyC,QAAL;AACA,eAAKS,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAHD;;AAIAu9D,gBAAQ,CAACrmE,SAAT,CAAmB8xD,QAAnB,GAA8B,YAAY;AACtC,eAAKpyC,QAAL;AACA,eAAKS,QAAL,CAAc;AACVrX,gBAAI,EAAE,UADI;AAEVszD,sBAAU,EAAE,KAAK51D,OAAL,CAAaqvD,QAAb,CAAsB,KAAKl0C,KAAL,CAAWo3C,WAAjC,EAA8C,CAAC,CAA/C;AAFF,WAAd;AAIH,SAND;;AAOAsN,gBAAQ,CAACrmE,SAAT,CAAmB+xD,QAAnB,GAA8B,YAAY;AACtC,eAAKryC,QAAL;AACA,eAAKS,QAAL,CAAc;AACVrX,gBAAI,EAAE,UADI;AAEVszD,sBAAU,EAAE,KAAK51D,OAAL,CAAaqvD,QAAb,CAAsB,KAAKl0C,KAAL,CAAWo3C,WAAjC,EAA8C,CAA9C;AAFF,WAAd;AAIH,SAND;;AAOAsN,gBAAQ,CAACrmE,SAAT,CAAmB6yD,KAAnB,GAA2B,YAAY;AACnC,eAAKnzC,QAAL;AACA,eAAKS,QAAL,CAAc;AACVrX,gBAAI,EAAE,UADI;AAEVszD,sBAAU,EAAE,KAAK3V,MAAL;AAFF,WAAd;AAIH,SAND;;AAOA4f,gBAAQ,CAACrmE,SAAT,CAAmBirE,QAAnB,GAA8B,UAAUC,cAAV,EAA0B;AACpD,eAAKxrD,QAAL;AACA,eAAKS,QAAL,CAAc;AACVrX,gBAAI,EAAE,UADI;AAEVszD,sBAAU,EAAE,KAAK51D,OAAL,CAAaqmC,YAAb,CAA0Bq+B,cAA1B;AAFF,WAAd;AAIH,SAND;;AAOA7E,gBAAQ,CAACrmE,SAAT,CAAmBmrE,aAAnB,GAAmC,UAAUx0B,UAAV,EAAsB;AACrD,cAAIhzB,KAAK,GAAG8d,cAAc,CAACkV,UAAD,CAA1B;;AACA,cAAIhzB,KAAJ,EAAW;AAAE;AACT,iBAAKjE,QAAL;AACA,iBAAKS,QAAL,CAAc;AACVrX,kBAAI,EAAE,UADI;AAEVszD,wBAAU,EAAE,KAAK51D,OAAL,CAAa1B,GAAb,CAAiB,KAAK6c,KAAL,CAAWo3C,WAA5B,EAAyCp1C,KAAzC;AAFF,aAAd;AAIH;AACJ,SATD,CAniBsC,CA6iBtC;;;AACA0iD,gBAAQ,CAACrmE,SAAT,CAAmBuJ,OAAnB,GAA6B,YAAY;AACrC,iBAAO,KAAK/C,OAAL,CAAa6wC,MAAb,CAAoB,KAAK11B,KAAL,CAAWo3C,WAA/B,CAAP;AACH,SAFD,CA9iBsC,CAijBtC;AACA;;;AACAsN,gBAAQ,CAACrmE,SAAT,CAAmBorE,UAAnB,GAAgC,UAAU/rE,CAAV,EAAa23C,SAAb,EAAwB;AACpD,cAAIxwC,OAAO,GAAG,KAAKA,OAAnB;AACA,iBAAOA,OAAO,CAACyB,MAAR,CAAezB,OAAO,CAACqmC,YAAR,CAAqBxtC,CAArB,CAAf,EAAwCw0C,eAAe,CAACmD,SAAD,CAAvD,CAAP;AACH,SAHD,CAnjBsC,CAujBtC;;;AACAqvB,gBAAQ,CAACrmE,SAAT,CAAmBgwC,WAAnB,GAAiC,UAAU3N,EAAV,EAAcC,EAAd,EAAkBxjB,QAAlB,EAA4B;AACzD,cAAItY,OAAO,GAAG,KAAKA,OAAnB;AACA,iBAAOA,OAAO,CAACwpC,WAAR,CAAoBxpC,OAAO,CAACqmC,YAAR,CAAqBxK,EAArB,CAApB,EAA8C77B,OAAO,CAACqmC,YAAR,CAAqBvK,EAArB,CAA9C,EAAwEuR,eAAe,CAAC/0B,QAAD,EAAW,KAAKyI,GAAL,CAAS,uBAAT,CAAX,CAAvF,EAAsIzI,QAAtI,CAAP;AACH,SAHD;;AAIAunD,gBAAQ,CAACrmE,SAAT,CAAmB+H,SAAnB,GAA+B,UAAU1I,CAAV,EAAa2I,QAAb,EAAuB;AAClD,cAAIxB,OAAO,GAAG,KAAKA,OAAnB;AACA,iBAAOA,OAAO,CAACuB,SAAR,CAAkBvB,OAAO,CAACqmC,YAAR,CAAqBxtC,CAArB,CAAlB,EAA2C;AAAE2I,oBAAQ,EAAEA;AAAZ,WAA3C,CAAP;AACH,SAHD,CA5jBsC,CAgkBtC;AACA;;;AACAq+D,gBAAQ,CAACrmE,SAAT,CAAmBsqB,YAAnB,GAAkC,UAAU7a,EAAV,EAAc;AAC5C,cAAI,CAAC,KAAK47D,sBAAN,IACA,KAAK1kE,SADL,IACkB;AAClB8I,YAAE,CAACkB,MAAH,KAAcG,MAFlB,CAEyB;AAFzB,YAGE;AACE,mBAAKu6D,sBAAL,GAA8B,IAA9B;AACA,mBAAK9lE,UAAL;AACA,mBAAK4c,eAAL,CAAqB,cAArB,EAAqC,CAAC,KAAKnD,IAAN,CAArC;AACA,mBAAKqsD,sBAAL,GAA8B,KAA9B;AACH;AACJ,SAVD;;AAWAhF,gBAAQ,CAACrmE,SAAT,CAAmBuF,UAAnB,GAAgC,YAAY;AACxC,cAAI,KAAKoB,SAAT,EAAoB;AAAE;AAClB,iBAAKA,SAAL,CAAepB,UAAf,CAA0B,IAA1B;AACH;AACJ,SAJD,CA7kBsC,CAklBtC;AACA;;;AACA8gE,gBAAQ,CAACrmE,SAAT,CAAmBkE,4BAAnB,GAAkD,UAAUyC,SAAV,EAAqB2kE,aAArB,EAAoC;AAClF,cAAIxsD,QAAQ,GAAG2lD,wBAAwB,CAAC99D,SAAD,EAAY2kE,aAAZ,CAAvC;AACA,cAAIC,oBAAoB,GAAG,CACvB3G,aADuB,EAEvBM,aAFuB,CAA3B;AAIA,cAAIsG,kBAAkB,GAAGD,oBAAoB,CAAC3pE,MAArB,CAA4B,KAAKme,YAAL,CAAkBC,KAAlB,CAAwBkJ,qBAApD,CAAzB;AACA,cAAIuiD,YAAY,GAAGD,kBAAkB,CAAC9xD,GAAnB,CAAuB,UAAUgyD,gBAAV,EAA4B;AAClE,mBAAO,IAAIA,gBAAJ,CAAqB5sD,QAArB,CAAP;AACH,WAFkB,CAAnB;AAGA,eAAKioD,iBAAL,CAAuBpgE,SAAS,CAAC85C,GAAjC,IAAwCgrB,YAAxC;AACA9G,kCAAwB,CAACh+D,SAAS,CAAC85C,GAAX,CAAxB,GAA0C3hC,QAA1C;AACH,SAZD;;AAaAunD,gBAAQ,CAACrmE,SAAT,CAAmB4E,8BAAnB,GAAoD,UAAU+B,SAAV,EAAqB;AACrE,eAAK,IAAI1B,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKgmE,iBAAL,CAAuBpgE,SAAS,CAAC85C,GAAjC,CAAtB,EAA6Dx7C,EAAE,GAAGlE,EAAE,CAACN,MAArE,EAA6EwE,EAAE,EAA/E,EAAmF;AAC/E,gBAAI0mE,QAAQ,GAAG5qE,EAAE,CAACkE,EAAD,CAAjB;AACA0mE,oBAAQ,CAAChnE,OAAT;AACH;;AACD,iBAAO,KAAKoiE,iBAAL,CAAuBpgE,SAAS,CAAC85C,GAAjC,CAAP;AACA,iBAAOkkB,wBAAwB,CAACh+D,SAAS,CAAC85C,GAAX,CAA/B;AACH,SAPD,CAjmBsC,CAymBtC;AACA;AACA;AACA;;;AACA4lB,gBAAQ,CAACrmE,SAAT,CAAmB0qB,MAAnB,GAA4B,UAAUkhD,SAAV,EAAqBzgE,OAArB,EAA8B;AACtD,cAAI0gE,cAAJ;;AACA,cAAI1gE,OAAO,IAAI,IAAf,EAAqB;AACjB,gBAAIygE,SAAS,CAACvpE,KAAV,IAAmB,IAAvB,EAA6B;AACzBwpE,4BAAc,GAAGD,SAAjB;AACH,aAFD,MAGK;AACDC,4BAAc,GAAG;AACbxpE,qBAAK,EAAEupE,SADM;AAEbtpE,mBAAG,EAAE;AAFQ,eAAjB;AAIH;AACJ,WAVD,MAWK;AACDupE,0BAAc,GAAG;AACbxpE,mBAAK,EAAEupE,SADM;AAEbtpE,iBAAG,EAAE6I;AAFQ,aAAjB;AAIH;;AACD,cAAIiV,SAAS,GAAG28C,aAAa,CAAC8O,cAAD,EAAiB,KAAKrlE,OAAtB,EAA+Bi7B,cAAc,CAAC;AAAEz4B,gBAAI,EAAE;AAAR,WAAD,CAA7C,CAA2D;AAA3D,WAA7B;;AAEA,cAAIoX,SAAJ,EAAe;AAAE;AACb,iBAAKD,QAAL,CAAc;AAAErX,kBAAI,EAAE,cAAR;AAAwBsX,uBAAS,EAAEA;AAAnC,aAAd;AACA,iBAAKC,iBAAL,CAAuBD,SAAvB;AACH;AACJ,SAzBD,CA7mBsC,CAuoBtC;;;AACAimD,gBAAQ,CAACrmE,SAAT,CAAmB0f,QAAnB,GAA8B,UAAU7P,GAAV,EAAe;AACzC,cAAI,KAAK8R,KAAL,CAAW4E,aAAf,EAA8B;AAC1B,iBAAKpG,QAAL,CAAc;AAAErX,kBAAI,EAAE;AAAR,aAAd;AACA,iBAAKgjE,mBAAL,CAAyBj8D,GAAzB;AACH;AACJ,SALD;;AAMAw2D,gBAAQ,CAACrmE,SAAT,CAAmBqgB,iBAAnB,GAAuC,UAAUD,SAAV,EAAqBvQ,GAArB,EAA0B;AAC7D,cAAIuX,GAAG,GAAG/Y,QAAQ,CAAC,EAAD,EAAK,KAAK+vC,gBAAL,CAAsBh+B,SAAtB,CAAL,EAAuC;AAAEgC,mBAAO,EAAEvS,GAAG,GAAGA,GAAG,CAAC6B,SAAP,GAAmB,IAAjC;AAAuCsN,gBAAI,EAAE,KAAKA;AAAlD,WAAvC,CAAlB;;AACA,eAAKmD,eAAL,CAAqB,QAArB,EAA+B,CAACiF,GAAD,CAA/B;AACH,SAHD;;AAIAi/C,gBAAQ,CAACrmE,SAAT,CAAmB8rE,mBAAnB,GAAyC,UAAUj8D,GAAV,EAAe;AACpD,eAAKsS,eAAL,CAAqB,UAArB,EAAiC,CAC7B;AACIC,mBAAO,EAAEvS,GAAG,GAAGA,GAAG,CAAC6B,SAAP,GAAmB,IADnC;AAEIsN,gBAAI,EAAE,KAAKA;AAFf,WAD6B,CAAjC;AAMH,SAPD,CAlpBsC,CA0pBtC;;;AACAqnD,gBAAQ,CAACrmE,SAAT,CAAmBmf,gBAAnB,GAAsC,UAAUX,QAAV,EAAoBY,KAApB,EAA2BJ,IAA3B,EAAiCvP,EAAjC,EAAqC;AACvE,cAAI2X,GAAG,GAAG/Y,QAAQ,CAAC,EAAD,EAAK,KAAK+V,iBAAL,CAAuB5F,QAAvB,CAAL,EAAuC;AAAEY,iBAAK,EAAEA,KAAT;AAAgBgD,mBAAO,EAAE3S,EAAzB;AAA6B;AAClFuP,gBAAI,EAAEA;AAD+C,WAAvC,CAAlB;;AAEA,eAAKmD,eAAL,CAAqB,WAArB,EAAkC,CAACiF,GAAD,CAAlC;AACH,SAJD;;AAKAi/C,gBAAQ,CAACrmE,SAAT,CAAmBokB,iBAAnB,GAAuC,UAAU5F,QAAV,EAAoB;AACvD,cAAIna,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIY,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKgf,YAAL,CAAkBC,KAAlB,CAAwB6sC,mBAA9C,EAAmE5nD,EAAE,GAAGlE,EAAE,CAACN,MAA3E,EAAmFwE,EAAE,EAArF,EAAyF;AACrF,gBAAI+gB,SAAS,GAAGjlB,EAAE,CAACkE,EAAD,CAAlB;;AACAoJ,oBAAQ,CAAChK,KAAD,EAAQ2hB,SAAS,CAACxH,QAAD,EAAW,IAAX,CAAjB,CAAR;AACH;;AACDnQ,kBAAQ,CAAChK,KAAD,EAAQ+f,iBAAiB,CAAC5F,QAAD,EAAW,KAAKhY,OAAhB,CAAzB,CAAR;;AACA,iBAAOnC,KAAP;AACH,SARD;;AASAgiE,gBAAQ,CAACrmE,SAAT,CAAmBo+C,gBAAnB,GAAsC,UAAU5/B,QAAV,EAAoB;AACtD,cAAIna,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIY,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKgf,YAAL,CAAkBC,KAAlB,CAAwB8sC,kBAA9C,EAAkE7nD,EAAE,GAAGlE,EAAE,CAACN,MAA1E,EAAkFwE,EAAE,EAApF,EAAwF;AACpF,gBAAI+gB,SAAS,GAAGjlB,EAAE,CAACkE,EAAD,CAAlB;;AACAoJ,oBAAQ,CAAChK,KAAD,EAAQ2hB,SAAS,CAACxH,QAAD,EAAW,IAAX,CAAjB,CAAR;AACH;;AACDnQ,kBAAQ,CAAChK,KAAD,EAAQ+5C,gBAAgB,CAAC5/B,QAAD,EAAW,KAAKhY,OAAhB,CAAxB,CAAR;;AACA,iBAAOnC,KAAP;AACH,SARD,CAzqBsC,CAkrBtC;AACA;AACA;;;AACAgiE,gBAAQ,CAACrmE,SAAT,CAAmBymD,MAAnB,GAA4B,YAAY;AACpC,cAAIxvC,GAAG,GAAG,KAAKsQ,GAAL,CAAS,KAAT,CAAV;;AACA,cAAI,OAAOtQ,GAAP,KAAe,UAAnB,EAA+B;AAC3BA,eAAG,GAAGA,GAAG,EAAT;AACH;;AACD,cAAIA,GAAG,IAAI,IAAX,EAAiB;AACb,mBAAO,KAAKzQ,OAAL,CAAakvD,eAAb,EAAP;AACH;;AACD,iBAAO,KAAKlvD,OAAL,CAAaqmC,YAAb,CAA0B51B,GAA1B,CAAP;AACH,SATD,CArrBsC,CA+rBtC;AACA;AACA;AACA;;;AACAovD,gBAAQ,CAACrmE,SAAT,CAAmB6nB,kBAAnB,GAAwC,UAAU5lB,MAAV,EAAkB89B,MAAlB,EAA0B;AAC9D,cAAIz9B,GAAG,GAAGy9B,MAAV;;AACA,cAAI99B,MAAJ,EAAY;AACRK,eAAG,GAAGw8B,UAAU,CAACx8B,GAAD,CAAhB;AACAA,eAAG,GAAG,KAAKkE,OAAL,CAAa1B,GAAb,CAAiBxC,GAAjB,EAAsB,KAAKkuB,0BAA3B,CAAN;AACH,WAHD,MAIK;AACDluB,eAAG,GAAG,KAAKkE,OAAL,CAAa1B,GAAb,CAAiBxC,GAAjB,EAAsB,KAAKmuB,yBAA3B,CAAN;AACH;;AACD,iBAAOnuB,GAAP;AACH,SAVD,CAnsBsC,CA8sBtC;AACA;;;AACA+jE,gBAAQ,CAACrmE,SAAT,CAAmBu7C,QAAnB,GAA8B,UAAUzS,UAAV,EAAsBijC,WAAtB,EAAmC;AAC7D,cAAIjjC,UAAU,YAAYwM,QAA1B,EAAoC;AAChC,gBAAIj0C,GAAG,GAAGynC,UAAU,CAAC0M,IAArB;AACA,gBAAIj0C,QAAQ,GAAGunC,UAAU,CAAC2M,SAA1B,CAFgC,CAGhC;;AACA,gBAAI,CAAC,KAAK9zB,KAAL,CAAWld,UAAX,CAAsBqf,IAAtB,CAA2BziB,GAAG,CAAC0iB,KAA/B,CAAL,EAA4C;AACxC,mBAAK5D,QAAL,CAAc;AACVrX,oBAAI,EAAE,YADI;AAEVrE,0BAAU,EAAE0mC,iBAAiB,CAAC;AAAE9pC,qBAAG,EAAEA,GAAP;AAAYE,0BAAQ,EAAEA;AAAtB,iBAAD,CAFnB,CAEsD;;AAFtD,eAAd;AAIH;;AACD,mBAAOunC,UAAP;AACH;;AACD,cAAInhB,QAAJ;;AACA,cAAIokD,WAAW,YAAYn3B,cAA3B,EAA2C;AACvCjtB,oBAAQ,GAAGokD,WAAW,CAACl3B,mBAAZ,CAAgCltB,QAA3C;AACH,WAFD,MAGK,IAAIokD,WAAW,IAAI,IAAnB,EAAyB;AAC1B,gBAAIC,SAAS,GAAG,KAAKC,kBAAL,CAAwBF,WAAxB,CAAhB,CAD0B,CAC4B;;AACtD,gBAAI,CAACC,SAAL,EAAgB;AACZvZ,qBAAO,CAACC,IAAR,CAAa,6CAA6CqZ,WAA7C,GAA2D,GAAxE,EADY,CACkE;;AAC9E,qBAAO,IAAP;AACH,aAHD,MAIK;AACDpkD,sBAAQ,GAAGqkD,SAAS,CAACn3B,mBAAV,CAA8BltB,QAAzC;AACH;AACJ;;AACD,cAAIsjB,KAAK,GAAGC,UAAU,CAACpC,UAAD,EAAanhB,QAAb,EAAuB,IAAvB,CAAtB;;AACA,cAAIsjB,KAAJ,EAAW;AACP,iBAAK9qB,QAAL,CAAc;AACVrX,kBAAI,EAAE,YADI;AAEVrE,wBAAU,EAAE0mC,iBAAiB,CAACF,KAAD;AAFnB,aAAd;AAIA,mBAAO,IAAIqK,QAAJ,CAAa,IAAb,EAAmBrK,KAAK,CAAC5pC,GAAzB,EAA8B4pC,KAAK,CAAC5pC,GAAN,CAAUooC,YAAV,GAAyB,IAAzB,GAAgCwB,KAAK,CAAC1pC,QAApE,CAAP;AACH;;AACD,iBAAO,IAAP;AACH,SApCD,CAhtBsC,CAqvBtC;;;AACA8kE,gBAAQ,CAACrmE,SAAT,CAAmBksE,YAAnB,GAAkC,UAAUphE,EAAV,EAAc;AAC5C,cAAI/J,EAAE,GAAG,KAAK4gB,KAAL,CAAWld,UAApB;AAAA,cAAgCqf,IAAI,GAAG/iB,EAAE,CAAC+iB,IAA1C;AAAA,cAAgDE,SAAS,GAAGjjB,EAAE,CAACijB,SAA/D;AACAlZ,YAAE,GAAGupB,MAAM,CAACvpB,EAAD,CAAX;;AACA,eAAK,IAAIiZ,KAAT,IAAkBD,IAAlB,EAAwB;AACpB,gBAAIziB,GAAG,GAAGyiB,IAAI,CAACC,KAAD,CAAd;;AACA,gBAAI1iB,GAAG,CAAC6zC,QAAJ,KAAiBpqC,EAArB,EAAyB;AACrB,kBAAIzJ,GAAG,CAACooC,YAAR,EAAsB;AAClB,uBAAO,IAAI6L,QAAJ,CAAa,IAAb,EAAmBj0C,GAAnB,EAAwB,IAAxB,CAAP;AACH,eAFD,MAGK;AACD,qBAAK,IAAIqgB,UAAT,IAAuBsC,SAAvB,EAAkC;AAC9B,sBAAIziB,QAAQ,GAAGyiB,SAAS,CAACtC,UAAD,CAAxB;;AACA,sBAAIngB,QAAQ,CAACwiB,KAAT,KAAmB1iB,GAAG,CAAC0iB,KAA3B,EAAkC;AAC9B,2BAAO,IAAIuxB,QAAJ,CAAa,IAAb,EAAmBj0C,GAAnB,EAAwBE,QAAxB,CAAP;AACH;AACJ;AACJ;AACJ;AACJ;;AACD,iBAAO,IAAP;AACH,SApBD;;AAqBA8kE,gBAAQ,CAACrmE,SAAT,CAAmBmsE,SAAnB,GAA+B,YAAY;AACvC,cAAIprE,EAAE,GAAG,KAAK4gB,KAAL,CAAWld,UAApB;AAAA,cAAgCqf,IAAI,GAAG/iB,EAAE,CAAC+iB,IAA1C;AAAA,cAAgDE,SAAS,GAAGjjB,EAAE,CAACijB,SAA/D;AACA,cAAIooD,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIthE,EAAT,IAAekZ,SAAf,EAA0B;AACtB,gBAAIziB,QAAQ,GAAGyiB,SAAS,CAAClZ,EAAD,CAAxB;AACA,gBAAIzJ,GAAG,GAAGyiB,IAAI,CAACviB,QAAQ,CAACwiB,KAAV,CAAd;AACAqoD,qBAAS,CAAC3pE,IAAV,CAAe,IAAI6yC,QAAJ,CAAa,IAAb,EAAmBj0C,GAAnB,EAAwBE,QAAxB,CAAf;AACH;;AACD,iBAAO6qE,SAAP;AACH,SATD;;AAUA/F,gBAAQ,CAACrmE,SAAT,CAAmBqsE,eAAnB,GAAqC,YAAY;AAC7C,eAAKlsD,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAFD;;AAGAu9D,gBAAQ,CAACrmE,SAAT,CAAmBssE,cAAnB,GAAoC,YAAY;AAC5C,eAAKnsD,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAFD,CAxxBsC,CA2xBtC;AACA;;;AACAu9D,gBAAQ,CAACrmE,SAAT,CAAmBusE,eAAnB,GAAqC,YAAY;AAC7C,cAAIxU,UAAU,GAAG,KAAKp2C,KAAL,CAAWqI,YAA5B;AACA,cAAIwiD,UAAU,GAAG,EAAjB;;AACA,eAAK,IAAIC,UAAT,IAAuB1U,UAAvB,EAAmC;AAC/ByU,sBAAU,CAAC/pE,IAAX,CAAgB,IAAImyC,cAAJ,CAAmB,IAAnB,EAAyBmjB,UAAU,CAAC0U,UAAD,CAAnC,CAAhB;AACH;;AACD,iBAAOD,UAAP;AACH,SAPD;;AAQAnG,gBAAQ,CAACrmE,SAAT,CAAmBisE,kBAAnB,GAAwC,UAAUnhE,EAAV,EAAc;AAClD,cAAIitD,UAAU,GAAG,KAAKp2C,KAAL,CAAWqI,YAA5B;AACAlf,YAAE,GAAGupB,MAAM,CAACvpB,EAAD,CAAX;;AACA,eAAK,IAAI6c,QAAT,IAAqBowC,UAArB,EAAiC;AAC7B,gBAAIA,UAAU,CAACpwC,QAAD,CAAV,CAAqButB,QAArB,KAAkCpqC,EAAtC,EAA0C;AACtC,qBAAO,IAAI8pC,cAAJ,CAAmB,IAAnB,EAAyBmjB,UAAU,CAACpwC,QAAD,CAAnC,CAAP;AACH;AACJ;;AACD,iBAAO,IAAP;AACH,SATD;;AAUA0+C,gBAAQ,CAACrmE,SAAT,CAAmBsxD,cAAnB,GAAoC,UAAUya,WAAV,EAAuB;AACvD,cAAIA,WAAW,YAAYn3B,cAA3B,EAA2C;AACvC;AACA,gBAAI,CAAC,KAAKjzB,KAAL,CAAWqI,YAAX,CAAwB+hD,WAAW,CAACl3B,mBAAZ,CAAgCltB,QAAxD,CAAL,EAAwE;AACpE,mBAAKxH,QAAL,CAAc;AACVrX,oBAAI,EAAE,mBADI;AAEVwuD,uBAAO,EAAE,CAACyU,WAAW,CAACl3B,mBAAb;AAFC,eAAd;AAIH;;AACD,mBAAOk3B,WAAP;AACH;;AACD,cAAI9/B,WAAW,GAAGgrB,gBAAgB,CAAC8U,WAAD,EAAc,IAAd,CAAlC;;AACA,cAAI9/B,WAAJ,EAAiB;AAAE;AACf,iBAAK9rB,QAAL,CAAc;AAAErX,kBAAI,EAAE,mBAAR;AAA6BwuD,qBAAO,EAAE,CAACrrB,WAAD;AAAtC,aAAd;AACA,mBAAO,IAAI2I,cAAJ,CAAmB,IAAnB,EAAyB3I,WAAzB,CAAP;AACH;;AACD,iBAAO,IAAP;AACH,SAjBD;;AAkBAo6B,gBAAQ,CAACrmE,SAAT,CAAmB0sE,qBAAnB,GAA2C,YAAY;AACnD,eAAKvsD,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAFD;;AAGAu9D,gBAAQ,CAACrmE,SAAT,CAAmB2sE,aAAnB,GAAmC,YAAY;AAC3C,eAAKxsD,QAAL,CAAc;AAAErX,gBAAI,EAAE;AAAR,WAAd;AACH,SAFD,CAp0BsC,CAu0BtC;AACA;;;AACAu9D,gBAAQ,CAACrmE,SAAT,CAAmB4sE,YAAnB,GAAkC,UAAUC,SAAV,EAAqB;AACnD,cAAI9jE,QAAQ,GAAG04B,cAAc,CAACorC,SAAD,CAA7B;;AACA,cAAI9jE,QAAJ,EAAc;AACV,iBAAKpC,SAAL,CAAeqY,IAAf,CAAoB8tD,gBAApB,CAAqC/jE,QAArC;AACH;AACJ,SALD;;AAMA,eAAOs9D,QAAP;AACH,OAh1B6B,EAA9B;;AAi1BA7e,kBAAY,CAACN,OAAb,CAAqBmf,QAArB,E,CACA;AACA;;AACA,eAASC,uBAAT,CAAiCrlE,KAAjC,EAAwCuF,OAAxC,EAAiDtF,OAAjD,EAA0D;AACtD,eAAO,IAAI+pD,gBAAJ,CAAqB,IAArB,EAA2BhqD,KAA3B,EAAkCuF,OAAlC,EAA2CtF,OAA3C,EAAoD,IAApD,CAAP;AACH;;AACD,eAASqlE,YAAT,CAAsB52C,MAAtB,EAA8BpB,QAA9B,EAAwC+mC,iBAAxC,EAA2D/nC,QAA3D,EAAqEO,qBAArE,EAA4FoC,SAA5F,EAAuGQ,YAAvG,EAAqH;AACjH,eAAO,IAAI0kC,OAAJ,CAAY;AACfjlB,wBAAc,EAAE,SADD;AAEf5hB,kBAAQ,EAAEA,QAFK;AAGf+mC,2BAAiB,EAAEA,iBAHJ;AAIf3lC,gBAAM,EAAEA,MAJO;AAKf7B,+BAAqB,EAAEA,qBALR;AAMfP,kBAAQ,EAAEA,QANK;AAOf2C,mBAAS,EAAEA,SAPI;AAQfQ,sBAAY,EAAEA;AARC,SAAZ,CAAP;AAUH;;AACD,eAAS81C,UAAT,CAAoBvc,eAApB,EAAqC;AACjC,YAAI8iB,UAAU,GAAG,KAAKhtD,YAAL,CAAkBC,KAAlB,CAAwBitC,YAAxB,CAAqChD,eAAe,CAAC58B,WAArD,KAAqEq4C,aAAtF;AACA,eAAO,IAAIqH,UAAJ,CAAe9iB,eAAf,CAAP;AACH;;AACD,eAASod,oBAAT,CAA8B//B,IAA9B,EAAoC;AAChC,YAAI7d,IAAI,GAAG,KAAK2/C,WAAL,CAAiBtlE,IAAjB,CAAsB,IAAtB,CAAX;;AACA,YAAIwjC,IAAI,IAAI,IAAZ,EAAkB;AACd7d,cAAI,GAAG4d,QAAQ,CAAC5d,IAAD,EAAO6d,IAAP,CAAf;AACH;;AACD,eAAO7d,IAAP;AACH;;AACD,eAASo9C,oBAAT,CAA8B78C,YAA9B,EAA4C;AACxC,eAAOR,OAAO,CAACQ,YAAD,EAAe,UAAUiiB,WAAV,EAAuB;AAChD,iBAAOA,WAAW,CAACxqC,EAAnB;AACH,SAFa,CAAd;AAGH;;AACD,eAASqlE,iBAAT,CAA2B3tB,SAA3B,EAAsCmwB,iBAAtC,EAAyDC,eAAzD,EAA0E;AACtE,YAAI7kE,YAAY,GAAG;AAAE,cAAI4kE;AAAN,SAAnB;;AACA,aAAK,IAAIvlD,KAAT,IAAkBo1B,SAAlB,EAA6B;AACzB,cAAI93C,GAAG,GAAG83C,SAAS,CAACp1B,KAAD,CAAnB;;AACA,cAAI1iB,GAAG,CAACsmB,QAAJ,IAAgB4hD,eAAe,CAACloE,GAAG,CAACsmB,QAAL,CAAnC,EAAmD;AAC/CjjB,wBAAY,CAACqf,KAAD,CAAZ,GAAsBwlD,eAAe,CAACloE,GAAG,CAACsmB,QAAL,CAArC;AACH;AACJ;;AACD,eAAOjjB,YAAP;AACH;;AAED,UAAIsoE,IAAI;AAAG;AAAe,gBAAU7sE,MAAV,EAAkB;AACxCN,iBAAS,CAACmtE,IAAD,EAAO7sE,MAAP,CAAT;;AACA,iBAAS6sE,IAAT,CAAc7pE,QAAd,EAAwBC,QAAxB,EAAkC;AAC9B,cAAI/C,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBq1B,aAAa,CAAC,KAAD,EAAQ;AAAE7tB,qBAAS,EAAE,gBAAgB3E,QAAQ,CAAC2F,IAAzB,GAAgC;AAA7C,WAAR,CAA/B,KAAmG,IAA/G;;AACAzI,eAAK,CAAC4sE,cAAN,GAAuB3qB,gBAAgB,CAACjiD,KAAK,CAAC6sE,eAAP,EAAwB7sE,KAAK,CAAC8sE,iBAA9B,CAAvC;AACA9sE,eAAK,CAAC+sE,sBAAN,GAA+B9qB,gBAAgB,CAACjiD,KAAK,CAACgtE,mBAAP,EAA4BhtE,KAAK,CAACitE,qBAAlC,EAAyD,CAACjtE,KAAK,CAAC4sE,cAAP,CAAzD,CAA/C;AACA5sE,eAAK,CAACktE,sBAAN,GAA+BjrB,gBAAgB,CAACjiD,KAAK,CAACmtE,uBAAP,EAAgCntE,KAAK,CAACotE,yBAAtC,EAAiE,CAACptE,KAAK,CAAC4sE,cAAP,CAAjE,CAA/C;AACA5sE,eAAK,CAACqtE,eAAN,GAAwBprB,gBAAgB,CAACjiD,KAAK,CAACstE,YAAP,EAAqBttE,KAAK,CAACutE,cAA3B,EAA2C,CAACvtE,KAAK,CAAC4sE,cAAP,CAA3C,CAAxC;AACA5sE,eAAK,CAACwtE,uBAAN,GAAgCvrB,gBAAgB,CAACjiD,KAAK,CAACytE,wBAAP,EAAiCztE,KAAK,CAAC0tE,0BAAvC,EAAmE,CAAC1tE,KAAK,CAACqtE,eAAP,CAAnE,CAAhD;AACArtE,eAAK,CAAC2tE,kBAAN,GAA2B1rB,gBAAgB,CAACjiD,KAAK,CAAC4tE,mBAAP,EAA4B5tE,KAAK,CAAC6tE,qBAAlC,EAAyD,CAAC7tE,KAAK,CAAC4sE,cAAP,CAAzD,CAA3C;AACA5sE,eAAK,CAAC8tE,oBAAN,GAA6B7rB,gBAAgB,CAACjiD,KAAK,CAAC+tE,qBAAP,EAA8B/tE,KAAK,CAACguE,uBAApC,EAA6D,CAAChuE,KAAK,CAAC4sE,cAAP,CAA7D,CAA7C;AACA5sE,eAAK,CAAC8C,QAAN,GAAiBA,QAAjB;AACA9C,eAAK,CAACyI,IAAN,GAAa3F,QAAQ,CAAC2F,IAAtB;AACA1F,kBAAQ,CAACiC,WAAT,CAAqBhF,KAAK,CAAC8D,EAA3B;;AACA9D,eAAK,CAACiuE,UAAN;;AACA,iBAAOjuE,KAAP;AACH;;AACD2sE,YAAI,CAAChtE,SAAL,CAAesuE,UAAf,GAA4B,YAAY,CACvC,CADD;;AAEA/uE,cAAM,CAACy1C,cAAP,CAAsBg4B,IAAI,CAAChtE,SAA3B,EAAsC,aAAtC,EAAqD;AACjD;AACA;AACAi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKj0C,OAAL,CAAawF,OAAb,CAAqB6wC,MAArB,CAA4B,KAAKhzC,KAAL,CAAWC,WAAX,CAAuB2B,WAAvB,CAAmC5D,KAA/D,CAAP;AACH,WALgD;AAMjD8yC,oBAAU,EAAE,IANqC;AAOjDC,sBAAY,EAAE;AAPmC,SAArD;AASA71C,cAAM,CAACy1C,cAAP,CAAsBg4B,IAAI,CAAChtE,SAA3B,EAAsC,WAAtC,EAAmD;AAC/Ci1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKj0C,OAAL,CAAawF,OAAb,CAAqB6wC,MAArB,CAA4B,KAAKhzC,KAAL,CAAWC,WAAX,CAAuB2B,WAAvB,CAAmC3D,GAA/D,CAAP;AACH,WAH8C;AAI/C6yC,oBAAU,EAAE,IAJmC;AAK/CC,sBAAY,EAAE;AALiC,SAAnD;AAOA71C,cAAM,CAACy1C,cAAP,CAAsBg4B,IAAI,CAAChtE,SAA3B,EAAsC,cAAtC,EAAsD;AAClDi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKj0C,OAAL,CAAawF,OAAb,CAAqB6wC,MAArB,CAA4B,KAAKhzC,KAAL,CAAWC,WAAX,CAAuBkiD,YAAvB,CAAoCnkD,KAAhE,CAAP;AACH,WAHiD;AAIlD8yC,oBAAU,EAAE,IAJsC;AAKlDC,sBAAY,EAAE;AALoC,SAAtD;AAOA71C,cAAM,CAACy1C,cAAP,CAAsBg4B,IAAI,CAAChtE,SAA3B,EAAsC,YAAtC,EAAoD;AAChDi1C,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKj0C,OAAL,CAAawF,OAAb,CAAqB6wC,MAArB,CAA4B,KAAKhzC,KAAL,CAAWC,WAAX,CAAuBkiD,YAAvB,CAAoClkD,GAAhE,CAAP;AACH,WAH+C;AAIhD6yC,oBAAU,EAAE,IAJoC;AAKhDC,sBAAY,EAAE;AALkC,SAApD,EA1CwC,CAiDxC;AACA;;AACA43B,YAAI,CAAChtE,SAAL,CAAeoE,MAAf,GAAwB,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AAC9C,eAAKisE,cAAL,CAAoB5oE,KAAK,CAACC,WAA1B;AACA,eAAK8oE,sBAAL,CAA4B/oE,KAAK,CAAC0pB,aAAlC;AACA,eAAKw/C,sBAAL,CAA4BlpE,KAAK,CAACkiB,aAAlC;AACA,eAAKmnD,eAAL,CAAqBrpE,KAAK,CAACI,UAA3B;AACA,eAAKopE,uBAAL,CAA6BxpE,KAAK,CAACwd,cAAnC;AACA,eAAKmsD,kBAAL,CAAwB3pE,KAAK,CAACg4C,SAA9B;AACA,eAAK8xB,oBAAL,CAA0B9pE,KAAK,CAAC6mB,WAAhC;AACH,SARD;;AASA8hD,YAAI,CAAChtE,SAAL,CAAe8rD,YAAf,GAA8B,YAAY;AACtC,eAAK8X,SAAL,CAAe,KAAKT,WAAL,EAAf;AACH,SAFD;;AAGA6J,YAAI,CAAChtE,SAAL,CAAe2E,OAAf,GAAyB,YAAY;AACjCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAK2sE,cAAL,CAAoBlpE,QAApB,GAFiC,CAED;AACnC,SAHD,CA/DwC,CAmExC;AACA;;;AACAipE,YAAI,CAAChtE,SAAL,CAAeuF,UAAf,GAA4B,UAAUC,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC;AAChE,cAAIzB,QAAQ,GAAG,KAAKjD,OAAL,CAAaiD,QAA5B;;AACA,cAAIuB,QAAJ,EAAc;AACV,iBAAKo+D,SAAL,CAAe,KAAKT,WAAL,EAAf,EADU,CAC0B;AACvC;;AACD,cAAI39D,QAAQ,IAAI;AACZvB,kBAAQ,CAACqjE,aADT,IAEArjE,QAAQ,CAACsjE,cAFT,IAGAtjE,QAAQ,CAACujE,eAHb,EAG8B;AAC1B;AACA;AACA,iBAAK+G,cAAL,CAAoB/oE,QAApB,EAA8BC,UAA9B,EAA0CC,MAA1C;AACH,WAZ+D,CAahE;;AACH,SAdD;;AAeAsnE,YAAI,CAAChtE,SAAL,CAAeuuE,cAAf,GAAgC,UAAU/oE,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC,CACvE,CADD,CApFwC,CAsFxC;AACA;;;AACAsnE,YAAI,CAAChtE,SAAL,CAAektE,eAAf,GAAiC,UAAU5oE,WAAV,EAAuB;AACpD,eAAKkqE,WAAL,CAAiBlqE,WAAjB;AACA,eAAKs/D,SAAL,CAAe;AACX76D,oBAAQ,EAAE04B,cAAc,CAAC,KAAKzgC,OAAL,CAAaE,OAAb,CAAqB6tB,UAAtB;AADb,WAAf;AAGH,SALD;;AAMAi+C,YAAI,CAAChtE,SAAL,CAAemtE,iBAAf,GAAmC,YAAY;AAC3C,eAAKsB,gBAAL;AACA,eAAKC,aAAL;AACH,SAHD;;AAIA1B,YAAI,CAAChtE,SAAL,CAAewuE,WAAf,GAA6B,UAAUlqE,WAAV,EAAuB,CAAG,CAAvD;;AACA0oE,YAAI,CAAChtE,SAAL,CAAe0uE,aAAf,GAA+B,YAAY,CAAG,CAA9C,CAnGwC,CAoGxC;AACA;;;AACA1B,YAAI,CAAChtE,SAAL,CAAeqtE,mBAAf,GAAqC,UAAUt/C,aAAV,EAAyB,CAAG,CAAjE;;AACAi/C,YAAI,CAAChtE,SAAL,CAAestE,qBAAf,GAAuC,YAAY,CAAG,CAAtD,CAvGwC,CAwGxC;AACA;;;AACAN,YAAI,CAAChtE,SAAL,CAAewtE,uBAAf,GAAyC,UAAUptD,SAAV,EAAqB;AAC1D,cAAIA,SAAJ,EAAe;AACX,iBAAKuuD,mBAAL,CAAyBvuD,SAAzB;AACH;AACJ,SAJD;;AAKA4sD,YAAI,CAAChtE,SAAL,CAAeytE,yBAAf,GAA2C,UAAUrtD,SAAV,EAAqB;AAC5D,cAAIA,SAAJ,EAAe;AACX,iBAAKwuD,qBAAL,CAA2BxuD,SAA3B;AACH;AACJ,SAJD;;AAKA4sD,YAAI,CAAChtE,SAAL,CAAe2uE,mBAAf,GAAqC,UAAUvuD,SAAV,EAAqB,CAAG,CAA7D;;AACA4sD,YAAI,CAAChtE,SAAL,CAAe4uE,qBAAf,GAAuC,UAAUxuD,SAAV,EAAqB,CAAG,CAA/D,CArHwC,CAsHxC;AACA;;;AACA4sD,YAAI,CAAChtE,SAAL,CAAe2tE,YAAf,GAA8B,UAAUlpE,UAAV,EAAsB,CAAG,CAAvD;;AACAuoE,YAAI,CAAChtE,SAAL,CAAe4tE,cAAf,GAAgC,YAAY,CAAG,CAA/C,CAzHwC,CA0HxC;;;AACAZ,YAAI,CAAChtE,SAAL,CAAe6uE,WAAf,GAA6B,UAAUpqE,UAAV,EAAsBxC,MAAtB,EAA8B;AACvD,cAAIoC,KAAK,GAAG,KAAKA,KAAjB;AACA,iBAAOszC,eAAe,CAAClzC,UAAD,EAAaJ,KAAK,CAACK,YAAnB,EAAiCL,KAAK,CAACC,WAAN,CAAkB2B,WAAnD,EAAgEhE,MAAM,GAAG,KAAKjB,OAAL,CAAakF,gBAAhB,GAAmC,IAAzG,CAAf,CAA8HC,EAArI;AACH,SAHD,CA3HwC,CA+HxC;AACA;;;AACA6mE,YAAI,CAAChtE,SAAL,CAAe8tE,wBAAf,GAA0C,UAAUpsD,UAAV,EAAsB;AAC5D,cAAIA,UAAJ,EAAgB;AACZ,iBAAKotD,oBAAL,CAA0BptD,UAA1B;AACH;AACJ,SAJD;;AAKAsrD,YAAI,CAAChtE,SAAL,CAAe+tE,0BAAf,GAA4C,UAAUrsD,UAAV,EAAsB;AAC9D,cAAIA,UAAJ,EAAgB;AACZ,iBAAKqtD,sBAAL,CAA4BrtD,UAA5B;AACH;AACJ,SAJD;;AAKAsrD,YAAI,CAAChtE,SAAL,CAAe8uE,oBAAf,GAAsC,UAAUptD,UAAV,EAAsB,CAAG,CAA/D;;AACAsrD,YAAI,CAAChtE,SAAL,CAAe+uE,sBAAf,GAAwC,UAAUrtD,UAAV,EAAsB,CAAG,CAAjE,CA5IwC,CA6IxC;AACA;;;AACAsrD,YAAI,CAAChtE,SAAL,CAAeiuE,mBAAf,GAAqC,UAAUtsD,KAAV,EAAiB;AAClD,cAAIA,KAAJ,EAAW;AACP,iBAAKqtD,eAAL,CAAqBrtD,KAArB;AACH;AACJ,SAJD;;AAKAqrD,YAAI,CAAChtE,SAAL,CAAekuE,qBAAf,GAAuC,UAAUvsD,KAAV,EAAiB;AACpD,cAAIA,KAAJ,EAAW;AACP,iBAAKstD,iBAAL,CAAuBttD,KAAvB;AACH;AACJ,SAJD;;AAKAqrD,YAAI,CAAChtE,SAAL,CAAegvE,eAAf,GAAiC,UAAUrtD,KAAV,EAAiB,CAAG,CAArD;;AACAqrD,YAAI,CAAChtE,SAAL,CAAeivE,iBAAf,GAAmC,UAAUttD,KAAV,EAAiB,CAAG,CAAvD,CA1JwC,CA2JxC;AACA;;;AACAqrD,YAAI,CAAChtE,SAAL,CAAeouE,qBAAf,GAAuC,UAAUzsD,KAAV,EAAiB;AACpD,cAAIA,KAAJ,EAAW;AACP,iBAAKutD,iBAAL,CAAuBvtD,KAAvB;AACH;AACJ,SAJD;;AAKAqrD,YAAI,CAAChtE,SAAL,CAAequE,uBAAf,GAAyC,UAAU1sD,KAAV,EAAiB;AACtD,cAAIA,KAAJ,EAAW;AACP,iBAAKwtD,mBAAL,CAAyBxtD,KAAzB;AACH;AACJ,SAJD;;AAKAqrD,YAAI,CAAChtE,SAAL,CAAekvE,iBAAf,GAAmC,UAAUvtD,KAAV,EAAiB,CAAG,CAAvD;;AACAqrD,YAAI,CAAChtE,SAAL,CAAemvE,mBAAf,GAAqC,UAAUxtD,KAAV,EAAiB,CAAG,CAAzD;AACA;;AAEA;AACA;AACA;AACA;;;AACAqrD,YAAI,CAAChtE,SAAL,CAAeovE,iBAAf,GAAmC,UAAU9qE,WAAV,EAAuBi/D,oBAAvB,EAA6C;AAC5E,cAAIljE,KAAK,GAAG,IAAZ;;AACA,cAAIU,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+CuC,OAAO,GAAGzF,EAAE,CAACyF,OAA5D;AAAA,cAAqEtF,OAAO,GAAGH,EAAE,CAACG,OAAlF;AACA,cAAIwgC,IAAJ;AACA,cAAI2tC,MAAJ;AACA,cAAIt1D,KAAJ,CAL4E,CAKjE;;AACX,cAAI7Y,OAAO,CAACkuB,YAAR,IAAwB,CAAC,KAAKkgD,cAAlC,EAAkD;AAC9C5tC,gBAAI,GAAG,KAAK6tC,mBAAL,CAAyBjrE,WAAzB,EAAsCi/D,oBAAtC,CAAP;;AACA,gBAAI7hC,IAAJ,EAAU;AACN2tC,oBAAM,GAAG,KAAKrL,kBAAL,CAAwBlgE,IAAxB,CAA6B,IAA7B,CAAT;AACA,mBAAKwrE,cAAL,GAAsBrrE,QAAQ,CAACwiD,MAAT,EAAtB;AACA,mBAAK+oB,mBAAL,GAA2B,IAAIlmE,IAAJ,GAAW1C,OAAX,EAA3B,CAHM,CAIN;;AACAmT,mBAAK,GAAGvT,OAAO,CAAC1B,GAAR,CAAY0B,OAAO,CAACyvD,OAAR,CAAgB,KAAKqZ,cAArB,EAAqC5tC,IAArC,CAAZ,EAAwDD,cAAc,CAAC,CAAD,EAAIC,IAAJ,CAAtE,EAAiF96B,OAAjF,KAA6F,KAAK0oE,cAAL,CAAoB1oE,OAApB,EAArG,CALM,CAMN;;AACA,mBAAK6oE,qBAAL,GAA6B/8D,UAAU,CAAC,YAAY;AAChDrS,qBAAK,CAACovE,qBAAN,GAA8B,IAA9B;AACAJ,sBAAM;;AACN,oBAAI3tC,IAAI,KAAK,QAAb,EAAuB;AACnB3nB,uBAAK,GAAG,IAAR,CADmB,CACL;AACjB,iBAFD,MAGK;AACDA,uBAAK,GAAG,OAAO,EAAf,CADC,CACkB;AACtB;;AACD1Z,qBAAK,CAACqvE,sBAAN,GAA+BC,WAAW,CAACN,MAAD,EAASt1D,KAAT,CAA1C,CATgD,CASW;AAC9D,eAVsC,EAUpCA,KAVoC,CAAvC;AAWH,aApB6C,CAqB9C;;AACH;AACJ,SA7BD,CA/KwC,CA6MxC;AACA;;;AACAizD,YAAI,CAAChtE,SAAL,CAAegkE,kBAAf,GAAoC,YAAY;AAC5C,cAAI,KAAK3/D,KAAL,CAAWC,WAAX,IAA0B;AAC1B,eAAKgrE,cADT,CACwB;AADxB,YAEE;AACE,mBAAKM,oBAAL,GADF,CAC+B;;AAC7B,mBAAKC,kBAAL,CAAwBzxC,KAAK,CAAC,KAAKkxC,cAAN,EAAsB,IAAIhmE,IAAJ,GAAW1C,OAAX,KAAuB,KAAK4oE,mBAAlD,CAA7B;AACA,mBAAKM,sBAAL,GAA8B,IAA9B;AACH;AACJ,SARD,CA/MwC,CAwNxC;AACA;;;AACA9C,YAAI,CAAChtE,SAAL,CAAeyuE,gBAAf,GAAkC,YAAY;AAC1C,cAAI,KAAKgB,qBAAT,EAAgC;AAC5Bx0D,wBAAY,CAAC,KAAKw0D,qBAAN,CAAZ;AACA,iBAAKA,qBAAL,GAA6B,IAA7B;AACH;;AACD,cAAI,KAAKC,sBAAT,EAAiC;AAC7BK,yBAAa,CAAC,KAAKL,sBAAN,CAAb;AACA,iBAAKA,sBAAL,GAA8B,IAA9B;AACH;;AACD,cAAI,KAAKI,sBAAT,EAAiC;AAC7B,iBAAKF,oBAAL;AACA,iBAAKE,sBAAL,GAA8B,KAA9B;AACH;AACJ,SAbD;;AAcA9C,YAAI,CAAChtE,SAAL,CAAeuvE,mBAAf,GAAqC,UAAUjrE,WAAV,EAAuBi/D,oBAAvB,EAA6C,CAC9E;AACH,SAFD,CAxOwC,CA2OxC;;;AACAyJ,YAAI,CAAChtE,SAAL,CAAe6vE,kBAAf,GAAoC,UAAUhvC,IAAV,EAAgB,CAChD;AACH,SAFD,CA5OwC,CA+OxC;;;AACAmsC,YAAI,CAAChtE,SAAL,CAAe4vE,oBAAf,GAAsC,YAAY,CAC9C;AACH,SAFD;AAGA;;;;AAEA5C,YAAI,CAAChtE,SAAL,CAAe4jE,SAAf,GAA2B,UAAUja,MAAV,EAAkBqmB,QAAlB,EAA4B;AACnD,cAAIA,QAAJ,EAAc;AACVrmB,kBAAM,CAACqmB,QAAP,GAAkBA,QAAlB;AACH;;AACD3hE,kBAAQ,CAAC,KAAK4hE,YAAL,KAAsB,KAAKA,YAAL,GAAoB,EAA1C,CAAD,EAAgDtmB,MAAhD,CAAR;AACH,SALD;;AAMAqjB,YAAI,CAAChtE,SAAL,CAAeikE,SAAf,GAA2B,UAAUz+D,QAAV,EAAoB;AAC3C,eAAK0qE,iBAAL,CAAuB1qE,QAAvB;AACA,eAAKyqE,YAAL,GAAoB,IAApB;AACH,SAHD;;AAIAjD,YAAI,CAAChtE,SAAL,CAAekwE,iBAAf,GAAmC,UAAU1qE,QAAV,EAAoB;AACnD,cAAI,KAAKyqE,YAAT,EAAuB;AACnB,iBAAKE,WAAL,CAAiB,KAAKF,YAAtB,EAAoCzqE,QAApC;AACH;AACJ,SAJD;;AAKAwnE,YAAI,CAAChtE,SAAL,CAAemjE,WAAf,GAA6B,YAAY;AACrC,cAAIxZ,MAAM,GAAG,EAAb;;AACA,cAAI,KAAKtlD,KAAL,CAAWC,WAAf,EAA4B;AAAE;AAC1B+J,oBAAQ,CAACs7C,MAAD,EAAS,KAAKymB,eAAL,EAAT,CAAR;AACH;;AACD,iBAAOzmB,MAAP;AACH,SAND;;AAOAqjB,YAAI,CAAChtE,SAAL,CAAemwE,WAAf,GAA6B,UAAUxmB,MAAV,EAAkBnkD,QAAlB,EAA4B;AACrD,cAAIuD,QAAQ,GAAG4gD,MAAM,CAAC5gD,QAAtB;AAAA,cAAgCinE,QAAQ,GAAGrmB,MAAM,CAACqmB,QAAlD;;AACA,cAAIjnE,QAAQ,IAAI,IAAZ,IAAoB,CAACinE,QAAzB,EAAmC;AAC/B,mBAAOrmB,MAAM,CAAC5gD,QAAd;;AACA,gBAAI,KAAK1E,KAAL,CAAWC,WAAf,EAA4B;AAAE;AAC1B+J,sBAAQ,CAACs7C,MAAD,EAAS,KAAK0mB,iBAAL,CAAuBtnE,QAAvB,CAAT,CAAR;AACH;AACJ;;AACD,cAAI,KAAK1E,KAAL,CAAWC,WAAf,EAA4B;AAAE;AAC1B,iBAAKgsE,eAAL,CAAqB3mB,MAArB;AACH;AACJ,SAXD;;AAYAqjB,YAAI,CAAChtE,SAAL,CAAeqwE,iBAAf,GAAmC,UAAUtnE,QAAV,EAAoB;AACnD,iBAAO,EAAP,CADmD,CACxC;AACd,SAFD;;AAGAikE,YAAI,CAAChtE,SAAL,CAAeowE,eAAf,GAAiC,YAAY;AACzC,iBAAO,EAAP,CADyC,CAC9B;AACd,SAFD;;AAGApD,YAAI,CAAChtE,SAAL,CAAeswE,eAAf,GAAiC,UAAU3mB,MAAV,EAAkB,CAC/C;AACH,SAFD,CA7RwC,CAgSxC;;;AACAqjB,YAAI,CAAChtE,SAAL,CAAe8sE,gBAAf,GAAkC,UAAU/jE,QAAV,EAAoB;AAClD,eAAKonE,WAAL,CAAiB;AAAEpnE,oBAAQ,EAAEA;AAAZ,WAAjB,EAAyC,KAAzC;AACH,SAFD;;AAGA,eAAOikE,IAAP;AACH,OArSyB,CAqSxB9gB,aArSwB,CAA1B;;AAsSA1E,kBAAY,CAACN,OAAb,CAAqB8lB,IAArB;AACAA,UAAI,CAAChtE,SAAL,CAAem6D,cAAf,GAAgC,KAAhC;AACA6S,UAAI,CAAChtE,SAAL,CAAeqqE,yBAAf,GAA2C1R,oBAA3C;;AAEA,UAAI4X,eAAe;AAAG;AAAe,kBAAY;AAC7C,iBAASA,eAAT,GAA2B;AACvB,eAAK/vE,IAAL,GAAY,EAAZ;AACA,eAAKwpE,WAAL,GAAmB,KAAnB;AACH;;AACDuG,uBAAe,CAACvwE,SAAhB,CAA0B6D,UAA1B,GAAuC,UAAU7C,OAAV,EAAmBR,IAAnB,EAAyBgwE,UAAzB,EAAqC;AACxE,eAAKxvE,OAAL,GAAeA,OAAf;AACA,eAAKyvE,YAAL,GAFwE,CAEnD;AACrB;AACA;;AACAjwE,cAAI,GAAG,KAAKkwE,YAAL,CAAkBlwE,IAAlB,EAAwBgwE,UAAxB,CAAP;AACA,eAAKhwE,IAAL,GAAYA,IAAZ;AACA,eAAKD,UAAL,CAAgBC,IAAhB,EAAsBgwE,UAAtB;AACA,eAAKxG,WAAL,GAAmB,IAAnB;AACAzwB,6BAAmB,CAAC,KAAKv4C,OAAN,EAAe,KAAKR,IAApB,EAA0Boe,OAAO,CAAC4xD,UAAD,CAAjC,CAAnB;AACH,SAVD;;AAWAD,uBAAe,CAACvwE,SAAhB,CAA0B+D,QAA1B,GAAqC,UAAU/C,OAAV,EAAmB2vE,KAAnB,EAA0BH,UAA1B,EAAsC;AACvE12B,+BAAqB,CAAC,KAAK94C,OAAN,EAAe,KAAKR,IAApB,EAA0Boe,OAAO,CAAC4xD,UAAD,CAAjC,CAArB;AACA,eAAK5vE,UAAL,CAAgB,KAAKJ,IAArB;AACA,eAAKA,IAAL,GAAY,EAAZ;AACH,SAJD,CAhB6C,CAqB7C;;;AACA+vE,uBAAe,CAACvwE,SAAhB,CAA0BywE,YAA1B,GAAyC,YAAY;AACjD,cAAIvvE,OAAO,GAAG,KAAKF,OAAL,CAAaE,OAA3B;AACA,cAAIyB,gBAAJ;AACA,cAAIwtB,eAAJ;AACA,eAAKP,eAAL,GAAuBikB,eAAe,CAAC3yC,OAAO,CAAC0uB,eAAR,IAA2B,KAAK9sB,sBAAL,EAA5B,EAA2D5B,OAAO,CAACyvB,qBAAnE,CAAtC;AACAhuB,0BAAgB,GAAGzB,OAAO,CAACyB,gBAA3B;;AACA,cAAIA,gBAAgB,IAAI,IAAxB,EAA8B;AAC1BA,4BAAgB,GAAG,KAAKiuE,uBAAL,EAAnB,CAD0B,CACyB;AACtD;;AACDzgD,yBAAe,GAAGjvB,OAAO,CAACivB,eAA1B;;AACA,cAAIA,eAAe,IAAI,IAAvB,EAA6B;AACzBA,2BAAe,GAAG,KAAK0gD,sBAAL,EAAlB,CADyB,CACwB;AACpD;;AACD,eAAKluE,gBAAL,GAAwBA,gBAAxB;AACA,eAAKwtB,eAAL,GAAuBA,eAAvB;AACH,SAfD,CAtB6C,CAsC7C;AACA;;;AACAogD,uBAAe,CAACvwE,SAAhB,CAA0B0wE,YAA1B,GAAyC,UAAUlwE,IAAV,EAAgBgwE,UAAhB,EAA4B;AACjE,cAAIr6C,IAAI,GAAG,EAAX;AACA,cAAIhvB,CAAJ;;AACA,cAAI3G,IAAI,CAACC,MAAT,EAAiB;AAAE;AACf;AACA,iBAAK0G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BgvB,kBAAI,IAAI,KAAKt1B,aAAL,CAAmBL,IAAI,CAAC2G,CAAD,CAAvB,EAA4BqpE,UAA5B,CAAR;AACH,aAJY,CAKb;AACA;;;AACAh6C,0BAAc,CAACL,IAAD,CAAd,CAAqB/pB,OAArB,CAA6B,UAAUjI,EAAV,EAAcgD,CAAd,EAAiB;AAC1C,kBAAIrG,GAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAd;;AACA,kBAAIhD,EAAJ,EAAQ;AACJrD,mBAAG,CAACqD,EAAJ,GAASA,EAAT;AACH;AACJ,aALD;AAMA3D,gBAAI,GAAGm4C,gBAAgB,CAAC,KAAK33C,OAAN,EAAeR,IAAf,EAAqBoe,OAAO,CAAC4xD,UAAD,CAA5B,CAAvB;AACH;;AACD,iBAAOhwE,IAAP;AACH,SAnBD,CAxC6C,CA4D7C;;;AACA+vE,uBAAe,CAACvwE,SAAhB,CAA0B8wE,aAA1B,GAA0C,UAAUhwE,GAAV,EAAeiwE,WAAf,EAA4BC,WAA5B,EAAyCR,UAAzC,EAAqD;AAC3F,cAAI7uE,OAAO,GAAG,CACV,UADU,EAEVb,GAAG,CAACqB,OAAJ,GAAc,UAAd,GAA2B,cAFjB,EAGVrB,GAAG,CAACyB,KAAJ,GAAY,QAAZ,GAAuB,YAHb,EAIZX,MAJY,CAILd,GAAG,CAACK,UAAJ,CAAeM,EAAf,CAAkBI,UAJb,CAAd;;AAKA,cAAIkvE,WAAJ,EAAiB;AACbpvE,mBAAO,CAACc,IAAR,CAAa,cAAb;AACH;;AACD,cAAIuuE,WAAJ,EAAiB;AACbrvE,mBAAO,CAACc,IAAR,CAAa,cAAb;AACH;;AACD,cAAI+tE,UAAJ,EAAgB;AACZ7uE,mBAAO,CAACc,IAAR,CAAa,WAAb;;AACA,gBAAI+tE,UAAU,CAACnhE,UAAf,EAA2B;AACvB1N,qBAAO,CAACc,IAAR,CAAa,aAAb;AACH;;AACD,gBAAI+tE,UAAU,CAACS,UAAf,EAA2B;AACvBtvE,qBAAO,CAACc,IAAR,CAAa,aAAb;AACH;AACJ;;AACD,iBAAOd,OAAP;AACH,SAtBD,CA7D6C,CAoF7C;AACA;AACA;AACA;AACA;;;AACA4uE,uBAAe,CAACvwE,SAAhB,CAA0BwC,WAA1B,GAAwC,UAAUrB,UAAV,EAAsB61C,SAAtB,EAAiCk6B,UAAjC,EAA6C;AACjF,cAAI7vE,GAAG,GAAGF,UAAU,CAACE,GAArB;AAAA,cAA0BE,QAAQ,GAAGJ,UAAU,CAACI,QAAhD;AACA,iBAAO,KAAKa,YAAL,CAAkBb,QAAQ,CAACW,KAAT,CAAeG,KAAjC,EAAwChB,GAAG,CAACwjB,MAAJ,GAAatjB,QAAQ,CAACW,KAAT,CAAeI,GAA5B,GAAkC,IAA1E,EAAgFjB,GAAG,CAACY,MAApF,EAA4F+0C,SAA5F,EAAuGk6B,UAAvG,EAAmH3vE,QAAQ,CAAC01C,cAA5H,EAA4I11C,QAAQ,CAAC21C,YAArJ,CAAP;AACH,SAHD;;AAIAq5B,uBAAe,CAACvwE,SAAhB,CAA0BoC,YAA1B,GAAyC,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBL,MAAtB,EAA8B+0C,SAA9B,EAAyCk6B,UAAzC,EAAqDj6B,cAArD,EAAqEC,YAArE,EAAmF;AACxH,cAAI1wC,OAAO,GAAG,KAAKxF,OAAL,CAAawF,OAA3B;;AACA,cAAIwwC,SAAS,IAAI,IAAjB,EAAuB;AACnBA,qBAAS,GAAG,KAAKpnB,eAAjB;AACH;;AACD,cAAIshD,UAAU,IAAI,IAAlB,EAAwB;AACpBA,sBAAU,GAAG,KAAK/gD,eAAlB;AACH;;AACD,cAAI,KAAKxtB,gBAAL,IAAyB,CAACV,MAA9B,EAAsC;AAClC,gBAAIivE,UAAU,IAAI5uE,GAAlB,EAAuB;AACnB,qBAAOkE,OAAO,CAACwpC,WAAR,CAAoB3tC,KAApB,EAA2BC,GAA3B,EAAgC00C,SAAhC,EAA2C;AAC9CC,8BAAc,EAAEA,cAD8B;AAE9CC,4BAAY,EAAEA;AAFgC,eAA3C,CAAP;AAIH,aALD,MAMK;AACD,qBAAO1wC,OAAO,CAACyB,MAAR,CAAe5F,KAAf,EAAsB20C,SAAtB,EAAiC;AACpCG,yBAAS,EAAEF;AADyB,eAAjC,CAAP;AAGH;AACJ;;AACD,iBAAO,EAAP;AACH,SAtBD;;AAuBAs5B,uBAAe,CAACvwE,SAAhB,CAA0B8C,sBAA1B,GAAmD,YAAY;AAC3D,iBAAO;AACHC,gBAAI,EAAE,SADH;AAEHC,kBAAM,EAAE,SAFL;AAGH+rC,0BAAc,EAAE;AAHb,WAAP;AAKH,SAND;;AAOAwhC,uBAAe,CAACvwE,SAAhB,CAA0B4wE,uBAA1B,GAAoD,YAAY;AAC5D,iBAAO,IAAP;AACH,SAFD;;AAGAL,uBAAe,CAACvwE,SAAhB,CAA0B6wE,sBAA1B,GAAmD,YAAY;AAC3D,iBAAO,IAAP;AACH,SAFD,CA9H6C,CAiI7C;;;AACAN,uBAAe,CAACvwE,SAAhB,CAA0BmxE,UAA1B,GAAuC,UAAU1vE,EAAV,EAAc;AACjD,iBAAO;AACH,gCAAoBA,EAAE,CAACM,eADpB;AAEH,4BAAgBN,EAAE,CAACs0C,WAFhB;AAGH+J,iBAAK,EAAEr+C,EAAE,CAACi2C;AAHP,WAAP;AAKH,SAND;;AAOA64B,uBAAe,CAACvwE,SAAhB,CAA0BwH,aAA1B,GAA0C,UAAUhH,IAAV,EAAgB;AACtD,cAAImlC,KAAK,GAAG,KAAK3kC,OAAL,CAAakqD,eAAzB;AACA,cAAIkmB,IAAI,GAAG5wE,IAAI,CAACkZ,GAAL,CAAS23D,kBAAT,CAAX;AACAD,cAAI,CAACvwD,IAAL,CAAU,UAAUslB,IAAV,EAAgBC,IAAhB,EAAsB;AAC5B,mBAAOF,mBAAmB,CAACC,IAAD,EAAOC,IAAP,EAAaT,KAAb,CAA1B;AACH,WAFD;AAGA,iBAAOyrC,IAAI,CAAC13D,GAAL,CAAS,UAAU43D,CAAV,EAAa;AACzB,mBAAOA,CAAC,CAACC,IAAT;AACH,WAFM,CAAP;AAGH,SATD;;AAUAhB,uBAAe,CAACvwE,SAAhB,CAA0B2F,YAA1B,GAAyC,UAAU6rE,KAAV,EAAiB;AACtD,cAAIA,KAAK,IAAI,KAAKxH,WAAlB,EAA+B;AAC3B,iBAAKyH,eAAL,CAAqB,KAAKjxE,IAA1B;AACH;AACJ,SAJD;;AAKA+vE,uBAAe,CAACvwE,SAAhB,CAA0B4F,WAA1B,GAAwC,UAAU4rE,KAAV,EAAiB;AACrD,cAAIA,KAAK,IAAI,KAAKxH,WAAlB,EAA+B;AAC3B,iBAAK0H,cAAL,CAAoB,KAAKlxE,IAAzB;AACA,iBAAKwpE,WAAL,GAAmB,KAAnB;AACH;AACJ,SALD;;AAMAuG,uBAAe,CAACvwE,SAAhB,CAA0ByxE,eAA1B,GAA4C,UAAUjxE,IAAV,EAAgB,CAC3D,CADD;;AAEA+vE,uBAAe,CAACvwE,SAAhB,CAA0B0xE,cAA1B,GAA2C,UAAUlxE,IAAV,EAAgB,CAC1D,CADD,CAhK6C,CAkK7C;;;AACA+vE,uBAAe,CAACvwE,SAAhB,CAA0B2xE,UAA1B,GAAuC,UAAUvnC,IAAV,EAAgB;AACnD,cAAIA,IAAJ,EAAU;AACN,iBAAK,IAAInlC,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKP,IAA3B,EAAiCyE,EAAE,GAAGlE,EAAE,CAACN,MAAzC,EAAiDwE,EAAE,EAAnD,EAAuD;AACnD,kBAAInE,GAAG,GAAGC,EAAE,CAACkE,EAAD,CAAZ;;AACA,kBAAImlC,IAAI,CAACtpC,GAAG,CAACK,UAAJ,CAAeI,QAAf,CAAwBmgB,UAAzB,CAAR,EAA8C;AAC1C5gB,mBAAG,CAACqD,EAAJ,CAAO0P,KAAP,CAAac,UAAb,GAA0B,QAA1B;AACH;AACJ;AACJ;AACJ,SATD;;AAUA47D,uBAAe,CAACvwE,SAAhB,CAA0B4xE,UAA1B,GAAuC,UAAUxnC,IAAV,EAAgB;AACnD,cAAIA,IAAJ,EAAU;AACN,iBAAK,IAAInlC,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKP,IAA3B,EAAiCyE,EAAE,GAAGlE,EAAE,CAACN,MAAzC,EAAiDwE,EAAE,EAAnD,EAAuD;AACnD,kBAAInE,GAAG,GAAGC,EAAE,CAACkE,EAAD,CAAZ;;AACA,kBAAImlC,IAAI,CAACtpC,GAAG,CAACK,UAAJ,CAAeI,QAAf,CAAwBmgB,UAAzB,CAAR,EAA8C;AAC1C5gB,mBAAG,CAACqD,EAAJ,CAAO0P,KAAP,CAAac,UAAb,GAA0B,EAA1B;AACH;AACJ;AACJ;AACJ,SATD;;AAUA47D,uBAAe,CAACvwE,SAAhB,CAA0B6xE,kBAA1B,GAA+C,UAAUnwD,UAAV,EAAsB;AACjE,cAAIA,UAAJ,EAAgB;AACZ,iBAAK,IAAIzc,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKP,IAA3B,EAAiCyE,EAAE,GAAGlE,EAAE,CAACN,MAAzC,EAAiDwE,EAAE,EAAnD,EAAuD;AACnD,kBAAInE,GAAG,GAAGC,EAAE,CAACkE,EAAD,CAAZ;AACA,kBAAI3D,aAAa,GAAGR,GAAG,CAACK,UAAJ,CAAeI,QAAnC;;AACA,kBAAID,aAAa,IAAIA,aAAa,CAACogB,UAAd,KAA6BA,UAA9C,IACA5gB,GAAG,CAACqD,EADR,CACW;AADX,gBAEE;AACErD,qBAAG,CAACqD,EAAJ,CAAOU,SAAP,CAAiBC,GAAjB,CAAqB,aAArB;AACH;AACJ;AACJ;AACJ,SAZD;;AAaAyrE,uBAAe,CAACvwE,SAAhB,CAA0B8xE,oBAA1B,GAAiD,UAAUpwD,UAAV,EAAsB;AACnE,cAAIA,UAAJ,EAAgB;AACZ,iBAAK,IAAIzc,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG,KAAKP,IAA3B,EAAiCyE,EAAE,GAAGlE,EAAE,CAACN,MAAzC,EAAiDwE,EAAE,EAAnD,EAAuD;AACnD,kBAAInE,GAAG,GAAGC,EAAE,CAACkE,EAAD,CAAZ;;AACA,kBAAInE,GAAG,CAACqD,EAAR,EAAY;AAAE;AACVrD,mBAAG,CAACqD,EAAJ,CAAOU,SAAP,CAAiBg0B,MAAjB,CAAwB,aAAxB;AACH;AACJ;AACJ;AACJ,SATD;;AAUA,eAAO03C,eAAP;AACH,OA/MoC,EAArC,C,CAgNA;;;AACA,eAASc,kBAAT,CAA4BvwE,GAA5B,EAAiC;AAC7B,YAAIM,QAAQ,GAAGN,GAAG,CAACK,UAAJ,CAAeE,GAA9B;AACA,YAAIa,KAAK,GAAGpB,GAAG,CAACK,UAAJ,CAAeI,QAAf,CAAwBW,KAApC;AACA,YAAIG,KAAK,GAAGH,KAAK,CAACG,KAAN,GAAcH,KAAK,CAACG,KAAN,CAAYuE,OAAZ,EAAd,GAAsC,CAAlD,CAH6B,CAGwB;;AACrD,YAAItE,GAAG,GAAGJ,KAAK,CAACI,GAAN,GAAYJ,KAAK,CAACI,GAAN,CAAUsE,OAAV,EAAZ,GAAkC,CAA5C,CAJ6B,CAIkB;;AAC/C,eAAOyH,QAAQ,CAAC,EAAD,EAAKjN,QAAQ,CAAC+K,aAAd,EAA6B/K,QAA7B,EAAuC;AAAE0J,YAAE,EAAE1J,QAAQ,CAAC8zC,QAAf;AAAyB7yC,eAAK,EAAEA,KAAhC;AAClDC,aAAG,EAAEA,GAD6C;AACxCyG,kBAAQ,EAAEzG,GAAG,GAAGD,KADwB;AACjBJ,gBAAM,EAAEqyB,MAAM,CAAClzB,QAAQ,CAACa,MAAV,CADG;AACgBsvE,cAAI,EAAEzwE,GADtB,CAC0B;;AAD1B,SAAvC,CAAf;AAGH;AAED;;;;;AAGA,UAAIixE,YAAY;AAAG;AAAe,kBAAY;AAC1C,iBAASA,YAAT,GAAwB;AACpB,eAAKC,UAAL,GAAkB,KAAlB;AACA,eAAKC,cAAL,GAAsB,EAAtB;AACA,eAAKC,kBAAL,GAA0B,EAA1B;AACA,eAAKC,UAAL,GAAkB,EAAlB;AACH;;AACDJ,oBAAY,CAAC/xE,SAAb,CAAuBoyE,aAAvB,GAAuC,UAAUtpE,IAAV,EAAgB;AACnD,iBAAO,KAAKqpE,UAAL,CAAgBrpE,IAAhB,KAAyB,EAAhC;AACH,SAFD;;AAGAipE,oBAAY,CAAC/xE,SAAb,CAAuB6D,UAAvB,GAAoC,UAAUiF,IAAV,EAAgB9H,OAAhB,EAAyBR,IAAzB,EAA+B;AAC/D,cAAIO,EAAJ;;AACA,eAAKC,OAAL,GAAeA,OAAf;AACA,cAAIqxE,YAAY,GAAG,KAAK3B,YAAL,CAAkB5nE,IAAlB,EAAwBtI,IAAxB,CAAnB,CAH+D,CAGb;;AAClD,cAAI8xE,YAAY,GAAG,KAAK/xE,UAAL,CAAgBuI,IAAhB,EAAsBupE,YAAtB,CAAnB;;AACA,cAAIC,YAAJ,EAAkB;AACd,aAACvxE,EAAE,GAAI,KAAKmxE,kBAAL,CAAwBppE,IAAxB,MAAkC,KAAKopE,kBAAL,CAAwBppE,IAAxB,IAAgC,EAAlE,CAAP,EAA+ErG,IAA/E,CAAoF6D,KAApF,CAA0FvF,EAA1F,EAA8FuxE,YAA9F;AACH;;AACD,eAAKH,UAAL,CAAgBrpE,IAAhB,IAAwBupE,YAAxB;;AACA,cAAIvpE,IAAI,KAAK,SAAb,EAAwB;AACpBywC,+BAAmB,CAACv4C,OAAD,EAAUqxE,YAAV,EAAwB,KAAxB,CAAnB,CADoB,CAC+B;AACtD;;AACD,eAAKJ,cAAL,CAAoBnpE,IAApB,IAA4B,IAA5B;AACH,SAbD,CAV0C,CAwB1C;;;AACAipE,oBAAY,CAAC/xE,SAAb,CAAuB+D,QAAvB,GAAkC,UAAU+E,IAAV,EAAgB9H,OAAhB,EAAyB;AACvD,cAAIR,IAAI,GAAG,KAAK2xE,UAAL,CAAgBrpE,IAAhB,CAAX;;AACA,cAAItI,IAAJ,EAAU;AACN,gBAAIsI,IAAI,KAAK,SAAb,EAAwB;AACpBgxC,mCAAqB,CAAC94C,OAAD,EAAUR,IAAV,EAAgB,KAAhB,CAArB,CADoB,CACyB;AAChD;;AACD,iBAAKI,UAAL,CAAgBkI,IAAhB,EAAsBtI,IAAtB;AACH;AACJ,SARD,CAzB0C,CAkC1C;AACA;;;AACAuxE,oBAAY,CAAC/xE,SAAb,CAAuB0wE,YAAvB,GAAsC,UAAU5nE,IAAV,EAAgBtI,IAAhB,EAAsB;AACxD,cAAIH,KAAK,GAAG,IAAZ;;AACA,cAAI81B,IAAI,GAAG,EAAX;AACA,cAAIhvB,CAAJ;;AACA,cAAI3G,IAAI,CAACC,MAAT,EAAiB;AACb;AACA,iBAAK0G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BgvB,kBAAI,IAAI,KAAKt1B,aAAL,CAAmBiI,IAAnB,EAAyBtI,IAAI,CAAC2G,CAAD,CAA7B,CAAR;AACH,aAJY,CAKb;AACA;;;AACAqvB,0BAAc,CAACL,IAAD,CAAd,CAAqB/pB,OAArB,CAA6B,UAAUjI,EAAV,EAAcgD,CAAd,EAAiB;AAC1C,kBAAIrG,GAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAd;;AACA,kBAAIhD,EAAJ,EAAQ;AACJrD,mBAAG,CAACqD,EAAJ,GAASA,EAAT;AACH;AACJ,aALD;;AAMA,gBAAI2E,IAAI,KAAK,SAAb,EAAwB;AACpBtI,kBAAI,GAAGm4C,gBAAgB,CAAC,KAAK33C,OAAN,EAAeR,IAAf,EAAqB,KAArB,CAA2B;AAA3B,eAAvB;AAEH,aAhBY,CAiBb;;;AACAA,gBAAI,GAAGA,IAAI,CAACyM,MAAL,CAAY,UAAUnM,GAAV,EAAe;AAC9B,qBAAOi3B,cAAc,CAACj3B,GAAG,CAACqD,EAAL,EAAS9D,KAAK,CAAC2xE,UAAf,CAArB;AACH,aAFM,CAAP;AAGH;;AACD,iBAAOxxE,IAAP;AACH,SA3BD,CApC0C,CAgE1C;;;AACAuxE,oBAAY,CAAC/xE,SAAb,CAAuBa,aAAvB,GAAuC,UAAUiI,IAAV,EAAgBhI,GAAhB,EAAqB;AACxD,cAAIyxE,GAAG,GAAG,IAAV;AACA,cAAI1wE,UAAU,GAAG,EAAjB;;AACA,cAAIiH,IAAI,KAAK,WAAT,IAAwBA,IAAI,KAAK,eAArC,EAAsD;AAClDypE,eAAG,GAAG;AACF,kCAAoBzxE,GAAG,CAACK,UAAJ,CAAeM,EAAf,CAAkBM;AADpC,aAAN;AAGH;;AACD,cAAI+G,IAAI,KAAK,WAAb,EAA0B;AACtBjH,sBAAU,GAAGA,UAAU,CAACD,MAAX,CAAkBd,GAAG,CAACK,UAAJ,CAAeM,EAAf,CAAkBI,UAApC,CAAb;AACH;;AACD,cAAIiH,IAAI,KAAK,eAAb,EAA8B;AAC1BjH,sBAAU,CAACY,IAAX,CAAgB,YAAhB;AACH,WAFD,MAGK;AACDZ,sBAAU,CAACY,IAAX,CAAgB,QAAQqG,IAAI,CAACkE,WAAL,EAAxB;AACH;;AACD,iBAAO,MAAM,KAAKglE,UAAX,IACFnwE,UAAU,CAACpB,MAAX,GAAoB,aAAaoB,UAAU,CAACa,IAAX,CAAgB,GAAhB,CAAb,GAAoC,GAAxD,GAA8D,EAD5D,KAEF6vE,GAAG,GAAG,aAAahzB,QAAQ,CAACgzB,GAAD,CAArB,GAA6B,GAAhC,GAAsC,EAFvC,IAGH,KAHG,GAGK,KAAKP,UAHV,GAGuB,GAH9B;AAIH,SArBD;;AAsBAD,oBAAY,CAAC/xE,SAAb,CAAuBY,UAAvB,GAAoC,UAAUkI,IAAV,EAAgBtI,IAAhB,EAAsB;AACtD,cAAI8xE,YAAY,GAAG,KAAKJ,kBAAL,CAAwBppE,IAAxB,CAAnB;;AACA,cAAIwpE,YAAJ,EAAkB;AACdA,wBAAY,CAAClmE,OAAb,CAAqBkrB,aAArB;AACA,mBAAO,KAAK46C,kBAAL,CAAwBppE,IAAxB,CAAP;AACH;AACJ,SAND;;AAOAipE,oBAAY,CAAC/xE,SAAb,CAAuB2F,YAAvB,GAAsC,UAAU6rE,KAAV,EAAiB;AACnD,eAAK,IAAI1oE,IAAT,IAAiB,KAAKqpE,UAAtB,EAAkC;AAC9B,gBAAIX,KAAK,IAAI,KAAKS,cAAL,CAAoBnpE,IAApB,CAAb,EAAwC;AACpC,mBAAK2oE,eAAL,CAAqB,KAAKU,UAAL,CAAgBrpE,IAAhB,CAArB;AACH;AACJ;AACJ,SAND;;AAOAipE,oBAAY,CAAC/xE,SAAb,CAAuB4F,WAAvB,GAAqC,UAAU4rE,KAAV,EAAiB;AAClD,eAAK,IAAI1oE,IAAT,IAAiB,KAAKqpE,UAAtB,EAAkC;AAC9B,gBAAIX,KAAK,IAAI,KAAKS,cAAL,CAAoBnpE,IAApB,CAAb,EAAwC;AACpC,mBAAK4oE,cAAL,CAAoB,KAAKS,UAAL,CAAgBrpE,IAAhB,CAApB;AACH;AACJ;;AACD,eAAKmpE,cAAL,GAAsB,EAAtB;AACH,SAPD;;AAQAF,oBAAY,CAAC/xE,SAAb,CAAuByxE,eAAvB,GAAyC,UAAUjxE,IAAV,EAAgB,CACxD,CADD;;AAEAuxE,oBAAY,CAAC/xE,SAAb,CAAuB0xE,cAAvB,GAAwC,UAAUlxE,IAAV,EAAgB,CACvD,CADD;;AAEA,eAAOuxE,YAAP;AACH,OAlHiC,EAAlC;;AAoHA,UAAIS,iBAAiB;AAAG;AAAe,kBAAY;AAC/C,iBAASA,iBAAT,CAA2BtjC,YAA3B,EAAyC;AACrC,eAAKA,YAAL,GAAoBA,YAApB;AACH;;AACD,eAAOsjC,iBAAP;AACH,OALsC,EAAvC;AAOA;;;;;;;;;;;;;;;AAaA,UAAIC,eAAe;AAAG;AAAe,kBAAY;AAC7C,iBAASA,eAAT,CAAyBtuE,EAAzB,EAA6B;AACzB,eAAK4L,OAAL,GAAe,IAAIy3C,YAAJ,EAAf;AACH;;AACDirB,uBAAe,CAACzyE,SAAhB,CAA0B2E,OAA1B,GAAoC,YAAY,CAC/C,CADD;;AAEA8tE,uBAAe,CAACzyE,SAAhB,CAA0Bub,kBAA1B,GAA+C,UAAU3H,IAAV,EAAgB,CAC3D;AACH,SAFD;;AAGA6+D,uBAAe,CAACzyE,SAAhB,CAA0Bwb,oBAA1B,GAAiD,UAAU5H,IAAV,EAAgB,CAC7D;AACH,SAFD;;AAGA6+D,uBAAe,CAACzyE,SAAhB,CAA0Byb,oBAA1B,GAAiD,UAAU7H,IAAV,EAAgB,CAC7D;AACH,SAFD;;AAGA,eAAO6+D,eAAP;AACH,OAhBoC,EAArC;;AAkBA,eAASrH,UAAT,CAAoBsH,SAApB,EAA+B5zD,QAA/B,EAAyC;AACrC,YAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,kBAAQ,GAAG,EAAX;AAAgB;;AAC3C,YAAItY,OAAO,GAAGmsE,cAAc,CAAC7zD,QAAD,CAA5B;AACA,YAAIk4B,SAAS,GAAGnD,eAAe,CAAC/0B,QAAD,CAA/B;AACA,YAAI8zD,QAAQ,GAAGpsE,OAAO,CAACm7C,gBAAR,CAAyB+wB,SAAzB,CAAf;;AACA,YAAI,CAACE,QAAL,EAAe;AAAE;AACb,iBAAO,EAAP;AACH;;AACD,eAAOpsE,OAAO,CAACyB,MAAR,CAAe2qE,QAAQ,CAAC7yC,MAAxB,EAAgCiX,SAAhC,EAA2C;AAC9CG,mBAAS,EAAEy7B,QAAQ,CAACz7B;AAD0B,SAA3C,CAAP;AAGH;;AACD,eAASnH,WAAT,CAAqBoG,UAArB,EAAiCI,QAAjC,EAA2C13B,QAA3C,CAAoD;AAApD,QACE;AACE,YAAItY,OAAO,GAAGmsE,cAAc,CAAC,OAAO7zD,QAAP,KAAoB,QAApB,IAAgCA,QAAhC,GAA2CA,QAA3C,GAAsD,EAAvD,CAA5B,CADF,CAC0F;;AACxF,YAAIk4B,SAAS,GAAGnD,eAAe,CAAC/0B,QAAD,EAAW2yC,cAAc,CAAC9gC,qBAA1B,CAA/B;AACA,YAAI4wB,SAAS,GAAG/6C,OAAO,CAACm7C,gBAAR,CAAyBvL,UAAzB,CAAhB;AACA,YAAIqL,OAAO,GAAGj7C,OAAO,CAACm7C,gBAAR,CAAyBnL,QAAzB,CAAd;;AACA,YAAI,CAAC+K,SAAD,IAAc,CAACE,OAAnB,EAA4B;AAAE;AAC1B,iBAAO,EAAP;AACH;;AACD,eAAOj7C,OAAO,CAACwpC,WAAR,CAAoBuR,SAAS,CAACxhB,MAA9B,EAAsC0hB,OAAO,CAAC1hB,MAA9C,EAAsDiX,SAAtD,EAAiE;AACpEC,wBAAc,EAAEsK,SAAS,CAACpK,SAD0C;AAEpED,sBAAY,EAAEuK,OAAO,CAACtK,SAF8C;AAGpEof,wBAAc,EAAEz3C,QAAQ,CAACy3C;AAH2C,SAAjE,CAAP;AAKH,O,CACD;;;AACA,eAASoc,cAAT,CAAwB7zD,QAAxB,EAAkC;AAC9B,YAAI6Q,MAAM,GAAG6jC,WAAW,CAAC10C,QAAQ,CAAC6Q,MAAT,IAAmB,IAApB,EAA0BmjC,eAAe,CAAC,EAAD,CAAf,CAAoBp5C,GAA9C,CAAxB,CAD8B,CAC8C;AAC5E;;AACAoF,gBAAQ,GAAGzQ,QAAQ,CAAC;AAAEkgB,kBAAQ,EAAEkjC,cAAc,CAACljC,QAA3B;AAAqC4hB,wBAAc,EAAE;AAArD,SAAD,EAAmErxB,QAAnE,EAA6E;AAAE6Q,gBAAM,EAAEA;AAAV,SAA7E,CAAnB;AACA,eAAO,IAAIylC,OAAJ,CAAYt2C,QAAZ,CAAP;AACH;;AAED,UAAI+zD,eAAe,GAAG;AAClBjrD,iBAAS,EAAE6Z,cADO;AAElB14B,gBAAQ,EAAE04B,cAFQ;AAGlBxhC,cAAM,EAAE2e,OAHU;AAIlB+I,gBAAQ,EAAE0M;AAJQ,OAAtB;AAMA,UAAIy+C,kBAAkB,GAAG;AACrB7yE,cAAM,EAAE;AADa,OAAzB;;AAGA,eAAS8yE,aAAT,CAAuBnzB,GAAvB,EAA4B;AACxB,YAAIn4B,aAAa,GAAG,EAApB;AACA,YAAIsgB,OAAO,GAAGJ,WAAW,CAACiY,GAAD,EAAMizB,eAAN,EAAuBC,kBAAvB,EAA2CrrD,aAA3C,CAAzB;AACAsgB,eAAO,CAACtgB,aAAR,GAAwBA,aAAxB;AACA,eAAOsgB,OAAP;AACH,O,CAED;;;AACA,eAASirC,2BAAT,CAAqCC,oBAArC,EAA2D7qC,MAA3D,EAAmE;AAC/D;AACA;AACA,YAAI,CAAC6qC,oBAAD,IAAyB7qC,MAAM,GAAG,EAAtC,EAA0C;AACtC,iBAAO;AAAEn/B,mBAAO,EAAE;AAAX,WAAP,CADsC,CACT;AAChC,SAFD,MAGK,IAAIm/B,MAAM,GAAG,CAAb,EAAgB;AACjB,iBAAO;AAAEn/B,mBAAO,EAAE,OAAX;AAAoBP,iBAAK,EAAE,SAA3B;AAAsCC,eAAG,EAAE,SAA3C;AAAsDqmC,sBAAU,EAAE;AAAlE,WAAP,CADiB,CACgE;AACpF,SAFI,MAGA;AACD,iBAAO;AAAE/lC,mBAAO,EAAE;AAAX,WAAP,CADC,CAC2B;AAC/B;AACJ;;AACD,eAASiqE,cAAT,CAAwB9W,UAAxB,EAAoC93D,WAApC,EAAiD2uE,oBAAjD,EAAuEE,MAAvE,EAA+EC,aAA/E,EAA8FpyE,OAA9F,EAAuGqyE,OAAvG,EAAgHC,UAAhH,EAA4H;AACxH,YAAI9sE,OAAO,GAAGxF,OAAO,CAACwF,OAAtB;AAAA,YAA+BvF,KAAK,GAAGD,OAAO,CAACC,KAA/C;AAAA,YAAsDC,OAAO,GAAGF,OAAO,CAACE,OAAxE;AACA,YAAIqyE,WAAW,GAAG1lC,mBAAmB,CAACvpC,WAAW,CAAC2B,WAAb,EAA0Bm2D,UAA1B,CAArC,CAFwH,CAE5C;;AAC5E,YAAIv6D,UAAU,GAAG,CACb,eADa,EAEbZ,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAFa,CAAjB;AAIA,YAAIkjD,SAAJ;;AACA,YAAI,OAAO5kD,OAAO,CAAC8uB,gBAAf,KAAoC,UAAxC,EAAoD;AAChD81B,mBAAS,GAAG5kD,OAAO,CAAC8uB,gBAAR,CAAyBxpB,OAAO,CAAC6wC,MAAR,CAAe+kB,UAAf,CAAzB,CAAZ;AACH,SAFD,MAGK,IAAI,OAAOl7D,OAAO,CAAC6uB,gBAAf,KAAoC,UAAxC,EAAoD;AACrD+1B,mBAAS,GAAGxG,UAAU,CAACp+C,OAAO,CAAC6uB,gBAAR,CAAyBvpB,OAAO,CAAC6wC,MAAR,CAAe+kB,UAAf,CAAzB,CAAD,CAAtB;AACH,SAFI,MAGA;AACDtW,mBAAS,GAAGxG,UAAU,CAAC94C,OAAO,CAACyB,MAAR,CAAem0D,UAAf,EAA2BgX,aAA3B,CAAD,CAAtB;AACH,SAhBuH,CAiBxH;;;AACA,YAAIH,oBAAJ,EAA0B;AACtBpxE,oBAAU,GAAGA,UAAU,CAACD,MAAX,EACb;AACA;AACAukD,uBAAa,CAACiW,UAAD,EAAa93D,WAAb,EAA0BtD,OAA1B,EAAmC,IAAnC,CAHA,CAAb;AAIH,SALD,MAMK;AACDa,oBAAU,CAACY,IAAX,CAAgB,QAAQo7B,OAAO,CAACu+B,UAAU,CAACz7B,SAAX,EAAD,CAA/B,EADC,CACyD;AAC7D;;AACD,eAAO,KACH,aADG,GACa9+B,UAAU,CAACa,IAAX,CAAgB,GAAhB,CADb,GACoC,GADpC,IAED6wE,WAAW,IAAIN,oBAAhB,GACG,iBAAiBzsE,OAAO,CAACuB,SAAR,CAAkBq0D,UAAlB,EAA8B;AAAEp0D,kBAAQ,EAAE;AAAZ,SAA9B,CAAjB,GAAqE,GADxE,GAEG,EAJD,KAKFqrE,OAAO,GAAG,CAAV,GACG,eAAeA,OAAf,GAAyB,GAD5B,GAEG,EAPD,KAQFC,UAAU,GACP,MAAMA,UADC,GAEP,EAVD,IAWH,GAXG,IAYFC,WAAW,GACR;AACA5tB,2BAAmB,CAACzkD,OAAD,EAAUsF,OAAV,EAAmB;AAAEq6B,cAAI,EAAEu7B,UAAR;AAAoBrW,kBAAQ,EAAE,CAACktB,oBAAD,IAAyBE,MAAM,KAAK;AAAlE,SAAnB,EAA0FrtB,SAA1F,CAFX,GAGR;AACAA,iBAhBD,IAiBH,OAjBJ;AAkBH;;AAED,UAAI0tB,SAAS;AAAG;AAAe,gBAAUrzE,MAAV,EAAkB;AAC7CN,iBAAS,CAAC2zE,SAAD,EAAYrzE,MAAZ,CAAT;;AACA,iBAASqzE,SAAT,CAAmBpwE,QAAnB,EAA6B;AACzB,cAAI/C,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACmD,cAAN,GAAuB8+C,gBAAgB,CAACjiD,KAAK,CAACoD,eAAP,EAAwBpD,KAAK,CAACqD,iBAA9B,CAAvC;AACArD,eAAK,CAAC+C,QAAN,GAAiBA,QAAjB;AACA,iBAAO/C,KAAP;AACH;;AACDmzE,iBAAS,CAACxzE,SAAV,CAAoBoE,MAApB,GAA6B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACnD,cAAIyyE,KAAK,GAAGpvE,KAAK,CAACovE,KAAlB;AAAA,cAAyBR,oBAAoB,GAAG5uE,KAAK,CAAC4uE,oBAAtD;AACA,cAAI5gC,KAAK,GAAG,EAAZ;AACA,eAAK7uC,cAAL,CAAoBxC,OAApB;;AACA,cAAIqD,KAAK,CAACqvE,eAAV,EAA2B;AACvBrhC,iBAAK,CAAC5vC,IAAN,CAAW4B,KAAK,CAACqvE,eAAN,EAAX;AACH;;AACD,cAAIN,aAAa,GAAGv/B,eAAe,CAAC7yC,OAAO,CAACE,OAAR,CAAgB4uB,kBAAhB,IAChCkjD,2BAA2B,CAACC,oBAAD,EAAuBQ,KAAK,CAAChzE,MAA7B,CADI,CAAnC;;AAEA,eAAK,IAAIwE,EAAE,GAAG,CAAT,EAAY0uE,OAAO,GAAGF,KAA3B,EAAkCxuE,EAAE,GAAG0uE,OAAO,CAAClzE,MAA/C,EAAuDwE,EAAE,EAAzD,EAA6D;AACzD,gBAAI47B,IAAI,GAAG8yC,OAAO,CAAC1uE,EAAD,CAAlB;AACAotC,iBAAK,CAAC5vC,IAAN,CAAWywE,cAAc,CAACryC,IAAD,EAAOx8B,KAAK,CAACC,WAAb,EAA0B2uE,oBAA1B,EAAgDQ,KAAK,CAAChzE,MAAtD,EAA8D2yE,aAA9D,EAA6EpyE,OAA7E,CAAzB;AACH;;AACD,cAAIA,OAAO,CAACuxC,KAAZ,EAAmB;AACfF,iBAAK,CAACG,OAAN;AACH;;AACD,eAAKohC,KAAL,CAAW/sE,SAAX,GAAuB,SAASwrC,KAAK,CAAC3vC,IAAN,CAAW,EAAX,CAAT,GAA0B,OAAjD;AACH,SAjBD;;AAkBA8wE,iBAAS,CAACxzE,SAAV,CAAoB2E,OAApB,GAA8B,YAAY;AACtCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKkD,cAAL,CAAoBO,QAApB;AACH,SAHD;;AAIAyvE,iBAAS,CAACxzE,SAAV,CAAoByD,eAApB,GAAsC,UAAUzC,OAAV,EAAmB;AACrD,cAAIC,KAAK,GAAGD,OAAO,CAACC,KAApB;AACA,cAAImC,QAAQ,GAAG,KAAKA,QAApB;AACAA,kBAAQ,CAACyD,SAAT,GAAqB,EAArB,CAHqD,CAG5B;;AACzBzD,kBAAQ,CAACiC,WAAT,CAAqB,KAAKlB,EAAL,GAAU+xB,aAAa,CAAC,wBAAwBj1B,KAAK,CAAC2B,QAAN,CAAe,WAAf,CAAxB,GAAsD,IAAtD,GACzC,gBADyC,GACtB3B,KAAK,CAAC2B,QAAN,CAAe,WAAf,CADsB,GACQ,IADR,GAEzC,iBAFyC,GAGzC,UAHyC,GAIzC,QAJwC,CAA5C;AAKA,eAAKgxE,KAAL,GAAa,KAAKzvE,EAAL,CAAQmD,aAAR,CAAsB,OAAtB,CAAb;AACH,SAVD;;AAWAksE,iBAAS,CAACxzE,SAAV,CAAoB0D,iBAApB,GAAwC,YAAY;AAChD4zB,uBAAa,CAAC,KAAKnzB,EAAN,CAAb;AACH,SAFD;;AAGA,eAAOqvE,SAAP;AACH,OA7C8B,CA6C7BpoB,SA7C6B,CAA/B;;AA+CA,UAAIyoB,SAAS;AAAG;AAAe,kBAAY;AACvC,iBAASA,SAAT,CAAmB3xE,KAAnB,EAA0BqhE,oBAA1B,EAAgD;AAC5C,cAAI1iC,IAAI,GAAG3+B,KAAK,CAACG,KAAjB;AACA,cAAIC,GAAG,GAAGJ,KAAK,CAACI,GAAhB;AACA,cAAIwxE,OAAO,GAAG,EAAd;AACA,cAAIL,KAAK,GAAG,EAAZ;AACA,cAAIhtE,QAAQ,GAAG,CAAC,CAAhB;;AACA,iBAAOo6B,IAAI,GAAGv+B,GAAd,EAAmB;AAAE;AACjB,gBAAIihE,oBAAoB,CAAChJ,WAArB,CAAiC15B,IAAjC,CAAJ,EAA4C;AACxCizC,qBAAO,CAACrxE,IAAR,CAAagE,QAAQ,GAAG,GAAxB,EADwC,CACV;AACjC,aAFD,MAGK;AACDA,sBAAQ;AACRqtE,qBAAO,CAACrxE,IAAR,CAAagE,QAAb;AACAgtE,mBAAK,CAAChxE,IAAN,CAAWo+B,IAAX;AACH;;AACDA,gBAAI,GAAG1C,OAAO,CAAC0C,IAAD,EAAO,CAAP,CAAd;AACH;;AACD,eAAK4yC,KAAL,GAAaA,KAAb;AACA,eAAKK,OAAL,GAAeA,OAAf;AACA,eAAKjX,GAAL,GAAW4W,KAAK,CAAChzE,MAAjB;AACH;;AACDozE,iBAAS,CAAC7zE,SAAV,CAAoB+zE,UAApB,GAAiC,UAAU7xE,KAAV,EAAiB;AAC9C,cAAI8xE,UAAU,GAAG,KAAKC,eAAL,CAAqB/xE,KAAK,CAACG,KAA3B,CAAjB,CAD8C,CACM;;AACpD,cAAI6xE,SAAS,GAAG,KAAKD,eAAL,CAAqB91C,OAAO,CAACj8B,KAAK,CAACI,GAAP,EAAY,CAAC,CAAb,CAA5B,CAAhB,CAF8C,CAEgB;;AAC9D,cAAI6xE,iBAAiB,GAAGxmE,IAAI,CAAC6I,GAAL,CAAS,CAAT,EAAYw9D,UAAZ,CAAxB;AACA,cAAII,gBAAgB,GAAGzmE,IAAI,CAAC8I,GAAL,CAAS,KAAKomD,GAAL,GAAW,CAApB,EAAuBqX,SAAvB,CAAvB,CAJ8C,CAK9C;;AACAC,2BAAiB,GAAGxmE,IAAI,CAAC0mE,IAAL,CAAUF,iBAAV,CAApB,CAN8C,CAMI;;AAClDC,0BAAgB,GAAGzmE,IAAI,CAAC6yB,KAAL,CAAW4zC,gBAAX,CAAnB,CAP8C,CAOG;;AACjD,cAAID,iBAAiB,IAAIC,gBAAzB,EAA2C;AACvC,mBAAO;AACHJ,wBAAU,EAAEG,iBADT;AAEHD,uBAAS,EAAEE,gBAFR;AAGHjyE,qBAAO,EAAE6xE,UAAU,KAAKG,iBAHrB;AAIH5xE,mBAAK,EAAE2xE,SAAS,KAAKE;AAJlB,aAAP;AAMH,WAPD,MAQK;AACD,mBAAO,IAAP;AACH;AACJ,SAnBD,CAtBuC,CA0CvC;AACA;AACA;AACA;AACA;;;AACAP,iBAAS,CAAC7zE,SAAV,CAAoBi0E,eAApB,GAAsC,UAAUpzC,IAAV,EAAgB;AAClD,cAAIizC,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIQ,SAAS,GAAG3mE,IAAI,CAAC6yB,KAAL,CAAWhC,QAAQ,CAAC,KAAKi1C,KAAL,CAAW,CAAX,CAAD,EAAgB5yC,IAAhB,CAAnB,CAAhB;;AACA,cAAIyzC,SAAS,GAAG,CAAhB,EAAmB;AACf,mBAAOR,OAAO,CAAC,CAAD,CAAP,GAAa,CAApB;AACH,WAFD,MAGK,IAAIQ,SAAS,IAAIR,OAAO,CAACrzE,MAAzB,EAAiC;AAClC,mBAAOqzE,OAAO,CAACA,OAAO,CAACrzE,MAAR,GAAiB,CAAlB,CAAP,GAA8B,CAArC;AACH,WAFI,MAGA;AACD,mBAAOqzE,OAAO,CAACQ,SAAD,CAAd;AACH;AACJ,SAZD;;AAaA,eAAOT,SAAP;AACH,OA7D8B,EAA/B;;AA+DA,UAAIU,QAAQ;AAAG;AAAe,kBAAY;AACtC,iBAASA,QAAT,CAAkBC,SAAlB,EAA6BC,YAA7B,EAA2C;AACvC,cAAIhB,KAAK,GAAGe,SAAS,CAACf,KAAtB;AACA,cAAIiB,UAAJ;AACA,cAAInnD,QAAJ;AACA,cAAIonD,MAAJ;;AACA,cAAIF,YAAJ,EAAkB;AACd;AACAlnD,oBAAQ,GAAGkmD,KAAK,CAAC,CAAD,CAAL,CAAS9yC,SAAT,EAAX;;AACA,iBAAK+zC,UAAU,GAAG,CAAlB,EAAqBA,UAAU,GAAGjB,KAAK,CAAChzE,MAAxC,EAAgDi0E,UAAU,EAA1D,EAA8D;AAC1D,kBAAIjB,KAAK,CAACiB,UAAD,CAAL,CAAkB/zC,SAAlB,OAAkCpT,QAAtC,EAAgD;AAC5C;AACH;AACJ;;AACDonD,kBAAM,GAAGhnE,IAAI,CAAC0mE,IAAL,CAAUZ,KAAK,CAAChzE,MAAN,GAAei0E,UAAzB,CAAT;AACH,WATD,MAUK;AACDC,kBAAM,GAAG,CAAT;AACAD,sBAAU,GAAGjB,KAAK,CAAChzE,MAAnB;AACH;;AACD,eAAKk0E,MAAL,GAAcA,MAAd;AACA,eAAKxB,MAAL,GAAcuB,UAAd;AACA,eAAKF,SAAL,GAAiBA,SAAjB;AACA,eAAKI,KAAL,GAAa,KAAKC,UAAL,EAAb;AACA,eAAKC,WAAL,GAAmB,KAAKC,gBAAL,EAAnB;AACH;;AACDR,gBAAQ,CAACv0E,SAAT,CAAmB60E,UAAnB,GAAgC,YAAY;AACxC,cAAIG,IAAI,GAAG,EAAX;;AACA,eAAK,IAAI/oE,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK0oE,MAA7B,EAAqC1oE,GAAG,EAAxC,EAA4C;AACxC,gBAAI2oE,KAAK,GAAG,EAAZ;;AACA,iBAAK,IAAIK,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9B,MAA7B,EAAqC8B,GAAG,EAAxC,EAA4C;AACxCL,mBAAK,CAACnyE,IAAN,CAAW,KAAKyyE,SAAL,CAAejpE,GAAf,EAAoBgpE,GAApB,CAAX;AACH;;AACDD,gBAAI,CAACvyE,IAAL,CAAUmyE,KAAV;AACH;;AACD,iBAAOI,IAAP;AACH,SAVD;;AAWAT,gBAAQ,CAACv0E,SAAT,CAAmBk1E,SAAnB,GAA+B,UAAUjpE,GAAV,EAAegpE,GAAf,EAAoB;AAC/C,iBAAO;AACHp0C,gBAAI,EAAE,KAAK2zC,SAAL,CAAef,KAAf,CAAqBxnE,GAAG,GAAG,KAAKknE,MAAX,GAAoB8B,GAAzC;AADH,WAAP;AAGH,SAJD;;AAKAV,gBAAQ,CAACv0E,SAAT,CAAmB+0E,gBAAnB,GAAsC,YAAY;AAC9C,cAAItB,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIwB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9B,MAA7B,EAAqC8B,GAAG,EAAxC,EAA4C;AACxCxB,iBAAK,CAAChxE,IAAN,CAAW,KAAKmyE,KAAL,CAAW,CAAX,EAAcK,GAAd,EAAmBp0C,IAA9B;AACH;;AACD,iBAAO4yC,KAAP;AACH,SAND;;AAOAc,gBAAQ,CAACv0E,SAAT,CAAmB+zE,UAAnB,GAAgC,UAAU7xE,KAAV,EAAiB;AAC7C,cAAIixE,MAAM,GAAG,KAAKA,MAAlB;AACA,cAAIgC,SAAS,GAAG,KAAKX,SAAL,CAAeT,UAAf,CAA0B7xE,KAA1B,CAAhB;AACA,cAAI1B,IAAI,GAAG,EAAX;;AACA,cAAI20E,SAAJ,EAAe;AACX,gBAAInB,UAAU,GAAGmB,SAAS,CAACnB,UAA3B;AAAA,gBAAuCE,SAAS,GAAGiB,SAAS,CAACjB,SAA7D;AACA,gBAAI5nE,KAAK,GAAG0nE,UAAZ;;AACA,mBAAO1nE,KAAK,IAAI4nE,SAAhB,EAA2B;AACvB,kBAAIjoE,GAAG,GAAG0B,IAAI,CAAC6yB,KAAL,CAAWl0B,KAAK,GAAG6mE,MAAnB,CAAV;AACA,kBAAIiC,SAAS,GAAGznE,IAAI,CAAC8I,GAAL,CAAS,CAACxK,GAAG,GAAG,CAAP,IAAYknE,MAArB,EAA6Be,SAAS,GAAG,CAAzC,CAAhB;AACA1zE,kBAAI,CAACiC,IAAL,CAAU;AACNwJ,mBAAG,EAAEA,GADC;AAENopE,wBAAQ,EAAE/oE,KAAK,GAAG6mE,MAFZ;AAGNmC,uBAAO,EAAE,CAACF,SAAS,GAAG,CAAb,IAAkBjC,MAHrB;AAINhxE,uBAAO,EAAEgzE,SAAS,CAAChzE,OAAV,IAAqBmK,KAAK,KAAK0nE,UAJlC;AAKNzxE,qBAAK,EAAE4yE,SAAS,CAAC5yE,KAAV,IAAoB6yE,SAAS,GAAG,CAAb,KAAoBlB;AALxC,eAAV;AAOA5nE,mBAAK,GAAG8oE,SAAR;AACH;AACJ;;AACD,iBAAO50E,IAAP;AACH,SArBD;;AAsBA,eAAO+zE,QAAP;AACH,OAxE6B,EAA9B;;AA0EA,UAAIgB,MAAM;AAAG;AAAe,kBAAY;AACpC,iBAASA,MAAT,GAAkB;AACd,eAAKC,kBAAL,GAA0BjnC,OAAO,CAAC,KAAKknC,mBAAN,CAAjC;AACA,eAAKC,kBAAL,GAA0BnnC,OAAO,CAAC,KAAKonC,cAAN,CAAjC;AACA,eAAKh+B,eAAL,GAAuBpJ,OAAO,CAAC,KAAKqnC,gBAAN,CAA9B;AACA,eAAKC,cAAL,GAAsBtnC,OAAO,CAAC,KAAKunC,iBAAN,CAA7B;AACA,eAAKC,gBAAL,GAAwBxnC,OAAO,CAAC,KAAKunC,iBAAN,CAA/B;AACH;;AACDP,cAAM,CAACv1E,SAAP,CAAiBg2E,UAAjB,GAA8B,UAAU3xE,KAAV,EAAiBC,WAAjB,EAA8B4B,gBAA9B,EAAgDjC,QAAhD,EAA0D0C,SAA1D,EAAqE;AAC/F,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAIP,YAAY,GAAGL,KAAK,CAACK,YAAzB;AACA,cAAIwxE,SAAS,GAAG,KAAKv+B,eAAL,CAAqBrxC,KAArB,CAA2B,IAA3B,EAAiC,CAACjC,KAAK,CAACI,UAAP,EAAmBC,YAAnB,EAAiCJ,WAAjC,EAA8C4B,gBAA9C,EAAgES,SAAhE,EAA2E/E,MAA3E,CAAkFq0E,SAAlF,CAAjC,CAAhB;AACA,iBAAO;AACHE,6BAAiB,EAAE,KAAKT,kBAAL,CAAwBpvE,KAAxB,CAA8B,IAA9B,EAAoC,CAACjC,KAAK,CAACkiB,aAAP,EAAsB7hB,YAAtB,EAAoCiC,SAApC,EAA+C/E,MAA/C,CAAsDq0E,SAAtD,CAApC,CADhB;AAEHG,4BAAgB,EAAE,KAAKZ,kBAAL,CAAwBlvE,KAAxB,CAA8B,IAA9B,EAAoC,CAACjC,KAAK,CAAC0pB,aAAP,EAAsBzpB,WAAtB,EAAmC4B,gBAAnC,EAAqDjC,QAArD,EAA+D0C,SAA/D,EAA0E/E,MAA1E,CAAiFq0E,SAAjF,CAApC,CAFf;AAGHI,uBAAW,EAAEH,SAAS,CAAC/vE,EAHpB;AAIHmwE,uBAAW,EAAEJ,SAAS,CAACz9B,EAJpB;AAKH4D,qBAAS,EAAE,KAAKw5B,cAAL,CAAoBvvE,KAApB,CAA0B,IAA1B,EAAgC,CAACjC,KAAK,CAACg4C,SAAP,EAAkB33C,YAAlB,EAAgCJ,WAAhC,EAA6C4B,gBAA7C,EAA+DS,SAA/D,EAA0E/E,MAA1E,CAAiFq0E,SAAjF,CAAhC,CALR;AAMH/qD,uBAAW,EAAE,KAAK6qD,gBAAL,CAAsBzvE,KAAtB,CAA4B,IAA5B,EAAkC,CAACjC,KAAK,CAAC6mB,WAAP,EAAoBxmB,YAApB,EAAkCJ,WAAlC,EAA+C4B,gBAA/C,EAAiES,SAAjE,EAA4E/E,MAA5E,CAAmFq0E,SAAnF,CAAlC,CANV;AAOHp0D,0BAAc,EAAExd,KAAK,CAACwd;AAPnB,WAAP,CAP+F,CAe5F;AACN,SAhBD;;AAiBA0zD,cAAM,CAACv1E,SAAP,CAAiBu2E,YAAjB,GAAgC,WAAU;AAC1C11C,YADgC,EAC1Bl6B,SAD0B,EACf;AACb,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,iBAAO,KAAK0wE,cAAL,CAAoBrvE,KAApB,CAA0B,IAA1B,EAAgC,CAAC;AAAEpE,iBAAK,EAAE;AAAEG,mBAAK,EAAEw+B,IAAT;AAAev+B,iBAAG,EAAE87B,KAAK,CAACyC,IAAD,EAAO,CAAP;AAAzB,aAAT;AAA+C5+B,kBAAM,EAAE;AAAvD,WAAD,EACnC,EADmC,EAEnC0E,SAFmC,EAExB/E,MAFwB,CAEjBq0E,SAFiB,CAAhC,CAAP;AAGH,SATD;;AAUAV,cAAM,CAACv1E,SAAP,CAAiBy1E,mBAAjB,GAAuC,UAAU1nD,aAAV,EAAyBzpB,WAAzB,EAAsC4B,gBAAtC,EAAwDjC,QAAxD,EAAkE0C,SAAlE,EAA6E;AAChH,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAI,CAAC8oB,aAAL,EAAoB;AAChB,mBAAO,EAAP;AACH;;AACD,iBAAO,KAAK6nD,gBAAL,CAAsBtvE,KAAtB,CAA4B,IAA5B,EAAkC,CAAC8kC,eAAe,CAACrd,aAAD,EAAgByoD,kBAAkB,CAAClyE,WAAD,EAAcsa,OAAO,CAAC1Y,gBAAD,CAArB,CAAlC,EAA4EjC,QAA5E,CAAhB,EACrC,EADqC,EAErCK,WAFqC,EAGrC4B,gBAHqC,EAIrCS,SAJqC,EAI1B/E,MAJ0B,CAInBq0E,SAJmB,CAAlC,EAI2Bx9B,EAJlC;AAKH,SAbD;;AAcA88B,cAAM,CAACv1E,SAAP,CAAiB41E,gBAAjB,GAAoC,UAAUnxE,UAAV,EAAsBC,YAAtB,EAAoCJ,WAApC,EAAiD4B,gBAAjD,EAAmES,SAAnE,EAA8E;AAC9G,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAIR,UAAJ,EAAgB;AACZ,gBAAIgyE,QAAQ,GAAG9+B,eAAe,CAAClzC,UAAD,EAAaC,YAAb,EAA2B8xE,kBAAkB,CAAClyE,WAAD,EAAcsa,OAAO,CAAC1Y,gBAAD,CAArB,CAA7C,EAAuFA,gBAAvF,CAA9B;AACA,mBAAO;AACHuyC,gBAAE,EAAE,KAAKi+B,gBAAL,CAAsBD,QAAQ,CAACh+B,EAA/B,EAAmC9xC,SAAnC,EAA8CsvE,SAA9C,CADD;AAEH9vE,gBAAE,EAAE,KAAKuwE,gBAAL,CAAsBD,QAAQ,CAACtwE,EAA/B,EAAmCQ,SAAnC,EAA8CsvE,SAA9C;AAFD,aAAP;AAIH,WAND,MAOK;AACD,mBAAO;AAAEx9B,gBAAE,EAAE,EAAN;AAAUtyC,gBAAE,EAAE;AAAd,aAAP;AACH;AACJ,SAfD;;AAgBAovE,cAAM,CAACv1E,SAAP,CAAiB81E,iBAAjB,GAAqC,UAAUxzD,WAAV,EAAuB5d,YAAvB,EAAqCJ,WAArC,EAAkD4B,gBAAlD,EAAoES,SAApE,EAA+E;AAChH,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAI,CAACqd,WAAL,EAAkB;AACd,mBAAO,IAAP;AACH;;AACD,cAAIm0D,QAAQ,GAAG9+B,eAAe,CAACr1B,WAAW,CAACE,aAAb,EAA4B9d,YAA5B,EAA0C8xE,kBAAkB,CAAClyE,WAAD,EAAcsa,OAAO,CAAC1Y,gBAAD,CAArB,CAA5D,EAAsGA,gBAAtG,CAA9B;AACA,iBAAO;AACH1F,gBAAI,EAAE,KAAKk2E,gBAAL,CAAsBD,QAAQ,CAACtwE,EAA/B,EAAmCQ,SAAnC,EAA8CsvE,SAA9C,CADH;AAEHU,6BAAiB,EAAEr0D,WAAW,CAACC,cAAZ,CAA2ByB,SAF3C;AAGHvB,mBAAO,EAAEH,WAAW,CAACG,OAHlB;AAIHm0D,qBAAS,EAAEt0D,WAAW,CAACI;AAJpB,WAAP;AAMH,SAfD;;AAgBA6yD,cAAM,CAACv1E,SAAP,CAAiB21E,cAAjB,GAAkC,UAAUn3D,QAAV,EAAoB9Z,YAApB,EAAkCiC,SAAlC,EAA6C;AAC3E,cAAIsvE,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGwJ,SAAS,CAAChO,MAAhC,EAAwCwE,EAAE,EAA1C,EAA8C;AAC1CgxE,qBAAS,CAAChxE,EAAE,GAAG,CAAN,CAAT,GAAoBwJ,SAAS,CAACxJ,EAAD,CAA7B;AACH;;AACD,cAAI,CAACuZ,QAAL,EAAe;AACX,mBAAO,EAAP;AACH;;AACD,cAAIrd,UAAU,GAAGq8D,mBAAmB,CAACh/C,QAAD,EAAW9Z,YAAX,EAAyBiC,SAAS,CAAC3F,OAAV,CAAkBiD,QAA3C,CAApC;AACA,cAAIzD,IAAI,GAAG,KAAKuzE,UAAL,CAAgBztE,KAAhB,CAAsB,IAAtB,EAA4B,CAACkY,QAAQ,CAACtc,KAAV,EAAiBN,MAAjB,CAAwBq0E,SAAxB,CAA5B,CAAX;;AACA,eAAK,IAAIl1E,EAAE,GAAG,CAAT,EAAYg4C,MAAM,GAAGv4C,IAA1B,EAAgCO,EAAE,GAAGg4C,MAAM,CAACt4C,MAA5C,EAAoDM,EAAE,EAAtD,EAA0D;AACtD,gBAAID,GAAG,GAAGi4C,MAAM,CAACh4C,EAAD,CAAhB;AACAD,eAAG,CAAC6F,SAAJ,GAAgBA,SAAhB;AACA7F,eAAG,CAACK,UAAJ,GAAiBA,UAAjB;AACH;;AACD,iBAAOX,IAAP;AACH,SAhBD;AAiBA;;;;;AAGA+0E,cAAM,CAACv1E,SAAP,CAAiB02E,gBAAjB,GAAoC,UAAUtwE,WAAV,EAAuBO,SAAvB,EAAkC;AACtEsvE,iBADoC,EACzB;AACP,cAAIz1E,IAAI,GAAG,EAAX;;AACA,eAAK,IAAIyE,EAAE,GAAG,CAAT,EAAYoB,aAAa,GAAGD,WAAjC,EAA8CnB,EAAE,GAAGoB,aAAa,CAAC5F,MAAjE,EAAyEwE,EAAE,EAA3E,EAA+E;AAC3E,gBAAI9D,UAAU,GAAGkF,aAAa,CAACpB,EAAD,CAA9B;AACAzE,gBAAI,CAACiC,IAAL,CAAU6D,KAAV,CAAgB9F,IAAhB,EAAsB,KAAKq2E,eAAL,CAAqB11E,UAArB,EAAiCwF,SAAjC,EAA4CsvE,SAA5C,CAAtB;AACH;;AACD,iBAAOz1E,IAAP;AACH,SARD;AASA;;;;;AAGA+0E,cAAM,CAACv1E,SAAP,CAAiB62E,eAAjB,GAAmC,UAAU11E,UAAV,EAAsBwF,SAAtB,EAAiC;AACpEsvE,iBADmC,EACxB;AACP,cAAIz1E,IAAI,GAAG,KAAKuzE,UAAL,CAAgBztE,KAAhB,CAAsB,IAAtB,EAA4B,CAACnF,UAAU,CAACe,KAAZ,EAAmBN,MAAnB,CAA0Bq0E,SAA1B,CAA5B,CAAX;;AACA,eAAK,IAAIhxE,EAAE,GAAG,CAAT,EAAYw0C,MAAM,GAAGj5C,IAA1B,EAAgCyE,EAAE,GAAGw0C,MAAM,CAACh5C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAG24C,MAAM,CAACx0C,EAAD,CAAhB;AACAnE,eAAG,CAAC6F,SAAJ,GAAgBA,SAAhB;AACA7F,eAAG,CAACK,UAAJ,GAAiBA,UAAjB;AACAL,eAAG,CAACqB,OAAJ,GAAchB,UAAU,CAACgB,OAAX,IAAsBrB,GAAG,CAACqB,OAAxC;AACArB,eAAG,CAACyB,KAAJ,GAAYpB,UAAU,CAACoB,KAAX,IAAoBzB,GAAG,CAACyB,KAApC;AACH;;AACD,iBAAO/B,IAAP;AACH,SAXD;;AAYA,eAAO+0E,MAAP;AACH,OA9H2B,EAA5B;AA+HA;;;;;;;AAKA,eAASiB,kBAAT,CAA4BlyE,WAA5B,EAAyCwyE,iBAAzC,EAA4D;AACxD,YAAI50E,KAAK,GAAGoC,WAAW,CAAC2B,WAAxB;;AACA,YAAI6wE,iBAAJ,EAAuB;AACnB,iBAAO50E,KAAP;AACH;;AACD,eAAO;AACHG,eAAK,EAAE+7B,KAAK,CAACl8B,KAAK,CAACG,KAAP,EAAciC,WAAW,CAAC0qB,OAAZ,CAAoBhK,YAAlC,CADT;AAEH1iB,aAAG,EAAE87B,KAAK,CAACl8B,KAAK,CAACI,GAAP,EAAYgC,WAAW,CAAC2qB,OAAZ,CAAoBjK,YAApB,GAAmC,KAA/C,CAFP,CAE6D;;AAF7D,SAAP;AAIH,O,CAED;AACA;;;AACA,UAAI+xD,OAAO,GAAG,OAAd;;;;;;;;;;;;;;;;ACn4QA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASaC,e;AAYT,iCAAoBC,UAApB,EAA4C;AAAA;;AAAxB,eAAAA,UAAA,GAAAA,UAAA;AAXH,eAAAC,OAAA,GAAU,2BAAV;AACjB,eAAAC,WAAA,GAAc;AACVC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB;AADK,aAAhB;AADC,WAAd;AAKA,eAAAC,UAAA,GAA0C,IAAI,oDAAJ,CACtC,EADsC,CAA1C;AAK+C;;;;0CAI/B;AACZ,mBAAO,KAAKC,UAAZ;AACH;;;4CACc;AACX,mBAAO,KAAKL,UAAL,CAAgBhiC,GAAhB,CAAgC,KAAKiiC,OAArC,EACFK,IADE,CAEC,kEAAW,KAAKC,YAAhB,CAFD,CAAP;AAIH;;;4CAEiBvzE,Q,EAAkB;AAChC,iBAAKqzE,UAAL,GAAkBrzE,QAAlB;AACH;;;yCACcA,Q,EAAkB;AAC7B,iBAAKqzE,UAAL,GAAkBrzE,QAAlB;AACH;;;uCACYw0D,K,EAAO;AAChB,gBAAI/I,YAAY,GAAG,EAAnB;;AACA,gBAAI+I,KAAK,CAACA,KAAN,YAAuBgf,UAA3B,EAAuC;AACnC;AACA/nB,0BAAY,GAAG+I,KAAK,CAACA,KAAN,CAAY9I,OAA3B;AACH,aAHD,MAGO;AACH;AACAD,0BAAY,yBAAkB+I,KAAK,CAACzJ,MAAxB,wBAA4CyJ,KAAK,CAAC9I,OAAlD,CAAZ;AACH;;AACD8C,mBAAO,CAACilB,GAAR,CAAYhoB,YAAZ;AACA,mBAAO,wDAAWA,YAAX,CAAP;AACH;;;8BA9BO;AACJ,mBAAO,KAAK2nB,UAAL,CAAgBntE,KAAvB;AACH;;;;;;;yBAfQ8sE,e,EAAe,uH;AAAA,O;;;eAAfA,e;AAAe,iBAAfA,eAAe;;;;;wEAAfA,e,EAAe;gBAD3B;AAC2B,U;;;;;;;;;;;;;;;;;;;;oBCP5B;;AAIAW,YAAM,CAAC3iD,OAAP,GAAiB,SAAS4iD,KAAT,CAAe55C,CAAf,EAAkB1+B,CAAlB,EAAqB;AACpC,YAAI0+B,CAAC,KAAK1+B,CAAV,EAAa,OAAO,IAAP;;AAEb,YAAI0+B,CAAC,IAAI1+B,CAAL,IAAU,OAAO0+B,CAAP,IAAY,QAAtB,IAAkC,OAAO1+B,CAAP,IAAY,QAAlD,EAA4D;AAC1D,cAAI0+B,CAAC,CAACj+B,WAAF,KAAkBT,CAAC,CAACS,WAAxB,EAAqC,OAAO,KAAP;AAErC,cAAIU,MAAJ,EAAY0G,CAAZ,EAAeylB,IAAf;;AACA,cAAIltB,KAAK,CAAC6pB,OAAN,CAAcyU,CAAd,CAAJ,EAAsB;AACpBv9B,kBAAM,GAAGu9B,CAAC,CAACv9B,MAAX;AACA,gBAAIA,MAAM,IAAInB,CAAC,CAACmB,MAAhB,EAAwB,OAAO,KAAP;;AACxB,iBAAK0G,CAAC,GAAG1G,MAAT,EAAiB0G,CAAC,OAAO,CAAzB;AACE,kBAAI,CAACywE,KAAK,CAAC55C,CAAC,CAAC72B,CAAD,CAAF,EAAO7H,CAAC,CAAC6H,CAAD,CAAR,CAAV,EAAwB,OAAO,KAAP;AAD1B;;AAEA,mBAAO,IAAP;AACD;;AAID,cAAI62B,CAAC,CAACj+B,WAAF,KAAkB83E,MAAtB,EAA8B,OAAO75C,CAAC,CAAC8jB,MAAF,KAAaxiD,CAAC,CAACwiD,MAAf,IAAyB9jB,CAAC,CAAC85C,KAAF,KAAYx4E,CAAC,CAACw4E,KAA9C;AAC9B,cAAI95C,CAAC,CAACp3B,OAAF,KAAcrH,MAAM,CAACS,SAAP,CAAiB4G,OAAnC,EAA4C,OAAOo3B,CAAC,CAACp3B,OAAF,OAAgBtH,CAAC,CAACsH,OAAF,EAAvB;AAC5C,cAAIo3B,CAAC,CAAC+5C,QAAF,KAAex4E,MAAM,CAACS,SAAP,CAAiB+3E,QAApC,EAA8C,OAAO/5C,CAAC,CAAC+5C,QAAF,OAAiBz4E,CAAC,CAACy4E,QAAF,EAAxB;AAE9CnrD,cAAI,GAAGrtB,MAAM,CAACqtB,IAAP,CAAYoR,CAAZ,CAAP;AACAv9B,gBAAM,GAAGmsB,IAAI,CAACnsB,MAAd;AACA,cAAIA,MAAM,KAAKlB,MAAM,CAACqtB,IAAP,CAAYttB,CAAZ,EAAemB,MAA9B,EAAsC,OAAO,KAAP;;AAEtC,eAAK0G,CAAC,GAAG1G,MAAT,EAAiB0G,CAAC,OAAO,CAAzB;AACE,gBAAI,CAAC5H,MAAM,CAACS,SAAP,CAAiBJ,cAAjB,CAAgCU,IAAhC,CAAqChB,CAArC,EAAwCstB,IAAI,CAACzlB,CAAD,CAA5C,CAAL,EAAuD,OAAO,KAAP;AADzD;;AAGA,eAAKA,CAAC,GAAG1G,MAAT,EAAiB0G,CAAC,OAAO,CAAzB,GAA6B;AAC3B,gBAAIwiB,GAAG,GAAGiD,IAAI,CAACzlB,CAAD,CAAd;AAEA,gBAAI,CAACywE,KAAK,CAAC55C,CAAC,CAACrU,GAAD,CAAF,EAASrqB,CAAC,CAACqqB,GAAD,CAAV,CAAV,EAA4B,OAAO,KAAP;AAC7B;;AAED,iBAAO,IAAP;AACD,SAnCmC,CAqCpC;;;AACA,eAAOqU,CAAC,KAAGA,CAAJ,IAAS1+B,CAAC,KAAGA,CAApB;AACD,OAvCD;;;;;;;;;;;;;;;;;ACNA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACuFU;;AACE;;AAA6C;AAAA;;AAAA;;AAAA;AAAA;;AAC3C;;AAA0B;;AAAM;;AAClC;;AACF;;;;UD3EG04E,mB;AAMX,qCACS3sE,SADT,EAEkCE,IAFlC,EAGS1B,eAHT,EAIUF,EAJV,EAIyB;AAAA;;AAHhB,eAAA0B,SAAA,GAAAA,SAAA;AACyB,eAAAE,IAAA,GAAAA,IAAA;AACzB,eAAA1B,eAAA,GAAAA,eAAA;AACC,eAAAF,EAAA,GAAAA,EAAA;AALV,eAAAsuE,aAAA,GAAgB,KAAhB;AAqBA,eAAAC,WAAA,GAAc,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAChC,0DAAWntE,QADqB,CAEhC;AAFgC,WAApB,CAAd,CAhByB,CAEvB;;AACA,eAAKS,MAAL,GAAcD,IAAI,CAACC,MAAnB;;AACA,cAAI,KAAKA,MAAL,KAAgB,MAApB,EAA4B;AAC1B,iBAAKjB,WAAL,GAAmBgB,IAAI,CAACtH,QAAL,CAAcpB,KAAjC;AACA,iBAAKoB,QAAL,GAAgBsH,IAAI,CAACtH,QAArB;AACA,iBAAKg0E,aAAL,GAAqB,IAArB;AACD,WAJD,MAIO;AACL,iBAAK1tE,WAAL,GAAmB,WAAnB;AACA,iBAAKtG,QAAL,GAAgB,IAAI,wDAAJ,CAAa,EAAb,CAAhB;AACA,iBAAKg0E,aAAL,GAAqB,KAArB;AACD;;AAED,eAAKE,YAAL,GAAoB,KAAK1tE,iBAAL,EAApB;AACD;;;;4CAKiB;AAChB,mBAAO,KAAKytE,WAAL,CAAiBE,QAAjB,CAA0B,UAA1B,IACH,gBADG,GAEH,KAAKF,WAAL,CAAiBE,QAAjB,CAA0B,OAA1B,IACE,mBADF,GAEE,EAJN;AAKD;;;8CACgB;AACf,mBAAO,KAAKzuE,EAAL,CAAQkB,KAAR,CAAc;AACnBC,gBAAE,EAAE,CAAC,KAAK7G,QAAL,CAAc6G,EAAf,CADe;AAEnBjI,mBAAK,EAAE,CACL,KAAKoB,QAAL,CAAcpB,KADT,EAEL,CAAC,0DAAWkI,QAAZ,CAFK,CAFY;AAMnBE,sBAAQ,EAAE,CAAC,KAAKhH,QAAL,CAAcgH,QAAf,CANS;AAOnBC,uBAAS,EAAE,CAAC,KAAKjH,QAAL,CAAciH,SAAf,EACX,CAAC,0DAAWH,QAAZ,CADW,CAPQ;AAUnBI,qBAAO,EAAE,CAAC,KAAKlH,QAAL,CAAckH,OAAf,EACT,CAAC,0DAAWJ,QAAZ,CADS,CAVU;AAanBK,qBAAO,EAAE,CACP,KAAKnH,QAAL,CAAcmH,OADP;AAbU,aAAd,CAAP;AAgBD;;;mCACQ,CACP;AACD;;;wCACa;AACZ,iBAAKvB,eAAL,CAAqBwuE,cAArB,CAAoC,KAAKF,YAAL,CAAkBG,WAAlB,EAApC;AACA,iBAAKjtE,SAAL,CAAe+6D,KAAf,CAAqB,QAArB;AACD;;;sCACQ;AACP,iBAAK/6D,SAAL,CAAe+6D,KAAf;AACD;;;uCACgB;AACf,iBAAKv8D,eAAL,CAAqB0uE,iBAArB,CAAuC,KAAKJ,YAAL,CAAkBG,WAAlB,EAAvC;AACA,iBAAKjtE,SAAL,CAAe+6D,KAAf,CAAqB,QAArB;AACD;;;;;;;yBApEU4R,mB,EAAmB,sI,EAAA,gEAQpB,wEARoB,C,EAQL,kI,EAAA,2H;AAAA,O;;;cARdA,mB;AAAmB,wC;AAAA,iB;AAAA,gB;AAAA,08C;AAAA;AAAA;AChBhC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAe;;AACnB;;AACF;;AACF;;AACA;;AAAwB;AAAA,qBAAS,IAAA3sE,SAAA,QAAT;AAA0B,aAA1B;;AACtB;;AAAU;;AAAK;;AACjB;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAW;;AAAK;;AAChB;;AACA;;AAAoB;;AAAa;;AACnC;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAW;;AAAQ;;AACnB;;AACE;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAW;;AAAU;;AACrB;;AAEA;;AAAuE;;AAAK;;AAC5E;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAW;;AAAQ;;AACnB;;AAEA;;AAAqE;;AAAK;;AAC1E;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAW;;AAAa;;AACxB;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AACE;AAAA,qBAAS,IAAAmtE,UAAA,EAAT;AAAqB,aAArB;;AAAuB;;AAAI;;AAC7B;;AAAuC;AAAA,qBAAS,IAAAntE,SAAA,QAAT;AAA0B,aAA1B;;AAA0C;;AAAM;;AACzF;;AACF;;AACA;;AACE;;AAKF;;AACF;;AACF;;AACF;;AACF;;;;;;;;AA1FY;;AAAA;;AASwB;;AAAA;;AAeV;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAW8B;;AAAA,gGAAgC,aAAhC,EAAgC,GAAhC;;AAExB;;AAAA;;AAOsB;;AAAA,gGAA8B,aAA9B,EAA8B,GAA9B;;AAEtB;;AAAA;;AAiBsB;;AAAA,yFAAe,UAAf,EAAe,uBAAf;;AAMZ;;AAAA;;;;;;;;;wEDvE7B2sE,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT/pE,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKqB,U;;;;;;oBAQ3B,oD;qBAAO,wE;;;;;;;;;;;;;;;;;;;;;;;;;AExBZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;AAQA;;;;;;;;;;;;;;;AAcA;;;AAEA,UAAI/O,eAAa,GAAG,uBAASC,CAAT,EAAYC,CAAZ,EAAe;AAC/BF,uBAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,mBAAS,EAAE;AAAb,qBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,WAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,eAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,gBAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAA1C;AAAwD,SAF9E;;AAGA,eAAOP,eAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,OALD;;AAOA,eAASO,SAAT,CAAmBR,CAAnB,EAAsBC,CAAtB,EAAyB;AACrBF,uBAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,iBAASQ,EAAT,GAAc;AAAE,eAAKC,WAAL,GAAmBV,CAAnB;AAAuB;;AACvCA,SAAC,CAACW,SAAF,GAAcV,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACU,MAAP,CAAcX,CAAd,CAAb,IAAiCQ,EAAE,CAACE,SAAH,GAAeV,CAAC,CAACU,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH;;AAED,UAAIuO,QAAQ,GAAG,oBAAW;AACtBA,gBAAQ,GAAG9O,MAAM,CAACqN,MAAP,IAAiB,SAASyB,QAAT,CAAkBC,CAAlB,EAAqB;AAC7C,eAAK,IAAIC,CAAJ,EAAOpH,CAAC,GAAG,CAAX,EAAcqH,CAAC,GAAGC,SAAS,CAAChO,MAAjC,EAAyC0G,CAAC,GAAGqH,CAA7C,EAAgDrH,CAAC,EAAjD,EAAqD;AACjDoH,aAAC,GAAGE,SAAS,CAACtH,CAAD,CAAb;;AACA,iBAAK,IAAIxH,CAAT,IAAc4O,CAAd;AAAiB,kBAAIhP,MAAM,CAACS,SAAP,CAAiBJ,cAAjB,CAAgCU,IAAhC,CAAqCiO,CAArC,EAAwC5O,CAAxC,CAAJ,EAAgD2O,CAAC,CAAC3O,CAAD,CAAD,GAAO4O,CAAC,CAAC5O,CAAD,CAAR;AAAjE;AACH;;AACD,iBAAO2O,CAAP;AACH,SAND;;AAOA,eAAOD,QAAQ,CAAC/H,KAAT,CAAe,IAAf,EAAqBmI,SAArB,CAAP;AACH,OATD;;AAWA,UAAIgqE,2BAA2B;AAAG;AAAe,gBAAUt4E,MAAV,EAAkB;AAC/DN,iBAAS,CAAC44E,2BAAD,EAA8Bt4E,MAA9B,CAAT;;AACA,iBAASs4E,2BAAT,GAAuC;AACnC,iBAAOt4E,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH,SAJ8D,CAK/D;;;AACAgqE,mCAA2B,CAACz4E,SAA5B,CAAsC05D,gBAAtC,GAAyD,UAAUlT,YAAV,EAAwByS,gBAAxB,EAA0CK,aAA1C,EAAyD;AAC9G,cAAI9yD,OAAO,GAAG,KAAKA,OAAnB;;AACA,cAAI4B,WAAW,GAAGjI,MAAM,CAACH,SAAP,CAAiB05D,gBAAjB,CAAkCp5D,IAAlC,CAAuC,IAAvC,EAA6CkmD,YAA7C,EAA2DyS,gBAA3D,EAA6EK,aAA7E,CAAlB;;AACA,cAAIj3D,KAAK,GAAG+F,WAAW,CAAC/F,KAAxB;AACA,cAAIC,GAAG,GAAG8F,WAAW,CAAC9F,GAAtB;AACA,cAAIo2E,SAAJ,CAL8G,CAM9G;;AACA,cAAI,iBAAiBx/C,IAAjB,CAAsB+/B,gBAAtB,CAAJ,EAA6C;AACzC52D,iBAAK,GAAGmE,OAAO,CAAC4vD,WAAR,CAAoB/zD,KAApB,CAAR,CADyC,CAEzC;;AACAq2E,qBAAS,GAAGlyE,OAAO,CAAC4vD,WAAR,CAAoB9zD,GAApB,CAAZ;;AACA,gBAAIo2E,SAAS,CAAC9xE,OAAV,OAAwBtE,GAAG,CAACsE,OAAJ,EAA5B,EAA2C;AACvCtE,iBAAG,GAAG,oEAASo2E,SAAT,EAAoB,CAApB,CAAN;AACH;AACJ,WAd6G,CAe9G;;;AACA,cAAI,KAAKx3E,OAAL,CAAaqlD,SAAb,IACA,KAAKrlD,OAAL,CAAaysB,cADjB,EACiC;AAC7B,gBAAIgnD,MAAM,GAAGhnE,IAAI,CAAC0mE,IAAL,EAAU;AACvB,iFAAUhyE,KAAV,EAAiBC,GAAjB,CADa,CAAb;AAEAA,eAAG,GAAG,oEAASA,GAAT,EAAc,IAAIqyE,MAAlB,CAAN;AACH;;AACD,iBAAO;AAAEtyE,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAEA;AAArB,WAAP;AACH,SAvBD;;AAwBA,eAAOm2E,2BAAP;AACH,OA/BgD,CA+B/C,uEA/B+C,CAAjD;AAiCA;;;;;;;;;;;;;;;AAaA,UAAIE,OAAO;AAAG;AAAe,kBAAY;AACrC,iBAASA,OAAT,CAAiBz3E,OAAjB,EAA0B;AACtB,cAAIb,KAAK,GAAG,IAAZ;;AACA,eAAKu4E,QAAL,GAAgB,IAAhB;AACA,eAAK3jE,MAAL,GAAc,EAAd,CAHsB,CAGJ;AAClB;;AACA,eAAK4jE,iBAAL,GAAyB,UAAUppE,EAAV,EAAc;AACnC;AACA,gBAAIpP,KAAK,CAAC8D,EAAN,IAAY,CAAC9D,KAAK,CAAC8D,EAAN,CAAS+d,QAAT,CAAkBzS,EAAE,CAACkB,MAArB,CAAjB,EAA+C;AAC3CtQ,mBAAK,CAACy4E,IAAN;AACH;AACJ,WALD;;AAMA,eAAK53E,OAAL,GAAeA,OAAf;AACH,SAboC,CAcrC;;;AACAy3E,eAAO,CAAC34E,SAAR,CAAkB+4E,IAAlB,GAAyB,YAAY;AACjC,cAAI,KAAKH,QAAT,EAAmB;AACf,gBAAI,CAAC,KAAKz0E,EAAV,EAAc;AACV,mBAAKC,MAAL;AACH;;AACD,iBAAKD,EAAL,CAAQ0P,KAAR,CAAcC,OAAd,GAAwB,EAAxB;AACA,iBAAKY,QAAL;AACA,iBAAKkkE,QAAL,GAAgB,KAAhB;AACA,iBAAK5oE,OAAL,CAAa,MAAb;AACH;AACJ,SAVD,CAfqC,CA0BrC;;;AACA2oE,eAAO,CAAC34E,SAAR,CAAkB84E,IAAlB,GAAyB,YAAY;AACjC,cAAI,CAAC,KAAKF,QAAV,EAAoB;AAChB,iBAAKz0E,EAAL,CAAQ0P,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACA,iBAAK8kE,QAAL,GAAgB,IAAhB;AACA,iBAAK5oE,OAAL,CAAa,MAAb;AACH;AACJ,SAND,CA3BqC,CAkCrC;;;AACA2oE,eAAO,CAAC34E,SAAR,CAAkBoE,MAAlB,GAA2B,YAAY;AACnC,cAAI/D,KAAK,GAAG,IAAZ;;AACA,cAAIa,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIiD,EAAE,GAAG,KAAKA,EAAL,GAAU,yEAAc,KAAd,EAAqB;AACpC2D,qBAAS,EAAE,iBAAiB5G,OAAO,CAAC4G,SAAR,IAAqB,EAAtC,CADyB;AAEpC+L,iBAAK,EAAE;AACHU,iBAAG,EAAE,GADF;AAEHD,kBAAI,EAAE;AAFH;AAF6B,WAArB,CAAnB;;AAOA,cAAI,OAAOpT,OAAO,CAAC20B,OAAf,KAA2B,UAA/B,EAA2C;AACvC30B,mBAAO,CAAC20B,OAAR,CAAgB1xB,EAAhB;AACH;;AACDjD,iBAAO,CAACkC,QAAR,CAAiBiC,WAAjB,CAA6BlB,EAA7B,EAbmC,CAcnC;;AACA,sFAAiBA,EAAjB,EAAqB,OAArB,EAA8B,WAA9B,EAA2C,UAAUsL,EAAV,EAAc;AACrDpP,iBAAK,CAACy4E,IAAN;AACH,WAFD;;AAGA,cAAI53E,OAAO,CAAC83E,QAAZ,EAAsB;AAClB9oE,oBAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC,KAAK0oE,iBAA5C;AACH;AACJ,SArBD,CAnCqC,CAyDrC;;;AACAF,eAAO,CAAC34E,SAAR,CAAkB2E,OAAlB,GAA4B,YAAY;AACpC,eAAKm0E,IAAL;;AACA,cAAI,KAAK30E,EAAT,EAAa;AACT,qFAAc,KAAKA,EAAnB;AACA,iBAAKA,EAAL,GAAU,IAAV;AACH;;AACD+L,kBAAQ,CAACK,mBAAT,CAA6B,WAA7B,EAA0C,KAAKsoE,iBAA/C;AACH,SAPD,CA1DqC,CAkErC;;;AACAF,eAAO,CAAC34E,SAAR,CAAkB0U,QAAlB,GAA6B,YAAY;AACrC,cAAIxT,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIiD,EAAE,GAAG,KAAKA,EAAd;AACA,cAAI80E,MAAM,GAAG90E,EAAE,CAACmP,qBAAH,EAAb,CAHqC,CAGI;;AACzC,cAAI4lE,MAAM,GAAG,uEAAY/0E,EAAE,CAACg1E,YAAf,CAAb;AACA,cAAIC,YAAY,GAAG,+EAAoBl4E,OAAO,CAACkC,QAA5B,CAAnB;AACA,cAAImR,GAAJ,CANqC,CAM5B;;AACT,cAAID,IAAJ,CAPqC,CAO3B;AACV;;AACAC,aAAG,GAAGrT,OAAO,CAACqT,GAAR,IAAe,CAArB;;AACA,cAAIrT,OAAO,CAACoT,IAAR,KAAiBiY,SAArB,EAAgC;AAC5BjY,gBAAI,GAAGpT,OAAO,CAACoT,IAAf;AACH,WAFD,MAGK,IAAIpT,OAAO,CAAC4T,KAAR,KAAkByX,SAAtB,EAAiC;AAClCjY,gBAAI,GAAGpT,OAAO,CAAC4T,KAAR,GAAgBmkE,MAAM,CAACpkE,KAA9B,CADkC,CACG;AACxC,WAFI,MAGA;AACDP,gBAAI,GAAG,CAAP;AACH,WAlBoC,CAmBrC;;;AACAC,aAAG,GAAG5G,IAAI,CAAC8I,GAAL,CAASlC,GAAT,EAAc6kE,YAAY,CAACpkE,MAAb,GAAsBikE,MAAM,CAAClkE,MAA7B,GAAsC,KAAKE,MAAzD,CAAN;AACAV,aAAG,GAAG5G,IAAI,CAAC6I,GAAL,CAASjC,GAAT,EAAc6kE,YAAY,CAAC7kE,GAAb,GAAmB,KAAKU,MAAtC,CAAN;AACAX,cAAI,GAAG3G,IAAI,CAAC8I,GAAL,CAASnC,IAAT,EAAe8kE,YAAY,CAACtkE,KAAb,GAAqBmkE,MAAM,CAACpkE,KAA5B,GAAoC,KAAKI,MAAxD,CAAP;AACAX,cAAI,GAAG3G,IAAI,CAAC6I,GAAL,CAASlC,IAAT,EAAe8kE,YAAY,CAAC9kE,IAAb,GAAoB,KAAKW,MAAxC,CAAP;AACA,gFAAW9Q,EAAX,EAAe;AACXoQ,eAAG,EAAEA,GAAG,GAAG2kE,MAAM,CAAC3kE,GADP;AAEXD,gBAAI,EAAEA,IAAI,GAAG4kE,MAAM,CAAC5kE;AAFT,WAAf;AAIH,SA5BD,CAnEqC,CAgGrC;AACA;AACA;AACA;;;AACAqkE,eAAO,CAAC34E,SAAR,CAAkBgQ,OAAlB,GAA4B,UAAU/F,IAAV,EAAgB;AACxC,cAAI,KAAK/I,OAAL,CAAa+I,IAAb,CAAJ,EAAwB;AACpB,iBAAK/I,OAAL,CAAa+I,IAAb,EAAmB3D,KAAnB,CAAyB,IAAzB,EAA+B5G,KAAK,CAACM,SAAN,CAAgB0M,KAAhB,CAAsBpM,IAAtB,CAA2BmO,SAA3B,EAAsC,CAAtC,CAA/B;AACH;AACJ,SAJD;;AAKA,eAAOkqE,OAAP;AACH,OA1G4B,EAA7B;AA4GA;;AAEA;;;AACA,UAAIU,0BAA0B;AAAG;AAAe,gBAAUl5E,MAAV,EAAkB;AAC9DN,iBAAS,CAACw5E,0BAAD,EAA6Bl5E,MAA7B,CAAT;;AACA,iBAASk5E,0BAAT,GAAsC;AAClC,iBAAOl5E,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH,SAJ6D,CAK9D;;;AACA4qE,kCAA0B,CAACr5E,SAA3B,CAAqCa,aAArC,GAAqD,UAAUC,GAAV,EAAe0vE,UAAf,EAA2B;AAC5E,cAAIxvE,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIG,UAAU,GAAGL,GAAG,CAACK,UAArB;AACA,cAAIC,QAAQ,GAAGD,UAAU,CAACE,GAA1B;AACA,cAAIG,OAAO,GAAGL,UAAU,CAACM,EAAzB;AACA,cAAIQ,MAAM,GAAGb,QAAQ,CAACa,MAAtB;AACA,cAAI8uE,WAAW,GAAG,iFAAsB/vE,OAAtB,EAA+BI,QAA/B,EAAyCI,OAAzC,CAAlB;AACA,cAAI83E,oBAAoB,GAAGr3E,MAAM,IAAInB,GAAG,CAACqB,OAAd,IAAyB,sFAA2BnB,OAA3B,EAAoCI,QAApC,EAA8CI,OAA9C,CAApD;AACA,cAAI+3E,kBAAkB,GAAGt3E,MAAM,IAAInB,GAAG,CAACyB,KAAd,IAAuB,oFAAyBvB,OAAzB,EAAkCI,QAAlC,EAA4CI,OAA5C,CAAhD;AACA,cAAIG,OAAO,GAAG,KAAKmvE,aAAL,CAAmBhwE,GAAnB,EAAwBiwE,WAAxB,EAAqCuI,oBAAoB,IAAIC,kBAA7D,EAAiF/I,UAAjF,CAAd;AACA,cAAIgJ,OAAO,GAAG,oEAAS,KAAKrI,UAAL,CAAgB3vE,OAAhB,CAAT,CAAd;AACA,cAAIQ,QAAQ,GAAG,EAAf;AACA,cAAIy3E,QAAJ;AACA,cAAIC,SAAJ;AACA/3E,iBAAO,CAACuoC,OAAR,CAAgB,mBAAhB,EAAqC,YAArC,EAd4E,CAe5E;;AACA,cAAIppC,GAAG,CAACqB,OAAR,EAAiB;AACbs3E,oBAAQ,GAAG,KAAKj3E,WAAL,CAAiBrB,UAAjB,CAAX;;AACA,gBAAIs4E,QAAJ,EAAc;AACVz3E,sBAAQ,GAAG,2BAA2B,sEAAWy3E,QAAX,CAA3B,GAAkD,SAA7D;AACH;AACJ;;AACDC,mBAAS,GACL,6BACK,sEAAWt4E,QAAQ,CAACyB,KAAT,IAAkB,EAA7B,KAAoC,QADzC,IACqD;AACjD,mBAHR;AAIA,iBAAO,eAAelB,OAAO,CAACe,IAAR,CAAa,GAAb,CAAf,GAAmC,GAAnC,IACFtB,QAAQ,CAACM,GAAT,GACG,YAAY,sEAAWN,QAAQ,CAACM,GAApB,CAAZ,GAAuC,GAD1C,GAEG,EAHD,KAIF83E,OAAO,GACJ,aAAaA,OAAb,GAAuB,GADnB,GAEJ,EAND,IAOH,GAPG,GAQH,0BARG,IASFx4E,OAAO,CAACE,OAAR,CAAgBssB,GAAhB,KAAwB,KAAxB,GACGksD,SAAS,GAAG,GAAZ,GAAkB13E,QADrB,GACgC;AAC7BA,kBAAQ,GAAG,GAAX,GAAiB03E,SAXlB,CAW4B;AAX5B,cAaH,QAbG,IAcFJ,oBAAoB,GACjB,iDADiB,GAEjB,EAhBD,KAiBFC,kBAAkB,GACf,+CADe,GAEf,EAnBD,IAoBH,MApBJ;AAqBH,SA/CD,CAN8D,CAsD9D;;;AACAF,kCAA0B,CAACr5E,SAA3B,CAAqC8C,sBAArC,GAA8D,YAAY;AACtE,iBAAO;AACHC,gBAAI,EAAE,SADH;AAEHC,kBAAM,EAAE,SAFL;AAGH+rC,0BAAc,EAAE,IAHb;AAIH9rC,oBAAQ,EAAE;AAJP,WAAP;AAMH,SAPD;;AAQAo2E,kCAA0B,CAACr5E,SAA3B,CAAqC6wE,sBAArC,GAA8D,YAAY;AACtE,iBAAO,KAAP,CADsE,CACxD;AACjB,SAFD;;AAGA,eAAOwI,0BAAP;AACH,OAnE+C,CAmE9C,kEAnE8C,CAAhD;AAqEA;;;;AAEA,UAAIM,oBAAoB;AAAG;AAAe,gBAAUx5E,MAAV,EAAkB;AACxDN,iBAAS,CAAC85E,oBAAD,EAAuBx5E,MAAvB,CAAT;;AACA,iBAASw5E,oBAAT,CAA8BC,OAA9B,EAAuC;AACnC,cAAIv5E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACu5E,OAAN,GAAgBA,OAAhB;AACA,iBAAOv5E,KAAP;AACH,SANuD,CAOxD;;;AACAs5E,4BAAoB,CAAC35E,SAArB,CAA+BO,UAA/B,GAA4C,UAAUC,IAAV,EAAgBgwE,UAAhB,EAA4B;AACpE,cAAIqJ,UAAU,GAAG,KAAKA,UAAL,GAAkB,KAAKC,aAAL,CAAmBt5E,IAAnB,CAAnC,CADoE,CAEpE;;AACA,eAAKo5E,OAAL,CAAaG,MAAb,CAAoB3tE,OAApB,CAA4B,UAAU4tE,OAAV,EAAmB7yE,CAAnB,EAAsB;AAC9C6yE,mBAAO,CAAC1yE,aAAR,CAAsB,8BAAtB,EAAsDjC,WAAtD,CAAkEw0E,UAAU,CAAC1yE,CAAD,CAAV,CAAcE,OAAhF;AACH,WAFD,EAHoE,CAMpE;;AACA,cAAI,CAACmpE,UAAL,EAAiB;AACb,iBAAKoJ,OAAL,CAAaK,gBAAb;AACH;AACJ,SAVD,CARwD,CAmBxD;;;AACAN,4BAAoB,CAAC35E,SAArB,CAA+BY,UAA/B,GAA4C,YAAY;AACpD,cAAIi5E,UAAU,GAAG,KAAKA,UAAL,IAAmB,EAApC;AACA,cAAIK,SAAJ;;AACA,iBAAQA,SAAS,GAAGL,UAAU,CAACM,GAAX,EAApB,EAAuC;AACnC,qFAAcD,SAAS,CAAC7yE,OAAxB;AACH;;AACD,eAAKwyE,UAAL,GAAkB,IAAlB;AACH,SAPD,CApBwD,CA4BxD;AACA;AACA;;;AACAF,4BAAoB,CAAC35E,SAArB,CAA+B85E,aAA/B,GAA+C,UAAUt5E,IAAV,EAAgB;AAC3D,cAAIq5E,UAAU,GAAG,EAAjB;AACA,cAAIO,OAAJ;AACA,cAAInuE,GAAJ;AACAmuE,iBAAO,GAAG,KAAKC,YAAL,CAAkB75E,IAAlB,CAAV,CAJ2D,CAIxB;AACnC;;AACA,eAAKyL,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAGmuE,OAAO,CAAC35E,MAA5B,EAAoCwL,GAAG,EAAvC,EAA2C;AACvC4tE,sBAAU,CAACp3E,IAAX,CAAgB,KAAK63E,YAAL,CAAkBruE,GAAlB,EAAuBmuE,OAAO,CAACnuE,GAAD,CAA9B,CAAhB;AACH;;AACD,iBAAO4tE,UAAP;AACH,SAVD,CA/BwD,CA0CxD;AACA;AACA;;;AACAF,4BAAoB,CAAC35E,SAArB,CAA+Bs6E,YAA/B,GAA8C,UAAUruE,GAAV,EAAesuE,OAAf,EAAwB;AAClE,cAAIhoC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAIqnC,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIzG,MAAM,GAAGyG,OAAO,CAACzG,MAArB;AACA,cAAIqH,SAAS,GAAG,KAAKC,cAAL,CAAoBF,OAApB,CAAhB,CAJkE,CAIpB;;AAC9C,cAAIG,QAAQ,GAAG/sE,IAAI,CAAC6I,GAAL,CAAS,CAAT,EAAYgkE,SAAS,CAAC/5E,MAAtB,CAAf,CALkE,CAKpB;;AAC9C,cAAIk6E,KAAK,GAAGzqE,QAAQ,CAACylB,aAAT,CAAuB,OAAvB,CAAZ;AACA,cAAIilD,SAAS,GAAG,EAAhB,CAPkE,CAO9C;;AACpB,cAAIC,UAAU,GAAG,EAAjB,CARkE,CAQ7C;;AACrB,cAAIC,cAAc,GAAG,EAArB,CATkE,CASzC;;AACzB,cAAI3zE,CAAJ;AACA,cAAI4zE,SAAJ;AACA,cAAI9F,GAAJ;AACA,cAAI+F,EAAJ;AACA,cAAIziD,CAAJ;AACA,cAAIz3B,GAAJ;AACA,cAAIm6E,EAAJ,CAhBkE,CAiBlE;;AACA,mBAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,mBAAOlG,GAAG,GAAGkG,MAAb,EAAqB;AACjB;AACAF,gBAAE,GAAG,CAACH,cAAc,CAAC3zE,CAAC,GAAG,CAAL,CAAd,IAAyB,EAA1B,EAA8B8tE,GAA9B,CAAL;;AACA,kBAAIgG,EAAJ,EAAQ;AACJA,kBAAE,CAACxlD,OAAH,GAAa,CAACwlD,EAAE,CAACxlD,OAAH,IAAc,CAAf,IAAoB,CAAjC;AACH,eAFD,MAGK;AACDwlD,kBAAE,GAAG/qE,QAAQ,CAACylB,aAAT,CAAuB,IAAvB,CAAL;AACAqlD,kBAAE,CAAC31E,WAAH,CAAe41E,EAAf;AACH;;AACDJ,wBAAU,CAAC1zE,CAAD,CAAV,CAAc8tE,GAAd,IAAqBgG,EAArB;AACAH,4BAAc,CAAC3zE,CAAD,CAAd,CAAkB8tE,GAAlB,IAAyBgG,EAAzB;AACAhG,iBAAG;AACN;AACJ;;AACD,eAAK9tE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuzE,QAAhB,EAA0BvzE,CAAC,EAA3B,EAA+B;AAAE;AAC7B4zE,qBAAS,GAAGP,SAAS,CAACrzE,CAAD,CAArB;AACA8tE,eAAG,GAAG,CAAN;AACA+F,cAAE,GAAG9qE,QAAQ,CAACylB,aAAT,CAAuB,IAAvB,CAAL;AACAilD,qBAAS,CAACn4E,IAAV,CAAe,EAAf;AACAo4E,sBAAU,CAACp4E,IAAX,CAAgB,EAAhB;AACAq4E,0BAAc,CAACr4E,IAAf,CAAoB,EAApB,EAN2B,CAO3B;AACA;;AACA,gBAAIs4E,SAAJ,EAAe;AACX,mBAAKxiD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwiD,SAAS,CAACt6E,MAA1B,EAAkC83B,CAAC,EAAnC,EAAuC;AAAE;AACrCz3B,mBAAG,GAAGi6E,SAAS,CAACxiD,CAAD,CAAf;AACA,oBAAI6iD,OAAO,GAAG7oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACw0E,OAArB,GAAgCx0E,GAAG,CAACu0E,QAAvD;AACA,oBAAIgG,QAAQ,GAAG9oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACu0E,QAArB,GAAiCv0E,GAAG,CAACw0E,OAAzD;AACA4F,+BAAe,CAACE,OAAD,CAAf,CAJmC,CAKnC;;AACAH,kBAAE,GAAG,yEAAc,IAAd,EAAoB;AAAEnzE,2BAAS,EAAE;AAAb,iBAApB,EAAyDhH,GAAG,CAACqD,EAA7D,CAAL;;AACA,oBAAIi3E,OAAO,KAAKC,QAAhB,EAA0B;AACtBJ,oBAAE,CAACzlD,OAAH,GAAa6lD,QAAQ,GAAGD,OAAX,GAAqB,CAAlC;AACH,iBAFD,MAGK;AAAE;AACHN,gCAAc,CAAC3zE,CAAD,CAAd,CAAkB8tE,GAAlB,IAAyBgG,EAAzB;AACH;;AACD,uBAAOhG,GAAG,IAAIoG,QAAd,EAAwB;AACpBR,4BAAU,CAAC1zE,CAAD,CAAV,CAAc8tE,GAAd,IAAqBgG,EAArB;AACAL,2BAAS,CAACzzE,CAAD,CAAT,CAAa8tE,GAAb,IAAoBn0E,GAApB;AACAm0E,qBAAG;AACN;;AACD+F,kBAAE,CAAC31E,WAAH,CAAe41E,EAAf;AACH;AACJ;;AACDC,2BAAe,CAAC/H,MAAD,CAAf,CA/B2B,CA+BF;;AACzB,gBAAImI,SAAS,GAAG1B,OAAO,CAAC2B,WAAR,CAAoB7H,eAApB,EAAhB;;AACA,gBAAI4H,SAAJ,EAAe;AACX,kBAAI/oC,KAAJ,EAAW;AACP,2FAAgByoC,EAAhB,EAAoBM,SAApB;AACH,eAFD,MAGK;AACD,4FAAiBN,EAAjB,EAAqBM,SAArB;AACH;AACJ;;AACDX,iBAAK,CAACt1E,WAAN,CAAkB21E,EAAlB;AACH;;AACD,iBAAO;AACH/uE,eAAG,EAAEA,GADF;AAEH5E,mBAAO,EAAEszE,KAFN;AAGHE,sBAAU,EAAEA,UAHT;AAIHD,qBAAS,EAAEA,SAJR;AAKHJ,qBAAS,EAAEA,SALR;AAMHh6E,gBAAI,EAAE+5E;AANH,WAAP;AAQH,SArFD,CA7CwD,CAmIxD;AACA;;;AACAZ,4BAAoB,CAAC35E,SAArB,CAA+By6E,cAA/B,GAAgD,UAAUj6E,IAAV,EAAgB;AAC5D,cAAI+xC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAI4gC,MAAM,GAAG,KAAKyG,OAAL,CAAazG,MAA1B;AACA,cAAIqI,MAAM,GAAG,EAAb;AACA,cAAIr0E,CAAJ;AACA,cAAIrG,GAAJ;AACA,cAAIy3B,CAAJ,CAN4D,CAO5D;AACA;;AACA/3B,cAAI,GAAG,KAAKgH,aAAL,CAAmBhH,IAAnB,CAAP;;AACA,eAAK2G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BrG,eAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAV,CAD8B,CAE9B;;AACA,iBAAKoxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGijD,MAAM,CAAC/6E,MAAvB,EAA+B83B,CAAC,EAAhC,EAAoC;AAChC,kBAAI,CAACkjD,iBAAiB,CAAC36E,GAAD,EAAM06E,MAAM,CAACjjD,CAAD,CAAZ,CAAtB,EAAwC;AACpC;AACH;AACJ,aAP6B,CAQ9B;;;AACAz3B,eAAG,CAAC46E,KAAJ,GAAYnjD,CAAZ;AACAz3B,eAAG,CAACs6E,OAAJ,GAAc7oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACw0E,OAArB,GAAgCx0E,GAAG,CAACu0E,QAAvD,CAV8B,CAUmC;;AACjEv0E,eAAG,CAACu6E,QAAJ,GAAe9oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACu0E,QAArB,GAAiCv0E,GAAG,CAACw0E,OAAzD,CAAiE;AAAjE;AAEA,aAACkG,MAAM,CAACjjD,CAAD,CAAN,KAAcijD,MAAM,CAACjjD,CAAD,CAAN,GAAY,EAA1B,CAAD,EAAgC91B,IAAhC,CAAqC3B,GAArC;AACH,WAxB2D,CAyB5D;;;AACA,eAAKy3B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGijD,MAAM,CAAC/6E,MAAvB,EAA+B83B,CAAC,EAAhC,EAAoC;AAChCijD,kBAAM,CAACjjD,CAAD,CAAN,CAAU1X,IAAV,CAAe86D,iBAAf;AACH;;AACD,iBAAOH,MAAP;AACH,SA9BD,CArIwD,CAoKxD;;;AACA7B,4BAAoB,CAAC35E,SAArB,CAA+Bq6E,YAA/B,GAA8C,UAAU75E,IAAV,EAAgB;AAC1D,cAAI45E,OAAO,GAAG,EAAd;AACA,cAAIjzE,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKyyE,OAAL,CAAajF,MAA7B,EAAqCxtE,CAAC,EAAtC,EAA0C;AACtCizE,mBAAO,CAAC33E,IAAR,CAAa,EAAb;AACH;;AACD,eAAK0E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BizE,mBAAO,CAAC55E,IAAI,CAAC2G,CAAD,CAAJ,CAAQ8E,GAAT,CAAP,CAAqBxJ,IAArB,CAA0BjC,IAAI,CAAC2G,CAAD,CAA9B;AACH;;AACD,iBAAOizE,OAAP;AACH,SAVD,CArKwD,CAgLxD;;;AACAT,4BAAoB,CAAC35E,SAArB,CAA+B6wE,sBAA/B,GAAwD,YAAY;AAChE,iBAAO,KAAK+I,OAAL,CAAazG,MAAb,KAAwB,CAA/B,CADgE,CAC9B;AACrC,SAFD;;AAGA,eAAOwG,oBAAP;AACH,OArLyC,CAqLxCN,0BArLwC,CAA1C,C,CAsLA;;;AACA,eAASoC,iBAAT,CAA2B36E,GAA3B,EAAgC86E,SAAhC,EAA2C;AACvC,YAAIz0E,CAAJ;AACA,YAAI00E,QAAJ;;AACA,aAAK10E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGy0E,SAAS,CAACn7E,MAA1B,EAAkC0G,CAAC,EAAnC,EAAuC;AACnC00E,kBAAQ,GAAGD,SAAS,CAACz0E,CAAD,CAApB;;AACA,cAAI00E,QAAQ,CAACxG,QAAT,IAAqBv0E,GAAG,CAACw0E,OAAzB,IACAuG,QAAQ,CAACvG,OAAT,IAAoBx0E,GAAG,CAACu0E,QAD5B,EACsC;AAClC,mBAAO,IAAP;AACH;AACJ;;AACD,eAAO,KAAP;AACH,O,CACD;;;AACA,eAASsG,iBAAT,CAA2B39C,CAA3B,EAA8B1+B,CAA9B,EAAiC;AAC7B,eAAO0+B,CAAC,CAACo9C,OAAF,GAAY97E,CAAC,CAAC87E,OAArB;AACH;;AAED,UAAIU,qBAAqB;AAAG;AAAe,gBAAU37E,MAAV,EAAkB;AACzDN,iBAAS,CAACi8E,qBAAD,EAAwB37E,MAAxB,CAAT;;AACA,iBAAS27E,qBAAT,GAAiC;AAC7B,iBAAO37E,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDqtE,6BAAqB,CAAC97E,SAAtB,CAAgCO,UAAhC,GAA6C,UAAUC,IAAV,EAAgBgwE,UAAhB,EAA4B;AACrE,cAAIoG,SAAS,GAAGpG,UAAU,CAACoG,SAA3B;AACA,cAAIiD,UAAU,GAAG,KAAKA,UAAL,GAAkB,KAAKC,aAAL,CAAmBt5E,IAAnB,CAAnC,CAFqE,CAGrE;;AACA,eAAKo5E,OAAL,CAAaG,MAAb,CAAoB3tE,OAApB,CAA4B,UAAU4tE,OAAV,EAAmB/tE,GAAnB,EAAwB;AAChD,gBAAI8vE,UAAU,GAAG,yEAAc,uDAAd,CAAjB,CADgD,CACyC;;AACzF,gBAAIC,aAAJ;AACA,gBAAIC,WAAJ,CAHgD,CAIhD;;AACA,gBAAIrF,SAAS,IAAIA,SAAS,CAAC3qE,GAAV,KAAkBA,GAAnC,EAAwC;AACpC+vE,2BAAa,GAAGpF,SAAS,CAACzyE,EAA1B;AACH,aAFD,MAGK;AACD63E,2BAAa,GAAGhC,OAAO,CAAC1yE,aAAR,CAAsB,4BAAtB,CAAhB;;AACA,kBAAI,CAAC00E,aAAL,EAAoB;AAAE;AAClBA,6BAAa,GAAGhC,OAAO,CAAC1yE,aAAR,CAAsB,4BAAtB,CAAhB;AACH;AACJ;;AACD20E,uBAAW,GAAGD,aAAa,CAAC1oE,qBAAd,GAAsCiB,GAAtC,GACVylE,OAAO,CAAC1mE,qBAAR,GAAgCiB,GADpC,CAdgD,CAeP;;AACzCwnE,sBAAU,CAACloE,KAAX,CAAiBU,GAAjB,GAAuB0nE,WAAW,GAAG,IAArC;AACAF,sBAAU,CAACz0E,aAAX,CAAyB,OAAzB,EAAkCjC,WAAlC,CAA8Cw0E,UAAU,CAAC5tE,GAAD,CAAV,CAAgB5E,OAA9D;AACA2yE,mBAAO,CAAC30E,WAAR,CAAoB02E,UAApB;AACH,WAnBD;AAoBH,SAxBD;;AAyBA,eAAOD,qBAAP;AACH,OA/B0C,CA+BzCnC,oBA/ByC,CAA3C;;AAiCA,UAAIuC,eAAe,GAAG,uCAAtB;;AACA,UAAIC,mBAAmB;AAAG;AAAe,gBAAUh8E,MAAV,EAAkB;AACvDN,iBAAS,CAACs8E,mBAAD,EAAsBh8E,MAAtB,CAAT;;AACA,iBAASg8E,mBAAT,CAA6BvC,OAA7B,EAAsC;AAClC,cAAIv5E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAAC2xE,UAAN,GAAmB,IAAnB,CAFkC,CAET;;AACzB3xE,eAAK,CAACu5E,OAAN,GAAgBA,OAAhB;AACA,iBAAOv5E,KAAP;AACH;;AACD87E,2BAAmB,CAACn8E,SAApB,CAA8B6D,UAA9B,GAA2C,UAAUiF,IAAV,EAAgB9H,OAAhB,EAAyBR,IAAzB,EAA+B;AACtE;AACA,cAAIsI,IAAI,KAAK,SAAb,EAAwB;AACpBtI,gBAAI,GAAGA,IAAI,CAACyM,MAAL,CAAY,UAAUnM,GAAV,EAAe;AAC9B,qBAAOA,GAAG,CAACK,UAAJ,CAAeE,GAAf,CAAmBY,MAA1B;AACH,aAFM,CAAP;AAGH;;AACD9B,gBAAM,CAACH,SAAP,CAAiB6D,UAAjB,CAA4BvD,IAA5B,CAAiC,IAAjC,EAAuCwI,IAAvC,EAA6C9H,OAA7C,EAAsDR,IAAtD;AACH,SARD;;AASA27E,2BAAmB,CAACn8E,SAApB,CAA8BO,UAA9B,GAA2C,UAAUuI,IAAV,EAAgBtI,IAAhB,EAAsB;AAC7D,cAAImZ,GAAG,GAAG,EAAV;AACA,cAAIxS,CAAJ;AACA,cAAIrG,GAAJ;AACA,cAAIi7E,UAAJ;;AACA,eAAK50E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BrG,eAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAV;AACA40E,sBAAU,GAAG,KAAKK,aAAL,CAAmBtzE,IAAnB,EAAyBhI,GAAzB,CAAb;AACA,iBAAK84E,OAAL,CAAaG,MAAb,CAAoBj5E,GAAG,CAACmL,GAAxB,EAA6B5G,WAA7B,CAAyC02E,UAAzC;AACApiE,eAAG,CAAClX,IAAJ,CAASs5E,UAAT;AACH;;AACD,iBAAOpiE,GAAP;AACH,SAZD,CAjBuD,CA8BvD;;;AACAwiE,2BAAmB,CAACn8E,SAApB,CAA8Bo8E,aAA9B,GAA8C,UAAUtzE,IAAV,EAAgBhI,GAAhB,EAAqB;AAC/D,cAAI84E,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIrnC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAI4gC,MAAM,GAAGyG,OAAO,CAACzG,MAArB;AACA,cAAIiI,OAAO,GAAG7oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACw0E,OAArB,GAAgCx0E,GAAG,CAACu0E,QAAvD;AACA,cAAIgG,QAAQ,GAAG9oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACu0E,QAArB,GAAiCv0E,GAAG,CAACw0E,OAAzD;AACA,cAAI+G,QAAQ,GAAGjB,OAAf;AACA,cAAID,MAAM,GAAGE,QAAQ,GAAG,CAAxB;AACA,cAAIvzE,SAAJ;AACA,cAAIi0E,UAAJ;AACA,cAAIO,IAAJ;;AACA,cAAIxzE,IAAI,KAAK,eAAb,EAA8B;AAC1BhB,qBAAS,GAAG,SAAZ;AACH,WAFD,MAGK;AACDA,qBAAS,GAAGgB,IAAI,CAACkE,WAAL,EAAZ;AACH;;AACD+uE,oBAAU,GAAG,yEAAc,oBAAoBj0E,SAApB,GAAgC,aAAhC,GACvB,0BADuB,GAEvB,QAFS,CAAb;AAGAw0E,cAAI,GAAGP,UAAU,CAACQ,oBAAX,CAAgC,IAAhC,EAAsC,CAAtC,CAAP;;AACA,cAAIF,QAAQ,GAAG,CAAf,EAAkB;AACd,uFAAgBC,IAAhB,EACA;AACA,gBAAI58E,KAAJ,CAAU28E,QAAQ,GAAG,CAArB,EAAwB35E,IAAxB,CAA6Bw5E,eAA7B,CAFA;AAGH;;AACDp7E,aAAG,CAACqD,EAAJ,CAAOqxB,OAAP,GAAiB2lD,MAAM,GAAGkB,QAA1B;AACAC,cAAI,CAACj3E,WAAL,CAAiBvE,GAAG,CAACqD,EAArB;;AACA,cAAIg3E,MAAM,GAAGhI,MAAb,EAAqB;AACjB,uFAAgBmJ,IAAhB,EACA;AACA,gBAAI58E,KAAJ,CAAUyzE,MAAM,GAAGgI,MAAT,GAAkB,CAA5B,EAA+Bz4E,IAA/B,CAAoCw5E,eAApC,CAFA;AAGH;;AACD,cAAIZ,SAAS,GAAG1B,OAAO,CAAC2B,WAAR,CAAoB7H,eAApB,EAAhB;;AACA,cAAI4H,SAAJ,EAAe;AACX,gBAAI/oC,KAAJ,EAAW;AACP,yFAAgB+pC,IAAhB,EAAsBhB,SAAtB;AACH,aAFD,MAGK;AACD,0FAAiBgB,IAAjB,EAAuBhB,SAAvB;AACH;AACJ;;AACD,iBAAOS,UAAP;AACH,SA3CD;;AA4CA,eAAOI,mBAAP;AACH,OA5EwC,CA4EvC,+DA5EuC,CAAzC;;AA8EA,UAAIK,OAAO;AAAG;AAAe,gBAAUr8E,MAAV,EAAkB;AAC3CN,iBAAS,CAAC28E,OAAD,EAAUr8E,MAAV,CAAT;;AACA,iBAASq8E,OAAT,CAAiBr4E,EAAjB,EAAqB;AACjB,cAAI9D,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkB6D,EAAlB,KAAyB,IAArC;;AACA,cAAIR,aAAa,GAAGtD,KAAK,CAACsD,aAAN,GAAsB,IAAI84E,oBAAJ,CAAyBp8E,KAAzB,CAA1C;AACA,cAAIq8E,WAAW,GAAGr8E,KAAK,CAACq8E,WAAN,GAAoB,4EAAiBr8E,KAAK,CAACs8E,YAAvB,CAAtC;AACAt8E,eAAK,CAACu8E,cAAN,GAAuB,4EAAiBj5E,aAAa,CAACE,UAAd,CAAyBC,IAAzB,CAA8BH,aAA9B,CAAjB,EAA+DA,aAAa,CAACI,QAAd,CAAuBD,IAAvB,CAA4BH,aAA5B,CAA/D,EAA2G,CAAC+4E,WAAD,CAA3G,CAAvB;AACAr8E,eAAK,CAACyuE,oBAAN,GAA6B,4EAAiBnrE,aAAa,CAACkuE,kBAAd,CAAiC/tE,IAAjC,CAAsCH,aAAtC,CAAjB,EAAuEA,aAAa,CAACmuE,oBAAd,CAAmChuE,IAAnC,CAAwCH,aAAxC,CAAvE,EAA+H,CAACtD,KAAK,CAACu8E,cAAP,CAA/H,CAA7B;AACAv8E,eAAK,CAAC2uE,eAAN,GAAwB,4EAAiBrrE,aAAa,CAACguE,UAAd,CAAyB7tE,IAAzB,CAA8BH,aAA9B,CAAjB,EAA+DA,aAAa,CAACiuE,UAAd,CAAyB9tE,IAAzB,CAA8BH,aAA9B,CAA/D,EAA6G,CAAC+4E,WAAD,CAA7G,CAAxB;AACAr8E,eAAK,CAAC6uE,iBAAN,GAA0B,4EAAiBvrE,aAAa,CAACguE,UAAd,CAAyB7tE,IAAzB,CAA8BH,aAA9B,CAAjB,EAA+DA,aAAa,CAACiuE,UAAd,CAAyB9tE,IAAzB,CAA8BH,aAA9B,CAA/D,EAA6G,CAAC+4E,WAAD,CAA7G,CAA1B;AACA,iBAAOr8E,KAAP;AACH;;AACDm8E,eAAO,CAACx8E,SAAR,CAAkBgE,YAAlB,GAAiC,UAAUhD,OAAV,EAAmB;AAChDA,iBAAO,CAACiD,QAAR,CAAiBC,4BAAjB,CAA8C,IAA9C,EAAoD;AAChDC,cAAE,EAAE,KAAKA,EADuC;AAEhDmgB,0BAAc,EAAE;AAFgC,WAApD;AAIH,SALD;;AAMAk4D,eAAO,CAACx8E,SAAR,CAAkBoE,MAAlB,GAA2B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACjD,eAAK07E,WAAL,CAAiBr4E,KAAK,CAACw8B,IAAvB;AACA,eAAK+7C,cAAL,CAAoB57E,OAApB,EAA6BqD,KAAK,CAACw4E,MAAnC;AACA,eAAK/N,oBAAL,CAA0BzqE,KAAK,CAACwd,cAAhC;AACA,eAAKmtD,eAAL,CAAqB3qE,KAAK,CAACy4E,kBAA3B;AACA,eAAK5N,iBAAL,CAAuB7qE,KAAK,CAAC04E,oBAA7B;AACH,SAND;;AAOAP,eAAO,CAACx8E,SAAR,CAAkB2E,OAAlB,GAA4B,YAAY;AACpCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKo8E,WAAL,CAAiB34E,QAAjB,GAFoC,CAEP;;AAC7B,eAAK/C,OAAL,CAAaiD,QAAb,CAAsBW,8BAAtB,CAAqD,IAArD;AACH,SAJD;;AAKA43E,eAAO,CAACx8E,SAAR,CAAkB28E,YAAlB,GAAiC,UAAU97C,IAAV,EAAgB;AAC7C,cAAI9/B,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBC,KAAK,GAAGF,EAAE,CAACE,KAAlC;AAAA,cAAyCuF,OAAO,GAAGzF,EAAE,CAACyF,OAAtD;AAAA,cAA+DtF,OAAO,GAAGH,EAAE,CAACG,OAA5E;AACA,cAAI2B,KAAK,GAAG2D,OAAO,CAACyB,MAAR,CAAe44B,IAAf,EAAqB,2EAAgB3/B,OAAO,CAACmvB,gBAAxB,CAArB,CAA+D;AAA/D,WAAZ;AAEA,eAAKlsB,EAAL,CAAQ0C,SAAR,GACI,2BAA2B5F,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAA3B,GAA6D,IAA7D,GACI,yBADJ,GAEI,sEAAWC,KAAX,CAFJ,GAGI,SAHJ,GAII,wBAJJ,GAI+B5B,KAAK,CAAC0pD,YAAN,CAAmB,OAAnB,CAJ/B,GAI6D,WAJ7D,GAKI,QALJ,GAMI,sBANJ,GAM6B1pD,KAAK,CAAC2B,QAAN,CAAe,gBAAf,CAN7B,GAMgE,IANhE,GAOI,wCAPJ,GAQI,QATR;AAUA,eAAKo6E,cAAL,GAAsB,KAAK74E,EAAL,CAAQmD,aAAR,CAAsB,qBAAtB,CAAtB;AACH,SAfD;;AAgBAk1E,eAAO,CAACx8E,SAAR,CAAkBue,QAAlB,GAA6B,UAAUF,YAAV,EAAwBC,WAAxB,EAAqC6tC,OAArC,EAA8CC,QAA9C,EAAwD;AACjF,cAAIvrB,IAAI,GAAG,KAAKx8B,KAAL,CAAWw8B,IAAtB,CADiF,CACrD;;AAC5B,cAAIxiB,YAAY,GAAG8tC,OAAf,IAA0B7tC,WAAW,GAAG8tC,QAA5C,EAAsD;AAClD,mBAAO;AACHzlD,uBAAS,EAAE,IADR;AAEH6X,sBAAQ,EAAE;AACNvc,sBAAM,EAAE,IADF;AAENC,qBAAK,EAAE;AAAEG,uBAAK,EAAEw+B,IAAT;AAAev+B,qBAAG,EAAE,mEAAQu+B,IAAR,EAAc,CAAd;AAApB;AAFD,eAFP;AAMHzhB,mBAAK,EAAE,KAAKjb,EANT;AAOH6U,kBAAI,EAAE;AACF1E,oBAAI,EAAE,CADJ;AAEFC,mBAAG,EAAE,CAFH;AAGFO,qBAAK,EAAEq3C,OAHL;AAIFn3C,sBAAM,EAAEo3C;AAJN,eAPH;AAaH3tC,mBAAK,EAAE;AAbJ,aAAP;AAeH;AACJ,SAnBD;;AAoBA,eAAO+9D,OAAP;AACH,OAnE4B,CAmE3B,gEAnE2B,CAA7B;;AAoEA,UAAIC,oBAAoB;AAAG;AAAe,gBAAUt8E,MAAV,EAAkB;AACxDN,iBAAS,CAAC48E,oBAAD,EAAuBt8E,MAAvB,CAAT;;AACA,iBAASs8E,oBAAT,CAA8BQ,OAA9B,EAAuC;AACnC,cAAI58E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAAC48E,OAAN,GAAgBA,OAAhB;AACA,iBAAO58E,KAAP;AACH;;AACDo8E,4BAAoB,CAACz8E,SAArB,CAA+BO,UAA/B,GAA4C,UAAUC,IAAV,EAAgB;AACxD,eAAK,IAAIyE,EAAE,GAAG,CAAT,EAAY8zC,MAAM,GAAGv4C,IAA1B,EAAgCyE,EAAE,GAAG8zC,MAAM,CAACt4C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAGi4C,MAAM,CAAC9zC,EAAD,CAAhB;AACA,iBAAKg4E,OAAL,CAAaD,cAAb,CAA4B33E,WAA5B,CAAwCvE,GAAG,CAACqD,EAA5C;AACH;AACJ,SALD;;AAMAs4E,4BAAoB,CAACz8E,SAArB,CAA+BY,UAA/B,GAA4C,UAAUJ,IAAV,EAAgB;AACxD,eAAK,IAAIyE,EAAE,GAAG,CAAT,EAAYw0C,MAAM,GAAGj5C,IAA1B,EAAgCyE,EAAE,GAAGw0C,MAAM,CAACh5C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAG24C,MAAM,CAACx0C,EAAD,CAAhB;AACA,qFAAcnE,GAAG,CAACqD,EAAlB;AACH;AACJ,SALD;;AAMA,eAAOs4E,oBAAP;AACH,OApByC,CAoBxCpD,0BApBwC,CAA1C;;AAsBA,UAAI6D,QAAQ;AAAG;AAAe,kBAAY;AACtC,iBAASA,QAAT,CAAkBl8E,OAAlB,EAA2B;AACvB,eAAKA,OAAL,GAAeA,OAAf;AACH;;AACDk8E,gBAAQ,CAACl9E,SAAT,CAAmBm9E,UAAnB,GAAgC,UAAU94E,KAAV,EAAiB;AAC7C,cAAIguC,KAAK,GAAG,EAAZ;;AACA,cAAIhuC,KAAK,CAACqvE,eAAV,EAA2B;AACvBrhC,iBAAK,CAAC5vC,IAAN,CAAW4B,KAAK,CAACqvE,eAAN,EAAX;AACH;;AACD,eAAK,IAAIzuE,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAGsD,KAAK,CAACuwE,KAA5B,EAAmC3vE,EAAE,GAAGlE,EAAE,CAACN,MAA3C,EAAmDwE,EAAE,EAArD,EAAyD;AACrD,gBAAIm4E,IAAI,GAAGr8E,EAAE,CAACkE,EAAD,CAAb;AACAotC,iBAAK,CAAC5vC,IAAN,CAAW46E,cAAc,CAACD,IAAI,CAACv8C,IAAN,EAAYx8B,KAAK,CAACC,WAAlB,EAA+B,KAAKtD,OAApC,EAA6Co8E,IAAI,CAACE,SAAlD,CAAzB;AACH;;AACD,cAAI,CAACj5E,KAAK,CAACuwE,KAAN,CAAYn0E,MAAjB,EAAyB;AACrB4xC,iBAAK,CAAC5vC,IAAN,CAAW,uBAAuB,KAAKzB,OAAL,CAAaC,KAAb,CAAmB2B,QAAnB,CAA4B,eAA5B,CAAvB,GAAsE,SAAjF;AACH;;AACD,cAAI,KAAK5B,OAAL,CAAaE,OAAb,CAAqBssB,GAArB,KAA6B,KAAjC,EAAwC;AACpC6kB,iBAAK,CAACG,OAAN;AACH;;AACD,iBAAO,SAASH,KAAK,CAAC3vC,IAAN,CAAW,EAAX,CAAT,GAA0B,OAAjC;AACH,SAhBD;;AAiBA,eAAOw6E,QAAP;AACH,OAtB6B,EAA9B;;AAuBA,eAASG,cAAT,CAAwBx8C,IAAxB,EAA8Bv8B,WAA9B,EAA2CtD,OAA3C,EAAoDsyE,UAApD,EAAgE;AAC5D,YAAI9sE,OAAO,GAAGxF,OAAO,CAACwF,OAAtB;AAAA,YAA+BvF,KAAK,GAAGD,OAAO,CAACC,KAA/C;AACA,YAAIsyE,WAAW,GAAG,+EAAoBjvE,WAAW,CAAC2B,WAAhC,EAA6C46B,IAA7C,CAAlB,CAF4D,CAEU;;AACtE,YAAIl/B,OAAO,GAAG,yEAAck/B,IAAd,EAAoBv8B,WAApB,EAAiCtD,OAAjC,CAAd;AACAW,eAAO,CAACuoC,OAAR,CAAgB,QAAhB,EAA0BjpC,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAA1B;AACA,eAAO,gBAAgBjB,OAAO,CAACe,IAAR,CAAa,GAAb,CAAhB,GAAoC,GAApC,IACF6wE,WAAW,GACR,iBAAiB/sE,OAAO,CAACuB,SAAR,CAAkB84B,IAAlB,EAAwB;AAAE74B,kBAAQ,EAAE;AAAZ,SAAxB,CAAjB,GAA+D,GADvD,GAER,EAHD,KAIFsrE,UAAU,GACP,MAAMA,UADC,GAEP,EAND,IAOH,QAPJ;AAQH;;AAED,UAAIiK,cAAc,GAAG,2EAAgB;AAAE50E,WAAG,EAAE;AAAP,OAAhB,CAArB;AACA,UAAI60E,eAAe,GAAG,2EAAgB;AAAEr7C,YAAI,EAAE;AAAR,OAAhB,CAAtB;;AACA,UAAIs7C,OAAO;AAAG;AAAe,gBAAUt9E,MAAV,EAAkB;AAC3CN,iBAAS,CAAC49E,OAAD,EAAUt9E,MAAV,CAAT;;AACA,iBAASs9E,OAAT,CAAiBt5E,EAAjB,EAAqBo3E,WAArB,EAAkC;AAC9B,cAAIl7E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkB6D,EAAlB,KAAyB,IAArC;;AACA9D,eAAK,CAACq9E,kBAAN,GAA2B,CAA3B,CAF8B,CAEA;;AAC9Br9E,eAAK,CAACs9E,gBAAN,GAAyB,KAAzB;AACAt9E,eAAK,CAACk7E,WAAN,GAAoBA,WAApB;AACA,cAAI53E,aAAa,GAAGtD,KAAK,CAACsD,aAAN,GAAsB,IAAIg2E,oBAAJ,CAAyBt5E,KAAzB,CAA1C;AACA,cAAIu9E,YAAY,GAAGv9E,KAAK,CAACu9E,YAAN,GAAqB,IAAIzB,mBAAJ,CAAwB97E,KAAxB,CAAxC;AACAA,eAAK,CAACw9E,cAAN,GAAuB,IAAI/B,qBAAJ,CAA0Bz7E,KAA1B,CAAvB;AACA,cAAIy9E,WAAW,GAAGz9E,KAAK,CAACy9E,WAAN,GAAoB,4EAAiBz9E,KAAK,CAAC09E,YAAvB,EAAqC19E,KAAK,CAAC29E,cAA3C,CAAtC;AACA39E,eAAK,CAACgtE,mBAAN,GAA4B,4EAAiBuQ,YAAY,CAAC/5E,UAAb,CAAwBC,IAAxB,CAA6B85E,YAA7B,EAA2C,eAA3C,CAAjB,EAA8EA,YAAY,CAAC75E,QAAb,CAAsBD,IAAtB,CAA2B85E,YAA3B,EAAyC,eAAzC,CAA9E,EAAyI,CAACE,WAAD,CAAzI,CAA5B;AACAz9E,eAAK,CAACsuE,mBAAN,GAA4B,4EAAiBiP,YAAY,CAAC/5E,UAAb,CAAwBC,IAAxB,CAA6B85E,YAA7B,EAA2C,WAA3C,CAAjB,EAA0EA,YAAY,CAAC75E,QAAb,CAAsBD,IAAtB,CAA2B85E,YAA3B,EAAyC,WAAzC,CAA1E,EAAiI,CAACE,WAAD,CAAjI,CAA5B;AACAz9E,eAAK,CAAC49E,cAAN,GAAuB,4EAAiBL,YAAY,CAAC/5E,UAAb,CAAwBC,IAAxB,CAA6B85E,YAA7B,EAA2C,SAA3C,CAAjB,EAAwEA,YAAY,CAAC75E,QAAb,CAAsBD,IAAtB,CAA2B85E,YAA3B,EAAyC,SAAzC,CAAxE,EAA6H,CAACE,WAAD,CAA7H,CAAvB;AACAz9E,eAAK,CAACu8E,cAAN,GAAuB,4EAAiBj5E,aAAa,CAACE,UAAd,CAAyBC,IAAzB,CAA8BH,aAA9B,CAAjB,EAA+DA,aAAa,CAACI,QAAd,CAAuBD,IAAvB,CAA4BH,aAA5B,CAA/D,EAA2G,CAACm6E,WAAD,CAA3G,CAAvB;AACAz9E,eAAK,CAACyuE,oBAAN,GAA6B,4EAAiBnrE,aAAa,CAACkuE,kBAAd,CAAiC/tE,IAAjC,CAAsCH,aAAtC,CAAjB,EAAuEA,aAAa,CAACmuE,oBAAd,CAAmChuE,IAAnC,CAAwCH,aAAxC,CAAvE,EAA+H,CAACtD,KAAK,CAACu8E,cAAP,CAA/H,CAA7B;AACAv8E,eAAK,CAAC2uE,eAAN,GAAwB,4EAAiB3uE,KAAK,CAAC69E,gBAAvB,EAAyC79E,KAAK,CAAC89E,kBAA/C,EAAmE,CAACL,WAAD,CAAnE,CAAxB;AACAz9E,eAAK,CAAC6uE,iBAAN,GAA0B,4EAAiB7uE,KAAK,CAAC+9E,kBAAvB,EAA2C/9E,KAAK,CAACg+E,oBAAjD,EAAuE,CAACP,WAAD,CAAvE,CAA1B;AACA,iBAAOz9E,KAAP;AACH;;AACDo9E,eAAO,CAACz9E,SAAR,CAAkBoE,MAAlB,GAA2B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACjD,cAAI4zE,KAAK,GAAGvwE,KAAK,CAACuwE,KAAlB;AACA,eAAKD,MAAL,GAAcC,KAAK,CAACn0E,MAApB;AACA,eAAK0yE,MAAL,GAAcyB,KAAK,CAAC,CAAD,CAAL,CAASn0E,MAAvB;AACA,eAAKq9E,WAAL,CAAiBlJ,KAAjB,EAAwBvwE,KAAK,CAACi6E,OAA9B;AACA,eAAKjR,mBAAL,CAAyBrsE,OAAzB,EAAkCqD,KAAK,CAAC+xE,gBAAxC;AACA,eAAKzH,mBAAL,CAAyB3tE,OAAzB,EAAkCqD,KAAK,CAAC8xE,iBAAxC;AACA,eAAK8H,cAAL,CAAoBj9E,OAApB,EAA6BqD,KAAK,CAACiyE,WAAnC;AACA,eAAKsG,cAAL,CAAoB57E,OAApB,EAA6BqD,KAAK,CAACgyE,WAAnC;AACA,eAAKvH,oBAAL,CAA0BzqE,KAAK,CAACwd,cAAhC;AACA,eAAKmtD,eAAL,CAAqB3qE,KAAK,CAACg4C,SAA3B;AACA,eAAK6yB,iBAAL,CAAuB7qE,KAAK,CAAC6mB,WAA7B;;AACA,cAAI,KAAKqzD,cAAT,EAAyB;AACrB,iBAAKC,oBAAL;AACH;AACJ,SAfD;;AAgBAf,eAAO,CAACz9E,SAAR,CAAkB2E,OAAlB,GAA4B,YAAY;AACpCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKw9E,WAAL,CAAiB/5E,QAAjB,GAFoC,CAEP;AAChC,SAHD;;AAIA05E,eAAO,CAACz9E,SAAR,CAAkBy+E,YAAlB,GAAiC,UAAUxyE,GAAV,EAAegpE,GAAf,EAAoB;AACjD,cAAI5yE,KAAK,GAAG,KAAKgC,KAAL,CAAWuwE,KAAX,CAAiB3oE,GAAjB,EAAsBgpE,GAAtB,EAA2Bp0C,IAAvC;AACA,cAAIv+B,GAAG,GAAG,mEAAQD,KAAR,EAAe,CAAf,CAAV;AACA,iBAAO;AAAEA,iBAAK,EAAEA,KAAT;AAAgBC,eAAG,EAAEA;AAArB,WAAP;AACH,SAJD;;AAKAm7E,eAAO,CAACz9E,SAAR,CAAkBw+E,oBAAlB,GAAyC,UAAU39C,IAAV,EAAgBrgC,IAAhB,EAAsB;AAC3D,cAAIk+E,QAAQ,GAAG,KAAKr6E,KAApB;AACA,eAAKk6E,cAAL,CAAoB9yB,YAApB,CAAiC;AAC7B5qB,gBAAI,EAAEA,IAAI,IAAI,KAAK09C,cAAL,CAAoBl6E,KAApB,CAA0Bw8B,IADX;AAE7Bg8C,kBAAM,EAAEr8E,IAAI,IAAI,KAAK+9E,cAAL,CAAoBl6E,KAApB,CAA0Bw4E,MAFb;AAG7Bh7D,0BAAc,EAAE68D,QAAQ,CAAC78D,cAHI;AAI7Bi7D,8BAAkB,EAAE4B,QAAQ,CAACriC,SAAT,GAAqBqiC,QAAQ,CAACriC,SAAT,CAAmBs6B,iBAAxC,GAA4D,IAJnD;AAK7BoG,gCAAoB,EAAE2B,QAAQ,CAACxzD,WAAT,GAAuBwzD,QAAQ,CAACxzD,WAAT,CAAqByrD,iBAA5C,GAAgE;AALzD,WAAjC,EAMG,KAAK31E,OANR;AAOH,SATD;AAUA;;;;AAEAy8E,eAAO,CAACz9E,SAAR,CAAkB+9E,YAAlB,GAAiC,UAAUnJ,KAAV,EAAiB0J,OAAjB,EAA0B;AACvD,cAAIv9E,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+C+a,IAAI,GAAGje,EAAE,CAACie,IAAzD;AAAA,cAA+DuzB,KAAK,GAAGxxC,EAAE,CAACwxC,KAA1E;AAAA,cAAiF/rC,OAAO,GAAGzF,EAAE,CAACyF,OAA9F;;AACA,cAAIyY,EAAE,GAAG,IAAT;AAAA,cAAe01D,MAAM,GAAG11D,EAAE,CAAC01D,MAA3B;AAAA,cAAmCxB,MAAM,GAAGl0D,EAAE,CAACk0D,MAA/C;;AACA,cAAIh9C,IAAI,GAAG,EAAX;AACA,cAAIlqB,GAAJ;AACA,cAAIgpE,GAAJ;;AACA,eAAKhpE,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG0oE,MAApB,EAA4B1oE,GAAG,EAA/B,EAAmC;AAC/BkqB,gBAAI,IAAI,KAAKwoD,gBAAL,CAAsB1yE,GAAtB,EAA2BqyE,OAA3B,CAAR;AACH;;AACD,eAAKn6E,EAAL,CAAQ0C,SAAR,GAAoBsvB,IAApB;AACA,eAAK4jD,MAAL,GAAc,wEAAa,KAAK51E,EAAlB,EAAsB,SAAtB,CAAd;AACA,eAAKy6E,OAAL,GAAe,wEAAa,KAAKz6E,EAAlB,EAAsB,2BAAtB,CAAf;;AACA,cAAIouC,KAAJ,EAAW;AACP,iBAAKqsC,OAAL,CAAapsC,OAAb;AACH;;AACD,eAAKqsC,YAAL,GAAoB,IAAI,gEAAJ,CAAkB,KAAK16E,EAAvB,EAA2B,KAAK41E,MAAhC,EAAwC,KAAxC,EAA+C,IAA/C,CAAoD;AAApD,WAApB;AAEA,eAAK+E,YAAL,GAAoB,IAAI,gEAAJ,CAAkB,KAAK36E,EAAvB,EAA2B,KAAKy6E,OAAL,CAAalyE,KAAb,CAAmB,CAAnB,EAAsBymE,MAAtB,CAA3B,EAA0D;AAC9E,cADoB,EACd,KADc,CACR;AADQ,WAApB,CAjBuD,CAoBvD;;AACA,eAAKlnE,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG0oE,MAApB,EAA4B1oE,GAAG,EAA/B,EAAmC;AAC/B,iBAAKgpE,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG9B,MAApB,EAA4B8B,GAAG,EAA/B,EAAmC;AAC/BhxE,sBAAQ,CAACke,eAAT,CAAyB,WAAzB,EAAsC,CAClC;AACI0e,oBAAI,EAAEr6B,OAAO,CAAC6wC,MAAR,CAAeu9B,KAAK,CAAC3oE,GAAD,CAAL,CAAWgpE,GAAX,EAAgBp0C,IAA/B,CADV;AAEI18B,kBAAE,EAAE,KAAK46E,SAAL,CAAe9yE,GAAf,EAAoBgpE,GAApB,CAFR;AAGIj2D,oBAAI,EAAEA;AAHV,eADkC,CAAtC;AAOH;AACJ;;AACD,eAAK2+D,gBAAL,GAAwB,IAAxB;AACH,SAjCD;;AAkCAF,eAAO,CAACz9E,SAAR,CAAkBg+E,cAAlB,GAAmC,YAAY;AAC3C,eAAK/D,gBAAL;AACH,SAFD,CA3F2C,CA8F3C;AACA;;;AACAwD,eAAO,CAACz9E,SAAR,CAAkB2+E,gBAAlB,GAAqC,UAAU1yE,GAAV,EAAeqyE,OAAf,EAAwB;AACzD,cAAIr9E,KAAK,GAAG,KAAKD,OAAL,CAAaC,KAAzB;AACA,cAAIU,OAAO,GAAG,CAAC,QAAD,EAAW,SAAX,EAAsBV,KAAK,CAAC2B,QAAN,CAAe,QAAf,CAAtB,CAAd;;AACA,cAAI07E,OAAJ,EAAa;AACT38E,mBAAO,CAACc,IAAR,CAAa,UAAb;AACH;;AACD,cAAIu8E,KAAK,GAAG,IAAI9B,QAAJ,CAAa,KAAKl8E,OAAlB,CAAZ;AACA,iBAAO,KACH,cADG,GACcW,OAAO,CAACe,IAAR,CAAa,GAAb,CADd,GACkC,IADlC,GAEH,qBAFG,GAGH,gBAHG,GAGgBzB,KAAK,CAAC2B,QAAN,CAAe,WAAf,CAHhB,GAG8C,IAH9C,GAIHo8E,KAAK,CAAC7B,UAAN,CAAiB;AACbvI,iBAAK,EAAE,KAAKvwE,KAAL,CAAWuwE,KAAX,CAAiB3oE,GAAjB,CADM;AAEb3H,uBAAW,EAAE,KAAKD,KAAL,CAAWC,WAFX;AAGbovE,2BAAe,EAAE,KAAK6H,WAAL,CAAiB0D;AAHrB,WAAjB,CAJG,GASH,UATG,GAUH,QAVG,GAWH,mCAXG,GAYH,SAZG,IAaF,KAAKC,mBAAL,KACG,YACI,KAAKC,kBAAL,CAAwBlzE,GAAxB,CADJ,GAEI,UAHP,GAIG,EAjBD,IAkBH,UAlBG,GAmBH,QAnBG,GAoBH,QApBJ;AAqBH,SA5BD;;AA6BAwxE,eAAO,CAACz9E,SAAR,CAAkBk/E,mBAAlB,GAAwC,YAAY;AAChD,iBAAO,KAAKE,sBAAL,MACH,KAAK7D,WAAL,CAAiB8D,sBADd,IAEH,KAAK9D,WAAL,CAAiB+D,qBAFrB;AAGH,SAJD;;AAKA7B,eAAO,CAACz9E,SAAR,CAAkBo/E,sBAAlB,GAA2C,YAAY;AACnD,iBAAO,KAAKzK,MAAL,GAAc,CAArB;AACH,SAFD;AAGA;;;;AAEA8I,eAAO,CAACz9E,SAAR,CAAkBm/E,kBAAlB,GAAuC,UAAUlzE,GAAV,EAAe;AAClD,cAAIsmC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAIgtC,KAAK,GAAG,KAAKhE,WAAL,CAAiBiE,qBAAjB,CAAuCvzE,GAAvC,EAA4C,IAA5C,CAAZ;AACA,iBAAO,KACH,MADG,IAEFsmC,KAAK,GAAG,EAAH,GAAQgtC,KAFX,IAGH,KAAKE,qBAAL,CAA2BxzE,GAA3B,CAHG,IAIFsmC,KAAK,GAAGgtC,KAAH,GAAW,EAJd,IAKH,OALJ;AAMH,SATD;;AAUA9B,eAAO,CAACz9E,SAAR,CAAkBy/E,qBAAlB,GAA0C,UAAUxzE,GAAV,EAAe;AACrD,cAAIyzE,KAAK,GAAG,EAAZ;AACA,cAAIzK,GAAJ;AACA,cAAIp0C,IAAJ;;AACA,eAAKo0C,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG,KAAK9B,MAAzB,EAAiC8B,GAAG,EAApC,EAAwC;AACpCp0C,gBAAI,GAAG,KAAKx8B,KAAL,CAAWuwE,KAAX,CAAiB3oE,GAAjB,EAAsBgpE,GAAtB,EAA2Bp0C,IAAlC;AACA6+C,iBAAK,CAACj9E,IAAN,CAAW,KAAKk9E,oBAAL,CAA0B9+C,IAA1B,CAAX;AACH;;AACD,cAAI,KAAK7/B,OAAL,CAAauxC,KAAjB,EAAwB;AACpBmtC,iBAAK,CAACltC,OAAN;AACH;;AACD,iBAAOktC,KAAK,CAACh9E,IAAN,CAAW,EAAX,CAAP;AACH,SAZD,CAjJ2C,CA8J3C;AACA;;;AACA+6E,eAAO,CAACz9E,SAAR,CAAkB2/E,oBAAlB,GAAyC,UAAU9+C,IAAV,EAAgB;AACrD,cAAI9/B,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBwF,OAAO,GAAGzF,EAAE,CAACyF,OAApC;AAAA,cAA6CtF,OAAO,GAAGH,EAAE,CAACG,OAA1D;AACA,cAAIi1B,IAAI,GAAG,EAAX;AACA,cAAIo9C,WAAW,GAAG,+EAAoB,KAAKlvE,KAAL,CAAWC,WAAX,CAAuB2B,WAA3C,EAAwD46B,IAAxD,CAAlB,CAHqD,CAG4B;;AACjF,cAAI++C,kBAAkB,GAAG,KAAKR,sBAAL,MAAiC7L,WAA1D;AACA,cAAI5xE,OAAJ;AACA,cAAIk+E,gBAAJ;;AACA,cAAI,CAACD,kBAAD,IAAuB,CAAC,KAAKrE,WAAL,CAAiB8D,sBAA7C,EAAqE;AACjE;AACA,mBAAO,WAAP,CAFiE,CAE7C;AACvB;;AACD19E,iBAAO,GAAG,yEAAck/B,IAAd,EAAoB,KAAKx8B,KAAL,CAAWC,WAA/B,EAA4C,KAAKtD,OAAjD,CAAV;AACAW,iBAAO,CAACuoC,OAAR,CAAgB,YAAhB;;AACA,cAAI,KAAKqxC,WAAL,CAAiB8D,sBAArB,EAA6C;AACzCQ,4BAAgB,GAAGr5E,OAAO,CAAC+uD,OAA3B;AACH;;AACDp/B,cAAI,IAAI,gBAAgBx0B,OAAO,CAACe,IAAR,CAAa,GAAb,CAAhB,GAAoC,GAApC,IACH6wE,WAAW,GACR,iBAAiB/sE,OAAO,CAACuB,SAAR,CAAkB84B,IAAlB,EAAwB;AAAE74B,oBAAQ,EAAE;AAAZ,WAAxB,CAAjB,GAA+D,GADvD,GAER,EAHA,IAIJ,GAJJ;;AAKA,cAAI,KAAKuzE,WAAL,CAAiB8D,sBAAjB,IAA4Cx+C,IAAI,CAACF,SAAL,OAAqBk/C,gBAArE,EAAwF;AACpF1pD,gBAAI,IAAI,+EAAoBj1B,OAApB,EAA6BsF,OAA7B,EAAsC;AAAEq6B,kBAAI,EAAEA,IAAR;AAAc/3B,kBAAI,EAAE;AAApB,aAAtC,EAAoE;AAAE,uBAAS;AAAX,aAApE,EAAmGtC,OAAO,CAACyB,MAAR,CAAe44B,IAAf,EAAqB28C,eAArB,CAAnG,CAAyI;AAAzI,aAAR;AAEH;;AACD,cAAIoC,kBAAJ,EAAwB;AACpBzpD,gBAAI,IAAI,+EAAoBj1B,OAApB,EAA6BsF,OAA7B,EAAsCq6B,IAAtC,EAA4C;AAAE,uBAAS;AAAX,aAA5C,EAA0Er6B,OAAO,CAACyB,MAAR,CAAe44B,IAAf,EAAqB08C,cAArB,CAA1E,CAA+G;AAA/G,aAAR;AAEH;;AACDpnD,cAAI,IAAI,OAAR;AACA,iBAAOA,IAAP;AACH,SA/BD;AAgCA;;;;AAEAsnD,eAAO,CAACz9E,SAAR,CAAkBuF,UAAlB,GAA+B,UAAUC,QAAV,EAAoB;AAC/C,cAAIvB,QAAQ,GAAG,KAAKjD,OAAL,CAAaiD,QAA5B;;AACA,cAAIlD,EAAE,GAAG,IAAT;AAAA,cAAe68E,YAAY,GAAG78E,EAAE,CAAC68E,YAAjC;AAAA,cAA+Cj6E,aAAa,GAAG5C,EAAE,CAAC4C,aAAlE;AAAA,cAAiFk6E,cAAc,GAAG98E,EAAE,CAAC88E,cAArG;;AACA,cAAIr4E,QAAQ,IACR,KAAKm4E,gBADL,IAEA15E,QAAQ,CAACujE,eAFb,CAE6B;AAF7B,YAGE;AACE,mBAAK1pD,mBAAL;AACA,mBAAK6/D,gBAAL,GAAwB,KAAxB;AACH;;AACDC,sBAAY,CAACj4E,YAAb,CAA0BH,QAA1B;AACA7B,uBAAa,CAACgC,YAAd,CAA2BH,QAA3B;AACAq4E,wBAAc,CAACl4E,YAAf,CAA4BH,QAA5B;AACAo4E,sBAAY,CAACh4E,WAAb,CAAyBJ,QAAzB;AACA7B,uBAAa,CAACiC,WAAd,CAA0BJ,QAA1B;AACAq4E,wBAAc,CAACj4E,WAAf,CAA2BJ,QAA3B;AACH,SAhBD;;AAiBAi4E,eAAO,CAACz9E,SAAR,CAAkB8d,mBAAlB,GAAwC,YAAY;AAChD,eAAKgiE,iBAAL;AACA,eAAKC,iBAAL;AACH,SAHD;;AAIAtC,eAAO,CAACz9E,SAAR,CAAkB8/E,iBAAlB,GAAsC,YAAY;AAC9C,eAAKhB,YAAL,CAAkB12B,KAAlB;AACH,SAFD;;AAGAq1B,eAAO,CAACz9E,SAAR,CAAkB+/E,iBAAlB,GAAsC,YAAY;AAC9C,eAAKlB,YAAL,CAAkBz2B,KAAlB;AACA,eAAKy2B,YAAL,CAAkBh2B,OAAlB,CAA0B,KAAK8rB,MAAL,GAAc,CAAxC,KAA8C,KAAK+I,kBAAnD,CAF8C,CAEyB;AAC1E,SAHD;AAIA;;;;AAEAD,eAAO,CAACz9E,SAAR,CAAkBggF,aAAlB,GAAkC,UAAUj3B,YAAV,EAAwBE,WAAxB,EAAqC;AACnE,cAAIloD,EAAE,GAAG,IAAT;AAAA,cAAe+9E,YAAY,GAAG/9E,EAAE,CAAC+9E,YAAjC;AAAA,cAA+CD,YAAY,GAAG99E,EAAE,CAAC89E,YAAjE;;AACA,cAAI5J,GAAG,GAAG6J,YAAY,CAACh2B,WAAb,CAAyBC,YAAzB,CAAV;AACA,cAAI98C,GAAG,GAAG4yE,YAAY,CAAC71B,UAAb,CAAwBC,WAAxB,CAAV;;AACA,cAAIh9C,GAAG,IAAI,IAAP,IAAegpE,GAAG,IAAI,IAA1B,EAAgC;AAC5B,mBAAO;AACHhpE,iBAAG,EAAEA,GADF;AAEHgpE,iBAAG,EAAEA,GAFF;AAGHz2D,sBAAQ,EAAE;AACNtc,qBAAK,EAAE,KAAKu8E,YAAL,CAAkBxyE,GAAlB,EAAuBgpE,GAAvB,CADD;AAENhzE,sBAAM,EAAE;AAFF,eAHP;AAOHmd,mBAAK,EAAE,KAAK2/D,SAAL,CAAe9yE,GAAf,EAAoBgpE,GAApB,CAPJ;AAQHgL,0BAAY,EAAE;AACV3rE,oBAAI,EAAEwqE,YAAY,CAACr2B,KAAb,CAAmBwsB,GAAnB,CADI;AAEVngE,qBAAK,EAAEgqE,YAAY,CAACp2B,MAAb,CAAoBusB,GAApB,CAFG;AAGV1gE,mBAAG,EAAEsqE,YAAY,CAACj2B,IAAb,CAAkB38C,GAAlB,CAHK;AAIV+I,sBAAM,EAAE6pE,YAAY,CAACh2B,OAAb,CAAqB58C,GAArB;AAJE;AARX,aAAP;AAeH;AACJ,SArBD;AAsBA;;AAEA;;;AACAwxE,eAAO,CAACz9E,SAAR,CAAkB++E,SAAlB,GAA8B,UAAU9yE,GAAV,EAAegpE,GAAf,EAAoB;AAC9C,iBAAO,KAAK2J,OAAL,CAAa3yE,GAAG,GAAG,KAAKknE,MAAX,GAAoB8B,GAAjC,CAAP;AACH,SAFD;AAGA;;;;AAEAwI,eAAO,CAACz9E,SAAR,CAAkBk+E,gBAAlB,GAAqC,UAAUv8D,KAAV,EAAiB;AAClD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBguE,UAAnB,CAA8BhwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKiH,YAAL,CAAkB/5E,UAAlB,CAA6B,WAA7B,EAA0C,KAAK7C,OAA/C,EAAwD2gB,KAAK,CAACnhB,IAA9D;AACH;AACJ,SALD;;AAMAi9E,eAAO,CAACz9E,SAAR,CAAkBm+E,kBAAlB,GAAuC,UAAUx8D,KAAV,EAAiB;AACpD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBiuE,UAAnB,CAA8BjwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKiH,YAAL,CAAkB75E,QAAlB,CAA2B,WAA3B,EAAwC,KAAK/C,OAA7C;AACH;AACJ,SALD;AAMA;;;;AAEAy8E,eAAO,CAACz9E,SAAR,CAAkBo+E,kBAAlB,GAAuC,UAAUz8D,KAAV,EAAiB;AACpD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBguE,UAAnB,CAA8BhwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKiH,YAAL,CAAkB/5E,UAAlB,CAA6B,WAA7B,EAA0C,KAAK7C,OAA/C,EAAwD2gB,KAAK,CAACnhB,IAA9D;AACA,iBAAKq9E,cAAL,CAAoBh6E,UAApB,CAA+B,KAAK7C,OAApC,EAA6C2gB,KAAK,CAACnhB,IAAnD,EAAyD;AAAEywE,wBAAU,EAAE,IAAd;AAAoB2F,uBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,aAAzD;AACH;AACJ,SAND;;AAOA6G,eAAO,CAACz9E,SAAR,CAAkBq+E,oBAAlB,GAAyC,UAAU18D,KAAV,EAAiB;AACtD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBiuE,UAAnB,CAA8BjwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKiH,YAAL,CAAkB75E,QAAlB,CAA2B,WAA3B,EAAwC,KAAK/C,OAA7C;AACA,iBAAK68E,cAAL,CAAoB95E,QAApB,CAA6B,KAAK/C,OAAlC,EAA2C2gB,KAAK,CAACnhB,IAAjD,EAAuD;AAAEywE,wBAAU,EAAE,IAAd;AAAoB2F,uBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,aAAvD;AACH;AACJ,SAND;AAOA;;;;AAEA6G,eAAO,CAACz9E,SAAR,CAAkBi6E,gBAAlB,GAAqC,YAAY;AAC7C,cAAI,KAAKiG,UAAT,EAAqB;AACjB,iBAAKA,UAAL,CAAgBpH,IAAhB,GADiB,CACO;AAC3B;AACJ,SAJD,CA5R2C,CAiS3C;AACA;;;AACA2E,eAAO,CAACz9E,SAAR,CAAkBmgF,SAAlB,GAA8B,UAAUC,UAAV,EAAsB;AAChD,cAAIvG,UAAU,GAAG,KAAKl2E,aAAL,CAAmBk2E,UAAnB,IAAiC,EAAlD;AACA,cAAI5tE,GAAJ,CAFgD,CAEvC;;AACT,cAAIo0E,aAAJ;;AACA,eAAKp0E,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG4tE,UAAU,CAACp5E,MAA/B,EAAuCwL,GAAG,EAA1C,EAA8C;AAC1C,iBAAKq0E,UAAL,CAAgBr0E,GAAhB;;AACA,gBAAI,CAACm0E,UAAL,EAAiB;AACbC,2BAAa,GAAG,KAAhB;AACH,aAFD,MAGK,IAAI,OAAOD,UAAP,KAAsB,QAA1B,EAAoC;AACrCC,2BAAa,GAAGD,UAAhB;AACH,aAFI,MAGA;AACDC,2BAAa,GAAG,KAAKE,oBAAL,CAA0Bt0E,GAA1B,CAAhB;AACH;;AACD,gBAAIo0E,aAAa,KAAK,KAAtB,EAA6B;AACzB,mBAAKG,QAAL,CAAcv0E,GAAd,EAAmBo0E,aAAnB;AACH;AACJ;AACJ,SAnBD,CAnS2C,CAuT3C;AACA;AACA;;;AACA5C,eAAO,CAACz9E,SAAR,CAAkBugF,oBAAlB,GAAyC,UAAUt0E,GAAV,EAAe;AACpD,cAAIy3B,KAAK,GAAG,KAAKq2C,MAAL,CAAY9tE,GAAZ,CAAZ,CADoD,CACtB;;AAC9B,cAAIw0E,SAAS,GAAG/8C,KAAK,CAACpwB,qBAAN,GAA8B0B,MAA9C,CAFoD,CAEE;;AACtD,cAAI0rE,KAAK,GAAG,wEAAa,KAAK/8E,aAAL,CAAmBk2E,UAAnB,CAA8B5tE,GAA9B,EAAmC5E,OAAhD,CAAZ;AACA,cAAIF,CAAJ;AACA,cAAIm1E,IAAJ,CALoD,CAMpD;;AACA,eAAKn1E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGu5E,KAAK,CAACjgF,MAAtB,EAA8B0G,CAAC,EAA/B,EAAmC;AAC/Bm1E,gBAAI,GAAGoE,KAAK,CAACv5E,CAAD,CAAZ;AACAm1E,gBAAI,CAACz3E,SAAL,CAAeg0B,MAAf,CAAsB,YAAtB,EAF+B,CAEM;;AACrC,gBAAIyjD,IAAI,CAAChpE,qBAAL,GAA6B0B,MAA7B,GAAsCyrE,SAA1C,EAAqD;AACjD,qBAAOt5E,CAAP;AACH;AACJ;;AACD,iBAAO,KAAP,CAdoD,CActC;AACjB,SAfD,CA1T2C,CA0U3C;AACA;AACA;;;AACAs2E,eAAO,CAACz9E,SAAR,CAAkBwgF,QAAlB,GAA6B,UAAUv0E,GAAV,EAAem0E,UAAf,EAA2B;AACpD,cAAI//E,KAAK,GAAG,IAAZ;;AACA,cAAI8yE,MAAM,GAAG,KAAKA,MAAlB;AACA,cAAI5gC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAI2nC,SAAS,GAAG,KAAKv2E,aAAL,CAAmBk2E,UAAnB,CAA8B5tE,GAA9B,CAAhB;AACA,cAAI00E,SAAS,GAAG,EAAhB,CALoD,CAKhC;;AACpB,cAAI1L,GAAG,GAAG,CAAV,CANoD,CAMvC;;AACb,cAAI8F,SAAJ,CAPoD,CAOrC;;AACf,cAAIF,UAAJ,CARoD,CAQpC;;AAChB,cAAI+F,YAAJ,CAToD,CASlC;;AAClB,cAAIz5E,CAAJ;AACA,cAAIrG,GAAJ;AACA,cAAI+/E,SAAJ,CAZoD,CAYrC;;AACf,cAAIC,cAAJ,CAboD,CAahC;;AACpB,cAAIC,YAAJ,CAdoD,CAclC;;AAClB,cAAI9F,EAAJ;AACA,cAAIxlD,OAAJ;AACA,cAAIurD,YAAJ,CAjBoD,CAiBlC;;AAClB,cAAIzoD,CAAJ;AACA,cAAI0oD,MAAJ;AACA,cAAIC,QAAJ;AACA,cAAIC,QAAJ,CArBoD,CAsBpD;;AACA,cAAIjG,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,MAAV,EAAkB;AACpC,mBAAOlG,GAAG,GAAGkG,MAAb,EAAqB;AACjB0F,uBAAS,GAAGxgF,KAAK,CAAC+gF,WAAN,CAAkBn1E,GAAlB,EAAuBgpE,GAAvB,EAA4BmL,UAA5B,CAAZ;;AACA,kBAAIS,SAAS,CAACpgF,MAAd,EAAsB;AAClBw6E,kBAAE,GAAGJ,UAAU,CAACuF,UAAU,GAAG,CAAd,CAAV,CAA2BnL,GAA3B,CAAL;AACAkM,wBAAQ,GAAG9gF,KAAK,CAACghF,cAAN,CAAqBp1E,GAArB,EAA0BgpE,GAA1B,EAA+B4L,SAA/B,CAAX;AACAK,wBAAQ,GAAG,yEAAc,KAAd,EAAqB,IAArB,EAA2BC,QAA3B,CAAX;AACAlG,kBAAE,CAAC51E,WAAH,CAAe67E,QAAf;AACAP,yBAAS,CAACl+E,IAAV,CAAey+E,QAAf;AACH;;AACDjM,iBAAG;AACN;AACJ,WAZD;;AAaA,cAAImL,UAAU,IAAIA,UAAU,GAAGlG,SAAS,CAACM,SAAV,CAAoB/5E,MAAnD,EAA2D;AAAE;AACzDs6E,qBAAS,GAAGb,SAAS,CAACM,SAAV,CAAoB4F,UAAU,GAAG,CAAjC,CAAZ;AACAvF,sBAAU,GAAGX,SAAS,CAACW,UAAvB;AACA+F,wBAAY,GAAG,wEAAa1G,SAAS,CAAC7yE,OAAvB,EAAgCqF,KAAhC,CAAsC0zE,UAAtC,CAAf,CAHuD,CAGW;;AAClEQ,wBAAY,CAACx0E,OAAb,CAAqB,UAAU6P,IAAV,EAAgB;AACjCA,kBAAI,CAACpX,SAAL,CAAeC,GAAf,CAAmB,YAAnB,EADiC,CACC;AACrC,aAFD,EAJuD,CAOvD;;AACA,iBAAKqC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4zE,SAAS,CAACt6E,MAA1B,EAAkC0G,CAAC,EAAnC,EAAuC;AACnCrG,iBAAG,GAAGi6E,SAAS,CAAC5zE,CAAD,CAAf;AACA,kBAAIi0E,OAAO,GAAG7oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACw0E,OAArB,GAAgCx0E,GAAG,CAACu0E,QAAvD;AACA,kBAAIgG,QAAQ,GAAG9oC,KAAK,GAAI4gC,MAAM,GAAG,CAAT,GAAaryE,GAAG,CAACu0E,QAArB,GAAiCv0E,GAAG,CAACw0E,OAAzD;AACA4F,6BAAe,CAACE,OAAD,CAAf,CAJmC,CAIT;AAC1B;;AACA2F,0BAAY,GAAG,EAAf;AACAD,4BAAc,GAAG,CAAjB;;AACA,qBAAO7L,GAAG,IAAIoG,QAAd,EAAwB;AACpBwF,yBAAS,GAAG,KAAKO,WAAL,CAAiBn1E,GAAjB,EAAsBgpE,GAAtB,EAA2BmL,UAA3B,CAAZ;AACAW,4BAAY,CAACt+E,IAAb,CAAkBo+E,SAAlB;AACAC,8BAAc,IAAID,SAAS,CAACpgF,MAA5B;AACAw0E,mBAAG;AACN;;AACD,kBAAI6L,cAAJ,EAAoB;AAAE;AAClB7F,kBAAE,GAAGJ,UAAU,CAACuF,UAAU,GAAG,CAAd,CAAV,CAA2BhF,OAA3B,CAAL,CADgB,CAC0B;;AAC1C3lD,uBAAO,GAAGwlD,EAAE,CAACxlD,OAAH,IAAc,CAAxB;AACAurD,4BAAY,GAAG,EAAf,CAHgB,CAIhB;;AACA,qBAAKzoD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwoD,YAAY,CAACtgF,MAA7B,EAAqC83B,CAAC,EAAtC,EAA0C;AACtC0oD,wBAAM,GAAG,yEAAc,IAAd,EAAoB;AAAEn5E,6BAAS,EAAE,cAAb;AAA6B2tB,2BAAO,EAAEA;AAAtC,mBAApB,CAAT;AACAorD,2BAAS,GAAGE,YAAY,CAACxoD,CAAD,CAAxB;AACA4oD,0BAAQ,GAAG,KAAKE,cAAL,CAAoBp1E,GAApB,EAAyBmvE,OAAO,GAAG7iD,CAAnC,EAAsC,CAACz3B,GAAD,EAAMc,MAAN,CAAai/E,SAAb,CAAtC,CAA8D;AAA9D,mBAAX;AAEAK,0BAAQ,GAAG,yEAAc,KAAd,EAAqB,IAArB,EAA2BC,QAA3B,CAAX;AACAF,wBAAM,CAAC57E,WAAP,CAAmB67E,QAAnB;AACAF,8BAAY,CAACv+E,IAAb,CAAkBw+E,MAAlB;AACAN,2BAAS,CAACl+E,IAAV,CAAew+E,MAAf;AACH;;AACDhG,kBAAE,CAACp2E,SAAH,CAAaC,GAAb,CAAiB,YAAjB;AACA,8FAAmBm2E,EAAnB,EAAuB+F,YAAvB;AACAJ,4BAAY,CAACn+E,IAAb,CAAkBw4E,EAAlB;AACH;AACJ;;AACDC,2BAAe,CAAC,KAAK/H,MAAN,CAAf,CA1CuD,CA0CzB;;AAC9B+G,qBAAS,CAACoH,OAAV,GAAoBX,SAApB,CA3CuD,CA2CxB;;AAC/BzG,qBAAS,CAACqH,UAAV,GAAuBX,YAAvB,CA5CuD,CA4ClB;AACxC;AACJ,SAlFD,CA7U2C,CAga3C;AACA;;;AACAnD,eAAO,CAACz9E,SAAR,CAAkBsgF,UAAlB,GAA+B,UAAUr0E,GAAV,EAAe;AAC1C,cAAIiuE,SAAS,GAAG,KAAKv2E,aAAL,CAAmBk2E,UAAnB,CAA8B5tE,GAA9B,CAAhB;;AACA,cAAIiuE,SAAS,CAACoH,OAAd,EAAuB;AACnBpH,qBAAS,CAACoH,OAAV,CAAkBl1E,OAAlB,CAA0B,gEAA1B;AACA8tE,qBAAS,CAACoH,OAAV,GAAoB,IAApB;AACH;;AACD,cAAIpH,SAAS,CAACqH,UAAd,EAA0B;AACtBrH,qBAAS,CAACqH,UAAV,CAAqBn1E,OAArB,CAA6B,UAAUo1E,SAAV,EAAqB;AAC9CA,uBAAS,CAAC38E,SAAV,CAAoBg0B,MAApB,CAA2B,YAA3B;AACH,aAFD;AAGAqhD,qBAAS,CAACqH,UAAV,GAAuB,IAAvB;AACH;AACJ,SAZD,CAla2C,CA+a3C;AACA;;;AACA9D,eAAO,CAACz9E,SAAR,CAAkBqhF,cAAlB,GAAmC,UAAUp1E,GAAV,EAAegpE,GAAf,EAAoBwM,UAApB,EAAgC;AAC/D,cAAIphF,KAAK,GAAG,IAAZ;;AACA,cAAIU,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+C+a,IAAI,GAAGje,EAAE,CAACie,IAAzD;AAAA,cAA+DxY,OAAO,GAAGzF,EAAE,CAACyF,OAA5E;AAAA,cAAqFtF,OAAO,GAAGH,EAAE,CAACG,OAAlG;AAAA,cAA2GqxC,KAAK,GAAGxxC,EAAE,CAACwxC,KAAtH;AACA,cAAIvU,CAAC,GAAG,yEAAc,GAAd,EAAmB;AAAEl2B,qBAAS,EAAE;AAAb,WAAnB,CAAR;AACAk2B,WAAC,CAACokC,SAAF,GAAc,KAAKsf,eAAL,CAAqBD,UAAU,CAAChhF,MAAhC,CAAd;AACAu9B,WAAC,CAAC7tB,gBAAF,CAAmB,OAAnB,EAA4B,UAAUV,EAAV,EAAc;AACtC,gBAAIkyE,WAAW,GAAGzgF,OAAO,CAACotB,eAA1B;;AACA,gBAAIszD,IAAI,GAAGrvC,KAAK,GAAGlyC,KAAK,CAAC8yE,MAAN,GAAe8B,GAAf,GAAqB,CAAxB,GAA4BA,GAA5C,CAFsC,CAEW;;;AACjD,gBAAIp0C,IAAI,GAAGxgC,KAAK,CAACgE,KAAN,CAAYuwE,KAAZ,CAAkB3oE,GAAlB,EAAuB21E,IAAvB,EAA6B/gD,IAAxC;AACA,gBAAIghD,MAAM,GAAGpyE,EAAE,CAACqyE,aAAhB;;AACA,gBAAI1iE,KAAK,GAAG/e,KAAK,CAAC0+E,SAAN,CAAgB9yE,GAAhB,EAAqBgpE,GAArB,CAAZ;;AACA,gBAAIluE,OAAO,GAAG1G,KAAK,CAAC+gF,WAAN,CAAkBn1E,GAAlB,EAAuBgpE,GAAvB,CAAd,CANsC,CAOtC;;;AACA,gBAAI8M,eAAe,GAAG1hF,KAAK,CAAC2hF,cAAN,CAAqBj7E,OAArB,EAA8B85B,IAA9B,CAAtB;;AACA,gBAAIohD,kBAAkB,GAAG5hF,KAAK,CAAC2hF,cAAN,CAAqBP,UAArB,EAAiC5gD,IAAjC,CAAzB;;AACA,gBAAI,OAAO8gD,WAAP,KAAuB,UAA3B,EAAuC;AACnC;AACAA,yBAAW,GAAG19E,QAAQ,CAACke,eAAT,CAAyB,iBAAzB,EAA4C,CACtD;AACI0e,oBAAI,EAAEr6B,OAAO,CAAC6wC,MAAR,CAAexW,IAAf,CADV;AAEI5+B,sBAAM,EAAE,IAFZ;AAGImd,qBAAK,EAAEA,KAHX;AAIIyiE,sBAAM,EAAEA,MAJZ;AAKIrhF,oBAAI,EAAEuhF,eALV;AAMIN,0BAAU,EAAEQ,kBANhB;AAOI7/D,uBAAO,EAAE3S,EAPb;AAQIuP,oBAAI,EAAEA;AARV,eADsD,CAA5C,CAAd;AAYH;;AACD,gBAAI2iE,WAAW,KAAK,SAApB,EAA+B;AAC3BthF,mBAAK,CAAC6hF,cAAN,CAAqBj2E,GAArB,EAA0BgpE,GAA1B,EAA+B4M,MAA/B,EAAuCE,eAAvC;AACH,aAFD,MAGK,IAAI,OAAOJ,WAAP,KAAuB,QAA3B,EAAqC;AAAE;AACxC19E,sBAAQ,CAACskE,MAAT,CAAgB1nC,IAAhB,EAAsB8gD,WAAtB;AACH;AACJ,WA/BD;AAgCA,iBAAO3jD,CAAP;AACH,SAtCD,CAjb2C,CAwd3C;;;AACAy/C,eAAO,CAACz9E,SAAR,CAAkBkiF,cAAlB,GAAmC,UAAUj2E,GAAV,EAAegpE,GAAf,EAAoBkM,QAApB,EAA8B3gF,IAA9B,EAAoC;AACnE,cAAIH,KAAK,GAAG,IAAZ;;AACA,cAAIU,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+C+a,IAAI,GAAGje,EAAE,CAACie,IAAzD;AAAA,cAA+D/d,KAAK,GAAGF,EAAE,CAACE,KAA1E;AAAA,cAAiFsxC,KAAK,GAAGxxC,EAAE,CAACwxC,KAA5F;;AACA,cAAIqvC,IAAI,GAAGrvC,KAAK,GAAG,KAAK4gC,MAAL,GAAc8B,GAAd,GAAoB,CAAvB,GAA2BA,GAA3C,CAHmE,CAGnB;;;AAChD,cAAIiM,QAAQ,GAAGC,QAAQ,CAACjuE,UAAxB,CAJmE,CAI/B;;AACpC,cAAIivE,KAAJ,CALmE,CAKxD;;AACX,cAAIjhF,OAAJ;;AACA,cAAI,KAAKyzE,MAAL,KAAgB,CAApB,EAAuB;AACnBwN,iBAAK,GAAGnjE,IAAI,CAAC7a,EAAb,CADmB,CACF;AACpB,WAFD,MAGK;AACDg+E,iBAAK,GAAG,KAAKpI,MAAL,CAAY9tE,GAAZ,CAAR,CADC,CACyB;AAC7B;;AACD/K,iBAAO,GAAG;AACN4G,qBAAS,EAAE,qBAAqB7G,KAAK,CAAC2B,QAAN,CAAe,SAAf,CAD1B;AAENQ,oBAAQ,EAAE4b,IAAI,CAAC7a,EAFT;AAGNoQ,eAAG,EAAE,uEAAY4tE,KAAZ,EAAmB5tE,GAHlB;AAINykE,oBAAQ,EAAE,IAJJ;AAKNnjD,mBAAO,EAAE,iBAAU1xB,EAAV,EAAc;AACnB9D,mBAAK,CAACk+E,cAAN,GAAuB,IAAI/B,OAAJ,CAAYr4E,EAAZ,CAAvB;;AACA9D,mBAAK,CAACm+E,oBAAN,CAA2Bn+E,KAAK,CAACgE,KAAN,CAAYuwE,KAAZ,CAAkB3oE,GAAlB,EAAuB21E,IAAvB,EAA6B/gD,IAAxD,EAA8DrgC,IAA9D;AACH,aARK;AASNs4E,gBAAI,EAAE,gBAAY;AACdz4E,mBAAK,CAACk+E,cAAN,CAAqB55E,OAArB;;AACAtE,mBAAK,CAACk+E,cAAN,GAAuB,IAAvB;;AACAl+E,mBAAK,CAAC6/E,UAAN,CAAiBv7E,OAAjB;;AACAtE,mBAAK,CAAC6/E,UAAN,GAAmB,IAAnB;AACH;AAdK,WAAV,CAbmE,CA6BnE;AACA;;AACA,cAAI3tC,KAAJ,EAAW;AACPrxC,mBAAO,CAAC4T,KAAR,GAAgB,uEAAYosE,QAAZ,EAAsBpsE,KAAtB,GAA8B,CAA9C,CADO,CAC0C;AACpD,WAFD,MAGK;AACD5T,mBAAO,CAACoT,IAAR,GAAe,uEAAY4sE,QAAZ,EAAsB5sE,IAAtB,GAA6B,CAA5C,CADC,CAC8C;AAClD;;AACD,eAAK4rE,UAAL,GAAkB,IAAIvH,OAAJ,CAAYz3E,OAAZ,CAAlB;AACA,eAAKg/E,UAAL,CAAgBnH,IAAhB;AACA90E,kBAAQ,CAACulE,0BAAT,GAvCmE,CAuC5B;AAC1C,SAxCD,CAzd2C,CAkgB3C;;;AACAiU,eAAO,CAACz9E,SAAR,CAAkBgiF,cAAlB,GAAmC,UAAUxhF,IAAV,EAAgBiH,OAAhB,EAAyB;AACxD,cAAIU,QAAQ,GAAGV,OAAf;AACA,cAAI26E,MAAM,GAAG,mEAAQj6E,QAAR,EAAkB,CAAlB,CAAb;AACA,cAAIk6E,QAAQ,GAAG;AAAEhgF,iBAAK,EAAE8F,QAAT;AAAmB7F,eAAG,EAAE8/E;AAAxB,WAAf;AACA,cAAIE,OAAO,GAAG,EAAd;;AACA,eAAK,IAAIr9E,EAAE,GAAG,CAAT,EAAY8zC,MAAM,GAAGv4C,IAA1B,EAAgCyE,EAAE,GAAG8zC,MAAM,CAACt4C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAGi4C,MAAM,CAAC9zC,EAAD,CAAhB;AACA,gBAAI9D,UAAU,GAAGL,GAAG,CAACK,UAArB;AACA,gBAAIg3C,SAAS,GAAGh3C,UAAU,CAACe,KAA3B;AACA,gBAAIm2C,WAAW,GAAG,2EAAgBF,SAAhB,EAA2BkqC,QAA3B,CAAlB;;AACA,gBAAIhqC,WAAJ,EAAiB;AACbiqC,qBAAO,CAAC7/E,IAAR,CAAa4L,QAAQ,CAAC,EAAD,EAAKvN,GAAL,EAAU;AAAEK,0BAAU,EAAE;AACrCE,qBAAG,EAAEF,UAAU,CAACE,GADqB;AAErCI,oBAAE,EAAE4M,QAAQ,CAAC,EAAD,EAAKlN,UAAU,CAACM,EAAhB,EAAoB;AAAEw0C,oCAAgB,EAAE;AAApB,mBAApB,CAFyB;AAGrC10C,0BAAQ,EAAEJ,UAAU,CAACI,QAHgB;AAIrCW,uBAAK,EAAEm2C;AAJ8B,iBAAd;AAKxBl2C,uBAAO,EAAErB,GAAG,CAACqB,OAAJ,IAAek2C,WAAW,CAACh2C,KAAZ,CAAkBuE,OAAlB,OAAgCuxC,SAAS,CAAC91C,KAAV,CAAgBuE,OAAhB,EALhC;AAK2DrE,qBAAK,EAAEzB,GAAG,CAACyB,KAAJ,IAAa81C,WAAW,CAAC/1C,GAAZ,CAAgBsE,OAAhB,OAA8BuxC,SAAS,CAAC71C,GAAV,CAAcsE,OAAd;AAL7G,eAAV,CAArB;AAMH;AACJ;;AACD,iBAAO07E,OAAP;AACH,SApBD,CAngB2C,CAwhB3C;;;AACA7E,eAAO,CAACz9E,SAAR,CAAkB0hF,eAAlB,GAAoC,UAAUtvC,GAAV,EAAe;AAC/C,cAAI7qB,GAAG,GAAG,KAAKvmB,OAAL,CAAaE,OAAb,CAAqBkvB,cAA/B;;AACA,cAAI,OAAO7I,GAAP,KAAe,UAAnB,EAA+B;AAC3B,mBAAOA,GAAG,CAAC6qB,GAAD,CAAV;AACH,WAFD,MAGK;AACD,mBAAO,MAAMA,GAAN,GAAY,GAAZ,GAAkB7qB,GAAzB;AACH;AACJ,SARD,CAzhB2C,CAkiB3C;AACA;;;AACAk2D,eAAO,CAACz9E,SAAR,CAAkBohF,WAAlB,GAAgC,UAAUn1E,GAAV,EAAegpE,GAAf,EAAoBsN,UAApB,EAAgC;AAC5D,cAAI3H,SAAS,GAAG,KAAKj3E,aAAL,CAAmBk2E,UAAnB,CAA8B5tE,GAA9B,EAAmC2uE,SAAnD;AACA,cAAIc,KAAK,GAAG6G,UAAU,IAAI,CAA1B;AACA,cAAI/hF,IAAI,GAAG,EAAX;AACA,cAAIM,GAAJ;;AACA,iBAAO46E,KAAK,GAAGd,SAAS,CAACn6E,MAAzB,EAAiC;AAC7BK,eAAG,GAAG85E,SAAS,CAACc,KAAD,CAAT,CAAiBzG,GAAjB,CAAN;;AACA,gBAAIn0E,GAAJ,EAAS;AACLN,kBAAI,CAACiC,IAAL,CAAU3B,GAAV;AACH;;AACD46E,iBAAK;AACR;;AACD,iBAAOl7E,IAAP;AACH,SAbD;;AAcA,eAAOi9E,OAAP;AACH,OAnjB4B,CAmjB3B,gEAnjB2B,CAA7B;;AAqjBA,UAAI+E,iBAAiB,GAAG,2EAAgB;AAAErgD,YAAI,EAAE;AAAR,OAAhB,CAAxB;AACA;;AAEA;AACA;;AACA,UAAIsgD,mBAAmB;AAAG;AAAe,gBAAUtiF,MAAV,EAAkB;AACvDN,iBAAS,CAAC4iF,mBAAD,EAAsBtiF,MAAtB,CAAT;;AACA,iBAASsiF,mBAAT,GAA+B;AAC3B,cAAIpiF,KAAK,GAAGF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAAhE;;AACApO,eAAK,CAACqiF,cAAN,GAAuB,mEAAQriF,KAAK,CAACsiF,eAAd,CAAvB;AACAtiF,eAAK,CAACmD,cAAN,GAAuB,4EAAiBnD,KAAK,CAACoD,eAAvB,EAAwCpD,KAAK,CAACqD,iBAA9C,CAAvB;AACA;;AAEA;;AACArD,eAAK,CAACuiF,mBAAN,GAA4B,YAAY;AACpC,gBAAI7hF,EAAE,GAAGV,KAAK,CAACW,OAAf;AAAA,gBAAwBC,KAAK,GAAGF,EAAE,CAACE,KAAnC;AAAA,gBAA0CC,OAAO,GAAGH,EAAE,CAACG,OAAvD;;AACA,gBAAIb,KAAK,CAACi/E,qBAAV,EAAiC;AAC7B,qBAAO,KACH,4BADG,GAC4Br+E,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAD5B,GAC6D,IAD7D,GACoEvC,KAAK,CAACwiF,mBAAN,EADpE,GACkG,GADlG,GAEH,QAFG,GAEQ;AACX,oFAAW3hF,OAAO,CAACgvB,SAAnB,CAHG,GAIH,SAJG,GAKH,OALJ;AAMH;;AACD,mBAAO,EAAP;AACH,WAXD;AAYA;;AAEA;;;AACA7vB,eAAK,CAACyiF,4BAAN,GAAqC,UAAU72E,GAAV,EAAe2tE,OAAf,EAAwB;AACzD,gBAAI74E,EAAE,GAAGV,KAAK,CAACW,OAAf;AAAA,gBAAwBE,OAAO,GAAGH,EAAE,CAACG,OAArC;AAAA,gBAA8CsF,OAAO,GAAGzF,EAAE,CAACyF,OAA3D;AACA,gBAAIu8E,SAAS,GAAGnJ,OAAO,CAACv1E,KAAR,CAAcuwE,KAAd,CAAoB3oE,GAApB,EAAyB,CAAzB,EAA4B40B,IAA5C;;AACA,gBAAIxgC,KAAK,CAACi/E,qBAAV,EAAiC;AAC7B,qBAAO,KACH,6BADG,GAC6Bj/E,KAAK,CAACwiF,mBAAN,EAD7B,GAC2D,GAD3D,GAEH,gFAAoB;AACpB3hF,qBADA,EACSsF,OADT,EACkB;AAAEq6B,oBAAI,EAAEkiD,SAAR;AAAmBj6E,oBAAI,EAAE,MAAzB;AAAiCi9C,wBAAQ,EAAE6zB,OAAO,CAACzG,MAAR,KAAmB;AAA9D,eADlB,EACqF3sE,OAAO,CAACyB,MAAR,CAAe86E,SAAf,EAA0BP,iBAA1B,CADrF,CACkI;AADlI,eAFG,GAKH,OALJ;AAMH;;AACD,mBAAO,EAAP;AACH,WAZD,CAtB2B,CAmC3B;;;AACAniF,eAAK,CAAC2iF,wBAAN,GAAiC,YAAY;AACzC,gBAAI/hF,KAAK,GAAGZ,KAAK,CAACW,OAAN,CAAcC,KAA1B;;AACA,gBAAIZ,KAAK,CAACi/E,qBAAV,EAAiC;AAC7B,qBAAO,+BAA+Br+E,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAA/B,GAAiE,IAAjE,GAAwEvC,KAAK,CAACwiF,mBAAN,EAAxE,GAAsG,QAA7G;AACH;;AACD,mBAAO,EAAP;AACH,WAND,CApC2B,CA2C3B;AACA;;;AACAxiF,eAAK,CAAC4iF,sBAAN,GAA+B,YAAY;AACvC,gBAAI5iF,KAAK,CAACi/E,qBAAV,EAAiC;AAC7B,qBAAO,gCAAgCj/E,KAAK,CAACwiF,mBAAN,EAAhC,GAA8D,QAArE;AACH;;AACD,mBAAO,EAAP;AACH,WALD;;AAMA,iBAAOxiF,KAAP;AACH;;AACDoiF,2BAAmB,CAACziF,SAApB,CAA8B2iF,eAA9B,GAAgD,UAAUzhF,OAAV,EAAmB;AAC/D,cAAIA,OAAO,CAAC0sB,WAAZ,EAAyB;AACrB,gBAAI1sB,OAAO,CAAC2sB,qBAAZ,EAAmC;AAC/B,mBAAKwxD,sBAAL,GAA8B,IAA9B;AACA,mBAAKC,qBAAL,GAA6B,KAA7B;AACH,aAHD,MAIK;AACD,mBAAKD,sBAAL,GAA8B,KAA9B;AACA,mBAAKC,qBAAL,GAA6B,IAA7B;AACH;AACJ,WATD,MAUK;AACD,iBAAKA,qBAAL,GAA6B,KAA7B;AACA,iBAAKD,sBAAL,GAA8B,KAA9B;AACH;AACJ,SAfD;;AAgBAoD,2BAAmB,CAACziF,SAApB,CAA8BoE,MAA9B,GAAuC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AAC7Db,gBAAM,CAACH,SAAP,CAAiBoE,MAAjB,CAAwB9D,IAAxB,CAA6B,IAA7B,EAAmC+D,KAAnC,EAA0CrD,OAA1C;;AACA,eAAK0hF,cAAL,CAAoB1hF,OAAO,CAACE,OAA5B;AACA,eAAKsC,cAAL,CAAoBxC,OAApB;AACH,SAJD;;AAKAyhF,2BAAmB,CAACziF,SAApB,CAA8B2E,OAA9B,GAAwC,YAAY;AAChDxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKkD,cAAL,CAAoBO,QAApB;AACH,SAHD;;AAIA0+E,2BAAmB,CAACziF,SAApB,CAA8ByD,eAA9B,GAAgD,UAAUzC,OAAV,EAAmB;AAC/D,eAAKmD,EAAL,CAAQU,SAAR,CAAkBC,GAAlB,CAAsB,iBAAtB;AACA,eAAKX,EAAL,CAAQ0C,SAAR,GAAoB,KAAKq8E,kBAAL,EAApB;AACA,eAAK99E,QAAL,GAAgB,IAAI,kEAAJ,CAAoB,QAApB,EAA8B;AAC9C,gBADgB,CACT;AADS,WAAhB;AAGA,cAAI+9E,kBAAkB,GAAG,KAAK/9E,QAAL,CAAcjB,EAAvC;AACA,eAAKA,EAAL,CAAQmD,aAAR,CAAsB,oBAAtB,EAA4CjC,WAA5C,CAAwD89E,kBAAxD;AACAA,4BAAkB,CAACt+E,SAAnB,CAA6BC,GAA7B,CAAiC,uBAAjC;AACA,cAAIs+E,SAAS,GAAG,yEAAc,KAAd,EAAqB;AAAEt7E,qBAAS,EAAE;AAAb,WAArB,CAAhB;AACAq7E,4BAAkB,CAAC99E,WAAnB,CAA+B+9E,SAA/B;AACA,eAAKxJ,OAAL,GAAe,IAAI6D,OAAJ,CAAY2F,SAAZ,EAAuB;AAClC5D,iCAAqB,EAAE,KAAKsD,4BADM;AAElC7D,6BAAiB,EAAE,KAAK+D,wBAFU;AAGlCtP,2BAAe,EAAE,KAAKuP,sBAHY;AAIlC3D,iCAAqB,EAAE,KAAKA,qBAJM;AAKlCD,kCAAsB,EAAE,KAAKA;AALK,WAAvB,CAAf;AAOH,SAlBD;;AAmBAoD,2BAAmB,CAACziF,SAApB,CAA8B0D,iBAA9B,GAAkD,YAAY;AAC1D,eAAKS,EAAL,CAAQU,SAAR,CAAkBg0B,MAAlB,CAAyB,iBAAzB;AACA,eAAK+gD,OAAL,CAAaj1E,OAAb;AACA,eAAKS,QAAL,CAAcT,OAAd;AACH,SAJD,CAnGuD,CAwGvD;AACA;;;AACA89E,2BAAmB,CAACziF,SAApB,CAA8BkjF,kBAA9B,GAAmD,YAAY;AAC3D,cAAIniF,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBC,KAAK,GAAGF,EAAE,CAACE,KAAlC;AAAA,cAAyCC,OAAO,GAAGH,EAAE,CAACG,OAAtD;AACA,iBAAO,KACH,gBADG,GACgBD,KAAK,CAAC2B,QAAN,CAAe,WAAf,CADhB,GAC8C,IAD9C,IAEF1B,OAAO,CAAC2uB,YAAR,GACG,4BACI,MADJ,GAEI,+BAFJ,GAEsC5uB,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAFtC,GAEuE,eAFvE,GAGI,OAHJ,GAII,UALP,GAMG,EARD,IASH,yBATG,GAUH,MAVG,GAWH,aAXG,GAWa3B,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAXb,GAW+C,SAX/C,GAYH,OAZG,GAaH,UAbG,GAcH,UAdJ;AAeH,SAjBD,CA1GuD,CA4HvD;;;AACA6/E,2BAAmB,CAACziF,SAApB,CAA8B6iF,mBAA9B,GAAoD,YAAY;AAC5D,cAAI,KAAKQ,eAAL,IAAwB,IAA5B,EAAkC;AAC9B,mBAAO,kBAAkB,KAAKA,eAAvB,GAAyC,KAAhD;AACH;;AACD,iBAAO,EAAP;AACH,SALD,CA7HuD,CAmIvD;;;AACAZ,2BAAmB,CAACziF,SAApB,CAA8BsjF,YAA9B,GAA6C,YAAY;AACrD,cAAIj1D,UAAU,GAAG,KAAKrtB,OAAL,CAAaE,OAAb,CAAqBmtB,UAAtC;AACA,iBAAOA,UAAU,IAAI,OAAOA,UAAP,KAAsB,QAA3C;AACH,SAHD;AAIA;;;;AAEAo0D,2BAAmB,CAACziF,SAApB,CAA8BuF,UAA9B,GAA2C,UAAUC,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC;AAC/EvF,gBAAM,CAACH,SAAP,CAAiBuF,UAAjB,CAA4BjF,IAA5B,CAAiC,IAAjC,EAAuCkF,QAAvC,EAAiDC,UAAjD,EAA6DC,MAA7D,EAD+E,CACT;;;AACtE,eAAKk0E,OAAL,CAAar0E,UAAb,CAAwBC,QAAxB;AACH,SAHD,CA1IuD,CA8IvD;;;AACAi9E,2BAAmB,CAACziF,SAApB,CAA8BuuE,cAA9B,GAA+C,UAAU/oE,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC;AACnF,cAAIk0E,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIvrD,UAAU,GAAG,KAAKrtB,OAAL,CAAaE,OAAb,CAAqBmtB,UAAtC;AACA,cAAIk1D,SAAS,GAAG,KAAKz5D,MAAL,GAAc,KAAKA,MAAL,CAAY3lB,EAA1B,GAA+B,IAA/C,CAHmF,CAG9B;;AACrD,cAAIq/E,cAAJ;AACA,cAAI7/C,eAAJ,CALmF,CAMnF;AACA;;AACA,cAAI,CAACi2C,OAAO,CAACG,MAAb,EAAqB;AACjB,gBAAI,CAACr0E,MAAL,EAAa;AACT89E,4BAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,mBAAKL,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACH;;AACD;AACH;;AACD,cAAI,KAAKlE,qBAAT,EAAgC;AAC5B;AACA,iBAAK+D,eAAL,GAAuB,2EAAgB,wEAAa,KAAKl/E,EAAlB,EAAsB,iBAAtB,CAAhB,CAAvB;AACH,WAlBkF,CAmBnF;;;AACA,eAAKiB,QAAL,CAAcS,KAAd;;AACA,cAAI09E,SAAJ,EAAe;AACX,0FAAmBA,SAAnB;AACH;;AACD3J,iBAAO,CAACK,gBAAR,GAxBmF,CAwBvD;AAC5B;;AACA,cAAI5rD,UAAU,IAAI,OAAOA,UAAP,KAAsB,QAAxC,EAAkD;AAC9CurD,mBAAO,CAACuG,SAAR,CAAkB9xD,UAAlB,EAD8C,CACf;AAClC,WA5BkF,CA6BnF;AACA;;;AACAm1D,wBAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,eAAKg+E,aAAL,CAAmBD,cAAnB,EAAmC99E,MAAnC,EAhCmF,CAiCnF;;AACA,cAAI2oB,UAAU,IAAI,OAAOA,UAAP,KAAsB,QAAxC,EAAkD;AAC9CurD,mBAAO,CAACuG,SAAR,CAAkB9xD,UAAlB,EAD8C,CACf;AAClC;;AACD,cAAI,CAAC3oB,MAAL,EAAa;AAAE;AACX,iBAAKN,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACA7/C,2BAAe,GAAG,KAAKv+B,QAAL,CAAc2kD,kBAAd,EAAlB;;AACA,gBAAIpmB,eAAe,CAACrvB,IAAhB,IAAwBqvB,eAAe,CAAC7uB,KAA5C,EAAmD;AAAE;AACjD,kBAAIyuE,SAAJ,EAAe;AACX,4FAAiBA,SAAjB,EAA4B5/C,eAA5B;AACH,eAH8C,CAI/C;;;AACA6/C,4BAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,mBAAKL,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACH,aAVQ,CAWT;;;AACA,iBAAKp+E,QAAL,CAAc0kD,YAAd,CAA2BnmB,eAA3B;AACH;AACJ,SAnDD,CA/IuD,CAmMvD;;;AACA8+C,2BAAmB,CAACziF,SAApB,CAA8B+F,qBAA9B,GAAsD,UAAUN,UAAV,EAAsB;AACxE,iBAAOA,UAAU,GACb,iFAAsB,KAAKtB,EAA3B,EAA+B,KAAKiB,QAAL,CAAcjB,EAA7C,CADJ,CADwE,CAElB;AACzD,SAHD,CApMuD,CAwMvD;;;AACAs+E,2BAAmB,CAACziF,SAApB,CAA8ByjF,aAA9B,GAA8C,UAAU1uE,MAAV,EAAkBrP,MAAlB,EAA0B;AACpE,cAAI,KAAK1E,OAAL,CAAaE,OAAb,CAAqBqlD,SAAzB,EAAoC;AAChC;AACA,gBAAI7gD,MAAJ,EAAY;AACRqP,oBAAM,IAAI,KAAK6kE,OAAL,CAAajF,MAAb,GAAsB,CAAhC;AACH;;AACD,wFAAiB,KAAKiF,OAAL,CAAaG,MAA9B,EAAsChlE,MAAtC,EAA8C,CAACrP,MAA/C,EALgC,CAKwB;AAC3D,WAND,MAOK;AACD,gBAAIA,MAAJ,EAAY;AACR,4FAAmB,KAAKk0E,OAAL,CAAaG,MAAhC,EADQ,CACiC;AAC5C,aAFD,MAGK;AACD,0FAAiB,KAAKH,OAAL,CAAaG,MAA9B,EAAsChlE,MAAtC,EAA8C,IAA9C,EADC,CACoD;AACxD;AACJ;AACJ,SAhBD;AAiBA;;;;AAEA0tE,2BAAmB,CAACziF,SAApB,CAA8BqwE,iBAA9B,GAAkD,UAAUtnE,QAAV,EAAoB;AAClE,iBAAO;AAAEwL,eAAG,EAAE;AAAP,WAAP;AACH,SAFD;;AAGAkuE,2BAAmB,CAACziF,SAApB,CAA8BowE,eAA9B,GAAgD,YAAY;AACxD,iBAAO;AAAE77D,eAAG,EAAE,KAAKnP,QAAL,CAAckQ,YAAd;AAAP,WAAP;AACH,SAFD;;AAGAmtE,2BAAmB,CAACziF,SAApB,CAA8BswE,eAA9B,GAAgD,UAAU3mB,MAAV,EAAkB;AAC9D,cAAIA,MAAM,CAACp1C,GAAP,KAAegY,SAAnB,EAA8B;AAC1B,iBAAKnnB,QAAL,CAAcmR,YAAd,CAA2BozC,MAAM,CAACp1C,GAAlC;AACH;AACJ,SAJD;;AAKA,eAAOkuE,mBAAP;AACH,OAxOwC,CAwOvC,uDAxOuC,CAAzC;;AAyOAA,yBAAmB,CAACziF,SAApB,CAA8BqqE,yBAA9B,GAA0DoO,2BAA1D;;AAEA,UAAIiL,aAAa;AAAG;AAAe,gBAAUvjF,MAAV,EAAkB;AACjDN,iBAAS,CAAC6jF,aAAD,EAAgBvjF,MAAhB,CAAT;;AACA,iBAASujF,aAAT,CAAuB9J,OAAvB,EAAgC;AAC5B,cAAIv5E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBs5E,OAAO,CAACz1E,EAA1B,KAAiC,IAA7C;;AACA9D,eAAK,CAACsjF,MAAN,GAAe,IAAIC,aAAJ,EAAf;AACAvjF,eAAK,CAACu5E,OAAN,GAAgBA,OAAhB;AACA,iBAAOv5E,KAAP;AACH;;AACDqjF,qBAAa,CAAC1jF,SAAd,CAAwBgE,YAAxB,GAAuC,UAAUhD,OAAV,EAAmB;AACtDA,iBAAO,CAACiD,QAAR,CAAiBC,4BAAjB,CAA8C,IAA9C,EAAoD;AAAEC,cAAE,EAAE,KAAKy1E,OAAL,CAAaz1E;AAAnB,WAApD;AACH,SAFD;;AAGAu/E,qBAAa,CAAC1jF,SAAd,CAAwB2E,OAAxB,GAAkC,YAAY;AAC1CxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKU,OAAL,CAAaiD,QAAb,CAAsBW,8BAAtB,CAAqD,IAArD;AACH,SAHD;;AAIA8+E,qBAAa,CAAC1jF,SAAd,CAAwBoE,MAAxB,GAAiC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACvD,cAAI44E,OAAO,GAAG,KAAKA,OAAnB;AACA,cAAIt1E,WAAW,GAAGD,KAAK,CAACC,WAAxB;AAAA,cAAqCu/E,QAAQ,GAAGx/E,KAAK,CAACw/E,QAAtD;AACAjK,iBAAO,CAACluB,cAAR,CAAuB1qD,OAAvB,EAHuD,CAGtB;;AACjC44E,iBAAO,CAACnuB,YAAR,CAAqBp9C,QAAQ,CAAC,EAAD,EAAK,KAAKs1E,MAAL,CAAY3N,UAAZ,CAAuB3xE,KAAvB,EAA8BC,WAA9B,EAA2CD,KAAK,CAAC6B,gBAAjD,EAAmElF,OAAO,CAACiD,QAA3E,EAAqF21E,OAArF,EAA8FiK,QAA9F,CAAL,EAA8G;AAAEv/E,uBAAW,EAAEA,WAAf;AAA4BswE,iBAAK,EAAEiP,QAAQ,CAACjP,KAA5C;AAAmD0J,mBAAO,EAAEj6E,KAAK,CAACi6E;AAAlE,WAA9G,CAA7B,EAAyNt9E,OAAzN;AACH,SALD;;AAMA0iF,qBAAa,CAAC1jF,SAAd,CAAwB8d,mBAAxB,GAA8C,YAAY;AACtD,eAAK87D,OAAL,CAAa97D,mBAAb;AACH,SAFD;;AAGA4lE,qBAAa,CAAC1jF,SAAd,CAAwBue,QAAxB,GAAmC,UAAUF,YAAV,EAAwBC,WAAxB,EAAqC;AACpE,cAAIwlE,MAAM,GAAG,KAAKlK,OAAL,CAAaoG,aAAb,CAA2B3hE,YAA3B,EAAyCC,WAAzC,CAAb;;AACA,cAAIwlE,MAAJ,EAAY;AACR,mBAAO;AACHn9E,uBAAS,EAAE,KAAKizE,OADb;AAEHp7D,sBAAQ,EAAEslE,MAAM,CAACtlE,QAFd;AAGHY,mBAAK,EAAE0kE,MAAM,CAAC1kE,KAHX;AAIHpG,kBAAI,EAAE;AACF1E,oBAAI,EAAEwvE,MAAM,CAAC7D,YAAP,CAAoB3rE,IADxB;AAEFQ,qBAAK,EAAEgvE,MAAM,CAAC7D,YAAP,CAAoBnrE,KAFzB;AAGFP,mBAAG,EAAEuvE,MAAM,CAAC7D,YAAP,CAAoB1rE,GAHvB;AAIFS,sBAAM,EAAE8uE,MAAM,CAAC7D,YAAP,CAAoBjrE;AAJ1B,eAJH;AAUHyJ,mBAAK,EAAE;AAVJ,aAAP;AAYH;AACJ,SAhBD;;AAiBA,eAAOilE,aAAP;AACH,OA1CkC,CA0CjC,gEA1CiC,CAAnC;;AA2CA,UAAIE,aAAa;AAAG;AAAe,gBAAUzjF,MAAV,EAAkB;AACjDN,iBAAS,CAAC+jF,aAAD,EAAgBzjF,MAAhB,CAAT;;AACA,iBAASyjF,aAAT,GAAyB;AACrB,iBAAOzjF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDm1E,qBAAa,CAAC5jF,SAAd,CAAwB+zE,UAAxB,GAAqC,UAAU7mC,SAAV,EAAqB22C,QAArB,EAA+B;AAChE,iBAAOA,QAAQ,CAAC9P,UAAT,CAAoB7mC,SAApB,CAAP;AACH,SAFD;;AAGA,eAAO02C,aAAP;AACH,OATkC,CASjC,yDATiC,CAAnC;;AAWA,UAAIG,WAAW;AAAG;AAAe,gBAAU5jF,MAAV,EAAkB;AAC/CN,iBAAS,CAACkkF,WAAD,EAAc5jF,MAAd,CAAT;;AACA,iBAAS4jF,WAAT,GAAuB;AACnB,cAAI1jF,KAAK,GAAGF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAAhE;;AACApO,eAAK,CAAC2jF,aAAN,GAAsB,mEAAQA,aAAR,CAAtB;AACA,iBAAO3jF,KAAP;AACH;;AACD0jF,mBAAW,CAAC/jF,SAAZ,CAAsBoE,MAAtB,GAA+B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACrDb,gBAAM,CAACH,SAAP,CAAiBoE,MAAjB,CAAwB9D,IAAxB,CAA6B,IAA7B,EAAmC+D,KAAnC,EAA0CrD,OAA1C,EADqD,CACD;;;AACpD,cAAIsD,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B;AACA,cAAIu/E,QAAQ,GAAG,KAAKA,QAAL,GACX,KAAKG,aAAL,CAAmB1/E,WAAnB,EAAgCD,KAAK,CAACk/D,oBAAtC,CADJ;;AAEA,cAAI,KAAKz5C,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAY2hC,YAAZ,CAAyB;AACrBnnD,yBAAW,EAAEA,WADQ;AAErBmvE,mBAAK,EAAEoQ,QAAQ,CAAC/O,WAFK;AAGrB7B,kCAAoB,EAAE4Q,QAAQ,CAAClP,MAAT,KAAoB,CAHrB;AAIrBjB,6BAAe,EAAE,KAAKkP;AAJD,aAAzB,EAKG5hF,OALH;AAMH;;AACD,eAAKijF,aAAL,CAAmBx4B,YAAnB,CAAgC;AAC5BnnD,uBAAW,EAAEA,WADe;AAE5Bu/E,oBAAQ,EAAEA,QAFkB;AAG5B91D,yBAAa,EAAE1pB,KAAK,CAAC0pB,aAHO;AAI5BxH,yBAAa,EAAEliB,KAAK,CAACkiB,aAJO;AAK5B9hB,sBAAU,EAAEJ,KAAK,CAACI,UALU;AAM5BC,wBAAY,EAAEL,KAAK,CAACK,YANQ;AAO5Bmd,0BAAc,EAAExd,KAAK,CAACwd,cAPM;AAQ5Bw6B,qBAAS,EAAEh4C,KAAK,CAACg4C,SARW;AAS5BnxB,uBAAW,EAAE7mB,KAAK,CAAC6mB,WATS;AAU5BozD,mBAAO,EAAE,KAAKgF,YAAL,EAVmB;AAW5Bp9E,4BAAgB,EAAE,KAAKlF,OAAL,CAAakF;AAXH,WAAhC,EAYGlF,OAZH;AAaH,SA1BD;;AA2BA+iF,mBAAW,CAAC/jF,SAAZ,CAAsByD,eAAtB,GAAwC,UAAUzC,OAAV,EAAmB;AACvDb,gBAAM,CAACH,SAAP,CAAiByD,eAAjB,CAAiCnD,IAAjC,CAAsC,IAAtC,EAA4CU,OAA5C;;AACA,cAAIA,OAAO,CAACE,OAAR,CAAgB2uB,YAApB,EAAkC;AAC9B,iBAAK/F,MAAL,GAAc,IAAI,4DAAJ,CAAc,KAAK3lB,EAAL,CAAQmD,aAAR,CAAsB,oBAAtB,CAAd,CAAd;AACH;;AACD,eAAK28E,aAAL,GAAqB,IAAIP,aAAJ,CAAkB,KAAK9J,OAAvB,CAArB;AACH,SAND;;AAOAmK,mBAAW,CAAC/jF,SAAZ,CAAsB0D,iBAAtB,GAA0C,YAAY;AAClDvD,gBAAM,CAACH,SAAP,CAAiB0D,iBAAjB,CAAmCpD,IAAnC,CAAwC,IAAxC;;AACA,cAAI,KAAKwpB,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYnlB,OAAZ;AACH;;AACD,eAAKs/E,aAAL,CAAmBt/E,OAAnB;AACH,SAND;;AAOA,eAAOo/E,WAAP;AACH,OAjDgC,CAiD/BtB,mBAjD+B,CAAjC;;AAkDA,eAASuB,aAAT,CAAuB1/E,WAAvB,EAAoCi/D,oBAApC,EAA0D;AACtD,YAAIiR,SAAS,GAAG,IAAI,4DAAJ,CAAclwE,WAAW,CAAC8D,WAA1B,EAAuCm7D,oBAAvC,CAAhB;AACA,eAAO,IAAI,2DAAJ,CAAaiR,SAAb,EAAwB,kBAAkBt7C,IAAlB,CAAuB50B,WAAW,CAAC20D,gBAAnC,CAAxB,CAAP;AACH;;AAED,UAAI3wD,IAAI,GAAG,wEAAa;AACpBkmB,mBAAW,EAAE,cADO;AAEpBjmB,aAAK,EAAE;AACHqxE,iBAAO,EAAEmK,WADN;AAEHG,oBAAU,EAAE;AACRp7E,gBAAI,EAAE,SADE;AAERC,oBAAQ,EAAE;AAAEC,kBAAI,EAAE;AAAR;AAFF,WAFT;AAMHm7E,qBAAW,EAAE;AACTr7E,gBAAI,EAAE,SADG;AAETC,oBAAQ,EAAE;AAAEI,mBAAK,EAAE;AAAT;AAFD,WANV;AAUHi7E,sBAAY,EAAE;AACVt7E,gBAAI,EAAE,SADI;AAEVC,oBAAQ,EAAE;AAAEk2B,oBAAM,EAAE;AAAV,aAFA;AAGVsnB,qBAAS,EAAE,IAHD;AAIV54B,0BAAc,EAAE;AAJN;AAVX;AAFa,OAAb,CAAX;AAqBe;;AAAA,uCAAArlB,IAAA;;;;;;;;;;;;;;;;ACrnDf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UACa+9D,Q;AAQT,0BAAYpiE,QAAZ,EAAsB;AAAA;;AAClB;AACI,iBAAK6G,EAAL,GAAU7G,QAAQ,CAAC6G,EAAT,IAAe,KAAKu5E,WAAL,EAAzB;AACA,iBAAKxhF,KAAL,GAAaoB,QAAQ,CAACpB,KAAT,IAAkB,EAA/B;AACA,iBAAKoI,QAAL,GAAgBhH,QAAQ,CAACgH,QAAT,IAAqB,EAArC;AACA,iBAAKC,SAAL,GAAiB,mEAAW,IAAI5B,IAAJ,EAAX,EAAuB,YAAvB,EAAqC,IAArC,KAA8C,EAA/D;AACA,iBAAK6B,OAAL,GAAe,mEAAW,IAAI7B,IAAJ,EAAX,EAAuB,YAAvB,EAAqC,IAArC,KAA8C,EAA7D;AACA,iBAAK8B,OAAL,GAAenH,QAAQ,CAACmH,OAAT,IAAoB,EAAnC;AACH;AACJ;;;;wCACiB;AACd,gBAAMk5E,EAAE,GAAG,SAALA,EAAK,GAAM;AACb,qBAAO,CAAE,CAAC,IAAI32E,IAAI,CAACE,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsCkqE,QAAtC,CAA+C,EAA/C,EAAmD/xC,SAAnD,CAA6D,CAA7D,CAAP;AACH,aAFD;;AAGA,mBAAOs+C,EAAE,KAAKA,EAAE,EAAhB;AACH;;;;;;;;;;;;;;;;;;;;;ACxBL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;AASA;;;;;;;;;;;;;;;AAcA;;;AAEA,UAAIllF,eAAa,GAAG,uBAASC,CAAT,EAAYC,CAAZ,EAAe;AAC/BF,uBAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,mBAAS,EAAE;AAAb,qBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,WAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,eAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,gBAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAA1C;AAAwD,SAF9E;;AAGA,eAAOP,eAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,OALD;;AAOA,eAASO,SAAT,CAAmBR,CAAnB,EAAsBC,CAAtB,EAAyB;AACrBF,uBAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,iBAASQ,EAAT,GAAc;AAAE,eAAKC,WAAL,GAAmBV,CAAnB;AAAuB;;AACvCA,SAAC,CAACW,SAAF,GAAcV,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACU,MAAP,CAAcX,CAAd,CAAb,IAAiCQ,EAAE,CAACE,SAAH,GAAeV,CAAC,CAACU,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH;;AAED,UAAIuO,QAAQ,GAAG,oBAAW;AACtBA,gBAAQ,GAAG9O,MAAM,CAACqN,MAAP,IAAiB,SAASyB,QAAT,CAAkBC,CAAlB,EAAqB;AAC7C,eAAK,IAAIC,CAAJ,EAAOpH,CAAC,GAAG,CAAX,EAAcqH,CAAC,GAAGC,SAAS,CAAChO,MAAjC,EAAyC0G,CAAC,GAAGqH,CAA7C,EAAgDrH,CAAC,EAAjD,EAAqD;AACjDoH,aAAC,GAAGE,SAAS,CAACtH,CAAD,CAAb;;AACA,iBAAK,IAAIxH,CAAT,IAAc4O,CAAd;AAAiB,kBAAIhP,MAAM,CAACS,SAAP,CAAiBJ,cAAjB,CAAgCU,IAAhC,CAAqCiO,CAArC,EAAwC5O,CAAxC,CAAJ,EAAgD2O,CAAC,CAAC3O,CAAD,CAAD,GAAO4O,CAAC,CAAC5O,CAAD,CAAR;AAAjE;AACH;;AACD,iBAAO2O,CAAP;AACH,SAND;;AAOA,eAAOD,QAAQ,CAAC/H,KAAT,CAAe,IAAf,EAAqBmI,SAArB,CAAP;AACH,OATD;AAWA;;;;;;AAIA,UAAI81E,qBAAqB;AAAG;AAAe,gBAAUpkF,MAAV,EAAkB;AACzDN,iBAAS,CAAC0kF,qBAAD,EAAwBpkF,MAAxB,CAAT;;AACA,iBAASokF,qBAAT,CAA+BC,QAA/B,EAAyC;AACrC,cAAInkF,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACmkF,QAAN,GAAiBA,QAAjB;AACA,iBAAOnkF,KAAP;AACH;;AACDkkF,6BAAqB,CAACvkF,SAAtB,CAAgC6D,UAAhC,GAA6C,UAAU7C,OAAV,EAAmBR,IAAnB,EAAyBgwE,UAAzB,EAAqC;AAC9ErwE,gBAAM,CAACH,SAAP,CAAiB6D,UAAjB,CAA4BvD,IAA5B,CAAiC,IAAjC,EAAuCU,OAAvC,EAAgDR,IAAhD,EAAsDgwE,UAAtD,EAD8E,CAE9E;;;AACA,eAAKiU,cAAL,GAAsB,2EAAgB;AAClC1hF,gBAAI,EAAE,SAD4B;AAElCC,kBAAM,EAAE,SAF0B;AAGlC8rC,qBAAS,EAAE,KAAK9tC,OAAL,CAAaE,OAAb,CAAqByvB;AAHE,WAAhB,CAAtB;AAKH,SARD,CAPyD,CAgBzD;AACA;;;AACA4zD,6BAAqB,CAACvkF,SAAtB,CAAgCO,UAAhC,GAA6C,UAAUC,IAAV,EAAgBgwE,UAAhB,EAA4B;AACrE,cAAIkU,SAAS,GAAG,KAAKF,QAAL,CAAcG,cAAd,CAA6BnkF,IAA7B,CAAhB,CADqE,CAErE;AACA;;AACA,eAAK,IAAIy0E,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGyP,SAAS,CAACjkF,MAAlC,EAA0Cw0E,GAAG,EAA7C,EAAiD;AAC7CyP,qBAAS,CAACzP,GAAD,CAAT,GAAiB,KAAKztE,aAAL,CAAmBk9E,SAAS,CAACzP,GAAD,CAA5B,CAAjB;AACH;;AACD,eAAKyP,SAAL,GAAiBA,SAAjB;AACA,eAAKF,QAAL,CAAcI,eAAd,CAA8BF,SAA9B,EAAyC,KAAKF,QAAL,CAAcK,cAAvD;AACH,SATD;;AAUAN,6BAAqB,CAACvkF,SAAtB,CAAgCY,UAAhC,GAA6C,UAAUJ,IAAV,EAAgB;AACzDA,cAAI,CAAC4L,OAAL,CAAa,UAAUtL,GAAV,EAAe;AACxB,qFAAcA,GAAG,CAACqD,EAAlB;AACH,WAFD;AAGA,eAAKugF,SAAL,GAAiB,IAAjB;AACH,SALD;;AAMAH,6BAAqB,CAACvkF,SAAtB,CAAgCyxE,eAAhC,GAAkD,UAAU1qE,OAAV,EAAmB;AACjE,cAAIhG,EAAE,GAAG,IAAT;AAAA,cAAeyjF,QAAQ,GAAGzjF,EAAE,CAACyjF,QAA7B;AAAA,cAAuCE,SAAS,GAAG3jF,EAAE,CAAC2jF,SAAtD;;AACA,cAAIvR,MAAM,GAAGqR,QAAQ,CAACrR,MAAtB;AACAqR,kBAAQ,CAACM,mBAAT,CAA6B/9E,OAA7B,EAHiE,CAG1B;;AACvC,cAAI29E,SAAJ,EAAe;AACX,iBAAK,IAAIzP,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG9B,MAAxB,EAAgC8B,GAAG,EAAnC,EAAuC;AACnC,mBAAK8P,qBAAL,CAA2BL,SAAS,CAACzP,GAAD,CAApC,EADmC,CACS;AAC/C;AACJ;AACJ,SATD;;AAUAsP,6BAAqB,CAACvkF,SAAtB,CAAgC0xE,cAAhC,GAAiD,UAAU3qE,OAAV,EAAmB;AAChE,cAAIhG,EAAE,GAAG,IAAT;AAAA,cAAeyjF,QAAQ,GAAGzjF,EAAE,CAACyjF,QAA7B;AAAA,cAAuCE,SAAS,GAAG3jF,EAAE,CAAC2jF,SAAtD;;AACA,cAAIvR,MAAM,GAAGqR,QAAQ,CAACrR,MAAtB;AACAqR,kBAAQ,CAACQ,kBAAT,CAA4Bj+E,OAA5B,EAHgE,CAG1B;;AACtC,cAAI29E,SAAJ,EAAe;AACX,iBAAK,IAAIzP,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG9B,MAAxB,EAAgC8B,GAAG,EAAnC,EAAuC;AACnC,mBAAKgQ,YAAL,CAAkBP,SAAS,CAACzP,GAAD,CAA3B;AACH;AACJ;AACJ,SATD,CA5CyD,CAsDzD;;;AACAsP,6BAAqB,CAACvkF,SAAtB,CAAgC8C,sBAAhC,GAAyD,YAAY;AACjE,iBAAO;AACHC,gBAAI,EAAE,SADH;AAEHC,kBAAM,EAAE,SAFL;AAGHC,oBAAQ,EAAE;AAHP,WAAP;AAKH,SAND,CAvDyD,CA8DzD;;;AACAshF,6BAAqB,CAACvkF,SAAtB,CAAgC6wE,sBAAhC,GAAyD,YAAY;AACjE,iBAAO,IAAP;AACH,SAFD,CA/DyD,CAkEzD;;;AACA0T,6BAAqB,CAACvkF,SAAtB,CAAgCa,aAAhC,GAAgD,UAAUC,GAAV,EAAe0vE,UAAf,EAA2B;AACvE,cAAIrvE,UAAU,GAAGL,GAAG,CAACK,UAArB;AACA,cAAIC,QAAQ,GAAGD,UAAU,CAACE,GAA1B;AACA,cAAIG,OAAO,GAAGL,UAAU,CAACM,EAAzB;AACA,cAAIQ,MAAM,GAAGb,QAAQ,CAACa,MAAtB;AACA,cAAI8uE,WAAW,GAAG,iFAAsB,KAAK/vE,OAA3B,EAAoCI,QAApC,EAA8CI,OAA9C,CAAlB;AACA,cAAI83E,oBAAoB,GAAGx4E,GAAG,CAACqB,OAAJ,IAAe,sFAA2B,KAAKnB,OAAhC,EAAyCI,QAAzC,EAAmDI,OAAnD,CAA1C;AACA,cAAI+3E,kBAAkB,GAAGz4E,GAAG,CAACyB,KAAJ,IAAa,oFAAyB,KAAKvB,OAA9B,EAAuCI,QAAvC,EAAiDI,OAAjD,CAAtC;AACA,cAAIG,OAAO,GAAG,KAAKmvE,aAAL,CAAmBhwE,GAAnB,EAAwBiwE,WAAxB,EAAqCuI,oBAAoB,IAAIC,kBAA7D,EAAiF/I,UAAjF,CAAd;AACA,cAAIgJ,OAAO,GAAG,oEAAS,KAAKrI,UAAL,CAAgB3vE,OAAhB,CAAT,CAAd;AACA,cAAIi4E,QAAJ;AACA,cAAIyL,YAAJ,CAXuE,CAWrD;;AAClB,cAAIC,aAAJ,CAZuE,CAYpD;;AACnBxjF,iBAAO,CAACuoC,OAAR,CAAgB,oBAAhB,EAbuE,CAcvE;;AACA,cAAI,2EAAgB/oC,UAAU,CAACe,KAA3B,CAAJ,EAAuC;AACnC;AACA;AACA;AACA,gBAAIpB,GAAG,CAACqB,OAAJ,IAAerB,GAAG,CAACyB,KAAvB,EAA8B;AAC1B,kBAAI6iF,YAAY,GAAGtkF,GAAG,CAACuB,KAAvB;AACA,kBAAIgjF,UAAU,GAAGvkF,GAAG,CAACwB,GAArB;AACAm3E,sBAAQ,GAAG,KAAKr3E,YAAL,CAAkBgjF,YAAlB,EAAgCC,UAAhC,EAA4CpjF,MAA5C,CAAX,CAH0B,CAGsC;;AAChEijF,0BAAY,GAAG,KAAK9iF,YAAL,CAAkBgjF,YAAlB,EAAgCC,UAAhC,EAA4CpjF,MAA5C,EAAoD,KAAKwiF,cAAzD,CAAf;AACAU,2BAAa,GAAG,KAAK/iF,YAAL,CAAkBgjF,YAAlB,EAAgCC,UAAhC,EAA4CpjF,MAA5C,EAAoD,IAApD,EAA0D,KAA1D,CAAhB,CAL0B,CAKwD;AACrF;AACJ,WAXD,MAYK;AACD;AACAw3E,oBAAQ,GAAG,KAAKj3E,WAAL,CAAiBrB,UAAjB,CAAX;AACA+jF,wBAAY,GAAG,KAAK1iF,WAAL,CAAiBrB,UAAjB,EAA6B,KAAKsjF,cAAlC,CAAf;AACAU,yBAAa,GAAG,KAAK3iF,WAAL,CAAiBrB,UAAjB,EAA6B,IAA7B,EAAmC,KAAnC,CAAhB,CAJC,CAI0D;AAC9D;;AACD,iBAAO,eAAeQ,OAAO,CAACe,IAAR,CAAa,GAAb,CAAf,GAAmC,GAAnC,IACFtB,QAAQ,CAACM,GAAT,GACG,YAAY,sEAAWN,QAAQ,CAACM,GAApB,CAAZ,GAAuC,GAD1C,GAEG,EAHD,KAIF83E,OAAO,GACJ,aAAaA,OAAb,GAAuB,GADnB,GAEJ,EAND,IAOH,GAPG,GAQH,0BARG,IASFC,QAAQ,GACL,yBACI,eADJ,GACsB,sEAAW0L,aAAX,CADtB,GACkD,GADlD,GAEI,cAFJ,GAEqB,sEAAWD,YAAX,CAFrB,GAEgD,GAFhD,GAGI,GAHJ,GAII,QAJJ,GAIe,sEAAWzL,QAAX,CAJf,GAIsC,SAJtC,GAKI,QANC,GAOL,EAhBD,KAiBFr4E,QAAQ,CAACyB,KAAT,GACG,2BACI,sEAAWzB,QAAQ,CAACyB,KAApB,CADJ,GAEI,QAHP,GAIG,EArBD,IAsBH,QAtBG;AAuBH;;;;;;AAMC02E,4BAAkB,GACf,+CADe,GAEf,EA/BD,IAgCH,MAhCJ;AAiCH,SAlED,CAnEyD,CAsIzD;AACA;AACA;;;AACAgL,6BAAqB,CAACvkF,SAAtB,CAAgC+kF,qBAAhC,GAAwD,UAAUvkF,IAAV,EAAgB;AACpE,cAAIg7E,MAAJ;AACA,cAAI8J,MAAJ;AACA,cAAIn+E,CAAJ;AACAq0E,gBAAM,GAAG+J,kBAAkB,CAAC/kF,IAAD,CAA3B;AACAglF,gCAAsB,CAAChK,MAAD,CAAtB;;AACA,cAAK8J,MAAM,GAAG9J,MAAM,CAAC,CAAD,CAApB,EAA0B;AACtB,iBAAKr0E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGm+E,MAAM,CAAC7kF,MAAvB,EAA+B0G,CAAC,EAAhC,EAAoC;AAChCs+E,qCAAuB,CAACH,MAAM,CAACn+E,CAAD,CAAP,CAAvB;AACH;;AACD,iBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGm+E,MAAM,CAAC7kF,MAAvB,EAA+B0G,CAAC,EAAhC,EAAoC;AAChC,mBAAKu+E,qBAAL,CAA2BJ,MAAM,CAACn+E,CAAD,CAAjC,EAAsC,CAAtC,EAAyC,CAAzC;AACH;AACJ;AACJ,SAdD,CAzIyD,CAwJzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAo9E,6BAAqB,CAACvkF,SAAtB,CAAgC0lF,qBAAhC,GAAwD,UAAU5kF,GAAV,EAAe6kF,sBAAf,EAAuCC,mBAAvC,EAA4D;AAChH,cAAIC,WAAW,GAAG/kF,GAAG,CAAC+kF,WAAtB;AACA,cAAI1+E,CAAJ;;AACA,cAAIrG,GAAG,CAACglF,YAAJ,KAAqBv5D,SAAzB,EAAoC;AAAE;AAClC,gBAAI,CAACs5D,WAAW,CAACplF,MAAjB,EAAyB;AACrB;AACAK,iBAAG,CAACglF,YAAJ,GAAmB,CAAnB;AACH,aAHD,MAIK;AACD;AACA,mBAAKC,eAAL,CAAqBF,WAArB,EAFC,CAGD;AACA;;AACA,mBAAKH,qBAAL,CAA2BG,WAAW,CAAC,CAAD,CAAtC,EAA2CF,sBAAsB,GAAG,CAApE,EAAuEC,mBAAvE;AACA9kF,iBAAG,CAACglF,YAAJ,GAAmBD,WAAW,CAAC,CAAD,CAAX,CAAeG,aAAlC;AACH,aAZ+B,CAahC;;;AACAllF,eAAG,CAACklF,aAAJ,GAAoBllF,GAAG,CAACglF,YAAJ,GAChB,CAAChlF,GAAG,CAACglF,YAAJ,GAAmBF,mBAApB,MAA2C;AACtCD,kCAAsB,GAAG,CAD9B,CADJ,CAdgC,CAgBM;AACtC;AACA;;AACA,iBAAKx+E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0+E,WAAW,CAACplF,MAA5B,EAAoC0G,CAAC,EAArC,EAAyC;AACrC,mBAAKu+E,qBAAL,CAA2BG,WAAW,CAAC1+E,CAAD,CAAtC,EAA2C,CAA3C,EAA8CrG,GAAG,CAACglF,YAAlD;AACH;AACJ;AACJ,SA1BD;;AA2BAvB,6BAAqB,CAACvkF,SAAtB,CAAgC+lF,eAAhC,GAAkD,UAAUF,WAAV,EAAuB;AACrE,cAAIzU,IAAI,GAAGyU,WAAW,CAACnsE,GAAZ,CAAgBusE,0BAAhB,CAAX;AACA,cAAItgD,KAAK,GAAG,CACR;AACA;AAAEI,iBAAK,EAAE,iBAAT;AAA4BE,iBAAK,EAAE,CAAC;AAApC,WAFQ,EAGR;AACA;AAAEF,iBAAK,EAAE,eAAT;AAA0BE,iBAAK,EAAE;AAAjC,WAJQ,EAKVrkC,MALU,CAKH,KAAKZ,OAAL,CAAakqD,eALV,CAAZ;AAMAkmB,cAAI,CAACvwD,IAAL,CAAU,UAAUslB,IAAV,EAAgBC,IAAhB,EAAsB;AAC5B,mBAAO,+EAAoBD,IAApB,EAA0BC,IAA1B,EAAgCT,KAAhC,CAAP;AACH,WAFD;AAGA,iBAAOyrC,IAAI,CAAC13D,GAAL,CAAS,UAAU43D,CAAV,EAAa;AACzB,mBAAOA,CAAC,CAACC,IAAT;AACH,WAFM,CAAP;AAGH,SAdD,CA3LyD,CA0MzD;AACA;;;AACAgT,6BAAqB,CAACvkF,SAAtB,CAAgCilF,YAAhC,GAA+C,UAAUzkF,IAAV,EAAgB;AAC3D,eAAK,IAAIyE,EAAE,GAAG,CAAT,EAAY8zC,MAAM,GAAGv4C,IAA1B,EAAgCyE,EAAE,GAAG8zC,MAAM,CAACt4C,MAA5C,EAAoDwE,EAAE,EAAtD,EAA0D;AACtD,gBAAInE,GAAG,GAAGi4C,MAAM,CAAC9zC,EAAD,CAAhB;AACA,kFAAWnE,GAAG,CAACqD,EAAf,EAAmB,KAAK+hF,cAAL,CAAoBplF,GAApB,CAAnB;;AACA,gBAAIA,GAAG,CAAC46E,KAAJ,GAAY,CAAhB,EAAmB;AACf56E,iBAAG,CAACqD,EAAJ,CAAOU,SAAP,CAAiBC,GAAjB,CAAqB,0BAArB;AACH,aALqD,CAMtD;AACA;;;AACA,gBAAIhE,GAAG,CAACK,UAAJ,CAAeE,GAAf,CAAmBwB,KAAnB,IAA4B/B,GAAG,CAACkU,MAAJ,GAAalU,GAAG,CAACyT,GAAjB,GAAuB,EAAvD,EAA2D;AACvDzT,iBAAG,CAACqD,EAAJ,CAAOU,SAAP,CAAiBC,GAAjB,CAAqB,UAArB,EADuD,CACrB;AACrC;AACJ;AACJ,SAbD,CA5MyD,CA0NzD;AACA;;;AACAy/E,6BAAqB,CAACvkF,SAAtB,CAAgCkmF,cAAhC,GAAiD,UAAUplF,GAAV,EAAe;AAC5D,cAAIqlF,aAAa,GAAG,KAAKnlF,OAAL,CAAaE,OAAb,CAAqBguB,gBAAzC;AACA,cAAI82D,aAAa,GAAGllF,GAAG,CAACklF,aAAxB,CAF4D,CAErB;;AACvC,cAAIF,YAAY,GAAGhlF,GAAG,CAACglF,YAAvB,CAH4D,CAGvB;;AACrC,cAAIzhF,KAAK,GAAG,KAAKmgF,QAAL,CAAc4B,sBAAd,CAAqCtlF,GAArC,CAAZ,CAJ4D,CAIL;;AACvD,cAAIyxC,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAIj+B,IAAJ,CAN4D,CAMlD;;AACV,cAAIQ,KAAJ,CAP4D,CAOjD;;AACX,cAAIqxE,aAAJ,EAAmB;AACf;AACAL,wBAAY,GAAGn4E,IAAI,CAAC8I,GAAL,CAAS,CAAT,EAAYuvE,aAAa,GAAG,CAACF,YAAY,GAAGE,aAAhB,IAAiC,CAA7D,CAAf;AACH;;AACD,cAAIzzC,KAAJ,EAAW;AACPj+B,gBAAI,GAAG,IAAIwxE,YAAX;AACAhxE,iBAAK,GAAGkxE,aAAR;AACH,WAHD,MAIK;AACD1xE,gBAAI,GAAG0xE,aAAP;AACAlxE,iBAAK,GAAG,IAAIgxE,YAAZ;AACH;;AACDzhF,eAAK,CAAC+O,MAAN,GAAetS,GAAG,CAAC46E,KAAJ,GAAY,CAA3B,CApB4D,CAoB9B;;AAC9Br3E,eAAK,CAACiQ,IAAN,GAAaA,IAAI,GAAG,GAAP,GAAa,GAA1B;AACAjQ,eAAK,CAACyQ,KAAN,GAAcA,KAAK,GAAG,GAAR,GAAc,GAA5B;;AACA,cAAIqxE,aAAa,IAAIrlF,GAAG,CAACulF,eAAzB,EAA0C;AACtC;AACAhiF,iBAAK,CAACkuC,KAAK,GAAG,YAAH,GAAkB,aAAxB,CAAL,GAA8C,KAAK,CAAnD,CAFsC,CAEgB;AACzD;;AACD,iBAAOluC,KAAP;AACH,SA5BD;;AA6BA,eAAOkgF,qBAAP;AACH,OA1P0C,CA0PzC,kEA1PyC,CAA3C,C,CA2PA;AACA;;;AACA,eAASgB,kBAAT,CAA4B/kF,IAA5B,EAAkC;AAC9B,YAAIg7E,MAAM,GAAG,EAAb;AACA,YAAIr0E,CAAJ;AACA,YAAIrG,GAAJ;AACA,YAAIy3B,CAAJ;;AACA,aAAKpxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BrG,aAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAV,CAD8B,CAE9B;;AACA,eAAKoxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGijD,MAAM,CAAC/6E,MAAvB,EAA+B83B,CAAC,EAAhC,EAAoC;AAChC,gBAAI,CAAC+tD,wBAAwB,CAACxlF,GAAD,EAAM06E,MAAM,CAACjjD,CAAD,CAAZ,CAAxB,CAAyC93B,MAA9C,EAAsD;AAClD;AACH;AACJ;;AACDK,aAAG,CAAC46E,KAAJ,GAAYnjD,CAAZ;AACA,WAACijD,MAAM,CAACjjD,CAAD,CAAN,KAAcijD,MAAM,CAACjjD,CAAD,CAAN,GAAY,EAA1B,CAAD,EAAgC91B,IAAhC,CAAqC3B,GAArC;AACH;;AACD,eAAO06E,MAAP;AACH,O,CACD;AACA;;;AACA,eAASgK,sBAAT,CAAgChK,MAAhC,EAAwC;AACpC,YAAIr0E,CAAJ;AACA,YAAIu0E,KAAJ;AACA,YAAInjD,CAAJ;AACA,YAAIz3B,GAAJ;AACA,YAAIylF,CAAJ;;AACA,aAAKp/E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGq0E,MAAM,CAAC/6E,MAAvB,EAA+B0G,CAAC,EAAhC,EAAoC;AAChCu0E,eAAK,GAAGF,MAAM,CAACr0E,CAAD,CAAd;;AACA,eAAKoxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmjD,KAAK,CAACj7E,MAAtB,EAA8B83B,CAAC,EAA/B,EAAmC;AAC/Bz3B,eAAG,GAAG46E,KAAK,CAACnjD,CAAD,CAAX;AACAz3B,eAAG,CAAC+kF,WAAJ,GAAkB,EAAlB;;AACA,iBAAKU,CAAC,GAAGp/E,CAAC,GAAG,CAAb,EAAgBo/E,CAAC,GAAG/K,MAAM,CAAC/6E,MAA3B,EAAmC8lF,CAAC,EAApC,EAAwC;AACpCD,sCAAwB,CAACxlF,GAAD,EAAM06E,MAAM,CAAC+K,CAAD,CAAZ,EAAiBzlF,GAAG,CAAC+kF,WAArB,CAAxB;AACH;AACJ;AACJ;AACJ,O,CACD;AACA;;;AACA,eAASJ,uBAAT,CAAiC3kF,GAAjC,EAAsC;AAClC,YAAI+kF,WAAW,GAAG/kF,GAAG,CAAC+kF,WAAtB;AACA,YAAIQ,eAAe,GAAG,CAAtB;AACA,YAAIl/E,CAAJ;AACA,YAAIq/E,UAAJ;;AACA,YAAI1lF,GAAG,CAACulF,eAAJ,KAAwB95D,SAA5B,EAAuC;AAAE;AACrC,eAAKplB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0+E,WAAW,CAACplF,MAA5B,EAAoC0G,CAAC,EAArC,EAAyC;AACrCq/E,sBAAU,GAAGX,WAAW,CAAC1+E,CAAD,CAAxB,CADqC,CAErC;;AACAs+E,mCAAuB,CAACe,UAAD,CAAvB,CAHqC,CAIrC;AACA;;AACAH,2BAAe,GAAG14E,IAAI,CAAC6I,GAAL,CAAS6vE,eAAT,EAA0B,IAAIG,UAAU,CAACH,eAAzC,CAAlB;AACH;;AACDvlF,aAAG,CAACulF,eAAJ,GAAsBA,eAAtB;AACH;AACJ,O,CACD;AACA;;;AACA,eAASC,wBAAT,CAAkCxlF,GAAlC,EAAuC86E,SAAvC,EAAkD6K,OAAlD,EAA2D;AACvD,YAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,iBAAO,GAAG,EAAV;AAAe;;AACzC,aAAK,IAAIt/E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy0E,SAAS,CAACn7E,MAA9B,EAAsC0G,CAAC,EAAvC,EAA2C;AACvC,cAAIu/E,kBAAkB,CAAC5lF,GAAD,EAAM86E,SAAS,CAACz0E,CAAD,CAAf,CAAtB,EAA2C;AACvCs/E,mBAAO,CAAChkF,IAAR,CAAam5E,SAAS,CAACz0E,CAAD,CAAtB;AACH;AACJ;;AACD,eAAOs/E,OAAP;AACH,O,CACD;;;AACA,eAASC,kBAAT,CAA4BC,IAA5B,EAAkCC,IAAlC,EAAwC;AACpC,eAAOD,IAAI,CAAC3xE,MAAL,GAAc4xE,IAAI,CAACryE,GAAnB,IAA0BoyE,IAAI,CAACpyE,GAAL,GAAWqyE,IAAI,CAAC5xE,MAAjD;AACH;;AACD,eAASixE,0BAAT,CAAoCnlF,GAApC,EAAyC;AACrC,YAAIknB,GAAG,GAAG,8EAAmBlnB,GAAnB,CAAV;AACAknB,WAAG,CAACq+D,eAAJ,GAAsBvlF,GAAG,CAACulF,eAA1B;AACAr+D,WAAG,CAACg+D,aAAJ,GAAoBllF,GAAG,CAACklF,aAAxB;AACA,eAAOh+D,GAAP;AACH;;AAED,UAAI6+D,sBAAsB;AAAG;AAAe,gBAAU1mF,MAAV,EAAkB;AAC1DN,iBAAS,CAACgnF,sBAAD,EAAyB1mF,MAAzB,CAAT;;AACA,iBAAS0mF,sBAAT,GAAkC;AAC9B,iBAAO1mF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDo4E,8BAAsB,CAAC7mF,SAAvB,CAAiCO,UAAjC,GAA8C,UAAUC,IAAV,EAAgBgwE,UAAhB,EAA4B;AACtE,eAAKkU,SAAL,GAAiB,KAAKF,QAAL,CAAcG,cAAd,CAA6BnkF,IAA7B,CAAjB;AACA,eAAKgkF,QAAL,CAAcI,eAAd,CAA8B,KAAKF,SAAnC,EAA8C,KAAKF,QAAL,CAAcsC,kBAA5D;AACA,eAAKlQ,SAAL,GAAiBpG,UAAU,CAACoG,SAA5B;AACH,SAJD;;AAKAiQ,8BAAsB,CAAC7mF,SAAvB,CAAiCkmF,cAAjC,GAAkD,UAAUplF,GAAV,EAAe;AAC7D,cAAIuD,KAAK,GAAGlE,MAAM,CAACH,SAAP,CAAiBkmF,cAAjB,CAAgC5lF,IAAhC,CAAqC,IAArC,EAA2CQ,GAA3C,CAAZ;;AACA,cAAI81E,SAAS,GAAG,KAAKA,SAArB;;AACA,cAAIA,SAAS,IAAIA,SAAS,CAAC3B,GAAV,KAAkBn0E,GAAG,CAACm0E,GAAvC,EAA4C;AACxC,gBAAI8R,cAAc,GAAG5mF,MAAM,CAACH,SAAP,CAAiBkmF,cAAjB,CAAgC5lF,IAAhC,CAAqC,IAArC,EAA2Cs2E,SAA3C,CAArB;;AACAvyE,iBAAK,CAACiQ,IAAN,GAAayyE,cAAc,CAACzyE,IAA5B;AACAjQ,iBAAK,CAACyQ,KAAN,GAAciyE,cAAc,CAACjyE,KAA7B;AACAzQ,iBAAK,CAACu/B,UAAN,GAAmBmjD,cAAc,CAACnjD,UAAlC;AACAv/B,iBAAK,CAACw/B,WAAN,GAAoBkjD,cAAc,CAACljD,WAAnC;AACH;;AACD,iBAAOx/B,KAAP;AACH,SAXD;;AAYA,eAAOwiF,sBAAP;AACH,OAvB2C,CAuB1CtC,qBAvB0C,CAA5C;;AAyBA,UAAIyC,oBAAoB;AAAG;AAAe,gBAAU7mF,MAAV,EAAkB;AACxDN,iBAAS,CAACmnF,oBAAD,EAAuB7mF,MAAvB,CAAT;;AACA,iBAAS6mF,oBAAT,CAA8BxC,QAA9B,EAAwC;AACpC,cAAInkF,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,eAAK,CAACmkF,QAAN,GAAiBA,QAAjB;AACA,iBAAOnkF,KAAP;AACH;;AACD2mF,4BAAoB,CAAChnF,SAArB,CAA+BO,UAA/B,GAA4C,UAAUuI,IAAV,EAAgBtI,IAAhB,EAAsB;AAC9D,cAAIgkF,QAAQ,GAAG,KAAKA,QAApB;AACA,cAAIlS,YAAJ,CAF8D,CAG9D;;AACA,cAAIxpE,IAAI,KAAK,SAAb,EAAwB;AACpBwpE,wBAAY,GAAGkS,QAAQ,CAACyC,cAAxB;AACH,WAFD,MAGK,IAAIn+E,IAAI,KAAK,eAAb,EAA8B;AAC/BwpE,wBAAY,GAAGkS,QAAQ,CAAC0C,oBAAxB;AACH,WAFI,MAGA,IAAIp+E,IAAI,KAAK,WAAb,EAA0B;AAC3BwpE,wBAAY,GAAGkS,QAAQ,CAAC2C,qBAAxB;AACH;;AACD3C,kBAAQ,CAACI,eAAT,CAAyBJ,QAAQ,CAACG,cAAT,CAAwBnkF,IAAxB,CAAzB,EAAwD8xE,YAAxD;AACA,iBAAO9xE,IAAI,CAACkZ,GAAL,CAAS,UAAU5Y,GAAV,EAAe;AAC3B,mBAAOA,GAAG,CAACqD,EAAX;AACH,WAFM,CAAP;AAGH,SAjBD;;AAkBA6iF,4BAAoB,CAAChnF,SAArB,CAA+ByxE,eAA/B,GAAiD,UAAUjxE,IAAV,EAAgB;AAC7D,eAAKgkF,QAAL,CAAcM,mBAAd,CAAkCtkF,IAAlC;AACH,SAFD;;AAGAwmF,4BAAoB,CAAChnF,SAArB,CAA+B0xE,cAA/B,GAAgD,UAAUlxE,IAAV,EAAgB;AAC5D,eAAKgkF,QAAL,CAAcQ,kBAAd,CAAiCxkF,IAAjC;AACH,SAFD;;AAGA,eAAOwmF,oBAAP;AACH,OAhCyC,CAgCxC,+DAhCwC,CAA1C;AAkCA;;AAEA;AACA;;;AACA,UAAII,0BAA0B,GAAG,CAC7B;AAAErlD,aAAK,EAAE;AAAT,OAD6B,EAE7B;AAAEC,eAAO,EAAE;AAAX,OAF6B,EAG7B;AAAEA,eAAO,EAAE;AAAX,OAH6B,EAI7B;AAAEtpB,eAAO,EAAE;AAAX,OAJ6B,EAK7B;AAAEA,eAAO,EAAE;AAAX,OAL6B,CAAjC;;AAOA,UAAI2uE,QAAQ;AAAG;AAAe,gBAAUlnF,MAAV,EAAkB;AAC5CN,iBAAS,CAACwnF,QAAD,EAAWlnF,MAAX,CAAT;;AACA,iBAASknF,QAAT,CAAkBljF,EAAlB,EAAsBo3E,WAAtB,EAAmC;AAC/B,cAAIl7E,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkB6D,EAAlB,KAAyB,IAArC;;AACA9D,eAAK,CAACinF,gBAAN,GAAyB,KAAzB;AACAjnF,eAAK,CAACknF,eAAN,GAAwB,KAAxB;AACAlnF,eAAK,CAACqiF,cAAN,GAAuB,mEAAQriF,KAAK,CAACsiF,eAAd,CAAvB;AACAtiF,eAAK,CAACmD,cAAN,GAAuB,4EAAiBnD,KAAK,CAACoD,eAAvB,CAAvB;AACApD,eAAK,CAACmnF,WAAN,GAAoB,4EAAiBnnF,KAAK,CAAConF,YAAvB,EAAqC,IAArC,EAA2C,CAACpnF,KAAK,CAACmD,cAAP,CAA3C,CAApB;AACAnD,eAAK,CAACqnF,aAAN,GAAsB,4EAAiBrnF,KAAK,CAACsnF,cAAvB,EAAuCtnF,KAAK,CAACunF,gBAA7C,EAA+D,CAACvnF,KAAK,CAACmD,cAAP,CAA/D,CAAtB;AACAnD,eAAK,CAACk7E,WAAN,GAAoBA,WAApB;AACA,cAAImM,aAAa,GAAGrnF,KAAK,CAACqnF,aAA1B;AACA,cAAI/jF,aAAa,GAAGtD,KAAK,CAACsD,aAAN,GAAsB,IAAI4gF,qBAAJ,CAA0BlkF,KAA1B,CAA1C;AACA,cAAIu9E,YAAY,GAAGv9E,KAAK,CAACu9E,YAAN,GAAqB,IAAIoJ,oBAAJ,CAAyB3mF,KAAzB,CAAxC;AACAA,eAAK,CAACw9E,cAAN,GAAuB,IAAIgJ,sBAAJ,CAA2BxmF,KAA3B,CAAvB;AACAA,eAAK,CAACgtE,mBAAN,GAA4B,4EAAiBuQ,YAAY,CAAC/5E,UAAb,CAAwBC,IAAxB,CAA6B85E,YAA7B,EAA2C,eAA3C,CAAjB,EAA8EA,YAAY,CAAC75E,QAAb,CAAsBD,IAAtB,CAA2B85E,YAA3B,EAAyC,eAAzC,CAA9E,EAAyI,CAAC8J,aAAD,CAAzI,CAA5B;AACArnF,eAAK,CAACsuE,mBAAN,GAA4B,4EAAiBtuE,KAAK,CAACwnF,oBAAvB,EAA6CxnF,KAAK,CAACynF,sBAAnD,EAA2E,CAACJ,aAAD,CAA3E,CAA5B;AACArnF,eAAK,CAACu8E,cAAN,GAAuB,4EAAiBj5E,aAAa,CAACE,UAAd,CAAyBC,IAAzB,CAA8BH,aAA9B,CAAjB,EAA+DA,aAAa,CAACI,QAAd,CAAuBD,IAAvB,CAA4BH,aAA5B,CAA/D,EAA2G,CAAC+jF,aAAD,CAA3G,CAAvB;AACArnF,eAAK,CAAC49E,cAAN,GAAuB,4EAAiBL,YAAY,CAAC/5E,UAAb,CAAwBC,IAAxB,CAA6B85E,YAA7B,EAA2C,SAA3C,CAAjB,EAAwEA,YAAY,CAAC75E,QAAb,CAAsBD,IAAtB,CAA2B85E,YAA3B,EAAyC,SAAzC,CAAxE,EAA6H,CAAC8J,aAAD,CAA7H,CAAvB;AACArnF,eAAK,CAACyuE,oBAAN,GAA6B,4EAAiBnrE,aAAa,CAACkuE,kBAAd,CAAiC/tE,IAAjC,CAAsCH,aAAtC,CAAjB,EAAuEA,aAAa,CAACmuE,oBAAd,CAAmChuE,IAAnC,CAAwCH,aAAxC,CAAvE,EAA+H,CAACtD,KAAK,CAACu8E,cAAP,CAA/H,CAA7B;AACAv8E,eAAK,CAAC2uE,eAAN,GAAwB,4EAAiB3uE,KAAK,CAAC69E,gBAAvB,EAAyC79E,KAAK,CAAC89E,kBAA/C,EAAmE,CAACuJ,aAAD,CAAnE,CAAxB;AACArnF,eAAK,CAAC6uE,iBAAN,GAA0B,4EAAiB7uE,KAAK,CAAC+9E,kBAAvB,EAA2C/9E,KAAK,CAACg+E,oBAAjD,EAAuE,CAACqJ,aAAD,CAAvE,CAA1B;AACA,iBAAOrnF,KAAP;AACH;AACD;;AAEA;AACA;;;AACAgnF,gBAAQ,CAACrnF,SAAT,CAAmB2iF,eAAnB,GAAqC,UAAUzhF,OAAV,EAAmB;AACpD,cAAIytB,YAAY,GAAGztB,OAAO,CAACytB,YAA3B;AAAA,cAAyCG,YAAY,GAAG5tB,OAAO,CAAC4tB,YAAhE;AACA,cAAIi5D,YAAJ;AACA,cAAIz+D,KAAJ;AACAqF,sBAAY,GAAG,0EAAeA,YAAf,CAAf;AACAG,sBAAY,GAAGA,YAAY,GAAG,0EAAeA,YAAf,CAAH,GAAkCH,YAA7D;AACAo5D,sBAAY,GAAG,gFAAqBp5D,YAArB,EAAmCG,YAAnC,CAAf;;AACA,cAAIi5D,YAAY,KAAK,IAArB,EAA2B;AACvBj5D,wBAAY,GAAGH,YAAf;AACAo5D,wBAAY,GAAG,CAAf,CAFuB,CAGvB;AACH;;AACD,eAAKp5D,YAAL,GAAoBA,YAApB;AACA,eAAKG,YAAL,GAAoBA,YAApB;AACA,eAAKi5D,YAAL,GAAoBA,YAApB,CAdoD,CAepD;AACA;;AACAz+D,eAAK,GAAGpoB,OAAO,CAAC0tB,eAAhB;;AACA,cAAIlvB,KAAK,CAAC6pB,OAAN,CAAcD,KAAd,CAAJ,EAA0B;AACtBA,iBAAK,GAAGA,KAAK,CAACA,KAAK,CAAC7oB,MAAN,GAAe,CAAhB,CAAb;AACH;;AACD,eAAKunF,WAAL,GAAmB,2EAAgB1+D,KAAK,IAAI;AACxCvmB,gBAAI,EAAE,SADkC;AAExCC,kBAAM,EAAE,SAFgC;AAGxC+rC,0BAAc,EAAE,IAHwB;AAIxC9rC,oBAAQ,EAAE;AAJ8B,WAAzB,CAAnB;AAMAqmB,eAAK,GAAGpoB,OAAO,CAAC2tB,iBAAhB;AACA,eAAKo5D,aAAL,GAAqB3+D,KAAK,GACtB,0EAAeA,KAAf,CADsB,GAEtB,KAAK4+D,oBAAL,CAA0Bv5D,YAA1B,CAFJ;AAGH,SA/BD,CA5B4C,CA4D5C;;;AACA04D,gBAAQ,CAACrnF,SAAT,CAAmBkoF,oBAAnB,GAA0C,UAAUv5D,YAAV,EAAwB;AAC9D,cAAIxnB,CAAJ;AACA,cAAI8gF,aAAJ;AACA,cAAIE,aAAJ,CAH8D,CAI9D;;AACA,eAAKhhF,CAAC,GAAGigF,0BAA0B,CAAC3mF,MAA3B,GAAoC,CAA7C,EAAgD0G,CAAC,IAAI,CAArD,EAAwDA,CAAC,EAAzD,EAA6D;AACzD8gF,yBAAa,GAAG,0EAAeb,0BAA0B,CAACjgF,CAAD,CAAzC,CAAhB;AACAghF,yBAAa,GAAG,gFAAqBF,aAArB,EAAoCt5D,YAApC,CAAhB;;AACA,gBAAIw5D,aAAa,KAAK,IAAlB,IAA0BA,aAAa,GAAG,CAA9C,EAAiD;AAC7C,qBAAOF,aAAP;AACH;AACJ;;AACD,iBAAOt5D,YAAP,CAZ8D,CAYzC;AACxB,SAbD;AAcA;;;;AAEA04D,gBAAQ,CAACrnF,SAAT,CAAmBoE,MAAnB,GAA4B,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AAClD,eAAK0hF,cAAL,CAAoB1hF,OAAO,CAACE,OAA5B;AACA,cAAI0zE,KAAK,GAAGvwE,KAAK,CAACuwE,KAAlB;AACA,eAAKzB,MAAL,GAAcyB,KAAK,CAACn0E,MAApB;AACA,eAAK+C,cAAL,CAAoBxC,OAAO,CAACC,KAA5B;AACA,eAAKumF,WAAL,CAAiBnjF,KAAK,CAACC,WAAvB;AACA,eAAKojF,aAAL,CAAmBrjF,KAAK,CAACuwE,KAAzB,EAAgCvwE,KAAK,CAACC,WAAtC;AACA,eAAK+oE,mBAAL,CAAyBrsE,OAAzB,EAAkCqD,KAAK,CAAC+xE,gBAAxC;AACA,eAAKzH,mBAAL,CAAyBtqE,KAAK,CAAC8xE,iBAA/B;AACA,eAAKyG,cAAL,CAAoB57E,OAApB,EAA6BqD,KAAK,CAACgyE,WAAnC;AACA,eAAK4H,cAAL,CAAoBj9E,OAApB,EAA6BqD,KAAK,CAACiyE,WAAnC;AACA,eAAKxH,oBAAL,CAA0BzqE,KAAK,CAACwd,cAAhC;AACA,eAAKmtD,eAAL,CAAqB3qE,KAAK,CAACg4C,SAA3B;AACA,eAAK6yB,iBAAL,CAAuB7qE,KAAK,CAAC6mB,WAA7B;AACH,SAdD;;AAeAm8D,gBAAQ,CAACrnF,SAAT,CAAmB2E,OAAnB,GAA6B,YAAY;AACrCxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B,EADqC,CAErC;;;AACA,eAAKknF,WAAL,CAAiBzjF,QAAjB;AACA,eAAK2jF,aAAL,CAAmB3jF,QAAnB;AACA,eAAKP,cAAL,CAAoBO,QAApB;AACH,SAND;;AAOAsjF,gBAAQ,CAACrnF,SAAT,CAAmBuF,UAAnB,GAAgC,UAAUC,QAAV,EAAoB;AAChD,cAAIzE,EAAE,GAAG,IAAT;AAAA,cAAe68E,YAAY,GAAG78E,EAAE,CAAC68E,YAAjC;AAAA,cAA+Cj6E,aAAa,GAAG5C,EAAE,CAAC4C,aAAlE;AAAA,cAAiFk6E,cAAc,GAAG98E,EAAE,CAAC88E,cAArG;;AACA,cAAIr4E,QAAQ,IAAI,KAAK8hF,gBAArB,EAAuC;AACnC,iBAAKc,kBAAL;AACA,iBAAKd,gBAAL,GAAwB,KAAxB;AACH;;AACD,cAAI9hF,QAAQ,IAAI,KAAK+hF,eAArB,EAAsC;AAClC,iBAAKzH,iBAAL;AACA,iBAAKyH,eAAL,GAAuB,KAAvB;AACH;;AACD3J,sBAAY,CAACj4E,YAAb,CAA0BH,QAA1B;AACA7B,uBAAa,CAACgC,YAAd,CAA2BH,QAA3B;AACAq4E,wBAAc,CAACl4E,YAAf,CAA4BH,QAA5B;AACAo4E,sBAAY,CAACh4E,WAAb,CAAyBJ,QAAzB;AACA7B,uBAAa,CAACiC,WAAd,CAA0BJ,QAA1B;AACAq4E,wBAAc,CAACj4E,WAAf,CAA2BJ,QAA3B;AACH,SAhBD;;AAiBA6hF,gBAAQ,CAACrnF,SAAT,CAAmByD,eAAnB,GAAqC,UAAUxC,KAAV,EAAiB;AAClD,cAAIkD,EAAE,GAAG,KAAKA,EAAd;AACAA,YAAE,CAAC0C,SAAH,GACI,8BACI,8BADJ,GAEI,wBAFJ,GAE+B5F,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAF/B,GAEgE,2BAHpE;AAIA,eAAKylF,iBAAL,GAAyBlkF,EAAE,CAACmD,aAAH,CAAiB,QAAjB,CAAzB;AACA,eAAKghF,eAAL,GAAuBnkF,EAAE,CAACmD,aAAH,CAAiB,WAAjB,CAAvB;AACA,eAAKihF,YAAL,GAAoBpkF,EAAE,CAACmD,aAAH,CAAiB,aAAjB,CAApB;AACH,SATD;;AAUA+/E,gBAAQ,CAACrnF,SAAT,CAAmBynF,YAAnB,GAAkC,UAAUnjF,WAAV,EAAuB;AACrD,cAAIrD,KAAK,GAAG,KAAKD,OAAL,CAAaC,KAAzB;AACA,eAAKqnF,eAAL,CAAqBzhF,SAArB,GACI,mBAAmB5F,KAAK,CAAC2B,QAAN,CAAe,WAAf,CAAnB,GAAiD,IAAjD,GACI,KAAK4lF,iBAAL,CAAuBlkF,WAAvB,CADJ,GAEI,UAHR;AAIA,eAAKmkF,OAAL,GAAe,wEAAa,KAAKH,eAAlB,EAAmC,IAAnC,CAAf;AACA,eAAKI,aAAL,GAAqB,IAAI,gEAAJ,CAAkB,KAAKvkF,EAAvB,EAA2B,KAAKskF,OAAhC,EAAyC,KAAzC,EAAgD,IAAhD,CAAqD;AAArD,WAArB;AAEA,eAAKnB,gBAAL,GAAwB,IAAxB;AACH,SAVD,CA9H4C,CAyI5C;;;AACAD,gBAAQ,CAACrnF,SAAT,CAAmBwoF,iBAAnB,GAAuC,UAAUlkF,WAAV,EAAuB;AAC1D,cAAIvD,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBwF,OAAO,GAAGzF,EAAE,CAACyF,OAApC;AAAA,cAA6CvF,KAAK,GAAGF,EAAE,CAACE,KAAxD;AAAA,cAA+DsxC,KAAK,GAAGxxC,EAAE,CAACwxC,KAA1E;AACA,cAAIpc,IAAI,GAAG,EAAX;AACA,cAAIhuB,QAAQ,GAAG,sEAAW7D,WAAW,CAAC8D,WAAZ,CAAwB/F,KAAnC,CAAf;AACA,cAAIsmF,QAAQ,GAAGrkF,WAAW,CAAC0qB,OAA3B;AACA,cAAI45D,YAAY,GAAG,0EAAe,CAAf,CAAnB;AACA,cAAIC,QAAJ,CAN0D,CAM5C;;AACd,cAAIC,SAAJ;AACA,cAAIC,QAAJ,CAR0D,CAS1D;;AACA,iBAAO,qEAAUJ,QAAV,IAAsB,qEAAUrkF,WAAW,CAAC2qB,OAAtB,CAA7B,EAA6D;AACzD45D,oBAAQ,GAAGriF,OAAO,CAAC1B,GAAR,CAAYqD,QAAZ,EAAsBwgF,QAAtB,CAAX;AACAG,qBAAS,GAAG,gFAAqBF,YAArB,EAAmC,KAAKX,aAAxC,MAA2D,IAAvE;AACAc,oBAAQ,GACJ,gCAAgC9nF,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAAhC,GAAkE,IAAlE,IACKkmF,SAAS,GACN,WAAW;AACP,kFAAWtiF,OAAO,CAACyB,MAAR,CAAe4gF,QAAf,EAAyB,KAAKb,WAA9B,CAAX,CADJ,GAEI,SAHE,GAIN,EALR,IAMI,OAPR;AAQA7xD,gBAAI,IACA,oBAAoB,+EAAoB0yD,QAApB,CAApB,GAAoD,GAApD,IACKC,SAAS,GAAG,EAAH,GAAQ,mBADtB,IAEI,GAFJ,IAGK,CAACv2C,KAAD,GAASw2C,QAAT,GAAoB,EAHzB,IAII,aAJJ,GAIoB9nF,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAJpB,GAIsD,SAJtD,IAKK2vC,KAAK,GAAGw2C,QAAH,GAAc,EALxB,IAMI,OAPR;AAQAJ,oBAAQ,GAAG,wEAAaA,QAAb,EAAuB,KAAKh6D,YAA5B,CAAX;AACAi6D,wBAAY,GAAG,wEAAaA,YAAb,EAA2B,KAAKj6D,YAAhC,CAAf;AACH;;AACD,iBAAOwH,IAAP;AACH,SAjCD;;AAkCAkxD,gBAAQ,CAACrnF,SAAT,CAAmB2nF,cAAnB,GAAoC,UAAU/S,KAAV,EAAiBtwE,WAAjB,EAA8B;AAC9D,cAAIvD,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBiD,QAAQ,GAAGlD,EAAE,CAACkD,QAArC;AAAA,cAA+C+a,IAAI,GAAGje,EAAE,CAACie,IAAzD;AAAA,cAA+DuzB,KAAK,GAAGxxC,EAAE,CAACwxC,KAA1E;AAAA,cAAiFtxC,KAAK,GAAGF,EAAE,CAACE,KAA5F;AAAA,cAAmGuF,OAAO,GAAGzF,EAAE,CAACyF,OAAhH;AACA,cAAIw4E,KAAK,GAAG,IAAI,8DAAJ,CAAa,KAAKh+E,OAAlB,CAAZ;AACA,eAAKqnF,iBAAL,CAAuBxhF,SAAvB,GACI,mBAAmB5F,KAAK,CAAC2B,QAAN,CAAe,WAAf,CAAnB,GAAiD,IAAjD,GACIo8E,KAAK,CAAC7B,UAAN,CAAiB;AACbvI,iBAAK,EAAEA,KADM;AAEbtwE,uBAAW,EAAEA,WAFA;AAGbovE,2BAAe,EAAE,KAAK6H,WAAL,CAAiB0D;AAHrB,WAAjB,CADJ,GAMI,UAPR;AAQA,eAAK+J,MAAL,GAAc,wEAAa,KAAK7kF,EAAlB,EAAsB,2BAAtB,CAAd;;AACA,eAAK,IAAI8wE,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9B,MAA7B,EAAqC8B,GAAG,EAAxC,EAA4C;AACxChxE,oBAAQ,CAACke,eAAT,CAAyB,WAAzB,EAAsC,CAClC;AACI0e,kBAAI,EAAEr6B,OAAO,CAAC6wC,MAAR,CAAeu9B,KAAK,CAACK,GAAD,CAAL,CAAWp0C,IAA1B,CADV;AAEI18B,gBAAE,EAAE,KAAK6kF,MAAL,CAAY/T,GAAZ,CAFR;AAGIj2D,kBAAI,EAAEA;AAHV,aADkC,CAAtC;AAOH;;AACD,cAAIuzB,KAAJ,EAAW;AACP,iBAAKy2C,MAAL,CAAYx2C,OAAZ;AACH;;AACD,eAAKssC,YAAL,GAAoB,IAAI,gEAAJ,CAAkB,KAAK36E,EAAvB,EAA2B,KAAK6kF,MAAhC,EAAwC,IAAxC,EAA8C;AAClE,eADoB,CAApB;AAEA,eAAKC,qBAAL;AACA,eAAK1B,eAAL,GAAuB,IAAvB;AACH,SA5BD;;AA6BAF,gBAAQ,CAACrnF,SAAT,CAAmB4nF,gBAAnB,GAAsC,YAAY;AAC9C,eAAKsB,uBAAL;AACH,SAFD;AAGA;;AAEA;;;AACA7B,gBAAQ,CAACrnF,SAAT,CAAmBipF,qBAAnB,GAA2C,YAAY;AACnD,cAAI12C,KAAK,GAAG,KAAKvxC,OAAL,CAAauxC,KAAzB;AACA,cAAIF,KAAK,GAAG,EAAZ;AACA,cAAI0pC,UAAJ;AACA1pC,eAAK,CAAC5vC,IAAN,CAAW,KAAK84E,WAAL,CAAiB7H,eAAjB,EAAX;;AACA,eAAK,IAAIvsE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKgsE,MAAzB,EAAiChsE,CAAC,EAAlC,EAAsC;AAClCkrC,iBAAK,CAAC5vC,IAAN,CAAW,SACP,8BADO,GAEP,4DAFO,GAGP,wCAHO,GAIP,4CAJO,GAKP,0CALO,GAMP,2CANO,GAOP,QAPO,GAQP,OARJ;AASH;;AACD,cAAI8vC,KAAJ,EAAW;AACPF,iBAAK,CAACG,OAAN;AACH;;AACDupC,oBAAU,GAAG,KAAKoN,iBAAL,GAAyB,yEAAc,sCAChD,SADgD,GAEhD,MAFgD,GAEvC92C,KAAK,CAAC3vC,IAAN,CAAW,EAAX,CAFuC,GAEtB,OAFsB,GAGhD,UAHgD,GAIhD,QAJkC,CAAtC;AAKA,eAAK0mF,eAAL,GAAuB,wEAAarN,UAAb,EAAyB,iBAAzB,CAAvB;AACA,eAAK+K,kBAAL,GAA0B,wEAAa/K,UAAb,EAAyB,sBAAzB,CAA1B;AACA,eAAK8I,cAAL,GAAsB,wEAAa9I,UAAb,EAAyB,+CAAzB,CAAtB;AACA,eAAKkL,cAAL,GAAsB,wEAAalL,UAAb,EAAyB,uBAAzB,CAAtB;AACA,eAAKoL,qBAAL,GAA6B,wEAAapL,UAAb,EAAyB,yBAAzB,CAA7B;AACA,eAAKmL,oBAAL,GAA4B,wEAAanL,UAAb,EAAyB,wBAAzB,CAA5B;;AACA,cAAIxpC,KAAJ,EAAW;AACP,iBAAK62C,eAAL,CAAqB52C,OAArB;AACA,iBAAKs0C,kBAAL,CAAwBt0C,OAAxB;AACA,iBAAKqyC,cAAL,CAAoBryC,OAApB;AACA,iBAAKy0C,cAAL,CAAoBz0C,OAApB;AACA,iBAAK20C,qBAAL,CAA2B30C,OAA3B;AACA,iBAAK00C,oBAAL,CAA0B10C,OAA1B;AACH;;AACD,eAAKruC,EAAL,CAAQkB,WAAR,CAAoB02E,UAApB;AACH,SAvCD;;AAwCAsL,gBAAQ,CAACrnF,SAAT,CAAmBkpF,uBAAnB,GAA6C,YAAY;AACrD,mFAAc,KAAKC,iBAAnB;AACH,SAFD,CAvP4C,CA0P5C;;;AACA9B,gBAAQ,CAACrnF,SAAT,CAAmB2kF,cAAnB,GAAoC,UAAUnkF,IAAV,EAAgB;AAChD,cAAIkkF,SAAS,GAAG,EAAhB;AACA,cAAIv9E,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKgsE,MAArB,EAA6BhsE,CAAC,EAA9B,EAAkC;AAC9Bu9E,qBAAS,CAACjiF,IAAV,CAAe,EAAf;AACH;;AACD,eAAK0E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9Bu9E,qBAAS,CAAClkF,IAAI,CAAC2G,CAAD,CAAJ,CAAQ8tE,GAAT,CAAT,CAAuBxyE,IAAvB,CAA4BjC,IAAI,CAAC2G,CAAD,CAAhC;AACH;;AACD,iBAAOu9E,SAAP;AACH,SAVD,CA3P4C,CAsQ5C;AACA;;;AACA2C,gBAAQ,CAACrnF,SAAT,CAAmB4kF,eAAnB,GAAqC,UAAUF,SAAV,EAAqBpS,YAArB,EAAmC;AACpE,cAAI2C,GAAJ;AACA,cAAIz0E,IAAJ;AACA,cAAI2G,CAAJ;;AACA,eAAK8tE,GAAG,GAAG,CAAX,EAAcA,GAAG,GAAG,KAAK9B,MAAzB,EAAiC8B,GAAG,EAApC,EAAwC;AAAE;AACtCz0E,gBAAI,GAAGkkF,SAAS,CAACzP,GAAD,CAAhB;;AACA,iBAAK9tE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BmrE,0BAAY,CAAC2C,GAAD,CAAZ,CAAkB5vE,WAAlB,CAA8B7E,IAAI,CAAC2G,CAAD,CAAJ,CAAQhD,EAAtC;AACH;AACJ;AACJ,SAVD;AAWA;;;;AAEAkjF,gBAAQ,CAACrnF,SAAT,CAAmBuvE,mBAAnB,GAAyC,YAAY;AACjD,iBAAO,QAAP,CADiD,CAChC;AACpB,SAFD;;AAGA8X,gBAAQ,CAACrnF,SAAT,CAAmB6vE,kBAAnB,GAAwC,UAAUrvE,IAAV,EAAgBqgC,IAAhB,EAAsB;AAC1D;AACA,cAAI,CAAC,KAAKuoD,eAAV,EAA2B;AACvB;AACH;;AACD,cAAI70E,GAAG,GAAG,KAAK80E,cAAL,CAAoBxoD,IAApB,CAAV;AACA,cAAIyoD,KAAK,GAAG,EAAZ;AACA,cAAIniF,CAAJ,CAP0D,CAQ1D;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9B,gBAAIoiF,MAAM,GAAG,yEAAc,KAAd,EAAqB;AAAEzhF,uBAAS,EAAE;AAAb,aAArB,CAAb;AACAyhF,kBAAM,CAAC11E,KAAP,CAAaU,GAAb,GAAmBA,GAAG,GAAG,IAAzB;AACA,iBAAK60E,eAAL,CAAqB5oF,IAAI,CAAC2G,CAAD,CAAJ,CAAQ8tE,GAA7B,EAAkC5vE,WAAlC,CAA8CkkF,MAA9C;AACAD,iBAAK,CAAC7mF,IAAN,CAAW8mF,MAAX;AACH,WAdyD,CAe1D;;;AACA,cAAI/oF,IAAI,CAACC,MAAL,GAAc,CAAlB,EAAqB;AAAE;AACnB,gBAAI+oF,OAAO,GAAG,yEAAc,KAAd,EAAqB;AAAE1hF,uBAAS,EAAE;AAAb,aAArB,CAAd;AACA0hF,mBAAO,CAAC31E,KAAR,CAAcU,GAAd,GAAoBA,GAAG,GAAG,IAA1B;AACA,iBAAK40E,iBAAL,CAAuB9jF,WAAvB,CAAmCmkF,OAAnC;AACAF,iBAAK,CAAC7mF,IAAN,CAAW+mF,OAAX;AACH;;AACD,eAAKC,eAAL,GAAuBH,KAAvB;AACH,SAvBD;;AAwBAjC,gBAAQ,CAACrnF,SAAT,CAAmB4vE,oBAAnB,GAA0C,YAAY;AAClD,cAAI,KAAK6Z,eAAT,EAA0B;AACtB,iBAAKA,eAAL,CAAqBr9E,OAArB,CAA6B,gEAA7B;AACA,iBAAKq9E,eAAL,GAAuB,IAAvB;AACH;AACJ,SALD;AAMA;;;;AAEApC,gBAAQ,CAACrnF,SAAT,CAAmB0pF,kBAAnB,GAAwC,YAAY;AAChD,iBAAO,KAAKpB,eAAL,CAAqBh1E,qBAArB,GAA6CyB,MAApD;AACH,SAFD,CAxT4C,CA2T5C;AACA;;;AACAsyE,gBAAQ,CAACrnF,SAAT,CAAmBqpF,cAAnB,GAAoC,UAAUM,IAAV,EAAgBC,cAAhB,EAAgC;AAChE,cAAI,CAACA,cAAL,EAAqB;AACjBA,0BAAc,GAAG,sEAAWD,IAAX,CAAjB;AACH;;AACD,iBAAO,KAAKE,cAAL,CAAoB,0EAAeF,IAAI,CAAC/iF,OAAL,KAAiBgjF,cAAc,CAAChjF,OAAf,EAAhC,CAApB,CAAP;AACH,SALD,CA7T4C,CAmU5C;;;AACAygF,gBAAQ,CAACrnF,SAAT,CAAmB6pF,cAAnB,GAAoC,UAAU9gF,QAAV,EAAoB;AACpD,cAAI+9B,GAAG,GAAG,KAAK2hD,OAAL,CAAahoF,MAAvB;AACA,cAAI6D,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B;AACA,cAAIwlF,YAAY,GAAG,CAAC/gF,QAAQ,CAACic,YAAT,GAAwB,qEAAU1gB,WAAW,CAAC0qB,OAAtB,CAAzB,IAA2D,qEAAU,KAAKL,YAAf,CAA9E,CAHoD,CAGwD;;AAC5G,cAAIo7D,SAAJ;AACA,cAAIC,aAAJ,CALoD,CAMpD;AACA;AACA;;AACAF,sBAAY,GAAGn8E,IAAI,CAAC6I,GAAL,CAAS,CAAT,EAAYszE,YAAZ,CAAf;AACAA,sBAAY,GAAGn8E,IAAI,CAAC8I,GAAL,CAASqwB,GAAT,EAAcgjD,YAAd,CAAf,CAVoD,CAWpD;AACA;;AACAC,mBAAS,GAAGp8E,IAAI,CAAC6yB,KAAL,CAAWspD,YAAX,CAAZ;AACAC,mBAAS,GAAGp8E,IAAI,CAAC8I,GAAL,CAASszE,SAAT,EAAoBjjD,GAAG,GAAG,CAA1B,CAAZ,CAdoD,CAepD;AACA;;AACAkjD,uBAAa,GAAGF,YAAY,GAAGC,SAA/B;AACA,iBAAO,KAAKrB,aAAL,CAAmB9/B,IAAnB,CAAwBmhC,SAAxB,IACH,KAAKrB,aAAL,CAAmBt/B,SAAnB,CAA6B2gC,SAA7B,IAA0CC,aAD9C;AAEH,SApBD,CApU4C,CAyV5C;;;AACA3C,gBAAQ,CAACrnF,SAAT,CAAmB8kF,mBAAnB,GAAyC,UAAUtkF,IAAV,EAAgB;AACrD,cAAIU,OAAO,GAAG,KAAKF,OAAL,CAAaE,OAA3B;AACA,cAAI+oF,cAAc,GAAG/oF,OAAO,CAACgxB,sBAA7B;AACA,cAAI/qB,CAAJ;AACA,cAAIrG,GAAJ;AACA,cAAI2G,OAAJ;;AACA,eAAKN,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BrG,eAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAV;AACAM,mBAAO,GAAG,KAAKpD,KAAL,CAAWuwE,KAAX,CAAiB9zE,GAAG,CAACm0E,GAArB,EAA0Bp0C,IAApC;AACA//B,eAAG,CAACyT,GAAJ,GAAU,KAAK80E,cAAL,CAAoBvoF,GAAG,CAACuB,KAAxB,EAA+BoF,OAA/B,CAAV;AACA3G,eAAG,CAACkU,MAAJ,GAAarH,IAAI,CAAC6I,GAAL,CAAS1V,GAAG,CAACyT,GAAJ,GAAU01E,cAAnB,EAAmC,KAAKZ,cAAL,CAAoBvoF,GAAG,CAACwB,GAAxB,EAA6BmF,OAA7B,CAAnC,CAAb;AACH;AACJ,SAZD,CA1V4C,CAuW5C;AACA;;;AACA4/E,gBAAQ,CAACrnF,SAAT,CAAmBglF,kBAAnB,GAAwC,UAAUxkF,IAAV,EAAgB;AACpD,cAAI2G,CAAJ;AACA,cAAIrG,GAAJ;;AACA,eAAKqG,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG3G,IAAI,CAACC,MAArB,EAA6B0G,CAAC,EAA9B,EAAkC;AAC9BrG,eAAG,GAAGN,IAAI,CAAC2G,CAAD,CAAV;AACA,kFAAWrG,GAAG,CAACqD,EAAf,EAAmB,KAAKiiF,sBAAL,CAA4BtlF,GAA5B,CAAnB;AACH;AACJ,SAPD,CAzW4C,CAiX5C;;;AACAumF,gBAAQ,CAACrnF,SAAT,CAAmBomF,sBAAnB,GAA4C,UAAUtlF,GAAV,EAAe;AACvD,iBAAO;AACHyT,eAAG,EAAEzT,GAAG,CAACyT,GADN;AAEHS,kBAAM,EAAE,CAAClU,GAAG,CAACkU,MAFV,CAEiB;;AAFjB,WAAP;AAIH,SALD;AAMA;;;;AAEAqyE,gBAAQ,CAACrnF,SAAT,CAAmB8d,mBAAnB,GAAyC,YAAY;AACjD,eAAKgiE,iBAAL;AACA,eAAKsI,kBAAL;AACH,SAHD;;AAIAf,gBAAQ,CAACrnF,SAAT,CAAmB8/E,iBAAnB,GAAuC,YAAY;AAC/C,eAAKhB,YAAL,CAAkB12B,KAAlB;AACH,SAFD;;AAGAi/B,gBAAQ,CAACrnF,SAAT,CAAmBooF,kBAAnB,GAAwC,YAAY;AAChD,eAAKM,aAAL,CAAmBtgC,KAAnB;AACH,SAFD;AAGA;;;;AAEAi/B,gBAAQ,CAACrnF,SAAT,CAAmBggF,aAAnB,GAAmC,UAAU3hE,YAAV,EAAwBC,WAAxB,EAAqC;AACpE,cAAI9X,OAAO,GAAG,KAAKxF,OAAL,CAAawF,OAA3B;;AACA,cAAIzF,EAAE,GAAG,IAAT;AAAA,cAAegnF,YAAY,GAAGhnF,EAAE,CAACgnF,YAAjC;AAAA,cAA+CW,aAAa,GAAG3nF,EAAE,CAAC2nF,aAAlE;AAAA,cAAiF5J,YAAY,GAAG/9E,EAAE,CAAC+9E,YAAnG;;AACA,cAAIoL,QAAQ,GAAGpL,YAAY,CAACh2B,WAAb,CAAyBzqC,YAAzB,CAAf;AACA,cAAI0rE,SAAS,GAAGrB,aAAa,CAAC1/B,UAAd,CAAyB1qC,WAAzB,CAAhB;;AACA,cAAI4rE,QAAQ,IAAI,IAAZ,IAAoBH,SAAS,IAAI,IAArC,EAA2C;AACvC,gBAAII,OAAO,GAAGzB,aAAa,CAAC9/B,IAAd,CAAmBmhC,SAAnB,CAAd;AACA,gBAAIK,UAAU,GAAG1B,aAAa,CAACt/B,SAAd,CAAwB2gC,SAAxB,CAAjB;AACA,gBAAIM,OAAO,GAAG,CAAC/rE,WAAW,GAAG6rE,OAAf,IAA0BC,UAAxC,CAHuC,CAGa;;AACpD,gBAAIE,cAAc,GAAG38E,IAAI,CAAC6yB,KAAL,CAAW6pD,OAAO,GAAGtC,YAArB,CAArB,CAJuC,CAIkB;;AACzD,gBAAIwC,SAAS,GAAGR,SAAS,GAAGhC,YAAZ,GAA2BuC,cAA3C;AACA,gBAAI7iF,OAAO,GAAG,KAAKpD,KAAL,CAAWuwE,KAAX,CAAiBsV,QAAjB,EAA2BrpD,IAAzC;AACA,gBAAI2pD,IAAI,GAAG,wEAAa,KAAKnmF,KAAL,CAAWC,WAAX,CAAuB0qB,OAApC,EAA6C,4EAAiB,KAAKF,YAAtB,EAAoCy7D,SAApC,CAA7C,CAAX;AACA,gBAAIloF,KAAK,GAAGmE,OAAO,CAAC1B,GAAR,CAAY2C,OAAZ,EAAqB+iF,IAArB,CAAZ;AACA,gBAAIloF,GAAG,GAAGkE,OAAO,CAAC1B,GAAR,CAAYzC,KAAZ,EAAmB,KAAKysB,YAAxB,CAAV;AACA,mBAAO;AACHmmD,iBAAG,EAAEiV,QADF;AAEH1rE,sBAAQ,EAAE;AACNtc,qBAAK,EAAE;AAAEG,uBAAK,EAAEA,KAAT;AAAgBC,qBAAG,EAAEA;AAArB,iBADD;AAENL,sBAAM,EAAE;AAFF,eAFP;AAMHmd,mBAAK,EAAE,KAAK4pE,MAAL,CAAYkB,QAAZ,CANJ;AAOHjK,0BAAY,EAAE;AACV3rE,oBAAI,EAAEwqE,YAAY,CAACr2B,KAAb,CAAmByhC,QAAnB,CADI;AAEVp1E,qBAAK,EAAEgqE,YAAY,CAACp2B,MAAb,CAAoBwhC,QAApB,CAFG;AAGV31E,mBAAG,EAAE41E,OAHK;AAIVn1E,sBAAM,EAAEm1E,OAAO,GAAGC;AAJR;AAPX,aAAP;AAcH;AACJ,SA9BD;AA+BA;;;;AAEA/C,gBAAQ,CAACrnF,SAAT,CAAmBk+E,gBAAnB,GAAsC,UAAUv8D,KAAV,EAAiB;AACnD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBguE,UAAnB,CAA8BhwD,KAAK,CAACg1D,iBAApC;;AACA,gBAAIh1D,KAAK,CAACc,OAAV,EAAmB;AACf,mBAAKo7D,cAAL,CAAoBh6E,UAApB,CAA+B,KAAK7C,OAApC,EAA6C2gB,KAAK,CAACnhB,IAAnD,EAAyD;AAAE6O,0BAAU,EAAE,IAAd;AAAoBunE,yBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,eAAzD;AACH,aAFD,MAGK;AACD,mBAAKgH,YAAL,CAAkB/5E,UAAlB,CAA6B,WAA7B,EAA0C,KAAK7C,OAA/C,EAAwD2gB,KAAK,CAACnhB,IAA9D;AACH;AACJ;AACJ,SAVD;;AAWA6mF,gBAAQ,CAACrnF,SAAT,CAAmBm+E,kBAAnB,GAAwC,UAAUx8D,KAAV,EAAiB;AACrD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBiuE,UAAnB,CAA8BjwD,KAAK,CAACg1D,iBAApC;;AACA,gBAAIh1D,KAAK,CAACc,OAAV,EAAmB;AACf,mBAAKo7D,cAAL,CAAoB95E,QAApB,CAA6B,KAAK/C,OAAlC,EAA2C2gB,KAAK,CAACnhB,IAAjD,EAAuD;AAAE6O,0BAAU,EAAE,IAAd;AAAoBunE,yBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,eAAvD;AACH,aAFD,MAGK;AACD,mBAAKgH,YAAL,CAAkB75E,QAAlB,CAA2B,WAA3B,EAAwC,KAAK/C,OAA7C;AACH;AACJ;AACJ,SAVD;AAWA;;;;AAEAqmF,gBAAQ,CAACrnF,SAAT,CAAmBo+E,kBAAnB,GAAwC,UAAUz8D,KAAV,EAAiB;AACrD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBguE,UAAnB,CAA8BhwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKkH,cAAL,CAAoBh6E,UAApB,CAA+B,KAAK7C,OAApC,EAA6C2gB,KAAK,CAACnhB,IAAnD,EAAyD;AAAEywE,wBAAU,EAAE,IAAd;AAAoB2F,uBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,aAAzD;AACH;AACJ,SALD;;AAMAyQ,gBAAQ,CAACrnF,SAAT,CAAmBq+E,oBAAnB,GAA0C,UAAU18D,KAAV,EAAiB;AACvD,cAAIA,KAAJ,EAAW;AACP,iBAAKhe,aAAL,CAAmBiuE,UAAnB,CAA8BjwD,KAAK,CAACg1D,iBAApC;AACA,iBAAKkH,cAAL,CAAoB95E,QAApB,CAA6B,KAAK/C,OAAlC,EAA2C2gB,KAAK,CAACnhB,IAAjD,EAAuD;AAAEywE,wBAAU,EAAE,IAAd;AAAoB2F,uBAAS,EAAEj1D,KAAK,CAACi1D;AAArC,aAAvD;AACH;AACJ,SALD;AAMA;;AAEA;;;AACAyQ,gBAAQ,CAACrnF,SAAT,CAAmB6nF,oBAAnB,GAA0C,UAAUrnF,IAAV,EAAgB;AACtD,cAAIA,IAAJ,EAAU;AACN,gBAAI,KAAKQ,OAAL,CAAaE,OAAb,CAAqBqvB,YAAzB,EAAuC;AACnC,mBAAKstD,cAAL,CAAoBh6E,UAApB,CAA+B,KAAK7C,OAApC,EAA6CR,IAA7C,EAAmD;AAAEiqF,2BAAW,EAAE;AAAf,eAAnD;AACH,aAFD,MAGK;AACD,mBAAK7M,YAAL,CAAkB/5E,UAAlB,CAA6B,WAA7B,EAA0C,KAAK7C,OAA/C,EAAwDR,IAAxD;AACH;AACJ;AACJ,SATD;;AAUA6mF,gBAAQ,CAACrnF,SAAT,CAAmB8nF,sBAAnB,GAA4C,UAAUtnF,IAAV,EAAgB;AACxD,cAAIA,IAAJ,EAAU;AACN,gBAAI,KAAKQ,OAAL,CAAaE,OAAb,CAAqBqvB,YAAzB,EAAuC;AACnC,mBAAKstD,cAAL,CAAoB95E,QAApB,CAA6B,KAAK/C,OAAlC,EAA2CR,IAA3C,EAAiD;AAAEiqF,2BAAW,EAAE;AAAf,eAAjD;AACH,aAFD,MAGK;AACD,mBAAK7M,YAAL,CAAkB75E,QAAlB,CAA2B,WAA3B,EAAwC,KAAK/C,OAA7C;AACH;AACJ;AACJ,SATD;;AAUA,eAAOqmF,QAAP;AACH,OAne6B,CAme5B,gEAne4B,CAA9B;;AAqeA,UAAIqD,cAAc;AAAG;AAAe,gBAAUvqF,MAAV,EAAkB;AAClDN,iBAAS,CAAC6qF,cAAD,EAAiBvqF,MAAjB,CAAT;;AACA,iBAASuqF,cAAT,GAA0B;AACtB,iBAAOvqF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDi8E,sBAAc,CAAC1qF,SAAf,CAAyBikD,UAAzB,GAAsC,YAAY;AAC9C,iBAAO;AACHhiD,kBAAM,EAAE,EADL;AAEH0oF,iBAAK,EAAE;AAFJ,WAAP;AAIH,SALD;;AAMAD,sBAAc,CAAC1qF,SAAf,CAAyB4kD,kBAAzB,GAA8C,UAAUpmC,QAAV,EAAoB;AAC9D,cAAIA,QAAQ,CAACvc,MAAb,EAAqB;AACjB,mBAAO,CAAC,QAAD,CAAP;AACH,WAFD,MAGK;AACD,mBAAO,CAAC,OAAD,CAAP;AACH;AACJ,SAPD;;AAQAyoF,sBAAc,CAAC1qF,SAAf,CAAyB8kD,kBAAzB,GAA8C,UAAU1jD,QAAV,EAAoB;AAC9D,cAAI,CAACA,QAAQ,CAACa,MAAd,EAAsB;AAClB,mBAAO,CAAC,OAAD,CAAP;AACH,WAFD,MAGK,IAAI,0EAAeb,QAAf,CAAJ,EAA8B;AAC/B,mBAAO,CAAC,OAAD,EAAU,QAAV,CAAP;AACH,WAFI,MAGA;AACD,mBAAO,CAAC,QAAD,CAAP;AACH;AACJ,SAVD;;AAWA,eAAOspF,cAAP;AACH,OA/BmC,CA+BlC,2DA/BkC,CAApC;;AAiCA,UAAIE,4BAA4B,GAAG,CAAnC;AACA,UAAIC,kBAAkB,GAAG,2EAAgB;AAAE1oD,YAAI,EAAE;AAAR,OAAhB,CAAzB;AACA;;AAEA;AACA;;AACA,UAAI2oD,oBAAoB;AAAG;AAAe,gBAAU3qF,MAAV,EAAkB;AACxDN,iBAAS,CAACirF,oBAAD,EAAuB3qF,MAAvB,CAAT;;AACA,iBAAS2qF,oBAAT,GAAgC;AAC5B,cAAIzqF,KAAK,GAAGF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAAhE;;AACApO,eAAK,CAAC0qF,QAAN,GAAiB,IAAIL,cAAJ,EAAjB;AACArqF,eAAK,CAACmD,cAAN,GAAuB,4EAAiBnD,KAAK,CAACoD,eAAvB,EAAwCpD,KAAK,CAACqD,iBAA9C,CAAvB;AACA;;AAEA;;AACArD,eAAK,CAACuiF,mBAAN,GAA4B,YAAY;AACpC,gBAAI7hF,EAAE,GAAGV,KAAK,CAACW,OAAf;AAAA,gBAAwBC,KAAK,GAAGF,EAAE,CAACE,KAAnC;AAAA,gBAA0CuF,OAAO,GAAGzF,EAAE,CAACyF,OAAvD;AAAA,gBAAgEtF,OAAO,GAAGH,EAAE,CAACG,OAA7E;AACA,gBAAIgB,KAAK,GAAG7B,KAAK,CAACgE,KAAN,CAAYC,WAAZ,CAAwB8D,WAApC;AACA,gBAAIggC,MAAM,GAAG,oEAASlmC,KAAK,CAACG,KAAf,EAAsBH,KAAK,CAACI,GAA5B,CAAb;AACA,gBAAI0oF,QAAJ;;AACA,gBAAI9pF,OAAO,CAAC0sB,WAAZ,EAAyB;AACrBo9D,sBAAQ,GAAGxkF,OAAO,CAACyB,MAAR,CAAe/F,KAAK,CAACG,KAArB,EAA4BwoF,kBAA5B,CAAX;AACA,qBAAO,KACH,oCADG,GACoC5pF,KAAK,CAAC2B,QAAN,CAAe,cAAf,CADpC,GACqE,IADrE,GAC4EvC,KAAK,CAAC4qF,aAAN,EAD5E,GACoG,GADpG,GAEH,gFAAoB;AACpB/pF,qBADA,EACSsF,OADT,EACkB;AAAEq6B,oBAAI,EAAE3+B,KAAK,CAACG,KAAd;AAAqByG,oBAAI,EAAE,MAA3B;AAAmCi9C,wBAAQ,EAAE3d,MAAM,GAAG;AAAtD,eADlB,EAC6E,sEAAW4iD,QAAX,CAD7E,CACkG;AADlG,eAFG,GAKH,OALJ;AAMH,aARD,MASK;AACD,qBAAO,wBAAwB/pF,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAAxB,GAAyD,IAAzD,GAAgEvC,KAAK,CAAC4qF,aAAN,EAAhE,GAAwF,QAA/F;AACH;AACJ,WAjBD;AAkBA;;AAEA;;;AACA5qF,eAAK,CAAC6qF,yBAAN,GAAkC,YAAY;AAC1C,gBAAIjqF,KAAK,GAAGZ,KAAK,CAACW,OAAN,CAAcC,KAA1B;AACA,mBAAO,wBAAwBA,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAAxB,GAA0D,IAA1D,GAAiEvC,KAAK,CAAC4qF,aAAN,EAAjE,GAAyF,QAAhG;AACH,WAHD,CA5B4B,CAgC5B;AACA;;;AACA5qF,eAAK,CAAC8qF,uBAAN,GAAgC,YAAY;AACxC,mBAAO,yBAAyB9qF,KAAK,CAAC4qF,aAAN,EAAzB,GAAiD,QAAxD;AACH,WAFD;AAGA;;AAEA;;;AACA5qF,eAAK,CAAC2iF,wBAAN,GAAiC,YAAY;AACzC,gBAAIjiF,EAAE,GAAGV,KAAK,CAACW,OAAf;AAAA,gBAAwBC,KAAK,GAAGF,EAAE,CAACE,KAAnC;AAAA,gBAA0CC,OAAO,GAAGH,EAAE,CAACG,OAAvD;AACA,mBAAO,KACH,qBADG,GACqBD,KAAK,CAAC2B,QAAN,CAAe,eAAf,CADrB,GACuD,IADvD,GAC8DvC,KAAK,CAAC4qF,aAAN,EAD9D,GACsF,GADtF,GAEH,QAFG,GAEQ;AACX,qFAAc/pF,OAAd,CAHG,GAIH,SAJG,GAKH,OALJ;AAMH,WARD,CAxC4B,CAiD5B;AACA;;;AACAb,eAAK,CAAC4iF,sBAAN,GAA+B,YAAY;AACvC,mBAAO,yBAAyB5iF,KAAK,CAAC4qF,aAAN,EAAzB,GAAiD,QAAxD;AACH,WAFD;;AAGA,iBAAO5qF,KAAP;AACH;;AACDyqF,4BAAoB,CAAC9qF,SAArB,CAA+BoE,MAA/B,GAAwC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AAC9Db,gBAAM,CAACH,SAAP,CAAiBoE,MAAjB,CAAwB9D,IAAxB,CAA6B,IAA7B,EAAmC+D,KAAnC,EAA0CrD,OAA1C;;AACA,eAAKwC,cAAL,CAAoBxC,OAApB;AACH,SAHD;;AAIA8pF,4BAAoB,CAAC9qF,SAArB,CAA+B2E,OAA/B,GAAyC,YAAY;AACjDxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKkD,cAAL,CAAoBO,QAApB;AACH,SAHD;;AAIA+mF,4BAAoB,CAAC9qF,SAArB,CAA+ByD,eAA/B,GAAiD,UAAUzC,OAAV,EAAmB;AAChE,eAAKmD,EAAL,CAAQU,SAAR,CAAkBC,GAAlB,CAAsB,kBAAtB;AACA,eAAKX,EAAL,CAAQ0C,SAAR,GAAoB,KAAKq8E,kBAAL,EAApB;AACA,eAAK99E,QAAL,GAAgB,IAAI,kEAAJ,CAAoB,QAApB,EAA8B;AAC9C,gBADgB,CACT;AADS,WAAhB;AAGA,cAAIgmF,cAAc,GAAG,KAAKhmF,QAAL,CAAcjB,EAAnC;AACA,eAAKA,EAAL,CAAQmD,aAAR,CAAsB,oBAAtB,EAA4CjC,WAA5C,CAAwD+lF,cAAxD;AACAA,wBAAc,CAACvmF,SAAf,CAAyBC,GAAzB,CAA6B,wBAA7B;AACA,cAAIumF,UAAU,GAAG,yEAAc,KAAd,EAAqB;AAAEvjF,qBAAS,EAAE;AAAb,WAArB,CAAjB;AACAsjF,wBAAc,CAAC/lF,WAAf,CAA2BgmF,UAA3B;AACA,eAAK7G,QAAL,GAAgB,IAAI6C,QAAJ,CAAagE,UAAb,EAAyB;AACrCpM,6BAAiB,EAAE,KAAKiM,yBADa;AAErCxX,2BAAe,EAAE,KAAKyX;AAFe,WAAzB,CAAhB;;AAIA,cAAInqF,OAAO,CAACE,OAAR,CAAgButB,UAApB,EAAgC;AAAE;AAC9B,iBAAKmrD,OAAL,GAAe,IAAI,6DAAJ,EAAY;AAC3B,iBAAKz1E,EAAL,CAAQmD,aAAR,CAAsB,cAAtB,CADe,EACwB;AACnCk4E,mCAAqB,EAAE,KAAKyD,sBADO;AAEnChE,+BAAiB,EAAE,KAAK+D,wBAFW;AAGnCtP,6BAAe,EAAE,KAAKuP,sBAHa;AAInC3D,mCAAqB,EAAE,KAJY;AAKnCD,oCAAsB,EAAE;AALW,aADxB,CAAf,CAD4B,CAS5B;;AACA,gBAAIiM,SAAS,GAAG,KAAKnnF,EAAL,CAAQmD,aAAR,CAAsB,aAAtB,CAAhB;AACA,iBAAKsyE,OAAL,CAAa8D,kBAAb,GAAkC4N,SAAS,CAACh4E,qBAAV,GAAkCyB,MAApE;AACH;AACJ,SA5BD;;AA6BA+1E,4BAAoB,CAAC9qF,SAArB,CAA+B0D,iBAA/B,GAAmD,YAAY;AAC3D,eAAKS,EAAL,CAAQU,SAAR,CAAkBg0B,MAAlB,CAAyB,kBAAzB;AACA,eAAK2rD,QAAL,CAAc7/E,OAAd;;AACA,cAAI,KAAKi1E,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaj1E,OAAb;AACH;;AACD,eAAKS,QAAL,CAAcT,OAAd;AACH,SAPD;AAQA;;AAEA;AACA;;;AACAmmF,4BAAoB,CAAC9qF,SAArB,CAA+BkjF,kBAA/B,GAAoD,YAAY;AAC5D,cAAIniF,EAAE,GAAG,KAAKC,OAAd;AAAA,cAAuBC,KAAK,GAAGF,EAAE,CAACE,KAAlC;AAAA,cAAyCC,OAAO,GAAGH,EAAE,CAACG,OAAtD;AACA,iBAAO,KACH,gBADG,GACgBD,KAAK,CAAC2B,QAAN,CAAe,WAAf,CADhB,GAC8C,IAD9C,IAEF1B,OAAO,CAAC2uB,YAAR,GACG,4BACI,MADJ,GAEI,+BAFJ,GAEsC5uB,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAFtC,GAEuE,eAFvE,GAGI,OAHJ,GAII,UALP,GAMG,EARD,IASH,yBATG,GAUH,MAVG,GAWH,aAXG,GAWa3B,KAAK,CAAC2B,QAAN,CAAe,eAAf,CAXb,GAW+C,IAX/C,IAYF1B,OAAO,CAACutB,UAAR,GACG,oCACI,wBADJ,GAC+BxtB,KAAK,CAAC2B,QAAN,CAAe,cAAf,CAD/B,GACgE,MAFnE,GAGG,EAfD,IAgBH,OAhBG,GAiBH,OAjBG,GAkBH,UAlBG,GAmBH,UAnBJ;AAoBH,SAtBD;AAuBA;;;;AAEAkoF,4BAAoB,CAAC9qF,SAArB,CAA+BuvE,mBAA/B,GAAqD,YAAY;AAC7D,iBAAO,KAAKiV,QAAL,CAAcjV,mBAAd,EAAP;AACH,SAFD,CApIwD,CAuIxD;AACA;AACA;;;AACAub,4BAAoB,CAAC9qF,SAArB,CAA+B4vE,oBAA/B,GAAsD,YAAY;AAC9D,eAAK4U,QAAL,CAAc5U,oBAAd;AACH,SAFD;AAGA;;;;AAEAkb,4BAAoB,CAAC9qF,SAArB,CAA+BuF,UAA/B,GAA4C,UAAUC,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC;AAChFvF,gBAAM,CAACH,SAAP,CAAiBuF,UAAjB,CAA4BjF,IAA5B,CAAiC,IAAjC,EAAuCkF,QAAvC,EAAiDC,UAAjD,EAA6DC,MAA7D,EADgF,CACV;;;AACtE,eAAK8+E,QAAL,CAAcj/E,UAAd,CAAyBC,QAAzB;;AACA,cAAI,KAAKo0E,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAar0E,UAAb,CAAwBC,QAAxB;AACH;AACJ,SAND,CA/IwD,CAsJxD;;;AACAslF,4BAAoB,CAAC9qF,SAArB,CAA+BuuE,cAA/B,GAAgD,UAAU/oE,QAAV,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwC;AACpF,cAAIrF,KAAK,GAAG,IAAZ;;AACA,cAAIguB,UAAJ;AACA,cAAIm1D,cAAJ;AACA,cAAI7/C,eAAJ,CAJoF,CAKpF;;AACA,eAAK4nD,SAAL,GAAiB,2EAAgB,wEAAa,KAAKpnF,EAAlB,EAAsB,UAAtB,CAAhB,CAAjB,CANoF,CAOpF;AACA;;AACA,cAAI,CAAC,KAAKqgF,QAAL,CAAcwE,MAAnB,EAA2B;AACvB,gBAAI,CAACtjF,MAAL,EAAa;AACT89E,4BAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,mBAAKL,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACH;;AACD;AACH,WAfmF,CAgBpF;;;AACA,cAAIgI,cAAc,GAAG,wEAAa,KAAKrnF,EAAlB,EAAsB,SAAtB,EAAiC8I,MAAjC,CAAwC,UAAUgP,IAAV,EAAgB;AACzE,mBAAO,CAAC5b,KAAK,CAAC+E,QAAN,CAAejB,EAAf,CAAkB+d,QAAlB,CAA2BjG,IAA3B,CAAR;AACH,WAFoB,CAArB,CAjBoF,CAoBpF;;AACA,eAAKuoE,QAAL,CAAc+D,YAAd,CAA2B10E,KAA3B,CAAiCC,OAAjC,GAA2C,MAA3C,CArBoF,CAqBjC;;AACnD,eAAK1O,QAAL,CAAcS,KAAd,GAtBoF,CAsB7D;;AACvB2lF,wBAAc,CAACp/E,OAAf,CAAuB,qEAAvB,EAvBoF,CAwBpF;;AACA,cAAI,KAAKwtE,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaK,gBAAb,GADc,CACmB;;AACjC5rD,sBAAU,GAAG,KAAKrtB,OAAL,CAAaE,OAAb,CAAqBmtB,UAAlC;;AACA,gBAAIA,UAAU,IAAI,OAAOA,UAAP,KAAsB,QAAxC,EAAkD;AAC9CA,wBAAU,GAAGu8D,4BAAb,CAD8C,CACH;AAC9C;;AACD,gBAAIv8D,UAAJ,EAAgB;AACZ,mBAAKurD,OAAL,CAAauG,SAAb,CAAuB9xD,UAAvB;AACH;AACJ;;AACD,cAAI,CAAC3oB,MAAL,EAAa;AAAE;AACX89E,0BAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,iBAAKL,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACA7/C,2BAAe,GAAG,KAAKv+B,QAAL,CAAc2kD,kBAAd,EAAlB;;AACA,gBAAIpmB,eAAe,CAACrvB,IAAhB,IAAwBqvB,eAAe,CAAC7uB,KAA5C,EAAmD;AAAE;AACjD;AACA02E,4BAAc,CAACp/E,OAAf,CAAuB,UAAUs3B,KAAV,EAAiB;AACpC,4FAAiBA,KAAjB,EAAwBC,eAAxB;AACH,eAFD,EAF+C,CAK/C;AACA;;AACA6/C,4BAAc,GAAG,KAAKz9E,qBAAL,CAA2BN,UAA3B,CAAjB;AACA,mBAAKL,QAAL,CAAcU,SAAd,CAAwB09E,cAAxB;AACH,aAbQ,CAcT;;;AACA,iBAAKp+E,QAAL,CAAc0kD,YAAd,CAA2BnmB,eAA3B,EAfS,CAgBT;AACA;;AACA,gBAAI,KAAK6gD,QAAL,CAAckF,kBAAd,KAAqClG,cAAzC,EAAyD;AACrD,mBAAKgB,QAAL,CAAc+D,YAAd,CAA2B10E,KAA3B,CAAiCC,OAAjC,GAA2C,EAA3C;AACH;AACJ;AACJ,SAzDD,CAvJwD,CAiNxD;;;AACAg3E,4BAAoB,CAAC9qF,SAArB,CAA+B+F,qBAA/B,GAAuD,UAAUN,UAAV,EAAsB;AACzE,iBAAOA,UAAU,GACb,iFAAsB,KAAKtB,EAA3B,EAA+B,KAAKiB,QAAL,CAAcjB,EAA7C,CADJ,CADyE,CAEnB;AACzD,SAHD;AAIA;;AAEA;;;AACA2mF,4BAAoB,CAAC9qF,SAArB,CAA+BqwE,iBAA/B,GAAmD,UAAUtnE,QAAV,EAAoB;AACnE,cAAIwL,GAAG,GAAG,KAAKiwE,QAAL,CAAcqF,cAAd,CAA6B9gF,QAA7B,CAAV,CADmE,CAEnE;;AACAwL,aAAG,GAAG5G,IAAI,CAAC0mE,IAAL,CAAU9/D,GAAV,CAAN;;AACA,cAAIA,GAAJ,EAAS;AACLA,eAAG,GADE,CACE;AACV;;AACD,iBAAO;AAAEA,eAAG,EAAEA;AAAP,WAAP;AACH,SARD;;AASAu2E,4BAAoB,CAAC9qF,SAArB,CAA+BowE,eAA/B,GAAiD,YAAY;AACzD,iBAAO;AAAE77D,eAAG,EAAE,KAAKnP,QAAL,CAAckQ,YAAd;AAAP,WAAP;AACH,SAFD;;AAGAw1E,4BAAoB,CAAC9qF,SAArB,CAA+BswE,eAA/B,GAAiD,UAAU3mB,MAAV,EAAkB;AAC/D,cAAIA,MAAM,CAACp1C,GAAP,KAAegY,SAAnB,EAA8B;AAC1B,iBAAKnnB,QAAL,CAAcmR,YAAd,CAA2BozC,MAAM,CAACp1C,GAAlC;AACH;AACJ,SAJD,CArOwD,CA0OxD;;;AACAu2E,4BAAoB,CAAC9qF,SAArB,CAA+BirF,aAA/B,GAA+C,YAAY;AACvD,cAAI,KAAKM,SAAL,IAAkB,IAAtB,EAA4B;AACxB,mBAAO,kBAAkB,KAAKA,SAAvB,GAAmC,KAA1C;AACH;;AACD,iBAAO,EAAP;AACH,SALD;;AAMA,eAAOT,oBAAP;AACH,OAlPyC,CAkPxC,uDAlPwC,CAA1C;;AAmPAA,0BAAoB,CAAC9qF,SAArB,CAA+Bm6D,cAA/B,GAAgD,IAAhD,C,CAAsD;;AAEtD,UAAIsxB,cAAc;AAAG;AAAe,gBAAUtrF,MAAV,EAAkB;AAClDN,iBAAS,CAAC4rF,cAAD,EAAiBtrF,MAAjB,CAAT;;AACA,iBAASsrF,cAAT,CAAwBjH,QAAxB,EAAkC;AAC9B,cAAInkF,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBkkF,QAAQ,CAACrgF,EAA3B,KAAkC,IAA9C;;AACA9D,eAAK,CAACqrF,cAAN,GAAuB,mEAAQA,cAAR,CAAvB;AACArrF,eAAK,CAACsjF,MAAN,GAAe,IAAIgI,cAAJ,EAAf;AACAtrF,eAAK,CAACmkF,QAAN,GAAiBA,QAAjB;AACA,iBAAOnkF,KAAP;AACH;;AACDorF,sBAAc,CAACzrF,SAAf,CAAyBgE,YAAzB,GAAwC,UAAUhD,OAAV,EAAmB;AACvDA,iBAAO,CAACiD,QAAR,CAAiBC,4BAAjB,CAA8C,IAA9C,EAAoD;AAChDC,cAAE,EAAE,KAAKqgF,QAAL,CAAcrgF;AAD8B,WAApD;AAGH,SAJD;;AAKAsnF,sBAAc,CAACzrF,SAAf,CAAyB2E,OAAzB,GAAmC,YAAY;AAC3CxE,gBAAM,CAACH,SAAP,CAAiB2E,OAAjB,CAAyBrE,IAAzB,CAA8B,IAA9B;;AACA,eAAKU,OAAL,CAAaiD,QAAb,CAAsBW,8BAAtB,CAAqD,IAArD;AACH,SAHD;;AAIA6mF,sBAAc,CAACzrF,SAAf,CAAyBoE,MAAzB,GAAkC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACxD,cAAIwF,OAAO,GAAG,KAAKxF,OAAL,CAAawF,OAA3B;AACA,cAAIlC,WAAW,GAAGD,KAAK,CAACC,WAAxB;AAAA,cAAqCu/E,QAAQ,GAAGx/E,KAAK,CAACw/E,QAAtD;AACA,cAAIr/E,SAAS,GAAG,KAAKA,SAAL,GAAiB,KAAKknF,cAAL,CAAoB7H,QAApB,EAA8Bv/E,WAA9B,EAA2CkC,OAA3C,CAAjC;AACA,cAAIg+E,QAAQ,GAAG,KAAKA,QAApB;AACAA,kBAAQ,CAAC94B,cAAT,CAAwB1qD,OAAxB,EALwD,CAKtB;;AAClCwjF,kBAAQ,CAAC/4B,YAAT,CAAsBp9C,QAAQ,CAAC,EAAD,EAAK,KAAKs1E,MAAL,CAAY3N,UAAZ,CAAuB3xE,KAAvB,EAA8BC,WAA9B,EAA2C,IAA3C,EAAiDtD,OAAO,CAACiD,QAAzD,EAAmEugF,QAAnE,EAA6EhgF,SAA7E,CAAL,EAA8F;AAAEF,uBAAW,EAAEA,WAAf;AAA4BswE,iBAAK,EAAEiP,QAAQ,CAACjP,KAAT,CAAe,CAAf;AAAnC,WAA9F,CAA9B,EAAqL5zE,OAArL;AACH,SAPD;;AAQAyqF,sBAAc,CAACzrF,SAAf,CAAyB6vE,kBAAzB,GAA8C,UAAUhvC,IAAV,EAAgB;AAC1D,eAAK2jD,QAAL,CAAc3U,kBAAd,CAAiC,KAAK8T,MAAL,CAAYpN,YAAZ,CAAyB11C,IAAzB,EAA+B,KAAK2jD,QAApC,EAA8C,KAAKhgF,SAAnD,CAAjC,EAAgGq8B,IAAhG;AACH,SAFD;;AAGA4qD,sBAAc,CAACzrF,SAAf,CAAyB8d,mBAAzB,GAA+C,YAAY;AACvD,eAAK0mE,QAAL,CAAc1mE,mBAAd;AACH,SAFD;;AAGA2tE,sBAAc,CAACzrF,SAAf,CAAyBue,QAAzB,GAAoC,UAAUF,YAAV,EAAwBC,WAAxB,EAAqC;AACrE,cAAIwlE,MAAM,GAAG,KAAKU,QAAL,CAAcxE,aAAd,CAA4B3hE,YAA5B,EAA0CC,WAA1C,CAAb;;AACA,cAAIwlE,MAAJ,EAAY;AACR,mBAAO;AACHn9E,uBAAS,EAAE,KAAK69E,QADb;AAEHhmE,sBAAQ,EAAEslE,MAAM,CAACtlE,QAFd;AAGHY,mBAAK,EAAE0kE,MAAM,CAAC1kE,KAHX;AAIHpG,kBAAI,EAAE;AACF1E,oBAAI,EAAEwvE,MAAM,CAAC7D,YAAP,CAAoB3rE,IADxB;AAEFQ,qBAAK,EAAEgvE,MAAM,CAAC7D,YAAP,CAAoBnrE,KAFzB;AAGFP,mBAAG,EAAEuvE,MAAM,CAAC7D,YAAP,CAAoB1rE,GAHvB;AAIFS,sBAAM,EAAE8uE,MAAM,CAAC7D,YAAP,CAAoBjrE;AAJ1B,eAJH;AAUHyJ,mBAAK,EAAE;AAVJ,aAAP;AAYH;AACJ,SAhBD;;AAiBA,eAAOgtE,cAAP;AACH,OAlDmC,CAkDlC,gEAlDkC,CAApC;;AAmDA,eAASC,cAAT,CAAwB7H,QAAxB,EAAkCv/E,WAAlC,EAA+CkC,OAA/C,EAAwD;AACpD,YAAIumC,MAAM,GAAG,EAAb;;AACA,aAAK,IAAI9nC,EAAE,GAAG,CAAT,EAAYlE,EAAE,GAAG8iF,QAAQ,CAAC/O,WAA/B,EAA4C7vE,EAAE,GAAGlE,EAAE,CAACN,MAApD,EAA4DwE,EAAE,EAA9D,EAAkE;AAC9D,cAAI47B,IAAI,GAAG9/B,EAAE,CAACkE,EAAD,CAAb;AACA8nC,gBAAM,CAACtqC,IAAP,CAAY;AACRJ,iBAAK,EAAEmE,OAAO,CAAC1B,GAAR,CAAY+7B,IAAZ,EAAkBv8B,WAAW,CAAC0qB,OAA9B,CADC;AAER1sB,eAAG,EAAEkE,OAAO,CAAC1B,GAAR,CAAY+7B,IAAZ,EAAkBv8B,WAAW,CAAC2qB,OAA9B;AAFG,WAAZ;AAIH;;AACD,eAAO8d,MAAP;AACH;;AACD,UAAI4+C,cAAc;AAAG;AAAe,gBAAUxrF,MAAV,EAAkB;AAClDN,iBAAS,CAAC8rF,cAAD,EAAiBxrF,MAAjB,CAAT;;AACA,iBAASwrF,cAAT,GAA0B;AACtB,iBAAOxrF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDk9E,sBAAc,CAAC3rF,SAAf,CAAyB+zE,UAAzB,GAAsC,UAAU7xE,KAAV,EAAiBsC,SAAjB,EAA4B;AAC9D,cAAIhE,IAAI,GAAG,EAAX;;AACA,eAAK,IAAIy0E,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGzwE,SAAS,CAAC/D,MAAlC,EAA0Cw0E,GAAG,EAA7C,EAAiD;AAC7C,gBAAIvuE,QAAQ,GAAG,2EAAgBxE,KAAhB,EAAuBsC,SAAS,CAACywE,GAAD,CAAhC,CAAf;;AACA,gBAAIvuE,QAAJ,EAAc;AACVlG,kBAAI,CAACiC,IAAL,CAAU;AACNJ,qBAAK,EAAEqE,QAAQ,CAACrE,KADV;AAENC,mBAAG,EAAEoE,QAAQ,CAACpE,GAFR;AAGNH,uBAAO,EAAEuE,QAAQ,CAACrE,KAAT,CAAeuE,OAAf,OAA6B1E,KAAK,CAACG,KAAN,CAAYuE,OAAZ,EAHhC;AAINrE,qBAAK,EAAEmE,QAAQ,CAACpE,GAAT,CAAasE,OAAb,OAA2B1E,KAAK,CAACI,GAAN,CAAUsE,OAAV,EAJ5B;AAKNquE,mBAAG,EAAEA;AALC,eAAV;AAOH;AACJ;;AACD,iBAAOz0E,IAAP;AACH,SAfD;;AAgBA,eAAOmrF,cAAP;AACH,OAtBmC,CAsBlC,yDAtBkC,CAApC;;AAwBA,UAAIC,YAAY;AAAG;AAAe,gBAAUzrF,MAAV,EAAkB;AAChDN,iBAAS,CAAC+rF,YAAD,EAAezrF,MAAf,CAAT;;AACA,iBAASyrF,YAAT,GAAwB;AACpB,cAAIvrF,KAAK,GAAGF,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACmG,KAAP,CAAa,IAAb,EAAmBmI,SAAnB,CAAnB,IAAoD,IAAhE;;AACApO,eAAK,CAAC2jF,aAAN,GAAsB,mEAAQA,aAAR,CAAtB;AACA,iBAAO3jF,KAAP;AACH;;AACDurF,oBAAY,CAAC5rF,SAAb,CAAuBoE,MAAvB,GAAgC,UAAUC,KAAV,EAAiBrD,OAAjB,EAA0B;AACtDb,gBAAM,CAACH,SAAP,CAAiBoE,MAAjB,CAAwB9D,IAAxB,CAA6B,IAA7B,EAAmC+D,KAAnC,EAA0CrD,OAA1C,EADsD,CACF;;;AACpD,cAAID,EAAE,GAAG,KAAKsD,KAAd;AAAA,cAAqBC,WAAW,GAAGvD,EAAE,CAACuD,WAAtC;AAAA,cAAmDi/D,oBAAoB,GAAGxiE,EAAE,CAACwiE,oBAA7E;AACA,cAAIr9D,gBAAgB,GAAGlF,OAAO,CAACkF,gBAA/B;AACA,cAAI29E,QAAQ,GAAG,KAAKG,aAAL,CAAmB1/E,WAAnB,EAAgCi/D,oBAAhC,CAAf;AACA,cAAIxf,UAAU,GAAG,KAAKgnC,QAAL,CAAchnC,UAAd,CAAyB1/C,KAAzB,CAAjB;;AACA,cAAI,KAAKylB,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAY2hC,YAAZ,CAAyB;AACrBnnD,yBAAW,EAAEA,WADQ;AAErBmvE,mBAAK,EAAEoQ,QAAQ,CAAC/O,WAFK;AAGrB7B,kCAAoB,EAAE,IAHD;AAIrBS,6BAAe,EAAE,KAAKkP;AAJD,aAAzB,EAKG5hF,OALH;AAMH;;AACD,eAAK6qF,cAAL,CAAoBpgC,YAApB,CAAiCp9C,QAAQ,CAAC,EAAD,EAAK01C,UAAU,CAAC,OAAD,CAAf,EAA0B;AAAEz/C,uBAAW,EAAEA,WAAf;AAC/Du/E,oBAAQ,EAAEA;AADqD,WAA1B,CAAzC,EAC2B7iF,OAD3B;;AAEA,cAAI,KAAKijF,aAAT,EAAwB;AACpB,iBAAKA,aAAL,CAAmBx4B,YAAnB,CAAgCp9C,QAAQ,CAAC,EAAD,EAAK01C,UAAU,CAAC,QAAD,CAAf,EAA2B;AAAEz/C,yBAAW,EAAEA,WAAf;AAC/Du/E,sBAAQ,EAAEA,QADqD;AAE/D39E,8BAAgB,EAAEA,gBAF6C;AAE3Bo4E,qBAAO,EAAE;AAFkB,aAA3B,CAAxC,EAE2Dt9E,OAF3D;AAGH;;AACD,eAAKouE,iBAAL,CAAuB9qE,WAAvB,EAAoCi/D,oBAApC;AACH,SAtBD;;AAuBAqoB,oBAAY,CAAC5rF,SAAb,CAAuByD,eAAvB,GAAyC,UAAUzC,OAAV,EAAmB;AACxDb,gBAAM,CAACH,SAAP,CAAiByD,eAAjB,CAAiCnD,IAAjC,CAAsC,IAAtC,EAA4CU,OAA5C;;AACA,cAAIA,OAAO,CAACE,OAAR,CAAgB2uB,YAApB,EAAkC;AAC9B,iBAAK/F,MAAL,GAAc,IAAI,4DAAJ,CAAc,KAAK3lB,EAAL,CAAQmD,aAAR,CAAsB,oBAAtB,CAAd,CAAd;AACH;;AACD,eAAKukF,cAAL,GAAsB,IAAIJ,cAAJ,CAAmB,KAAKjH,QAAxB,CAAtB;;AACA,cAAI,KAAK5K,OAAT,EAAkB;AACd,iBAAKqK,aAAL,GAAqB,IAAI,mEAAJ,CAAkB,KAAKrK,OAAvB,CAArB;AACH;AACJ,SATD;;AAUAgS,oBAAY,CAAC5rF,SAAb,CAAuB0D,iBAAvB,GAA2C,YAAY;AACnDvD,gBAAM,CAACH,SAAP,CAAiB0D,iBAAjB,CAAmCpD,IAAnC,CAAwC,IAAxC;;AACA,cAAI,KAAKwpB,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYnlB,OAAZ;AACH;;AACD,eAAKknF,cAAL,CAAoBlnF,OAApB;;AACA,cAAI,KAAKs/E,aAAT,EAAwB;AACpB,iBAAKA,aAAL,CAAmBt/E,OAAnB;AACH;AACJ,SATD;;AAUAinF,oBAAY,CAAC5rF,SAAb,CAAuB6vE,kBAAvB,GAA4C,UAAUhvC,IAAV,EAAgB;AACxD,eAAKgrD,cAAL,CAAoBhc,kBAApB,CAAuChvC,IAAvC;AACH,SAFD;;AAGA,eAAO+qD,YAAP;AACH,OAtDiC,CAsDhCd,oBAtDgC,CAAlC;;AAuDA,eAAS9G,aAAT,CAAuB1/E,WAAvB,EAAoCi/D,oBAApC,EAA0D;AACtD,YAAIiR,SAAS,GAAG,IAAI,4DAAJ,CAAclwE,WAAW,CAAC8D,WAA1B,EAAuCm7D,oBAAvC,CAAhB;AACA,eAAO,IAAI,2DAAJ,CAAaiR,SAAb,EAAwB,KAAxB,CAAP;AACH;;AAED,UAAIlsE,IAAI,GAAG,wEAAa;AACpBkmB,mBAAW,EAAE,cADO;AAEpBjmB,aAAK,EAAE;AACHi8E,kBAAQ,EAAE;AACN,qBAAOoH,YADD;AAENn9D,sBAAU,EAAE,IAFN;AAGNE,wBAAY,EAAE,UAHR;AAINO,4BAAgB,EAAE,IAJZ,CAIiB;;AAJjB,WADP;AAOH48D,qBAAW,EAAE;AACThjF,gBAAI,EAAE,UADG;AAETC,oBAAQ,EAAE;AAAEC,kBAAI,EAAE;AAAR;AAFD,WAPV;AAWH+iF,sBAAY,EAAE;AACVjjF,gBAAI,EAAE,UADI;AAEVC,oBAAQ,EAAE;AAAEI,mBAAK,EAAE;AAAT;AAFA;AAXX;AAFa,OAAb,CAAX;AAoBe;;AAAA,uCAAAb,IAAA","file":"calendar-calendar-module-es5.js","sourcesContent":["/*!\nFullCalendar List View Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { getAllDayHtml, isMultiDayRange, htmlEscape, FgEventRenderer, memoize, memoizeRendering, ScrollComponent, subtractInnerElHeight, sliceEventStore, intersectRanges, htmlToElement, createFormatter, createElement, buildGotoAnchorHtml, View, startOfDay, addDays, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar ListEventRenderer = /** @class */ (function (_super) {\n    __extends(ListEventRenderer, _super);\n    function ListEventRenderer(listView) {\n        var _this = _super.call(this) || this;\n        _this.listView = listView;\n        return _this;\n    }\n    ListEventRenderer.prototype.attachSegs = function (segs) {\n        if (!segs.length) {\n            this.listView.renderEmptyMessage();\n        }\n        else {\n            this.listView.renderSegList(segs);\n        }\n    };\n    ListEventRenderer.prototype.detachSegs = function () {\n    };\n    // generates the HTML for a single event row\n    ListEventRenderer.prototype.renderSegHtml = function (seg) {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventInstance = eventRange.instance;\n        var eventUi = eventRange.ui;\n        var url = eventDef.url;\n        var classes = ['fc-list-item'].concat(eventUi.classNames);\n        var bgColor = eventUi.backgroundColor;\n        var timeHtml;\n        if (eventDef.allDay) {\n            timeHtml = getAllDayHtml(options);\n        }\n        else if (isMultiDayRange(eventRange.range)) {\n            if (seg.isStart) {\n                timeHtml = htmlEscape(this._getTimeText(eventInstance.range.start, seg.end, false // allDay\n                ));\n            }\n            else if (seg.isEnd) {\n                timeHtml = htmlEscape(this._getTimeText(seg.start, eventInstance.range.end, false // allDay\n                ));\n            }\n            else { // inner segment that lasts the whole day\n                timeHtml = getAllDayHtml(options);\n            }\n        }\n        else {\n            // Display the normal time text for the *event's* times\n            timeHtml = htmlEscape(this.getTimeText(eventRange));\n        }\n        if (url) {\n            classes.push('fc-has-url');\n        }\n        return '<tr class=\"' + classes.join(' ') + '\">' +\n            (this.displayEventTime ?\n                '<td class=\"fc-list-item-time ' + theme.getClass('widgetContent') + '\">' +\n                    (timeHtml || '') +\n                    '</td>' :\n                '') +\n            '<td class=\"fc-list-item-marker ' + theme.getClass('widgetContent') + '\">' +\n            '<span class=\"fc-event-dot\"' +\n            (bgColor ?\n                ' style=\"background-color:' + bgColor + '\"' :\n                '') +\n            '></span>' +\n            '</td>' +\n            '<td class=\"fc-list-item-title ' + theme.getClass('widgetContent') + '\">' +\n            '<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n            htmlEscape(eventDef.title || '') +\n            '</a>' +\n            '</td>' +\n            '</tr>';\n    };\n    // like \"4:00am\"\n    ListEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            meridiem: 'short'\n        };\n    };\n    return ListEventRenderer;\n}(FgEventRenderer));\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\".\n*/\nvar ListView = /** @class */ (function (_super) {\n    __extends(ListView, _super);\n    function ListView(viewSpec, parentEl) {\n        var _this = _super.call(this, viewSpec, parentEl) || this;\n        _this.computeDateVars = memoize(computeDateVars);\n        _this.eventStoreToSegs = memoize(_this._eventStoreToSegs);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        var eventRenderer = _this.eventRenderer = new ListEventRenderer(_this);\n        _this.renderContent = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [_this.renderSkeleton]);\n        return _this;\n    }\n    ListView.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.el\n            // TODO: make aware that it doesn't do Hits\n        });\n    };\n    ListView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        var _a = this.computeDateVars(props.dateProfile), dayDates = _a.dayDates, dayRanges = _a.dayRanges;\n        this.dayDates = dayDates;\n        this.renderSkeleton(context);\n        this.renderContent(context, this.eventStoreToSegs(props.eventStore, props.eventUiBases, dayRanges));\n    };\n    ListView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n        this.renderContent.unrender();\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    ListView.prototype._renderSkeleton = function (context) {\n        var theme = context.theme;\n        this.el.classList.add('fc-list-view');\n        var listViewClassNames = (theme.getClass('listView') || '').split(' '); // wish we didn't have to do this\n        for (var _i = 0, listViewClassNames_1 = listViewClassNames; _i < listViewClassNames_1.length; _i++) {\n            var listViewClassName = listViewClassNames_1[_i];\n            if (listViewClassName) { // in case input was empty string\n                this.el.classList.add(listViewClassName);\n            }\n        }\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        this.el.appendChild(this.scroller.el);\n        this.contentEl = this.scroller.el; // shortcut\n    };\n    ListView.prototype._unrenderSkeleton = function () {\n        // TODO: remove classNames\n        this.scroller.destroy(); // will remove the Grid too\n    };\n    ListView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto);\n        this.eventRenderer.computeSizes(isResize);\n        this.eventRenderer.assignSizes(isResize);\n        this.scroller.clear(); // sets height to 'auto' and clears overflow\n        if (!isAuto) {\n            this.scroller.setHeight(this.computeScrollerHeight(viewHeight));\n        }\n    };\n    ListView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    ListView.prototype._eventStoreToSegs = function (eventStore, eventUiBases, dayRanges) {\n        return this.eventRangesToSegs(sliceEventStore(eventStore, eventUiBases, this.props.dateProfile.activeRange, this.context.nextDayThreshold).fg, dayRanges);\n    };\n    ListView.prototype.eventRangesToSegs = function (eventRanges, dayRanges) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.eventRangeToSegs(eventRange, dayRanges));\n        }\n        return segs;\n    };\n    ListView.prototype.eventRangeToSegs = function (eventRange, dayRanges) {\n        var _a = this.context, dateEnv = _a.dateEnv, nextDayThreshold = _a.nextDayThreshold;\n        var range = eventRange.range;\n        var allDay = eventRange.def.allDay;\n        var dayIndex;\n        var segRange;\n        var seg;\n        var segs = [];\n        for (dayIndex = 0; dayIndex < dayRanges.length; dayIndex++) {\n            segRange = intersectRanges(range, dayRanges[dayIndex]);\n            if (segRange) {\n                seg = {\n                    component: this,\n                    eventRange: eventRange,\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: eventRange.isStart && segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: eventRange.isEnd && segRange.end.valueOf() === range.end.valueOf(),\n                    dayIndex: dayIndex\n                };\n                segs.push(seg);\n                // detect when range won't go fully into the next day,\n                // and mutate the latest seg to the be the end.\n                if (!seg.isEnd && !allDay &&\n                    dayIndex + 1 < dayRanges.length &&\n                    range.end <\n                        dateEnv.add(dayRanges[dayIndex + 1].start, nextDayThreshold)) {\n                    seg.end = range.end;\n                    seg.isEnd = true;\n                    break;\n                }\n            }\n        }\n        return segs;\n    };\n    ListView.prototype.renderEmptyMessage = function () {\n        this.contentEl.innerHTML =\n            '<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\n                '<div class=\"fc-list-empty-wrap1\">' +\n                '<div class=\"fc-list-empty\">' +\n                htmlEscape(this.context.options.noEventsMessage) +\n                '</div>' +\n                '</div>' +\n                '</div>';\n    };\n    // called by ListEventRenderer\n    ListView.prototype.renderSegList = function (allSegs) {\n        var theme = this.context.theme;\n        var segsByDay = this.groupSegsByDay(allSegs); // sparse array\n        var dayIndex;\n        var daySegs;\n        var i;\n        var tableEl = htmlToElement('<table class=\"fc-list-table ' + theme.getClass('tableList') + '\"><tbody></tbody></table>');\n        var tbodyEl = tableEl.querySelector('tbody');\n        for (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\n            daySegs = segsByDay[dayIndex];\n            if (daySegs) { // sparse array, so might be undefined\n                // append a day header\n                tbodyEl.appendChild(this.buildDayHeaderRow(this.dayDates[dayIndex]));\n                daySegs = this.eventRenderer.sortEventSegs(daySegs);\n                for (i = 0; i < daySegs.length; i++) {\n                    tbodyEl.appendChild(daySegs[i].el); // append event row\n                }\n            }\n        }\n        this.contentEl.innerHTML = '';\n        this.contentEl.appendChild(tableEl);\n    };\n    // Returns a sparse array of arrays, segs grouped by their dayIndex\n    ListView.prototype.groupSegsByDay = function (segs) {\n        var segsByDay = []; // sparse array\n        var i;\n        var seg;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            (segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n                .push(seg);\n        }\n        return segsByDay;\n    };\n    // generates the HTML for the day headers that live amongst the event rows\n    ListView.prototype.buildDayHeaderRow = function (dayDate) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n        var mainFormat = createFormatter(options.listDayFormat); // TODO: cache\n        var altFormat = createFormatter(options.listDayAltFormat); // TODO: cache\n        return createElement('tr', {\n            className: 'fc-list-heading',\n            'data-date': dateEnv.formatIso(dayDate, { omitTime: true })\n        }, '<td class=\"' + (theme.getClass('tableListHeading') ||\n            theme.getClass('widgetHeader')) + '\" colspan=\"3\">' +\n            (mainFormat ?\n                buildGotoAnchorHtml(options, dateEnv, dayDate, { 'class': 'fc-list-heading-main' }, htmlEscape(dateEnv.format(dayDate, mainFormat)) // inner HTML\n                ) :\n                '') +\n            (altFormat ?\n                buildGotoAnchorHtml(options, dateEnv, dayDate, { 'class': 'fc-list-heading-alt' }, htmlEscape(dateEnv.format(dayDate, altFormat)) // inner HTML\n                ) :\n                '') +\n            '</td>');\n    };\n    return ListView;\n}(View));\nListView.prototype.fgSegSelector = '.fc-list-item'; // which elements accept event actions\nfunction computeDateVars(dateProfile) {\n    var dayStart = startOfDay(dateProfile.renderRange.start);\n    var viewEnd = dateProfile.renderRange.end;\n    var dayDates = [];\n    var dayRanges = [];\n    while (dayStart < viewEnd) {\n        dayDates.push(dayStart);\n        dayRanges.push({\n            start: dayStart,\n            end: addDays(dayStart, 1)\n        });\n        dayStart = addDays(dayStart, 1);\n    }\n    return { dayDates: dayDates, dayRanges: dayRanges };\n}\n\nvar main = createPlugin({\n    views: {\n        list: {\n            class: ListView,\n            buttonTextKey: 'list',\n            listDayFormat: { month: 'long', day: 'numeric', year: 'numeric' } // like \"January 1, 2016\"\n        },\n        listDay: {\n            type: 'list',\n            duration: { days: 1 },\n            listDayFormat: { weekday: 'long' } // day-of-week is all we need. full date is probably in header\n        },\n        listWeek: {\n            type: 'list',\n            duration: { weeks: 1 },\n            listDayFormat: { weekday: 'long' },\n            listDayAltFormat: { month: 'long', day: 'numeric', year: 'numeric' }\n        },\n        listMonth: {\n            type: 'list',\n            duration: { month: 1 },\n            listDayAltFormat: { weekday: 'long' } // day-of-week is nice-to-have\n        },\n        listYear: {\n            type: 'list',\n            duration: { year: 1 },\n            listDayAltFormat: { weekday: 'long' } // day-of-week is nice-to-have\n        }\n    }\n});\n\nexport default main;\nexport { ListView };\n","import { Component, ViewChild, OnInit, TemplateRef } from '@angular/core';\r\nimport { EventInput } from '@fullcalendar/core';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport listPlugin from '@fullcalendar/list';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Calendar } from './calendar.model';\r\nimport { MatRadioChange } from '@angular/material/radio';\r\nimport { FormDialogComponent } from './dialogs/form-dialog/form-dialog.component';\r\nimport { CalendarService } from './calendar.service';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nconst d = new Date();\r\nconst day = d.getDate();\r\nconst month = d.getMonth();\r\nconst year = d.getFullYear();\r\n\r\n@Component({\r\n  selector: 'app-calendar',\r\n  templateUrl: './calendar.component.html',\r\n  styleUrls: ['./calendar.component.scss'],\r\n})\r\nexport class CalendarComponent implements OnInit {\r\n  @ViewChild('calendar', { static: false })\r\n  calendar: Calendar | null;\r\n  public addCusForm: FormGroup;\r\n  dialogTitle: string;\r\n  filterOptions = 'All';\r\n  calendarData: any;\r\n\r\n  public filters = [\r\n    { name: 'all', value: 'All', checked: 'true' },\r\n    { name: 'work', value: 'Work', checked: 'false' },\r\n    { name: 'personal', value: 'Personal', checked: 'false' },\r\n    { name: 'important', value: 'Important', checked: 'false' },\r\n    { name: 'travel', value: 'Travel', checked: 'false' },\r\n    { name: 'friends', value: 'Friends', checked: 'false' },\r\n  ];\r\n\r\n  calendarVisible = true;\r\n  calendarPlugins = [\r\n    dayGridPlugin,\r\n    timeGridPlugin,\r\n    interactionPlugin,\r\n    listPlugin,\r\n  ];\r\n  calendarWeekends = true;\r\n  @ViewChild('callAPIDialog', { static: false }) callAPIDialog: TemplateRef<\r\n    any\r\n  >;\r\n  calendarEvents: EventInput[];\r\n  tempEvents: EventInput[];\r\n  todaysEvents: EventInput[];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialog: MatDialog,\r\n    public calendarService: CalendarService,\r\n    private snackBar: MatSnackBar\r\n  ) {\r\n    this.dialogTitle = 'Add New Event';\r\n    this.calendar = new Calendar({});\r\n    this.addCusForm = this.createContactForm(this.calendar);\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.calendarEvents = this.events();\r\n    this.tempEvents = this.calendarEvents;\r\n    // you can also get events from json file using following code\r\n    // this.calendarService.getAllCalendars().subscribe((data: Calendar[]) => {\r\n    //   this.calendarEvents = data;\r\n    // })\r\n  }\r\n\r\n  createContactForm(calendar): FormGroup {\r\n    return this.fb.group({\r\n      id: [calendar.id],\r\n      title: [\r\n        calendar.title,\r\n        [Validators.required, Validators.pattern('[a-zA-Z]+([a-zA-Z ]+)*')],\r\n      ],\r\n      category: [calendar.category],\r\n      startDate: [calendar.startDate, [Validators.required]],\r\n      endDate: [calendar.endDate, [Validators.required]],\r\n      details: [\r\n        calendar.details,\r\n        [Validators.required, Validators.pattern('[a-zA-Z]+([a-zA-Z ]+)*')],\r\n      ],\r\n    });\r\n  }\r\n\r\n  addNewEvent() {\r\n    const dialogRef = this.dialog.open(FormDialogComponent, {\r\n      data: {\r\n        calendar: this.calendar,\r\n        action: 'add',\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result === 'submit') {\r\n        this.calendarData = this.calendarService.getDialogData();\r\n        this.calendarEvents = this.calendarEvents.concat({\r\n          // add new event data. must create new array\r\n          id: this.calendarData.id,\r\n          title: this.calendarData.title,\r\n          start: this.calendarData.startDate,\r\n          end: this.calendarData.endDate,\r\n          className: this.calendarData.category,\r\n          groupId: this.calendarData.category,\r\n          details: this.calendarData.details,\r\n        });\r\n        this.addCusForm.reset();\r\n        this.showNotification(\r\n          'snackbar-success',\r\n          'Add Record Successfully...!!!',\r\n          'bottom',\r\n          'center'\r\n        );\r\n      }\r\n    });\r\n  }\r\n  eventClick(row) {\r\n    const calendarData: any = {\r\n      id: row.event.id,\r\n      title: row.event.title,\r\n      category: row.event.groupId,\r\n      startDate: row.event.start,\r\n      endDate: row.event.end,\r\n      details: row.event.extendedProps.details,\r\n    };\r\n\r\n    const dialogRef = this.dialog.open(FormDialogComponent, {\r\n      data: {\r\n        calendar: calendarData,\r\n        action: 'edit',\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result === 'submit') {\r\n        this.calendarData = this.calendarService.getDialogData();\r\n        this.calendarEvents.forEach(function (element, index) {\r\n          if (this.calendarData.id === element.id) {\r\n            this.editEvent(index, this.calendarData);\r\n          }\r\n        }, this);\r\n        this.showNotification(\r\n          'black',\r\n          'Edit Record Successfully...!!!',\r\n          'bottom',\r\n          'center'\r\n        );\r\n        this.addCusForm.reset();\r\n      } else if (result === 'delete') {\r\n        this.calendarData = this.calendarService.getDialogData();\r\n        this.calendarEvents.forEach(function (element, index) {\r\n          if (this.calendarData.id === element.id) {\r\n            this.filterEvent(element);\r\n          }\r\n        }, this);\r\n        this.showNotification(\r\n          'snackbar-danger',\r\n          'Delete Record Successfully...!!!',\r\n          'bottom',\r\n          'center'\r\n        );\r\n      }\r\n    });\r\n  }\r\n  editEvent(eventIndex, calendarData) {\r\n    const calendarEvents = this.calendarEvents.slice();\r\n    const singleEvent = Object.assign({}, calendarEvents[eventIndex]);\r\n    singleEvent.id = calendarData.id;\r\n    singleEvent.title = calendarData.title;\r\n    singleEvent.start = calendarData.startDate;\r\n    singleEvent.end = calendarData.endDate;\r\n    singleEvent.className = this.getClassNameValue(calendarData.category);\r\n    singleEvent.groupId = calendarData.category;\r\n    singleEvent.details = calendarData.details;\r\n    calendarEvents[eventIndex] = singleEvent;\r\n    this.calendarEvents = calendarEvents; // reassign the array\r\n  }\r\n  handleEventRender(info) {\r\n    // console.log(info)\r\n    // this.todaysEvents = this.todaysEvents.concat(info);\r\n  }\r\n  changeCategory(e: MatRadioChange) {\r\n    this.filterOptions = e.value;\r\n    this.calendarEvents = this.tempEvents;\r\n    this.calendarEvents.forEach(function (element, index) {\r\n      if (\r\n        this.filterOptions !== 'all' &&\r\n        this.filterOptions.toLowerCase() !== element.groupId\r\n      ) {\r\n        this.filterEvent(element);\r\n      }\r\n    }, this);\r\n  }\r\n  filterEvent(element) {\r\n    this.calendarEvents = this.calendarEvents.filter(\r\n      (item) => item !== element\r\n    );\r\n  }\r\n  submit() {\r\n    // emppty stuff\r\n  }\r\n  onNoClick(): void {}\r\n  showNotification(colorName, text, placementFrom, placementAlign) {\r\n    this.snackBar.open(text, '', {\r\n      duration: 2000,\r\n      verticalPosition: placementFrom,\r\n      horizontalPosition: placementAlign,\r\n      panelClass: colorName,\r\n    });\r\n  }\r\n  public randomIDGenerate(length, chars) {\r\n    let result = '';\r\n    for (let i = length; i > 0; --i)\r\n      result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n    return result;\r\n  }\r\n  getClassNameValue(category) {\r\n    let className: string;\r\n\r\n    if (category === 'work') className = 'fc-event-success';\r\n    else if (category === 'personal') className = 'fc-event-warning';\r\n    else if (category === 'important') className = 'fc-event-primary';\r\n    else if (category === 'travel') className = 'fc-event-danger';\r\n    else if (category === 'friends') className = 'fc-event-info';\r\n\r\n    return className;\r\n  }\r\n  events() {\r\n    return [\r\n      {\r\n        id: 'event1',\r\n        title: 'All Day Event',\r\n        start: new Date(year, month, 1, 0, 0),\r\n        end: new Date(year, month, 1, 23, 59),\r\n        className: 'fc-event-success',\r\n        groupId: 'work',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event2',\r\n        title: 'Break',\r\n        start: new Date(year, month, day + 28, 16, 0),\r\n        end: new Date(year, month, day + 29, 20, 0),\r\n        allDay: false,\r\n        className: 'fc-event-primary',\r\n        groupId: 'important',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see. ',\r\n      },\r\n      {\r\n        id: 'event3',\r\n        title: 'Shopping',\r\n        start: new Date(year, month, day + 4, 12, 0),\r\n        end: new Date(year, month, day + 4, 20, 0),\r\n        allDay: false,\r\n        className: 'fc-event-warning',\r\n        groupId: 'personal',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see. ',\r\n      },\r\n      {\r\n        id: 'event4',\r\n        title: 'Meeting',\r\n        start: new Date(year, month, day + 14, 10, 30),\r\n        end: new Date(year, month, day + 16, 20, 0),\r\n        allDay: false,\r\n        className: 'fc-event-success',\r\n        groupId: 'work',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event5',\r\n        title: 'Lunch',\r\n        start: new Date(year, month, day, 11, 0),\r\n        end: new Date(year, month, day, 14, 0),\r\n        allDay: false,\r\n        className: 'fc-event-primary',\r\n        groupId: 'important',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event6',\r\n        title: 'Meeting',\r\n        start: new Date(year, month, day + 2, 12, 30),\r\n        end: new Date(year, month, day + 2, 14, 30),\r\n        allDay: false,\r\n        className: 'fc-event-success',\r\n        groupId: 'work',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event7',\r\n        title: 'Birthday Party',\r\n        start: new Date(year, month, day + 17, 19, 0),\r\n        end: new Date(year, month, day + 17, 19, 30),\r\n        allDay: false,\r\n        className: 'fc-event-warning',\r\n        groupId: 'personal',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event8',\r\n        title: 'Go to Delhi',\r\n        start: new Date(year, month, day + -5, 10, 0),\r\n        end: new Date(year, month, day + -4, 10, 30),\r\n        allDay: false,\r\n        className: 'fc-event-danger',\r\n        groupId: 'travel',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event9',\r\n        title: 'Get To Gather',\r\n        start: new Date(year, month, day + 6, 10, 0),\r\n        end: new Date(year, month, day + 7, 10, 30),\r\n        allDay: false,\r\n        className: 'fc-event-info',\r\n        groupId: 'friends',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n      {\r\n        id: 'event10',\r\n        title: 'Collage Party',\r\n        start: new Date(year, month, day + 20, 10, 0),\r\n        end: new Date(year, month, day + 20, 10, 30),\r\n        allDay: false,\r\n        className: 'fc-event-info',\r\n        groupId: 'friends',\r\n        details:\r\n          'Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see.',\r\n      },\r\n    ];\r\n  }\r\n}\r\n","<section class=\"content\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"block-header\">\r\n            <div class=\"row\">\r\n                <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n                    <ul class=\"breadcrumb breadcrumb-style \">\r\n                        <li class=\"breadcrumb-item\">\r\n                            <h4 class=\"page-title\">Events</h4>\r\n                        </li>\r\n                        <li class=\"breadcrumb-item bcrumb-1\">\r\n                            <a href=\"#\" onClick=\"return false;\">\r\n                                <i class=\"fas fa-home\"></i> Home</a>\r\n                        </li>\r\n                        <li class=\"breadcrumb-item active\">Events</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12 col-sm-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header container-fluid\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-10\">\r\n                                <h4>Calendar</h4>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2 col-sm-12 p-l-30\">\r\n                                <div class=\"m-b-25\">\r\n                                    <button mat-raised-button color=\"primary\" (click)=\"addNewEvent()\">Add Event</button>\r\n                                </div>\r\n                                <h5>My Calendars</h5>\r\n                                <div class=\"filter-container\">\r\n                                    <mat-radio-group aria-labelledby=\"example-radio-group-label\"\r\n                                        class=\"example-radio-group\">\r\n                                        <mat-radio-button class=\"example-radio-button ml-0 filter\"\r\n                                            *ngFor=\"let filter of filters\" [value]=\"filter.name\"\r\n                                            [checked]=\"filter.checked ==='true'\" (change)=\"changeCategory($event)\">\r\n                                            {{filter.value}}\r\n                                        </mat-radio-button>\r\n                                    </mat-radio-group>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-10 col-sm-12\">\r\n                                <div class=\"panel-body\">\r\n                                    <full-calendar #calendar defaultView=\"dayGridMonth\" [header]=\"{\r\n                                        left: 'prev,next today',\r\n                                        center: 'title',\r\n                                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'  \r\n                                      }\" [plugins]=\"calendarPlugins\" [weekends]=\"calendarWeekends\"\r\n                                        (eventRender)=\"handleEventRender($event)\" (eventClick)=\"eventClick($event)\"\r\n                                        [events]=\"calendarEvents\" (dateClick)=\"addNewEvent()\">\r\n                                    </full-calendar>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>","/*!\nFullCalendar Interaction Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { config, elementClosest, EmitterMixin, applyStyle, whenTransitionDone, removeElement, ScrollController, ElementScrollController, computeInnerRect, WindowScrollController, preventSelection, preventContextMenu, allowSelection, allowContextMenu, ElementDragging, computeRect, getClippingParents, pointInsideRect, isDateSpansEqual, constrainPoint, intersectRects, getRectCenter, diffPoints, mapHash, rangeContainsRange, interactionSettingsToStore, Interaction, enableCursor, disableCursor, compareNumbers, getElSeg, getRelevantEvents, EventApi, createEmptyEventStore, applyMutationToEventStore, interactionSettingsStore, startOfDay, diffDates, createDuration, eventTupleToStore, isInteractionValid, parseDragMeta, elementMatches, parseEventDef, createEventInstance, globalDefaults, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nconfig.touchMouseIgnoreWait = 500;\nvar ignoreMouseDepth = 0;\nvar listenerCnt = 0;\nvar isWindowTouchMoveCancelled = false;\n/*\nUses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\nTracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\nAlso, tracks if there was touch-scrolling.\nAlso, can prevent touch-scrolling from happening.\nAlso, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\nemits:\n- pointerdown\n- pointermove\n- pointerup\n*/\nvar PointerDragging = /** @class */ (function () {\n    function PointerDragging(containerEl) {\n        var _this = this;\n        this.subjectEl = null;\n        this.downEl = null;\n        // options that can be directly assigned by caller\n        this.selector = ''; // will cause subjectEl in all emitted events to be this element\n        this.handleSelector = '';\n        this.shouldIgnoreMove = false;\n        this.shouldWatchScroll = true; // for simulating pointermove on scroll\n        // internal states\n        this.isDragging = false;\n        this.isTouchDragging = false;\n        this.wasTouchScroll = false;\n        // Mouse\n        // ----------------------------------------------------------------------------------------------------\n        this.handleMouseDown = function (ev) {\n            if (!_this.shouldIgnoreMouse() &&\n                isPrimaryMouseButton(ev) &&\n                _this.tryStart(ev)) {\n                var pev = _this.createEventFromMouse(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                if (!_this.shouldIgnoreMove) {\n                    document.addEventListener('mousemove', _this.handleMouseMove);\n                }\n                document.addEventListener('mouseup', _this.handleMouseUp);\n            }\n        };\n        this.handleMouseMove = function (ev) {\n            var pev = _this.createEventFromMouse(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleMouseUp = function (ev) {\n            document.removeEventListener('mousemove', _this.handleMouseMove);\n            document.removeEventListener('mouseup', _this.handleMouseUp);\n            _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n            _this.cleanup(); // call last so that pointerup has access to props\n        };\n        // Touch\n        // ----------------------------------------------------------------------------------------------------\n        this.handleTouchStart = function (ev) {\n            if (_this.tryStart(ev)) {\n                _this.isTouchDragging = true;\n                var pev = _this.createEventFromTouch(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                // unlike mouse, need to attach to target, not document\n                // https://stackoverflow.com/a/45760014\n                var target = ev.target;\n                if (!_this.shouldIgnoreMove) {\n                    target.addEventListener('touchmove', _this.handleTouchMove);\n                }\n                target.addEventListener('touchend', _this.handleTouchEnd);\n                target.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                // attach a handler to get called when ANY scroll action happens on the page.\n                // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                // http://stackoverflow.com/a/32954565/96342\n                window.addEventListener('scroll', _this.handleTouchScroll, true // useCapture\n                );\n            }\n        };\n        this.handleTouchMove = function (ev) {\n            var pev = _this.createEventFromTouch(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleTouchEnd = function (ev) {\n            if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                var target = ev.target;\n                target.removeEventListener('touchmove', _this.handleTouchMove);\n                target.removeEventListener('touchend', _this.handleTouchEnd);\n                target.removeEventListener('touchcancel', _this.handleTouchEnd);\n                window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n                _this.isTouchDragging = false;\n                startIgnoringMouse();\n            }\n        };\n        this.handleTouchScroll = function () {\n            _this.wasTouchScroll = true;\n        };\n        this.handleScroll = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                _this.emitter.trigger('pointermove', {\n                    origEvent: ev,\n                    isTouch: _this.isTouchDragging,\n                    subjectEl: _this.subjectEl,\n                    pageX: pageX,\n                    pageY: pageY,\n                    deltaX: pageX - _this.origPageX,\n                    deltaY: pageY - _this.origPageY\n                });\n            }\n        };\n        this.containerEl = containerEl;\n        this.emitter = new EmitterMixin();\n        containerEl.addEventListener('mousedown', this.handleMouseDown);\n        containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerCreated();\n    }\n    PointerDragging.prototype.destroy = function () {\n        this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n        this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerDestroyed();\n    };\n    PointerDragging.prototype.tryStart = function (ev) {\n        var subjectEl = this.querySubjectEl(ev);\n        var downEl = ev.target;\n        if (subjectEl &&\n            (!this.handleSelector || elementClosest(downEl, this.handleSelector))) {\n            this.subjectEl = subjectEl;\n            this.downEl = downEl;\n            this.isDragging = true; // do this first so cancelTouchScroll will work\n            this.wasTouchScroll = false;\n            return true;\n        }\n        return false;\n    };\n    PointerDragging.prototype.cleanup = function () {\n        isWindowTouchMoveCancelled = false;\n        this.isDragging = false;\n        this.subjectEl = null;\n        this.downEl = null;\n        // keep wasTouchScroll around for later access\n        this.destroyScrollWatch();\n    };\n    PointerDragging.prototype.querySubjectEl = function (ev) {\n        if (this.selector) {\n            return elementClosest(ev.target, this.selector);\n        }\n        else {\n            return this.containerEl;\n        }\n    };\n    PointerDragging.prototype.shouldIgnoreMouse = function () {\n        return ignoreMouseDepth || this.isTouchDragging;\n    };\n    // can be called by user of this class, to cancel touch-based scrolling for the current drag\n    PointerDragging.prototype.cancelTouchScroll = function () {\n        if (this.isDragging) {\n            isWindowTouchMoveCancelled = true;\n        }\n    };\n    // Scrolling that simulates pointermoves\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.initScrollWatch = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.recordCoords(ev);\n            window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n        }\n    };\n    PointerDragging.prototype.recordCoords = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.prevPageX = ev.pageX;\n            this.prevPageY = ev.pageY;\n            this.prevScrollX = window.pageXOffset;\n            this.prevScrollY = window.pageYOffset;\n        }\n    };\n    PointerDragging.prototype.destroyScrollWatch = function () {\n        if (this.shouldWatchScroll) {\n            window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n        }\n    };\n    // Event Normalization\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n        var deltaX = 0;\n        var deltaY = 0;\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = ev.pageX;\n            this.origPageY = ev.pageY;\n        }\n        else {\n            deltaX = ev.pageX - this.origPageX;\n            deltaY = ev.pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: false,\n            subjectEl: this.subjectEl,\n            pageX: ev.pageX,\n            pageY: ev.pageY,\n            deltaX: deltaX,\n            deltaY: deltaY\n        };\n    };\n    PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n        var touches = ev.touches;\n        var pageX;\n        var pageY;\n        var deltaX = 0;\n        var deltaY = 0;\n        // if touch coords available, prefer,\n        // because FF would give bad ev.pageX ev.pageY\n        if (touches && touches.length) {\n            pageX = touches[0].pageX;\n            pageY = touches[0].pageY;\n        }\n        else {\n            pageX = ev.pageX;\n            pageY = ev.pageY;\n        }\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = pageX;\n            this.origPageY = pageY;\n        }\n        else {\n            deltaX = pageX - this.origPageX;\n            deltaY = pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: true,\n            subjectEl: this.subjectEl,\n            pageX: pageX,\n            pageY: pageY,\n            deltaX: deltaX,\n            deltaY: deltaY\n        };\n    };\n    return PointerDragging;\n}());\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n    return ev.button === 0 && !ev.ctrlKey;\n}\n// Ignoring fake mouse events generated by touch\n// ----------------------------------------------------------------------------------------------------\nfunction startIgnoringMouse() {\n    ignoreMouseDepth++;\n    setTimeout(function () {\n        ignoreMouseDepth--;\n    }, config.touchMouseIgnoreWait);\n}\n// We want to attach touchmove as early as possible for Safari\n// ----------------------------------------------------------------------------------------------------\nfunction listenerCreated() {\n    if (!(listenerCnt++)) {\n        window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction listenerDestroyed() {\n    if (!(--listenerCnt)) {\n        window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction onWindowTouchMove(ev) {\n    if (isWindowTouchMoveCancelled) {\n        ev.preventDefault();\n    }\n}\n\n/*\nAn effect in which an element follows the movement of a pointer across the screen.\nThe moving element is a clone of some other element.\nMust call start + handleMove + stop.\n*/\nvar ElementMirror = /** @class */ (function () {\n    function ElementMirror() {\n        this.isVisible = false; // must be explicitly enabled\n        this.sourceEl = null;\n        this.mirrorEl = null;\n        this.sourceElRect = null; // screen coords relative to viewport\n        // options that can be set directly by caller\n        this.parentNode = document.body;\n        this.zIndex = 9999;\n        this.revertDuration = 0;\n    }\n    ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n        this.sourceEl = sourceEl;\n        this.sourceElRect = this.sourceEl.getBoundingClientRect();\n        this.origScreenX = pageX - window.pageXOffset;\n        this.origScreenY = pageY - window.pageYOffset;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.updateElPosition();\n    };\n    ElementMirror.prototype.handleMove = function (pageX, pageY) {\n        this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n        this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n        this.updateElPosition();\n    };\n    // can be called before start\n    ElementMirror.prototype.setIsVisible = function (bool) {\n        if (bool) {\n            if (!this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = '';\n                }\n                this.isVisible = bool; // needs to happen before updateElPosition\n                this.updateElPosition(); // because was not updating the position while invisible\n            }\n        }\n        else {\n            if (this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = 'none';\n                }\n                this.isVisible = bool;\n            }\n        }\n    };\n    // always async\n    ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n        var _this = this;\n        var done = function () {\n            _this.cleanup();\n            callback();\n        };\n        if (needsRevertAnimation &&\n            this.mirrorEl &&\n            this.isVisible &&\n            this.revertDuration && // if 0, transition won't work\n            (this.deltaX || this.deltaY) // if same coords, transition won't work\n        ) {\n            this.doRevertAnimation(done, this.revertDuration);\n        }\n        else {\n            setTimeout(done, 0);\n        }\n    };\n    ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n        var mirrorEl = this.mirrorEl;\n        var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n        mirrorEl.style.transition =\n            'top ' + revertDuration + 'ms,' +\n                'left ' + revertDuration + 'ms';\n        applyStyle(mirrorEl, {\n            left: finalSourceElRect.left,\n            top: finalSourceElRect.top\n        });\n        whenTransitionDone(mirrorEl, function () {\n            mirrorEl.style.transition = '';\n            callback();\n        });\n    };\n    ElementMirror.prototype.cleanup = function () {\n        if (this.mirrorEl) {\n            removeElement(this.mirrorEl);\n            this.mirrorEl = null;\n        }\n        this.sourceEl = null;\n    };\n    ElementMirror.prototype.updateElPosition = function () {\n        if (this.sourceEl && this.isVisible) {\n            applyStyle(this.getMirrorEl(), {\n                left: this.sourceElRect.left + this.deltaX,\n                top: this.sourceElRect.top + this.deltaY\n            });\n        }\n    };\n    ElementMirror.prototype.getMirrorEl = function () {\n        var sourceElRect = this.sourceElRect;\n        var mirrorEl = this.mirrorEl;\n        if (!mirrorEl) {\n            mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n            // we don't want long taps or any mouse interaction causing selection/menus.\n            // would use preventSelection(), but that prevents selectstart, causing problems.\n            mirrorEl.classList.add('fc-unselectable');\n            mirrorEl.classList.add('fc-dragging');\n            applyStyle(mirrorEl, {\n                position: 'fixed',\n                zIndex: this.zIndex,\n                visibility: '',\n                boxSizing: 'border-box',\n                width: sourceElRect.right - sourceElRect.left,\n                height: sourceElRect.bottom - sourceElRect.top,\n                right: 'auto',\n                bottom: 'auto',\n                margin: 0\n            });\n            this.parentNode.appendChild(mirrorEl);\n        }\n        return mirrorEl;\n    };\n    return ElementMirror;\n}());\n\n/*\nIs a cache for a given element's scroll information (all the info that ScrollController stores)\nin addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\nThe cache can be in one of two modes:\n- doesListening:false - ignores when the container is scrolled by someone else\n- doesListening:true - watch for scrolling and update the cache\n*/\nvar ScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ScrollGeomCache, _super);\n    function ScrollGeomCache(scrollController, doesListening) {\n        var _this = _super.call(this) || this;\n        _this.handleScroll = function () {\n            _this.scrollTop = _this.scrollController.getScrollTop();\n            _this.scrollLeft = _this.scrollController.getScrollLeft();\n            _this.handleScrollChange();\n        };\n        _this.scrollController = scrollController;\n        _this.doesListening = doesListening;\n        _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n        _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n        _this.scrollWidth = scrollController.getScrollWidth();\n        _this.scrollHeight = scrollController.getScrollHeight();\n        _this.clientWidth = scrollController.getClientWidth();\n        _this.clientHeight = scrollController.getClientHeight();\n        _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n        if (_this.doesListening) {\n            _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n        }\n        return _this;\n    }\n    ScrollGeomCache.prototype.destroy = function () {\n        if (this.doesListening) {\n            this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n        }\n    };\n    ScrollGeomCache.prototype.getScrollTop = function () {\n        return this.scrollTop;\n    };\n    ScrollGeomCache.prototype.getScrollLeft = function () {\n        return this.scrollLeft;\n    };\n    ScrollGeomCache.prototype.setScrollTop = function (top) {\n        this.scrollController.setScrollTop(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.setScrollLeft = function (top) {\n        this.scrollController.setScrollLeft(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.getClientWidth = function () {\n        return this.clientWidth;\n    };\n    ScrollGeomCache.prototype.getClientHeight = function () {\n        return this.clientHeight;\n    };\n    ScrollGeomCache.prototype.getScrollWidth = function () {\n        return this.scrollWidth;\n    };\n    ScrollGeomCache.prototype.getScrollHeight = function () {\n        return this.scrollHeight;\n    };\n    ScrollGeomCache.prototype.handleScrollChange = function () {\n    };\n    return ScrollGeomCache;\n}(ScrollController));\nvar ElementScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ElementScrollGeomCache, _super);\n    function ElementScrollGeomCache(el, doesListening) {\n        return _super.call(this, new ElementScrollController(el), doesListening) || this;\n    }\n    ElementScrollGeomCache.prototype.getEventTarget = function () {\n        return this.scrollController.el;\n    };\n    ElementScrollGeomCache.prototype.computeClientRect = function () {\n        return computeInnerRect(this.scrollController.el);\n    };\n    return ElementScrollGeomCache;\n}(ScrollGeomCache));\nvar WindowScrollGeomCache = /** @class */ (function (_super) {\n    __extends(WindowScrollGeomCache, _super);\n    function WindowScrollGeomCache(doesListening) {\n        return _super.call(this, new WindowScrollController(), doesListening) || this;\n    }\n    WindowScrollGeomCache.prototype.getEventTarget = function () {\n        return window;\n    };\n    WindowScrollGeomCache.prototype.computeClientRect = function () {\n        return {\n            left: this.scrollLeft,\n            right: this.scrollLeft + this.clientWidth,\n            top: this.scrollTop,\n            bottom: this.scrollTop + this.clientHeight\n        };\n    };\n    // the window is the only scroll object that changes it's rectangle relative\n    // to the document's topleft as it scrolls\n    WindowScrollGeomCache.prototype.handleScrollChange = function () {\n        this.clientRect = this.computeClientRect();\n    };\n    return WindowScrollGeomCache;\n}(ScrollGeomCache));\n\n// If available we are using native \"performance\" API instead of \"Date\"\n// Read more about it on MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Performance\nvar getTime = typeof performance === 'function' ? performance.now : Date.now;\n/*\nFor a pointer interaction, automatically scrolls certain scroll containers when the pointer\napproaches the edge.\n\nThe caller must call start + handleMove + stop.\n*/\nvar AutoScroller = /** @class */ (function () {\n    function AutoScroller() {\n        var _this = this;\n        // options that can be set by caller\n        this.isEnabled = true;\n        this.scrollQuery = [window, '.fc-scroller'];\n        this.edgeThreshold = 50; // pixels\n        this.maxVelocity = 300; // pixels per second\n        // internal state\n        this.pointerScreenX = null;\n        this.pointerScreenY = null;\n        this.isAnimating = false;\n        this.scrollCaches = null;\n        // protect against the initial pointerdown being too close to an edge and starting the scroll\n        this.everMovedUp = false;\n        this.everMovedDown = false;\n        this.everMovedLeft = false;\n        this.everMovedRight = false;\n        this.animate = function () {\n            if (_this.isAnimating) { // wasn't cancelled between animation calls\n                var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                if (edge) {\n                    var now = getTime();\n                    _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                    _this.requestAnimation(now);\n                }\n                else {\n                    _this.isAnimating = false; // will stop animation\n                }\n            }\n        };\n    }\n    AutoScroller.prototype.start = function (pageX, pageY) {\n        if (this.isEnabled) {\n            this.scrollCaches = this.buildCaches();\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.handleMove(pageX, pageY);\n        }\n    };\n    AutoScroller.prototype.handleMove = function (pageX, pageY) {\n        if (this.isEnabled) {\n            var pointerScreenX = pageX - window.pageXOffset;\n            var pointerScreenY = pageY - window.pageYOffset;\n            var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n            var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n            if (yDelta < 0) {\n                this.everMovedUp = true;\n            }\n            else if (yDelta > 0) {\n                this.everMovedDown = true;\n            }\n            if (xDelta < 0) {\n                this.everMovedLeft = true;\n            }\n            else if (xDelta > 0) {\n                this.everMovedRight = true;\n            }\n            this.pointerScreenX = pointerScreenX;\n            this.pointerScreenY = pointerScreenY;\n            if (!this.isAnimating) {\n                this.isAnimating = true;\n                this.requestAnimation(getTime());\n            }\n        }\n    };\n    AutoScroller.prototype.stop = function () {\n        if (this.isEnabled) {\n            this.isAnimating = false; // will stop animation\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n            this.scrollCaches = null;\n        }\n    };\n    AutoScroller.prototype.requestAnimation = function (now) {\n        this.msSinceRequest = now;\n        requestAnimationFrame(this.animate);\n    };\n    AutoScroller.prototype.handleSide = function (edge, seconds) {\n        var scrollCache = edge.scrollCache;\n        var edgeThreshold = this.edgeThreshold;\n        var invDistance = edgeThreshold - edge.distance;\n        var velocity = // the closer to the edge, the faster we scroll\n         (invDistance * invDistance) / (edgeThreshold * edgeThreshold) * // quadratic\n            this.maxVelocity * seconds;\n        var sign = 1;\n        switch (edge.name) {\n            case 'left':\n                sign = -1;\n            // falls through\n            case 'right':\n                scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                break;\n            case 'top':\n                sign = -1;\n            // falls through\n            case 'bottom':\n                scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                break;\n        }\n    };\n    // left/top are relative to document topleft\n    AutoScroller.prototype.computeBestEdge = function (left, top) {\n        var edgeThreshold = this.edgeThreshold;\n        var bestSide = null;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            var rect = scrollCache.clientRect;\n            var leftDist = left - rect.left;\n            var rightDist = rect.right - left;\n            var topDist = top - rect.top;\n            var bottomDist = rect.bottom - top;\n            // completely within the rect?\n            if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                    (!bestSide || bestSide.distance > topDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                }\n                if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                    (!bestSide || bestSide.distance > bottomDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                }\n                if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                    (!bestSide || bestSide.distance > leftDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                }\n                if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                    (!bestSide || bestSide.distance > rightDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                }\n            }\n        }\n        return bestSide;\n    };\n    AutoScroller.prototype.buildCaches = function () {\n        return this.queryScrollEls().map(function (el) {\n            if (el === window) {\n                return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n            }\n            else {\n                return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n            }\n        });\n    };\n    AutoScroller.prototype.queryScrollEls = function () {\n        var els = [];\n        for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n            var query = _a[_i];\n            if (typeof query === 'object') {\n                els.push(query);\n            }\n            else {\n                els.push.apply(els, Array.prototype.slice.call(document.querySelectorAll(query)));\n            }\n        }\n        return els;\n    };\n    return AutoScroller;\n}());\n\n/*\nMonitors dragging on an element. Has a number of high-level features:\n- minimum distance required before dragging\n- minimum wait time (\"delay\") before dragging\n- a mirror element that follows the pointer\n*/\nvar FeaturefulElementDragging = /** @class */ (function (_super) {\n    __extends(FeaturefulElementDragging, _super);\n    function FeaturefulElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        // options that can be directly set by caller\n        // the caller can also set the PointerDragging's options as well\n        _this.delay = null;\n        _this.minDistance = 0;\n        _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n        _this.mirrorNeedsRevert = false;\n        _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n        _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n        _this.isDelayEnded = false;\n        _this.isDistanceSurpassed = false;\n        _this.delayTimeoutId = null;\n        _this.onPointerDown = function (ev) {\n            if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                _this.isInteracting = true;\n                _this.isDelayEnded = false;\n                _this.isDistanceSurpassed = false;\n                preventSelection(document.body);\n                preventContextMenu(document.body);\n                // prevent links from being visited if there's an eventual drag.\n                // also prevents selection in older browsers (maybe?).\n                // not necessary for touch, besides, browser would complain about passiveness.\n                if (!ev.isTouch) {\n                    ev.origEvent.preventDefault();\n                }\n                _this.emitter.trigger('pointerdown', ev);\n                if (!_this.pointer.shouldIgnoreMove) {\n                    // actions related to initiating dragstart+dragmove+dragend...\n                    _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                    _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                    _this.startDelay(ev);\n                    if (!_this.minDistance) {\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n            }\n        };\n        _this.onPointerMove = function (ev) {\n            if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                _this.emitter.trigger('pointermove', ev);\n                if (!_this.isDistanceSurpassed) {\n                    var minDistance = _this.minDistance;\n                    var distanceSq = void 0; // current distance from the origin, squared\n                    var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                    distanceSq = deltaX * deltaX + deltaY * deltaY;\n                    if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n                if (_this.isDragging) {\n                    // a real pointer move? (not one simulated by scrolling)\n                    if (ev.origEvent.type !== 'scroll') {\n                        _this.mirror.handleMove(ev.pageX, ev.pageY);\n                        _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                    }\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            }\n        };\n        _this.onPointerUp = function (ev) {\n            if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                _this.isInteracting = false;\n                allowSelection(document.body);\n                allowContextMenu(document.body);\n                _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                if (_this.isDragging) {\n                    _this.autoScroller.stop();\n                    _this.tryStopDrag(ev); // which will stop the mirror\n                }\n                if (_this.delayTimeoutId) {\n                    clearTimeout(_this.delayTimeoutId);\n                    _this.delayTimeoutId = null;\n                }\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.onPointerDown);\n        pointer.emitter.on('pointermove', _this.onPointerMove);\n        pointer.emitter.on('pointerup', _this.onPointerUp);\n        _this.mirror = new ElementMirror();\n        _this.autoScroller = new AutoScroller();\n        return _this;\n    }\n    FeaturefulElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    FeaturefulElementDragging.prototype.startDelay = function (ev) {\n        var _this = this;\n        if (typeof this.delay === 'number') {\n            this.delayTimeoutId = setTimeout(function () {\n                _this.delayTimeoutId = null;\n                _this.handleDelayEnd(ev);\n            }, this.delay); // not assignable to number!\n        }\n        else {\n            this.handleDelayEnd(ev);\n        }\n    };\n    FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n        this.isDelayEnded = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n        this.isDistanceSurpassed = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n        if (this.isDelayEnded && this.isDistanceSurpassed) {\n            if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                this.isDragging = true;\n                this.mirrorNeedsRevert = false;\n                this.autoScroller.start(ev.pageX, ev.pageY);\n                this.emitter.trigger('dragstart', ev);\n                if (this.touchScrollAllowed === false) {\n                    this.pointer.cancelTouchScroll();\n                }\n            }\n        }\n    };\n    FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n        // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n        // that come from the document to fire beforehand. much more convenient this way.\n        this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev) // bound with args\n        );\n    };\n    FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n        this.isDragging = false;\n        this.emitter.trigger('dragend', ev);\n    };\n    // fill in the implementations...\n    FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.pointer.shouldIgnoreMove = bool;\n    };\n    FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        this.mirror.setIsVisible(bool);\n    };\n    FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        this.mirrorNeedsRevert = bool;\n    };\n    FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        this.autoScroller.isEnabled = bool;\n    };\n    return FeaturefulElementDragging;\n}(ElementDragging));\n\n/*\nWhen this class is instantiated, it records the offset of an element (relative to the document topleft),\nand continues to monitor scrolling, updating the cached coordinates if it needs to.\nDoes not access the DOM after instantiation, so highly performant.\n\nAlso keeps track of all scrolling/overflow:hidden containers that are parents of the given element\nand an determine if a given point is inside the combined clipping rectangle.\n*/\nvar OffsetTracker = /** @class */ (function () {\n    function OffsetTracker(el) {\n        this.origRect = computeRect(el);\n        // will work fine for divs that have overflow:hidden\n        this.scrollCaches = getClippingParents(el).map(function (el) {\n            return new ElementScrollGeomCache(el, true); // listen=true\n        });\n    }\n    OffsetTracker.prototype.destroy = function () {\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            scrollCache.destroy();\n        }\n    };\n    OffsetTracker.prototype.computeLeft = function () {\n        var left = this.origRect.left;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n        }\n        return left;\n    };\n    OffsetTracker.prototype.computeTop = function () {\n        var top = this.origRect.top;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n        }\n        return top;\n    };\n    OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n        var point = { left: pageX, top: pageY };\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                !pointInsideRect(point, scrollCache.clientRect)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return OffsetTracker;\n}());\n// certain clipping containers should never constrain interactions, like <html> and <body>\n// https://github.com/fullcalendar/fullcalendar/issues/3615\nfunction isIgnoredClipping(node) {\n    var tagName = node.tagName;\n    return tagName === 'HTML' || tagName === 'BODY';\n}\n\n/*\nTracks movement over multiple droppable areas (aka \"hits\")\nthat exist in one or more DateComponents.\nRelies on an existing draggable.\n\nemits:\n- pointerdown\n- dragstart\n- hitchange - fires initially, even if not over a hit\n- pointerup\n- (hitchange - again, to null, if ended over a hit)\n- dragend\n*/\nvar HitDragging = /** @class */ (function () {\n    function HitDragging(dragging, droppableStore) {\n        var _this = this;\n        // options that can be set by caller\n        this.useSubjectCenter = false;\n        this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n        this.initialHit = null;\n        this.movingHit = null;\n        this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            _this.initialHit = null;\n            _this.movingHit = null;\n            _this.finalHit = null;\n            _this.prepareHits();\n            _this.processFirstCoord(ev);\n            if (_this.initialHit || !_this.requireInitial) {\n                dragging.setIgnoreMove(false);\n                _this.emitter.trigger('pointerdown', ev); // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n            }\n            else {\n                dragging.setIgnoreMove(true);\n            }\n        };\n        this.handleDragStart = function (ev) {\n            _this.emitter.trigger('dragstart', ev);\n            _this.handleMove(ev, true); // force = fire even if initially null\n        };\n        this.handleDragMove = function (ev) {\n            _this.emitter.trigger('dragmove', ev);\n            _this.handleMove(ev);\n        };\n        this.handlePointerUp = function (ev) {\n            _this.releaseHits();\n            _this.emitter.trigger('pointerup', ev);\n        };\n        this.handleDragEnd = function (ev) {\n            if (_this.movingHit) {\n                _this.emitter.trigger('hitupdate', null, true, ev);\n            }\n            _this.finalHit = _this.movingHit;\n            _this.movingHit = null;\n            _this.emitter.trigger('dragend', ev);\n        };\n        this.droppableStore = droppableStore;\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        dragging.emitter.on('dragmove', this.handleDragMove);\n        dragging.emitter.on('pointerup', this.handlePointerUp);\n        dragging.emitter.on('dragend', this.handleDragEnd);\n        this.dragging = dragging;\n        this.emitter = new EmitterMixin();\n    }\n    // sets initialHit\n    // sets coordAdjust\n    HitDragging.prototype.processFirstCoord = function (ev) {\n        var origPoint = { left: ev.pageX, top: ev.pageY };\n        var adjustedPoint = origPoint;\n        var subjectEl = ev.subjectEl;\n        var subjectRect;\n        if (subjectEl !== document) {\n            subjectRect = computeRect(subjectEl);\n            adjustedPoint = constrainPoint(adjustedPoint, subjectRect);\n        }\n        var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n        if (initialHit) {\n            if (this.useSubjectCenter && subjectRect) {\n                var slicedSubjectRect = intersectRects(subjectRect, initialHit.rect);\n                if (slicedSubjectRect) {\n                    adjustedPoint = getRectCenter(slicedSubjectRect);\n                }\n            }\n            this.coordAdjust = diffPoints(adjustedPoint, origPoint);\n        }\n        else {\n            this.coordAdjust = { left: 0, top: 0 };\n        }\n    };\n    HitDragging.prototype.handleMove = function (ev, forceHandle) {\n        var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n        if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n            this.movingHit = hit;\n            this.emitter.trigger('hitupdate', hit, false, ev);\n        }\n    };\n    HitDragging.prototype.prepareHits = function () {\n        this.offsetTrackers = mapHash(this.droppableStore, function (interactionSettings) {\n            interactionSettings.component.buildPositionCaches();\n            return new OffsetTracker(interactionSettings.el);\n        });\n    };\n    HitDragging.prototype.releaseHits = function () {\n        var offsetTrackers = this.offsetTrackers;\n        for (var id in offsetTrackers) {\n            offsetTrackers[id].destroy();\n        }\n        this.offsetTrackers = {};\n    };\n    HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n        var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n        var bestHit = null;\n        for (var id in droppableStore) {\n            var component = droppableStore[id].component;\n            var offsetTracker = offsetTrackers[id];\n            if (offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                var originLeft = offsetTracker.computeLeft();\n                var originTop = offsetTracker.computeTop();\n                var positionLeft = offsetLeft - originLeft;\n                var positionTop = offsetTop - originTop;\n                var origRect = offsetTracker.origRect;\n                var width = origRect.right - origRect.left;\n                var height = origRect.bottom - origRect.top;\n                if (\n                // must be within the element's bounds\n                positionLeft >= 0 && positionLeft < width &&\n                    positionTop >= 0 && positionTop < height) {\n                    var hit = component.queryHit(positionLeft, positionTop, width, height);\n                    if (hit &&\n                        (\n                        // make sure the hit is within activeRange, meaning it's not a deal cell\n                        !component.props.dateProfile || // hack for DayTile\n                            rangeContainsRange(component.props.dateProfile.activeRange, hit.dateSpan.range)) &&\n                        (!bestHit || hit.layer > bestHit.layer)) {\n                        // TODO: better way to re-orient rectangle\n                        hit.rect.left += originLeft;\n                        hit.rect.right += originLeft;\n                        hit.rect.top += originTop;\n                        hit.rect.bottom += originTop;\n                        bestHit = hit;\n                    }\n                }\n            }\n        }\n        return bestHit;\n    };\n    return HitDragging;\n}());\nfunction isHitsEqual(hit0, hit1) {\n    if (!hit0 && !hit1) {\n        return true;\n    }\n    if (Boolean(hit0) !== Boolean(hit1)) {\n        return false;\n    }\n    return isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n}\n\n/*\nMonitors when the user clicks on a specific date/time of a component.\nA pointerdown+pointerup on the same \"hit\" constitutes a click.\n*/\nvar DateClicking = /** @class */ (function (_super) {\n    __extends(DateClicking, _super);\n    function DateClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n            dragging.setIgnoreMove(!_this.component.isValidDateDownEl(dragging.pointer.downEl));\n        };\n        // won't even fire if moving was ignored\n        _this.handleDragEnd = function (ev) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var pointer = _this.dragging.pointer;\n            if (!pointer.wasTouchScroll) {\n                var _b = _this.hitDragging, initialHit = _b.initialHit, finalHit = _b.finalHit;\n                if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                    calendar.triggerDateClick(initialHit.dateSpan, initialHit.dayEl, view, ev.origEvent);\n                }\n            }\n        };\n        var component = settings.component;\n        // we DO want to watch pointer moves because otherwise finalHit won't get populated\n        _this.dragging = new FeaturefulElementDragging(component.el);\n        _this.dragging.autoScroller.isEnabled = false;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    DateClicking.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateClicking;\n}(Interaction));\n\n/*\nTracks when the user selects a portion of time of a component,\nconstituted by a drag over date cells, with a possible delay at the beginning of the drag.\n*/\nvar DateSelecting = /** @class */ (function (_super) {\n    __extends(DateSelecting, _super);\n    function DateSelecting(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.dragSelection = null;\n        _this.handlePointerDown = function (ev) {\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var options = component.context.options;\n            var canSelect = options.selectable &&\n                component.isValidDateDownEl(ev.origEvent.target);\n            // don't bother to watch expensive moves if component won't do selection\n            dragging.setIgnoreMove(!canSelect);\n            // if touch, require user to hold down\n            dragging.delay = ev.isTouch ? getComponentTouchDelay(component) : null;\n        };\n        _this.handleDragStart = function (ev) {\n            _this.component.context.calendar.unselect(ev); // unselect previous selections\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            var calendar = _this.component.context.calendar;\n            var dragSelection = null;\n            var isInvalid = false;\n            if (hit) {\n                dragSelection = joinHitsIntoSelection(_this.hitDragging.initialHit, hit, calendar.pluginSystem.hooks.dateSelectionTransformers);\n                if (!dragSelection || !_this.component.isDateSelectionValid(dragSelection)) {\n                    isInvalid = true;\n                    dragSelection = null;\n                }\n            }\n            if (dragSelection) {\n                calendar.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n            }\n            else if (!isFinal) { // only unselect if moved away while dragging\n                calendar.dispatch({ type: 'UNSELECT_DATES' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n            }\n        };\n        _this.handlePointerUp = function (pev) {\n            if (_this.dragSelection) {\n                // selection is already rendered, so just need to report selection\n                _this.component.context.calendar.triggerDateSelect(_this.dragSelection, pev);\n                _this.dragSelection = null;\n            }\n        };\n        var component = settings.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.touchScrollAllowed = false;\n        dragging.minDistance = options.selectMinDistance || 0;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    DateSelecting.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateSelecting;\n}(Interaction));\nfunction getComponentTouchDelay(component) {\n    var options = component.context.options;\n    var delay = options.selectLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\nfunction joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var ms = [\n        dateSpan0.range.start,\n        dateSpan0.range.end,\n        dateSpan1.range.start,\n        dateSpan1.range.end\n    ];\n    ms.sort(compareNumbers);\n    var props = {};\n    for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n        var transformer = dateSelectionTransformers_1[_i];\n        var res = transformer(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        else if (res) {\n            __assign(props, res);\n        }\n    }\n    props.range = { start: ms[0], end: ms[3] };\n    props.allDay = dateSpan0.allDay;\n    return props;\n}\n\nvar EventDragging = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.subjectSeg = null; // the seg being selected/dragged\n        _this.isDragging = false;\n        _this.eventRange = null;\n        _this.relevantEvents = null; // the events being dragged\n        _this.receivingCalendar = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var origTarget = ev.origEvent.target;\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var mirror = dragging.mirror;\n            var options = component.context.options;\n            var initialCalendar = component.context.calendar;\n            var subjectSeg = _this.subjectSeg = getElSeg(ev.subjectEl);\n            var eventRange = _this.eventRange = subjectSeg.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            _this.relevantEvents = getRelevantEvents(initialCalendar.state.eventStore, eventInstanceId);\n            dragging.minDistance = ev.isTouch ? 0 : options.eventDragMinDistance;\n            dragging.delay =\n                // only do a touch delay if touch and this event hasn't been selected yet\n                (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                    getComponentTouchDelay$1(component) :\n                    null;\n            mirror.parentNode = initialCalendar.el;\n            mirror.revertDuration = options.dragRevertDuration;\n            var isValid = component.isValidSegDownEl(origTarget) &&\n                !elementClosest(origTarget, '.fc-resizer'); // NOT on a resizer\n            dragging.setIgnoreMove(!isValid);\n            // disable dragging for elements that are resizable (ie, selectable)\n            // but are not draggable\n            _this.isDragging = isValid &&\n                ev.subjectEl.classList.contains('fc-draggable');\n        };\n        _this.handleDragStart = function (ev) {\n            var context = _this.component.context;\n            var initialCalendar = context.calendar;\n            var eventRange = _this.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            if (ev.isTouch) {\n                // need to select a different event?\n                if (eventInstanceId !== _this.component.props.eventSelection) {\n                    initialCalendar.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                }\n            }\n            else {\n                // if now using mouse, but was previous touch interaction, clear selected event\n                initialCalendar.dispatch({ type: 'UNSELECT_EVENT' });\n            }\n            if (_this.isDragging) {\n                initialCalendar.unselect(ev); // unselect *date* selection\n                initialCalendar.publiclyTrigger('eventDragStart', [\n                    {\n                        el: _this.subjectSeg.el,\n                        event: new EventApi(initialCalendar, eventRange.def, eventRange.instance),\n                        jsEvent: ev.origEvent,\n                        view: context.view\n                    }\n                ]);\n            }\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            if (!_this.isDragging) {\n                return;\n            }\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var initialCalendar = _this.component.context.calendar;\n            // states based on new hit\n            var receivingCalendar = null;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n                origSeg: _this.subjectSeg\n            };\n            if (hit) {\n                var receivingComponent = hit.component;\n                receivingCalendar = receivingComponent.context.calendar;\n                var receivingOptions = receivingComponent.context.options;\n                if (initialCalendar === receivingCalendar ||\n                    receivingOptions.editable && receivingOptions.droppable) {\n                    mutation = computeEventMutation(initialHit, hit, receivingCalendar.pluginSystem.hooks.eventDragMutationMassagers);\n                    if (mutation) {\n                        mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, receivingCalendar.eventUiBases, mutation, receivingCalendar);\n                        interaction.mutatedEvents = mutatedRelevantEvents;\n                        if (!receivingComponent.isInteractionValid(interaction)) {\n                            isInvalid = true;\n                            mutation = null;\n                            mutatedRelevantEvents = null;\n                            interaction.mutatedEvents = createEmptyEventStore();\n                        }\n                    }\n                }\n                else {\n                    receivingCalendar = null;\n                }\n            }\n            _this.displayDrag(receivingCalendar, interaction);\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (initialCalendar === receivingCalendar && // TODO: write test for this\n                    isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.dragging.setMirrorNeedsRevert(!mutation);\n                // render the mirror if no already-rendered mirror\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                _this.dragging.setMirrorIsVisible(!hit || !document.querySelector('.fc-mirror'));\n                // assign states based on new hit\n                _this.receivingCalendar = receivingCalendar;\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handlePointerUp = function () {\n            if (!_this.isDragging) {\n                _this.cleanup(); // because handleDragEnd won't fire\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            if (_this.isDragging) {\n                var context = _this.component.context;\n                var initialCalendar_1 = context.calendar;\n                var initialView = context.view;\n                var _a = _this, receivingCalendar = _a.receivingCalendar, validMutation = _a.validMutation;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new EventApi(initialCalendar_1, eventDef, eventInstance);\n                var relevantEvents_1 = _this.relevantEvents;\n                var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                var finalHit = _this.hitDragging.finalHit;\n                _this.clearDrag(); // must happen after revert animation\n                initialCalendar_1.publiclyTrigger('eventDragStop', [\n                    {\n                        el: _this.subjectSeg.el,\n                        event: eventApi,\n                        jsEvent: ev.origEvent,\n                        view: initialView\n                    }\n                ]);\n                if (validMutation) {\n                    // dropped within same calendar\n                    if (receivingCalendar === initialCalendar_1) {\n                        initialCalendar_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents\n                        });\n                        var transformed = {};\n                        for (var _i = 0, _b = initialCalendar_1.pluginSystem.hooks.eventDropTransformers; _i < _b.length; _i++) {\n                            var transformer = _b[_i];\n                            __assign(transformed, transformer(validMutation, initialCalendar_1));\n                        }\n                        var eventDropArg = __assign({}, transformed, { el: ev.subjectEl, delta: validMutation.datesDelta, oldEvent: eventApi, event: new EventApi(// the data AFTER the mutation\n                            initialCalendar_1, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null), revert: function () {\n                                initialCalendar_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1\n                                });\n                            }, jsEvent: ev.origEvent, view: initialView });\n                        initialCalendar_1.publiclyTrigger('eventDrop', [eventDropArg]);\n                        // dropped in different calendar\n                    }\n                    else if (receivingCalendar) {\n                        initialCalendar_1.publiclyTrigger('eventLeave', [\n                            {\n                                draggedEl: ev.subjectEl,\n                                event: eventApi,\n                                view: initialView\n                            }\n                        ]);\n                        initialCalendar_1.dispatch({\n                            type: 'REMOVE_EVENT_INSTANCES',\n                            instances: _this.mutatedRelevantEvents.instances\n                        });\n                        receivingCalendar.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: _this.mutatedRelevantEvents\n                        });\n                        if (ev.isTouch) {\n                            receivingCalendar.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: eventInstance.instanceId\n                            });\n                        }\n                        var dropArg = __assign({}, receivingCalendar.buildDatePointApi(finalHit.dateSpan), { draggedEl: ev.subjectEl, jsEvent: ev.origEvent, view: finalHit.component // should this be finalHit.component.view? See #4644\n                         });\n                        receivingCalendar.publiclyTrigger('drop', [dropArg]);\n                        receivingCalendar.publiclyTrigger('eventReceive', [\n                            {\n                                draggedEl: ev.subjectEl,\n                                event: new EventApi(// the data AFTER the mutation\n                                receivingCalendar, mutatedRelevantEvents.defs[eventDef.defId], mutatedRelevantEvents.instances[eventInstance.instanceId]),\n                                view: finalHit.component // should this be finalHit.component.view? See #4644\n                            }\n                        ]);\n                    }\n                }\n                else {\n                    initialCalendar_1.publiclyTrigger('_noEventDrop');\n                }\n            }\n            _this.cleanup();\n        };\n        var component = _this.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.pointer.selector = EventDragging.SELECTOR;\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsStore);\n        hitDragging.useSubjectCenter = settings.useEventCenter;\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    // render a drag state on the next receivingCalendar\n    EventDragging.prototype.displayDrag = function (nextCalendar, state) {\n        var initialCalendar = this.component.context.calendar;\n        var prevCalendar = this.receivingCalendar;\n        // does the previous calendar need to be cleared?\n        if (prevCalendar && prevCalendar !== nextCalendar) {\n            // does the initial calendar need to be cleared?\n            // if so, don't clear all the way. we still need to to hide the affectedEvents\n            if (prevCalendar === initialCalendar) {\n                prevCalendar.dispatch({\n                    type: 'SET_EVENT_DRAG',\n                    state: {\n                        affectedEvents: state.affectedEvents,\n                        mutatedEvents: createEmptyEventStore(),\n                        isEvent: true,\n                        origSeg: state.origSeg\n                    }\n                });\n                // completely clear the old calendar if it wasn't the initial\n            }\n            else {\n                prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        }\n        if (nextCalendar) {\n            nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    EventDragging.prototype.clearDrag = function () {\n        var initialCalendar = this.component.context.calendar;\n        var receivingCalendar = this.receivingCalendar;\n        if (receivingCalendar) {\n            receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        // the initial calendar might have an dummy drag state from displayDrag\n        if (initialCalendar !== receivingCalendar) {\n            initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    EventDragging.prototype.cleanup = function () {\n        this.subjectSeg = null;\n        this.isDragging = false;\n        this.eventRange = null;\n        this.relevantEvents = null;\n        this.receivingCalendar = null;\n        this.validMutation = null;\n        this.mutatedRelevantEvents = null;\n    };\n    EventDragging.SELECTOR = '.fc-draggable, .fc-resizable'; // TODO: test this in IE11\n    return EventDragging;\n}(Interaction));\nfunction computeEventMutation(hit0, hit1, massagers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var date0 = dateSpan0.range.start;\n    var date1 = dateSpan1.range.start;\n    var standardProps = {};\n    if (dateSpan0.allDay !== dateSpan1.allDay) {\n        standardProps.allDay = dateSpan1.allDay;\n        standardProps.hasEnd = hit1.component.context.options.allDayMaintainDuration;\n        if (dateSpan1.allDay) {\n            // means date1 is already start-of-day,\n            // but date0 needs to be converted\n            date0 = startOfDay(date0);\n        }\n    }\n    var delta = diffDates(date0, date1, hit0.component.context.dateEnv, hit0.component === hit1.component ?\n        hit0.component.largeUnit :\n        null);\n    if (delta.milliseconds) { // has hours/minutes/seconds\n        standardProps.allDay = false;\n    }\n    var mutation = {\n        datesDelta: delta,\n        standardProps: standardProps\n    };\n    for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n        var massager = massagers_1[_i];\n        massager(mutation, hit0, hit1);\n    }\n    return mutation;\n}\nfunction getComponentTouchDelay$1(component) {\n    var options = component.context.options;\n    var delay = options.eventLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\n\nvar EventDragging$1 = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n        _this.eventRange = null;\n        _this.relevantEvents = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var component = _this.component;\n            var seg = _this.querySeg(ev);\n            var eventRange = _this.eventRange = seg.eventRange;\n            _this.dragging.minDistance = component.context.options.eventDragMinDistance;\n            // if touch, need to be working with a selected event\n            _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n        };\n        _this.handleDragStart = function (ev) {\n            var _a = _this.component.context, calendar = _a.calendar, view = _a.view;\n            var eventRange = _this.eventRange;\n            _this.relevantEvents = getRelevantEvents(calendar.state.eventStore, _this.eventRange.instance.instanceId);\n            _this.draggingSeg = _this.querySeg(ev);\n            calendar.unselect();\n            calendar.publiclyTrigger('eventResizeStart', [\n                {\n                    el: _this.draggingSeg.el,\n                    event: new EventApi(calendar, eventRange.def, eventRange.instance),\n                    jsEvent: ev.origEvent,\n                    view: view\n                }\n            ]);\n        };\n        _this.handleHitUpdate = function (hit, isFinal, ev) {\n            var calendar = _this.component.context.calendar;\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var eventInstance = _this.eventRange.instance;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n                origSeg: _this.draggingSeg\n            };\n            if (hit) {\n                mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-start-resizer'), eventInstance.range, calendar.pluginSystem.hooks.eventResizeJoinTransforms);\n            }\n            if (mutation) {\n                mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, calendar.eventUiBases, mutation, calendar);\n                interaction.mutatedEvents = mutatedRelevantEvents;\n                if (!_this.component.isInteractionValid(interaction)) {\n                    isInvalid = true;\n                    mutation = null;\n                    mutatedRelevantEvents = null;\n                    interaction.mutatedEvents = null;\n                }\n            }\n            if (mutatedRelevantEvents) {\n                calendar.dispatch({\n                    type: 'SET_EVENT_RESIZE',\n                    state: interaction\n                });\n            }\n            else {\n                calendar.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (mutation && isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            var _a = _this.component.context, calendar = _a.calendar, view = _a.view;\n            var eventDef = _this.eventRange.def;\n            var eventInstance = _this.eventRange.instance;\n            var eventApi = new EventApi(calendar, eventDef, eventInstance);\n            var relevantEvents = _this.relevantEvents;\n            var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n            calendar.publiclyTrigger('eventResizeStop', [\n                {\n                    el: _this.draggingSeg.el,\n                    event: eventApi,\n                    jsEvent: ev.origEvent,\n                    view: view\n                }\n            ]);\n            if (_this.validMutation) {\n                calendar.dispatch({\n                    type: 'MERGE_EVENTS',\n                    eventStore: mutatedRelevantEvents\n                });\n                calendar.publiclyTrigger('eventResize', [\n                    {\n                        el: _this.draggingSeg.el,\n                        startDelta: _this.validMutation.startDelta || createDuration(0),\n                        endDelta: _this.validMutation.endDelta || createDuration(0),\n                        prevEvent: eventApi,\n                        event: new EventApi(// the data AFTER the mutation\n                        calendar, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                        revert: function () {\n                            calendar.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: relevantEvents\n                            });\n                        },\n                        jsEvent: ev.origEvent,\n                        view: view\n                    }\n                ]);\n            }\n            else {\n                calendar.publiclyTrigger('_noEventResize');\n            }\n            // reset all internal state\n            _this.draggingSeg = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            // okay to keep eventInstance around. useful to set it in handlePointerDown\n        };\n        var component = settings.component;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.pointer.selector = '.fc-resizer';\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = component.context.options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    EventDragging.prototype.querySeg = function (ev) {\n        return getElSeg(elementClosest(ev.subjectEl, this.component.fgSegSelector));\n    };\n    return EventDragging;\n}(Interaction));\nfunction computeMutation(hit0, hit1, isFromStart, instanceRange, transforms) {\n    var dateEnv = hit0.component.context.dateEnv;\n    var date0 = hit0.dateSpan.range.start;\n    var date1 = hit1.dateSpan.range.start;\n    var delta = diffDates(date0, date1, dateEnv, hit0.component.largeUnit);\n    var props = {};\n    for (var _i = 0, transforms_1 = transforms; _i < transforms_1.length; _i++) {\n        var transform = transforms_1[_i];\n        var res = transform(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        else if (res) {\n            __assign(props, res);\n        }\n    }\n    if (isFromStart) {\n        if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n            props.startDelta = delta;\n            return props;\n        }\n    }\n    else {\n        if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n            props.endDelta = delta;\n            return props;\n        }\n    }\n    return null;\n}\n\nvar UnselectAuto = /** @class */ (function () {\n    function UnselectAuto(calendar) {\n        var _this = this;\n        this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n        this.onSelect = function (selectInfo) {\n            if (selectInfo.jsEvent) {\n                _this.isRecentPointerDateSelect = true;\n            }\n        };\n        this.onDocumentPointerUp = function (pev) {\n            var _a = _this, calendar = _a.calendar, documentPointer = _a.documentPointer;\n            var state = calendar.state;\n            // touch-scrolling should never unfocus any type of selection\n            if (!documentPointer.wasTouchScroll) {\n                if (state.dateSelection && // an existing date selection?\n                    !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                ) {\n                    var unselectAuto = calendar.viewOpt('unselectAuto');\n                    var unselectCancel = calendar.viewOpt('unselectCancel');\n                    if (unselectAuto && (!unselectAuto || !elementClosest(documentPointer.downEl, unselectCancel))) {\n                        calendar.unselect(pev);\n                    }\n                }\n                if (state.eventSelection && // an existing event selected?\n                    !elementClosest(documentPointer.downEl, EventDragging.SELECTOR) // interaction DIDN'T start on an event\n                ) {\n                    calendar.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n            }\n            _this.isRecentPointerDateSelect = false;\n        };\n        this.calendar = calendar;\n        var documentPointer = this.documentPointer = new PointerDragging(document);\n        documentPointer.shouldIgnoreMove = true;\n        documentPointer.shouldWatchScroll = false;\n        documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n        /*\n        TODO: better way to know about whether there was a selection with the pointer\n        */\n        calendar.on('select', this.onSelect);\n    }\n    UnselectAuto.prototype.destroy = function () {\n        this.calendar.off('select', this.onSelect);\n        this.documentPointer.destroy();\n    };\n    return UnselectAuto;\n}());\n\n/*\nGiven an already instantiated draggable object for one-or-more elements,\nInterprets any dragging as an attempt to drag an events that lives outside\nof a calendar onto a calendar.\n*/\nvar ExternalElementDragging = /** @class */ (function () {\n    function ExternalElementDragging(dragging, suppliedDragMeta) {\n        var _this = this;\n        this.receivingCalendar = null;\n        this.droppableEvent = null; // will exist for all drags, even if create:false\n        this.suppliedDragMeta = null;\n        this.dragMeta = null;\n        this.handleDragStart = function (ev) {\n            _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n        };\n        this.handleHitUpdate = function (hit, isFinal, ev) {\n            var dragging = _this.hitDragging.dragging;\n            var receivingCalendar = null;\n            var droppableEvent = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: createEmptyEventStore(),\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: _this.dragMeta.create,\n                origSeg: null\n            };\n            if (hit) {\n                receivingCalendar = hit.component.context.calendar;\n                if (_this.canDropElOnCalendar(ev.subjectEl, receivingCalendar)) {\n                    droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingCalendar);\n                    interaction.mutatedEvents = eventTupleToStore(droppableEvent);\n                    isInvalid = !isInteractionValid(interaction, receivingCalendar);\n                    if (isInvalid) {\n                        interaction.mutatedEvents = createEmptyEventStore();\n                        droppableEvent = null;\n                    }\n                }\n            }\n            _this.displayDrag(receivingCalendar, interaction);\n            // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n            // TODO: wish we could somehow wait for dispatch to guarantee render\n            dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-mirror'));\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                dragging.setMirrorNeedsRevert(!droppableEvent);\n                _this.receivingCalendar = receivingCalendar;\n                _this.droppableEvent = droppableEvent;\n            }\n        };\n        this.handleDragEnd = function (pev) {\n            var _a = _this, receivingCalendar = _a.receivingCalendar, droppableEvent = _a.droppableEvent;\n            _this.clearDrag();\n            if (receivingCalendar && droppableEvent) {\n                var finalHit = _this.hitDragging.finalHit;\n                var finalView = finalHit.component.context.view;\n                var dragMeta = _this.dragMeta;\n                var arg = __assign({}, receivingCalendar.buildDatePointApi(finalHit.dateSpan), { draggedEl: pev.subjectEl, jsEvent: pev.origEvent, view: finalView });\n                receivingCalendar.publiclyTrigger('drop', [arg]);\n                if (dragMeta.create) {\n                    receivingCalendar.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: eventTupleToStore(droppableEvent)\n                    });\n                    if (pev.isTouch) {\n                        receivingCalendar.dispatch({\n                            type: 'SELECT_EVENT',\n                            eventInstanceId: droppableEvent.instance.instanceId\n                        });\n                    }\n                    // signal that an external event landed\n                    receivingCalendar.publiclyTrigger('eventReceive', [\n                        {\n                            draggedEl: pev.subjectEl,\n                            event: new EventApi(receivingCalendar, droppableEvent.def, droppableEvent.instance),\n                            view: finalView\n                        }\n                    ]);\n                }\n            }\n            _this.receivingCalendar = null;\n            _this.droppableEvent = null;\n        };\n        var hitDragging = this.hitDragging = new HitDragging(dragging, interactionSettingsStore);\n        hitDragging.requireInitial = false; // will start outside of a component\n        hitDragging.emitter.on('dragstart', this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', this.handleDragEnd);\n        this.suppliedDragMeta = suppliedDragMeta;\n    }\n    ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n        if (typeof this.suppliedDragMeta === 'object') {\n            return parseDragMeta(this.suppliedDragMeta);\n        }\n        else if (typeof this.suppliedDragMeta === 'function') {\n            return parseDragMeta(this.suppliedDragMeta(subjectEl));\n        }\n        else {\n            return getDragMetaFromEl(subjectEl);\n        }\n    };\n    ExternalElementDragging.prototype.displayDrag = function (nextCalendar, state) {\n        var prevCalendar = this.receivingCalendar;\n        if (prevCalendar && prevCalendar !== nextCalendar) {\n            prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        if (nextCalendar) {\n            nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    ExternalElementDragging.prototype.clearDrag = function () {\n        if (this.receivingCalendar) {\n            this.receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingCalendar) {\n        var dropAccept = receivingCalendar.opt('dropAccept');\n        if (typeof dropAccept === 'function') {\n            return dropAccept(el);\n        }\n        else if (typeof dropAccept === 'string' && dropAccept) {\n            return Boolean(elementMatches(el, dropAccept));\n        }\n        return true;\n    };\n    return ExternalElementDragging;\n}());\n// Utils for computing event store from the DragMeta\n// ----------------------------------------------------------------------------------------------------\nfunction computeEventForDateSpan(dateSpan, dragMeta, calendar) {\n    var defProps = __assign({}, dragMeta.leftoverProps);\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.externalDefTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(defProps, transform(dateSpan, dragMeta));\n    }\n    var def = parseEventDef(defProps, dragMeta.sourceId, dateSpan.allDay, calendar.opt('forceEventDuration') || Boolean(dragMeta.duration), // hasEnd\n    calendar);\n    var start = dateSpan.range.start;\n    // only rely on time info if drop zone is all-day,\n    // otherwise, we already know the time\n    if (dateSpan.allDay && dragMeta.startTime) {\n        start = calendar.dateEnv.add(start, dragMeta.startTime);\n    }\n    var end = dragMeta.duration ?\n        calendar.dateEnv.add(start, dragMeta.duration) :\n        calendar.getDefaultEventEnd(dateSpan.allDay, start);\n    var instance = createEventInstance(def.defId, { start: start, end: end });\n    return { def: def, instance: instance };\n}\n// Utils for extracting data from element\n// ----------------------------------------------------------------------------------------------------\nfunction getDragMetaFromEl(el) {\n    var str = getEmbeddedElData(el, 'event');\n    var obj = str ?\n        JSON.parse(str) :\n        { create: false }; // if no embedded data, assume no event creation\n    return parseDragMeta(obj);\n}\nconfig.dataAttrPrefix = '';\nfunction getEmbeddedElData(el, name) {\n    var prefix = config.dataAttrPrefix;\n    var prefixedName = (prefix ? prefix + '-' : '') + name;\n    return el.getAttribute('data-' + prefixedName) || '';\n}\n\n/*\nMakes an element (that is *external* to any calendar) draggable.\nCan pass in data that determines how an event will be created when dropped onto a calendar.\nLeverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n*/\nvar ExternalDraggable = /** @class */ (function () {\n    function ExternalDraggable(el, settings) {\n        var _this = this;\n        if (settings === void 0) { settings = {}; }\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n            dragging.minDistance =\n                minDistance != null ?\n                    minDistance :\n                    (ev.isTouch ? 0 : globalDefaults.eventDragMinDistance);\n            dragging.delay =\n                ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                    (longPressDelay != null ? longPressDelay : globalDefaults.longPressDelay) :\n                    0;\n        };\n        this.handleDragStart = function (ev) {\n            if (ev.isTouch &&\n                _this.dragging.delay &&\n                ev.subjectEl.classList.contains('fc-event')) {\n                _this.dragging.mirror.getMirrorEl().classList.add('fc-selected');\n            }\n        };\n        this.settings = settings;\n        var dragging = this.dragging = new FeaturefulElementDragging(el);\n        dragging.touchScrollAllowed = false;\n        if (settings.itemSelector != null) {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        if (settings.appendTo != null) {\n            dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n        }\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        new ExternalElementDragging(dragging, settings.eventData);\n    }\n    ExternalDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ExternalDraggable;\n}());\n\n/*\nDetects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\nThe third-party system is responsible for drawing the visuals effects of the drag.\nThis class simply monitors for pointer movements and fires events.\nIt also has the ability to hide the moving element (the \"mirror\") during the drag.\n*/\nvar InferredElementDragging = /** @class */ (function (_super) {\n    __extends(InferredElementDragging, _super);\n    function InferredElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.shouldIgnoreMove = false;\n        _this.mirrorSelector = '';\n        _this.currentMirrorEl = null;\n        _this.handlePointerDown = function (ev) {\n            _this.emitter.trigger('pointerdown', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragstart right away. does not support delay or min-distance\n                _this.emitter.trigger('dragstart', ev);\n            }\n        };\n        _this.handlePointerMove = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                _this.emitter.trigger('dragmove', ev);\n            }\n        };\n        _this.handlePointerUp = function (ev) {\n            _this.emitter.trigger('pointerup', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragend right away. does not support a revert animation\n                _this.emitter.trigger('dragend', ev);\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.handlePointerDown);\n        pointer.emitter.on('pointermove', _this.handlePointerMove);\n        pointer.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    InferredElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.shouldIgnoreMove = bool;\n    };\n    InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        if (bool) {\n            // restore a previously hidden element.\n            // use the reference in case the selector class has already been removed.\n            if (this.currentMirrorEl) {\n                this.currentMirrorEl.style.visibility = '';\n                this.currentMirrorEl = null;\n            }\n        }\n        else {\n            var mirrorEl = this.mirrorSelector ?\n                document.querySelector(this.mirrorSelector) :\n                null;\n            if (mirrorEl) {\n                this.currentMirrorEl = mirrorEl;\n                mirrorEl.style.visibility = 'hidden';\n            }\n        }\n    };\n    return InferredElementDragging;\n}(ElementDragging));\n\n/*\nBridges third-party drag-n-drop systems with FullCalendar.\nMust be instantiated and destroyed by caller.\n*/\nvar ThirdPartyDraggable = /** @class */ (function () {\n    function ThirdPartyDraggable(containerOrSettings, settings) {\n        var containerEl = document;\n        if (\n        // wish we could just test instanceof EventTarget, but doesn't work in IE11\n        containerOrSettings === document ||\n            containerOrSettings instanceof Element) {\n            containerEl = containerOrSettings;\n            settings = settings || {};\n        }\n        else {\n            settings = (containerOrSettings || {});\n        }\n        var dragging = this.dragging = new InferredElementDragging(containerEl);\n        if (typeof settings.itemSelector === 'string') {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        else if (containerEl === document) {\n            dragging.pointer.selector = '[data-event]';\n        }\n        if (typeof settings.mirrorSelector === 'string') {\n            dragging.mirrorSelector = settings.mirrorSelector;\n        }\n        new ExternalElementDragging(dragging, settings.eventData);\n    }\n    ThirdPartyDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ThirdPartyDraggable;\n}());\n\nvar main = createPlugin({\n    componentInteractions: [DateClicking, DateSelecting, EventDragging, EventDragging$1],\n    calendarInteractions: [UnselectAuto],\n    elementDraggingImpl: FeaturefulElementDragging\n});\n\nexport default main;\nexport { ExternalDraggable as Draggable, FeaturefulElementDragging, PointerDragging, ThirdPartyDraggable };\n","import { __decorate, __metadata } from 'tslib';\nimport deepEqual from 'fast-deep-equal';\nimport { EventEmitter, ElementRef, Input, Output, Component, NgModule } from '@angular/core';\nimport { Calendar } from '@fullcalendar/core';\n\nimport * as ɵngcc0 from '@angular/core';\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n/*\nReally simple clone utility. Only copies plain arrays, objects, and Dates. Transfers everything else as-is.\nWanted to use a third-party lib, but none did exactly this.\n*/\nfunction deepCopy(input) {\n    if (Array.isArray(input)) {\n        return input.map(deepCopy);\n    }\n    else if (input instanceof Date) {\n        return new Date(input.valueOf());\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return mapHash(input, deepCopy);\n    }\n    else { // everything else (null, function, etc)\n        return input;\n    }\n}\nfunction mapHash(input, func) {\n    const output = {};\n    for (const key in input) {\n        if (hasOwnProperty.call(input, key)) {\n            output[key] = func(input[key], key);\n        }\n    }\n    return output;\n}\n\n/*\nthe docs point to this file as an index of options.\nwhen this files is moved, update the docs.\n*/\nconst INPUT_NAMES = [\n    'header',\n    'footer',\n    'customButtons',\n    'buttonIcons',\n    'themeSystem',\n    'bootstrapFontAwesome',\n    'firstDay',\n    'dir',\n    'weekends',\n    'hiddenDays',\n    'fixedWeekCount',\n    'weekNumbers',\n    'weekNumbersWithinDays',\n    'weekNumberCalculation',\n    'businessHours',\n    'showNonCurrentDates',\n    'height',\n    'contentHeight',\n    'aspectRatio',\n    'handleWindowResize',\n    'windowResizeDelay',\n    'eventLimit',\n    'eventLimitClick',\n    'timeZone',\n    'now',\n    'defaultView',\n    'allDaySlot',\n    'allDayText',\n    'slotDuration',\n    'slotLabelFormat',\n    'slotLabelInterval',\n    'snapDuration',\n    'scrollTime',\n    'minTime',\n    'maxTime',\n    'slotEventOverlap',\n    'listDayFormat',\n    'listDayAltFormat',\n    'noEventsMessage',\n    'defaultDate',\n    'nowIndicator',\n    'visibleRange',\n    'validRange',\n    'dateIncrement',\n    'dateAlignment',\n    'duration',\n    'dayCount',\n    'locales',\n    'locale',\n    'eventTimeFormat',\n    'columnHeader',\n    'columnHeaderFormat',\n    'columnHeaderText',\n    'columnHeaderHtml',\n    'titleFormat',\n    'weekLabel',\n    'displayEventTime',\n    'displayEventEnd',\n    'eventLimitText',\n    'dayPopoverFormat',\n    'navLinks',\n    'selectable',\n    'selectMirror',\n    'selectMinDistance',\n    'unselectAuto',\n    'unselectCancel',\n    'defaultAllDayEventDuration',\n    'defaultTimedEventDuration',\n    'cmdFormatter',\n    'defaultRangeSeparator',\n    'selectConstraint',\n    'selectOverlap',\n    'selectAllow',\n    'editable',\n    'eventStartEditable',\n    'eventDurationEditable',\n    'eventConstraint',\n    'eventOverlap',\n    'eventAllow',\n    'eventClassName',\n    'eventClassNames',\n    'eventBackgroundColor',\n    'eventBorderColor',\n    'eventTextColor',\n    'eventColor',\n    'events',\n    'eventSources',\n    'allDayDefault',\n    'startParam',\n    'endParam',\n    'lazyFetching',\n    'nextDayThreshold',\n    'eventOrder',\n    'rerenderDelay',\n    'dragRevertDuration',\n    'dragScroll',\n    'longPressDelay',\n    'eventLongPressDelay',\n    'droppable',\n    'dropAccept',\n    'eventDataTransform',\n    'allDayMaintainDuration',\n    'eventResizableFromStart',\n    'timeGridEventMinHeight',\n    'allDayHtml',\n    'eventDragMinDistance',\n    'eventSourceFailure',\n    'eventSourceSuccess',\n    'forceEventDuration',\n    'progressiveEventRendering',\n    'selectLongPressDelay',\n    'selectMinDistance',\n    'timeZoneParam',\n    'titleRangeSeparator',\n    // compound OptionsInput...\n    'buttonText',\n    'views',\n    'plugins',\n    // scheduler...\n    'schedulerLicenseKey',\n    'resources',\n    'resourceLabelText',\n    'resourceOrder',\n    'filterResourcesWithEvents',\n    'resourceText',\n    'resourceGroupField',\n    'resourceGroupText',\n    'resourceAreaWidth',\n    'resourceColumns',\n    'resourcesInitiallyExpanded',\n    'slotWidth',\n    'datesAboveResources',\n    'googleCalendarApiKey',\n    'refetchResourcesOnNavigate',\n    'eventResourceEditable'\n];\nconst INPUT_IS_DEEP = {\n    header: true,\n    footer: true,\n    events: true,\n    eventSources: true,\n    resources: true\n};\nconst OUTPUT_NAMES = [\n    'windowResize',\n    'dateClick',\n    'eventClick',\n    'navLinkDayClick',\n    'navLinkWeekClick',\n    'eventMouseEnter',\n    'eventMouseLeave',\n    'select',\n    'unselect',\n    'loading',\n    'eventPositioned',\n    'eventDragStart',\n    'eventDragStop',\n    'eventDrop',\n    'eventResizeStart',\n    'eventResizeStop',\n    'eventResize',\n    'drop',\n    'eventReceive',\n    'eventLeave',\n    '_destroyed',\n    // TODO: make these inputs...\n    'viewSkeletonRender',\n    'viewSkeletonDestroy',\n    'datesRender',\n    'datesDestroy',\n    'dayRender',\n    'eventRender',\n    'eventDestroy',\n    'resourceRender'\n];\n\nlet FullCalendarComponent = class FullCalendarComponent {\n    constructor(element) {\n        this.element = element;\n        this.dirtyProps = {};\n        this.deepCopies = {}; // holds frozen states\n        this.windowResize = new EventEmitter();\n        this.dateClick = new EventEmitter();\n        this.eventClick = new EventEmitter();\n        this.eventMouseEnter = new EventEmitter();\n        this.eventMouseLeave = new EventEmitter();\n        this.select = new EventEmitter();\n        this.unselect = new EventEmitter();\n        this.loading = new EventEmitter();\n        this.eventPositioned = new EventEmitter();\n        this.eventDragStart = new EventEmitter();\n        this.eventDragStop = new EventEmitter();\n        this.eventDrop = new EventEmitter();\n        this.eventResizeStart = new EventEmitter();\n        this.eventResizeStop = new EventEmitter();\n        this.eventResize = new EventEmitter();\n        this.drop = new EventEmitter();\n        this.eventReceive = new EventEmitter();\n        this.eventLeave = new EventEmitter();\n        this._destroyed = new EventEmitter();\n        this.navLinkDayClick = new EventEmitter();\n        this.navLinkWeekClick = new EventEmitter();\n        // TODO: make these inputs...\n        this.viewSkeletonRender = new EventEmitter();\n        this.viewSkeletonDestroy = new EventEmitter();\n        this.datesRender = new EventEmitter();\n        this.datesDestroy = new EventEmitter();\n        this.dayRender = new EventEmitter();\n        this.eventRender = new EventEmitter();\n        this.eventDestroy = new EventEmitter();\n        this.resourceRender = new EventEmitter();\n    }\n    ngAfterViewInit() {\n        this.calendar = new Calendar(this.element.nativeElement, this.buildOptions());\n        this.calendar.render();\n    }\n    buildOptions() {\n        const options = {};\n        OUTPUT_NAMES.forEach(outputName => {\n            options[outputName] = (...args) => {\n                this[outputName].emit(...args);\n            };\n        });\n        // do after outputs, so that inputs with same name override\n        INPUT_NAMES.forEach(inputName => {\n            let inputVal = this[inputName];\n            if (inputVal !== undefined) { // unfortunately FC chokes when some props are set to undefined\n                if (this.deepChangeDetection && INPUT_IS_DEEP[inputName]) {\n                    inputVal = deepCopy(inputVal);\n                    this.deepCopies[inputName] = inputVal; // side effect!\n                }\n                options[inputName] = inputVal;\n            }\n        });\n        return options;\n    }\n    /*\n    called before ngOnChanges, allows us to manually detect input changes.\n    called much more often than ngOnChanges.\n    */\n    ngDoCheck() {\n        if (this.calendar && this.deepChangeDetection) { // not the initial render AND we do deep-mutation checks\n            const { deepCopies } = this;\n            for (const inputName in INPUT_IS_DEEP) {\n                if (INPUT_IS_DEEP.hasOwnProperty(inputName)) {\n                    const inputVal = this[inputName];\n                    if (inputVal !== undefined) { // unfortunately FC chokes when some props are set to undefined\n                        if (!deepEqual(inputVal, deepCopies[inputName])) {\n                            const copy = deepCopy(inputVal);\n                            deepCopies[inputName] = copy;\n                            this.dirtyProps[inputName] = copy;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /*\n    called with confirmed changes to input references\n    */\n    ngOnChanges(changes) {\n        if (this.calendar) { // not the initial render\n            for (const inputName in changes) {\n                if (changes.hasOwnProperty(inputName)) {\n                    if (this.deepCopies[inputName] === undefined) { // not already handled in ngDoCheck\n                        this.dirtyProps[inputName] = changes[inputName].currentValue;\n                    }\n                }\n            }\n        }\n    }\n    ngAfterContentChecked() {\n        const { dirtyProps } = this; // hold on to reference before clearing\n        if (Object.keys(dirtyProps).length > 0) {\n            this.dirtyProps = {}; // clear first, in case the rerender causes new dirtiness\n            this.calendar.mutateOptions(dirtyProps, [], false, deepEqual);\n        }\n    }\n    ngOnDestroy() {\n        if (this.calendar) {\n            this.calendar.destroy();\n        }\n        this.calendar = null;\n    }\n    getApi() {\n        return this.calendar;\n    }\n};\nFullCalendarComponent.ɵfac = function FullCalendarComponent_Factory(t) { return new (t || FullCalendarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nFullCalendarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FullCalendarComponent, selectors: [[\"full-calendar\"]], inputs: { deepChangeDetection: \"deepChangeDetection\", header: \"header\", footer: \"footer\", customButtons: \"customButtons\", buttonIcons: \"buttonIcons\", themeSystem: \"themeSystem\", bootstrapFontAwesome: \"bootstrapFontAwesome\", firstDay: \"firstDay\", dir: \"dir\", weekends: \"weekends\", hiddenDays: \"hiddenDays\", fixedWeekCount: \"fixedWeekCount\", weekNumbers: \"weekNumbers\", weekNumbersWithinDays: \"weekNumbersWithinDays\", weekNumberCalculation: \"weekNumberCalculation\", businessHours: \"businessHours\", showNonCurrentDates: \"showNonCurrentDates\", height: \"height\", contentHeight: \"contentHeight\", aspectRatio: \"aspectRatio\", handleWindowResize: \"handleWindowResize\", windowResizeDelay: \"windowResizeDelay\", eventLimit: \"eventLimit\", eventLimitClick: \"eventLimitClick\", timeZone: \"timeZone\", now: \"now\", defaultView: \"defaultView\", allDaySlot: \"allDaySlot\", allDayText: \"allDayText\", slotDuration: \"slotDuration\", slotLabelFormat: \"slotLabelFormat\", slotLabelInterval: \"slotLabelInterval\", snapDuration: \"snapDuration\", scrollTime: \"scrollTime\", minTime: \"minTime\", maxTime: \"maxTime\", slotEventOverlap: \"slotEventOverlap\", listDayFormat: \"listDayFormat\", listDayAltFormat: \"listDayAltFormat\", noEventsMessage: \"noEventsMessage\", defaultDate: \"defaultDate\", nowIndicator: \"nowIndicator\", visibleRange: \"visibleRange\", validRange: \"validRange\", dateIncrement: \"dateIncrement\", dateAlignment: \"dateAlignment\", duration: \"duration\", dayCount: \"dayCount\", locales: \"locales\", locale: \"locale\", eventTimeFormat: \"eventTimeFormat\", columnHeader: \"columnHeader\", columnHeaderFormat: \"columnHeaderFormat\", columnHeaderText: \"columnHeaderText\", columnHeaderHtml: \"columnHeaderHtml\", titleFormat: \"titleFormat\", weekLabel: \"weekLabel\", displayEventTime: \"displayEventTime\", displayEventEnd: \"displayEventEnd\", eventLimitText: \"eventLimitText\", dayPopoverFormat: \"dayPopoverFormat\", navLinks: \"navLinks\", selectable: \"selectable\", selectMirror: \"selectMirror\", unselectAuto: \"unselectAuto\", unselectCancel: \"unselectCancel\", defaultAllDayEventDuration: \"defaultAllDayEventDuration\", defaultTimedEventDuration: \"defaultTimedEventDuration\", cmdFormatter: \"cmdFormatter\", defaultRangeSeparator: \"defaultRangeSeparator\", selectConstraint: \"selectConstraint\", selectOverlap: \"selectOverlap\", selectAllow: \"selectAllow\", selectMinDistance: \"selectMinDistance\", editable: \"editable\", eventStartEditable: \"eventStartEditable\", eventDurationEditable: \"eventDurationEditable\", eventConstraint: \"eventConstraint\", eventOverlap: \"eventOverlap\", eventAllow: \"eventAllow\", eventClassName: \"eventClassName\", eventClassNames: \"eventClassNames\", eventBackgroundColor: \"eventBackgroundColor\", eventBorderColor: \"eventBorderColor\", eventTextColor: \"eventTextColor\", eventColor: \"eventColor\", events: \"events\", eventSources: \"eventSources\", allDayDefault: \"allDayDefault\", startParam: \"startParam\", endParam: \"endParam\", lazyFetching: \"lazyFetching\", nextDayThreshold: \"nextDayThreshold\", eventOrder: \"eventOrder\", rerenderDelay: \"rerenderDelay\", dragRevertDuration: \"dragRevertDuration\", dragScroll: \"dragScroll\", longPressDelay: \"longPressDelay\", eventLongPressDelay: \"eventLongPressDelay\", droppable: \"droppable\", dropAccept: \"dropAccept\", eventDataTransform: \"eventDataTransform\", allDayMaintainDuration: \"allDayMaintainDuration\", eventResizableFromStart: \"eventResizableFromStart\", timeGridEventMinHeight: \"timeGridEventMinHeight\", allDayHtml: \"allDayHtml\", eventDragMinDistance: \"eventDragMinDistance\", eventSourceFailure: \"eventSourceFailure\", eventSourceSuccess: \"eventSourceSuccess\", forceEventDuration: \"forceEventDuration\", progressiveEventRendering: \"progressiveEventRendering\", selectLongPressDelay: \"selectLongPressDelay\", timeZoneParam: \"timeZoneParam\", titleRangeSeparator: \"titleRangeSeparator\", buttonText: \"buttonText\", views: \"views\", plugins: \"plugins\", schedulerLicenseKey: \"schedulerLicenseKey\", resources: \"resources\", resourceLabelText: \"resourceLabelText\", resourceOrder: \"resourceOrder\", filterResourcesWithEvents: \"filterResourcesWithEvents\", resourceText: \"resourceText\", resourceGroupField: \"resourceGroupField\", resourceGroupText: \"resourceGroupText\", resourceAreaWidth: \"resourceAreaWidth\", resourceColumns: \"resourceColumns\", resourcesInitiallyExpanded: \"resourcesInitiallyExpanded\", slotWidth: \"slotWidth\", datesAboveResources: \"datesAboveResources\", googleCalendarApiKey: \"googleCalendarApiKey\", refetchResourcesOnNavigate: \"refetchResourcesOnNavigate\", eventResourceEditable: \"eventResourceEditable\" }, outputs: { windowResize: \"windowResize\", dateClick: \"dateClick\", eventClick: \"eventClick\", eventMouseEnter: \"eventMouseEnter\", eventMouseLeave: \"eventMouseLeave\", select: \"select\", unselect: \"unselect\", loading: \"loading\", eventPositioned: \"eventPositioned\", eventDragStart: \"eventDragStart\", eventDragStop: \"eventDragStop\", eventDrop: \"eventDrop\", eventResizeStart: \"eventResizeStart\", eventResizeStop: \"eventResizeStop\", eventResize: \"eventResize\", drop: \"drop\", eventReceive: \"eventReceive\", eventLeave: \"eventLeave\", _destroyed: \"_destroyed\", navLinkDayClick: \"navLinkDayClick\", navLinkWeekClick: \"navLinkWeekClick\", viewSkeletonRender: \"viewSkeletonRender\", viewSkeletonDestroy: \"viewSkeletonDestroy\", datesRender: \"datesRender\", datesDestroy: \"datesDestroy\", dayRender: \"dayRender\", eventRender: \"eventRender\", eventDestroy: \"eventDestroy\", resourceRender: \"resourceRender\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 0, vars: 0, template: function FullCalendarComponent_Template(rf, ctx) { }, encapsulation: 2 });\nFullCalendarComponent.ctorParameters = () => [\n    { type: ElementRef }\n];\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"deepChangeDetection\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"header\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"footer\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"customButtons\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"buttonIcons\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"themeSystem\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"bootstrapFontAwesome\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"firstDay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"dir\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"weekends\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Array)\n], FullCalendarComponent.prototype, \"hiddenDays\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"fixedWeekCount\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"weekNumbers\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"weekNumbersWithinDays\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"weekNumberCalculation\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"businessHours\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"showNonCurrentDates\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"height\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"contentHeight\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"aspectRatio\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"handleWindowResize\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"windowResizeDelay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventLimit\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventLimitClick\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"timeZone\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"now\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"defaultView\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"allDaySlot\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"allDayText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"slotDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"slotLabelFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"slotLabelInterval\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"snapDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"scrollTime\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"minTime\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"maxTime\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"slotEventOverlap\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"listDayFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"listDayAltFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"noEventsMessage\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"defaultDate\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"nowIndicator\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"visibleRange\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"validRange\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"dateIncrement\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"dateAlignment\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"duration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"dayCount\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Array)\n], FullCalendarComponent.prototype, \"locales\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"locale\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventTimeFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"columnHeader\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"columnHeaderFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"columnHeaderText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"columnHeaderHtml\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"titleFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"weekLabel\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"displayEventTime\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"displayEventEnd\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventLimitText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"dayPopoverFormat\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"navLinks\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"selectable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"selectMirror\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"unselectAuto\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"unselectCancel\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"defaultAllDayEventDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"defaultTimedEventDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"cmdFormatter\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"defaultRangeSeparator\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"selectConstraint\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"selectOverlap\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"selectAllow\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"selectMinDistance\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"editable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"eventStartEditable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"eventDurationEditable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventConstraint\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventOverlap\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventAllow\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventClassName\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventClassNames\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"eventBackgroundColor\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"eventBorderColor\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"eventTextColor\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"eventColor\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"events\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Array)\n], FullCalendarComponent.prototype, \"eventSources\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"allDayDefault\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"startParam\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"endParam\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"lazyFetching\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"nextDayThreshold\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventOrder\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"rerenderDelay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"dragRevertDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"dragScroll\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"longPressDelay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"eventLongPressDelay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"droppable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"dropAccept\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventDataTransform\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"allDayMaintainDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"eventResizableFromStart\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"timeGridEventMinHeight\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"allDayHtml\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"eventDragMinDistance\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventSourceFailure\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventSourceSuccess\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"forceEventDuration\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"progressiveEventRendering\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], FullCalendarComponent.prototype, \"selectLongPressDelay\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"timeZoneParam\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"titleRangeSeparator\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"buttonText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"views\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Array)\n], FullCalendarComponent.prototype, \"plugins\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"schedulerLicenseKey\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resources\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"resourceLabelText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceOrder\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"filterResourcesWithEvents\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceGroupField\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceGroupText\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceAreaWidth\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceColumns\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourcesInitiallyExpanded\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"slotWidth\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"datesAboveResources\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], FullCalendarComponent.prototype, \"googleCalendarApiKey\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"refetchResourcesOnNavigate\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Boolean)\n], FullCalendarComponent.prototype, \"eventResourceEditable\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"windowResize\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"dateClick\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventClick\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventMouseEnter\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventMouseLeave\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"select\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"unselect\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"loading\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventPositioned\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventDragStart\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventDragStop\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventDrop\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventResizeStart\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventResizeStop\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventResize\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"drop\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventReceive\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventLeave\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"_destroyed\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"navLinkDayClick\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"navLinkWeekClick\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"viewSkeletonRender\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"viewSkeletonDestroy\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"datesRender\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"datesDestroy\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"dayRender\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventRender\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"eventDestroy\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], FullCalendarComponent.prototype, \"resourceRender\", void 0);\nFullCalendarComponent = __decorate([ __metadata(\"design:paramtypes\", [ElementRef])\n], FullCalendarComponent);\n\nlet FullCalendarModule = class FullCalendarModule {\n};\nFullCalendarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: FullCalendarModule });\nFullCalendarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function FullCalendarModule_Factory(t) { return new (t || FullCalendarModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FullCalendarComponent, [{\n        type: Component,\n        args: [{\n                selector: 'full-calendar',\n                template: ''\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { windowResize: [{\n            type: Output\n        }], dateClick: [{\n            type: Output\n        }], eventClick: [{\n            type: Output\n        }], eventMouseEnter: [{\n            type: Output\n        }], eventMouseLeave: [{\n            type: Output\n        }], select: [{\n            type: Output\n        }], unselect: [{\n            type: Output\n        }], loading: [{\n            type: Output\n        }], eventPositioned: [{\n            type: Output\n        }], eventDragStart: [{\n            type: Output\n        }], eventDragStop: [{\n            type: Output\n        }], eventDrop: [{\n            type: Output\n        }], eventResizeStart: [{\n            type: Output\n        }], eventResizeStop: [{\n            type: Output\n        }], eventResize: [{\n            type: Output\n        }], drop: [{\n            type: Output\n        }], eventReceive: [{\n            type: Output\n        }], eventLeave: [{\n            type: Output\n        }], _destroyed: [{\n            type: Output\n        }], navLinkDayClick: [{\n            type: Output\n        }], navLinkWeekClick: [{\n            type: Output\n        }], viewSkeletonRender: [{\n            type: Output\n        }], viewSkeletonDestroy: [{\n            type: Output\n        }], datesRender: [{\n            type: Output\n        }], datesDestroy: [{\n            type: Output\n        }], dayRender: [{\n            type: Output\n        }], eventRender: [{\n            type: Output\n        }], eventDestroy: [{\n            type: Output\n        }], resourceRender: [{\n            type: Output\n        }], deepChangeDetection: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }], footer: [{\n            type: Input\n        }], customButtons: [{\n            type: Input\n        }], buttonIcons: [{\n            type: Input\n        }], themeSystem: [{\n            type: Input\n        }], bootstrapFontAwesome: [{\n            type: Input\n        }], firstDay: [{\n            type: Input\n        }], dir: [{\n            type: Input\n        }], weekends: [{\n            type: Input\n        }], hiddenDays: [{\n            type: Input\n        }], fixedWeekCount: [{\n            type: Input\n        }], weekNumbers: [{\n            type: Input\n        }], weekNumbersWithinDays: [{\n            type: Input\n        }], weekNumberCalculation: [{\n            type: Input\n        }], businessHours: [{\n            type: Input\n        }], showNonCurrentDates: [{\n            type: Input\n        }], height: [{\n            type: Input\n        }], contentHeight: [{\n            type: Input\n        }], aspectRatio: [{\n            type: Input\n        }], handleWindowResize: [{\n            type: Input\n        }], windowResizeDelay: [{\n            type: Input\n        }], eventLimit: [{\n            type: Input\n        }], eventLimitClick: [{\n            type: Input\n        }], timeZone: [{\n            type: Input\n        }], now: [{\n            type: Input\n        }], defaultView: [{\n            type: Input\n        }], allDaySlot: [{\n            type: Input\n        }], allDayText: [{\n            type: Input\n        }], slotDuration: [{\n            type: Input\n        }], slotLabelFormat: [{\n            type: Input\n        }], slotLabelInterval: [{\n            type: Input\n        }], snapDuration: [{\n            type: Input\n        }], scrollTime: [{\n            type: Input\n        }], minTime: [{\n            type: Input\n        }], maxTime: [{\n            type: Input\n        }], slotEventOverlap: [{\n            type: Input\n        }], listDayFormat: [{\n            type: Input\n        }], listDayAltFormat: [{\n            type: Input\n        }], noEventsMessage: [{\n            type: Input\n        }], defaultDate: [{\n            type: Input\n        }], nowIndicator: [{\n            type: Input\n        }], visibleRange: [{\n            type: Input\n        }], validRange: [{\n            type: Input\n        }], dateIncrement: [{\n            type: Input\n        }], dateAlignment: [{\n            type: Input\n        }], duration: [{\n            type: Input\n        }], dayCount: [{\n            type: Input\n        }], locales: [{\n            type: Input\n        }], locale: [{\n            type: Input\n        }], eventTimeFormat: [{\n            type: Input\n        }], columnHeader: [{\n            type: Input\n        }], columnHeaderFormat: [{\n            type: Input\n        }], columnHeaderText: [{\n            type: Input\n        }], columnHeaderHtml: [{\n            type: Input\n        }], titleFormat: [{\n            type: Input\n        }], weekLabel: [{\n            type: Input\n        }], displayEventTime: [{\n            type: Input\n        }], displayEventEnd: [{\n            type: Input\n        }], eventLimitText: [{\n            type: Input\n        }], dayPopoverFormat: [{\n            type: Input\n        }], navLinks: [{\n            type: Input\n        }], selectable: [{\n            type: Input\n        }], selectMirror: [{\n            type: Input\n        }], unselectAuto: [{\n            type: Input\n        }], unselectCancel: [{\n            type: Input\n        }], defaultAllDayEventDuration: [{\n            type: Input\n        }], defaultTimedEventDuration: [{\n            type: Input\n        }], cmdFormatter: [{\n            type: Input\n        }], defaultRangeSeparator: [{\n            type: Input\n        }], selectConstraint: [{\n            type: Input\n        }], selectOverlap: [{\n            type: Input\n        }], selectAllow: [{\n            type: Input\n        }], selectMinDistance: [{\n            type: Input\n        }], editable: [{\n            type: Input\n        }], eventStartEditable: [{\n            type: Input\n        }], eventDurationEditable: [{\n            type: Input\n        }], eventConstraint: [{\n            type: Input\n        }], eventOverlap: [{\n            type: Input\n        }], eventAllow: [{\n            type: Input\n        }], eventClassName: [{\n            type: Input\n        }], eventClassNames: [{\n            type: Input\n        }], eventBackgroundColor: [{\n            type: Input\n        }], eventBorderColor: [{\n            type: Input\n        }], eventTextColor: [{\n            type: Input\n        }], eventColor: [{\n            type: Input\n        }], events: [{\n            type: Input\n        }], eventSources: [{\n            type: Input\n        }], allDayDefault: [{\n            type: Input\n        }], startParam: [{\n            type: Input\n        }], endParam: [{\n            type: Input\n        }], lazyFetching: [{\n            type: Input\n        }], nextDayThreshold: [{\n            type: Input\n        }], eventOrder: [{\n            type: Input\n        }], rerenderDelay: [{\n            type: Input\n        }], dragRevertDuration: [{\n            type: Input\n        }], dragScroll: [{\n            type: Input\n        }], longPressDelay: [{\n            type: Input\n        }], eventLongPressDelay: [{\n            type: Input\n        }], droppable: [{\n            type: Input\n        }], dropAccept: [{\n            type: Input\n        }], eventDataTransform: [{\n            type: Input\n        }], allDayMaintainDuration: [{\n            type: Input\n        }], eventResizableFromStart: [{\n            type: Input\n        }], timeGridEventMinHeight: [{\n            type: Input\n        }], allDayHtml: [{\n            type: Input\n        }], eventDragMinDistance: [{\n            type: Input\n        }], eventSourceFailure: [{\n            type: Input\n        }], eventSourceSuccess: [{\n            type: Input\n        }], forceEventDuration: [{\n            type: Input\n        }], progressiveEventRendering: [{\n            type: Input\n        }], selectLongPressDelay: [{\n            type: Input\n        }], timeZoneParam: [{\n            type: Input\n        }], titleRangeSeparator: [{\n            type: Input\n        }], buttonText: [{\n            type: Input\n        }], views: [{\n            type: Input\n        }], plugins: [{\n            type: Input\n        }], schedulerLicenseKey: [{\n            type: Input\n        }], resources: [{\n            type: Input\n        }], resourceLabelText: [{\n            type: Input\n        }], resourceOrder: [{\n            type: Input\n        }], filterResourcesWithEvents: [{\n            type: Input\n        }], resourceText: [{\n            type: Input\n        }], resourceGroupField: [{\n            type: Input\n        }], resourceGroupText: [{\n            type: Input\n        }], resourceAreaWidth: [{\n            type: Input\n        }], resourceColumns: [{\n            type: Input\n        }], resourcesInitiallyExpanded: [{\n            type: Input\n        }], slotWidth: [{\n            type: Input\n        }], datesAboveResources: [{\n            type: Input\n        }], googleCalendarApiKey: [{\n            type: Input\n        }], refetchResourcesOnNavigate: [{\n            type: Input\n        }], eventResourceEditable: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FullCalendarModule, { declarations: [FullCalendarComponent], exports: [FullCalendarComponent] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FullCalendarModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [FullCalendarComponent],\n                imports: [],\n                exports: [FullCalendarComponent]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of fullcalendar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FullCalendarComponent, FullCalendarModule };\n\n//# sourceMappingURL=fullcalendar-angular.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CalendarComponent } from './calendar.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CalendarComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CalendarRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CalendarRoutingModule } from './calendar-routing.module';\r\nimport { FullCalendarModule } from '@fullcalendar/angular';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { OwlDateTimeModule, OwlNativeDateTimeModule } from 'ng-pick-datetime';\r\nimport { CalendarComponent } from './calendar.component';\r\nimport { FormDialogComponent as calFormComponent } from './dialogs/form-dialog/form-dialog.component';\r\nimport { CalendarService } from './calendar.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    CalendarRoutingModule,\r\n    FullCalendarModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSelectModule,\r\n    MatCheckboxModule,\r\n    MatInputModule,\r\n    MatDialogModule,\r\n    MatTooltipModule,\r\n    MatDatepickerModule,\r\n    MatSnackBarModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatRadioModule,\r\n    MatMenuModule,\r\n    OwlDateTimeModule,\r\n    OwlNativeDateTimeModule,\r\n  ],\r\n  declarations: [CalendarComponent, calFormComponent],\r\n  providers: [CalendarService],\r\n})\r\nexport class CalendarsModule {}\r\n","/*!\nFullCalendar Core Package v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\n// Creating\n// ----------------------------------------------------------------------------------------------------------------\nvar elementPropHash = {\n    className: true,\n    colSpan: true,\n    rowSpan: true\n};\nvar containerTagHash = {\n    '<tr': 'tbody',\n    '<td': 'tr'\n};\nfunction createElement(tagName, attrs, content) {\n    var el = document.createElement(tagName);\n    if (attrs) {\n        for (var attrName in attrs) {\n            if (attrName === 'style') {\n                applyStyle(el, attrs[attrName]);\n            }\n            else if (elementPropHash[attrName]) {\n                el[attrName] = attrs[attrName];\n            }\n            else {\n                el.setAttribute(attrName, attrs[attrName]);\n            }\n        }\n    }\n    if (typeof content === 'string') {\n        el.innerHTML = content; // shortcut. no need to process HTML in any way\n    }\n    else if (content != null) {\n        appendToElement(el, content);\n    }\n    return el;\n}\nfunction htmlToElement(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.firstChild;\n}\nfunction htmlToElements(html) {\n    return Array.prototype.slice.call(htmlToNodeList(html));\n}\nfunction htmlToNodeList(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.childNodes;\n}\n// assumes html already trimmed and tag names are lowercase\nfunction computeContainerTag(html) {\n    return containerTagHash[html.substr(0, 3) // faster than using regex\n    ] || 'div';\n}\nfunction appendToElement(el, content) {\n    var childNodes = normalizeContent(content);\n    for (var i = 0; i < childNodes.length; i++) {\n        el.appendChild(childNodes[i]);\n    }\n}\nfunction prependToElement(parent, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n    for (var i = 0; i < newEls.length; i++) {\n        parent.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction insertAfterElement(refEl, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = refEl.nextSibling || null;\n    for (var i = 0; i < newEls.length; i++) {\n        refEl.parentNode.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction normalizeContent(content) {\n    var els;\n    if (typeof content === 'string') {\n        els = htmlToElements(content);\n    }\n    else if (content instanceof Node) {\n        els = [content];\n    }\n    else { // Node[] or NodeList\n        els = Array.prototype.slice.call(content);\n    }\n    return els;\n}\nfunction removeElement(el) {\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n}\n// Querying\n// ----------------------------------------------------------------------------------------------------------------\n// from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\nvar matchesMethod = Element.prototype.matches ||\n    Element.prototype.matchesSelector ||\n    Element.prototype.msMatchesSelector;\nvar closestMethod = Element.prototype.closest || function (selector) {\n    // polyfill\n    var el = this;\n    if (!document.documentElement.contains(el)) {\n        return null;\n    }\n    do {\n        if (elementMatches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n};\nfunction elementClosest(el, selector) {\n    return closestMethod.call(el, selector);\n}\nfunction elementMatches(el, selector) {\n    return matchesMethod.call(el, selector);\n}\n// accepts multiple subject els\n// returns a real array. good for methods like forEach\nfunction findElements(container, selector) {\n    var containers = container instanceof HTMLElement ? [container] : container;\n    var allMatches = [];\n    for (var i = 0; i < containers.length; i++) {\n        var matches = containers[i].querySelectorAll(selector);\n        for (var j = 0; j < matches.length; j++) {\n            allMatches.push(matches[j]);\n        }\n    }\n    return allMatches;\n}\n// accepts multiple subject els\n// only queries direct child elements\nfunction findChildren(parent, selector) {\n    var parents = parent instanceof HTMLElement ? [parent] : parent;\n    var allMatches = [];\n    for (var i = 0; i < parents.length; i++) {\n        var childNodes = parents[i].children; // only ever elements\n        for (var j = 0; j < childNodes.length; j++) {\n            var childNode = childNodes[j];\n            if (!selector || elementMatches(childNode, selector)) {\n                allMatches.push(childNode);\n            }\n        }\n    }\n    return allMatches;\n}\n// Attributes\n// ----------------------------------------------------------------------------------------------------------------\nfunction forceClassName(el, className, bool) {\n    if (bool) {\n        el.classList.add(className);\n    }\n    else {\n        el.classList.remove(className);\n    }\n}\n// Style\n// ----------------------------------------------------------------------------------------------------------------\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\nfunction applyStyle(el, props) {\n    for (var propName in props) {\n        applyStyleProp(el, propName, props[propName]);\n    }\n}\nfunction applyStyleProp(el, name, val) {\n    if (val == null) {\n        el.style[name] = '';\n    }\n    else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n        el.style[name] = val + 'px';\n    }\n    else {\n        el.style[name] = val;\n    }\n}\n\nfunction pointInsideRect(point, rect) {\n    return point.left >= rect.left &&\n        point.left < rect.right &&\n        point.top >= rect.top &&\n        point.top < rect.bottom;\n}\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n    var res = {\n        left: Math.max(rect1.left, rect2.left),\n        right: Math.min(rect1.right, rect2.right),\n        top: Math.max(rect1.top, rect2.top),\n        bottom: Math.min(rect1.bottom, rect2.bottom)\n    };\n    if (res.left < res.right && res.top < res.bottom) {\n        return res;\n    }\n    return false;\n}\nfunction translateRect(rect, deltaX, deltaY) {\n    return {\n        left: rect.left + deltaX,\n        right: rect.right + deltaX,\n        top: rect.top + deltaY,\n        bottom: rect.bottom + deltaY\n    };\n}\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n    return {\n        left: Math.min(Math.max(point.left, rect.left), rect.right),\n        top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n    };\n}\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n    return {\n        left: (rect.left + rect.right) / 2,\n        top: (rect.top + rect.bottom) / 2\n    };\n}\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n    return {\n        left: point1.left - point2.left,\n        top: point1.top - point2.top\n    };\n}\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\nvar isRtlScrollbarOnLeft = null;\nfunction getIsRtlScrollbarOnLeft() {\n    if (isRtlScrollbarOnLeft === null) {\n        isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n    }\n    return isRtlScrollbarOnLeft;\n}\nfunction computeIsRtlScrollbarOnLeft() {\n    var outerEl = createElement('div', {\n        style: {\n            position: 'absolute',\n            top: -1000,\n            left: 0,\n            border: 0,\n            padding: 0,\n            overflow: 'scroll',\n            direction: 'rtl'\n        }\n    }, '<div></div>');\n    document.body.appendChild(outerEl);\n    var innerEl = outerEl.firstChild;\n    var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n    removeElement(outerEl);\n    return res;\n}\n// The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\nfunction sanitizeScrollbarWidth(width) {\n    width = Math.max(0, width); // no negatives\n    width = Math.round(width);\n    return width;\n}\n\nfunction computeEdges(el, getPadding) {\n    if (getPadding === void 0) { getPadding = false; }\n    var computedStyle = window.getComputedStyle(el);\n    var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n    var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n    var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n    var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n    // must use offset(Width|Height) because compatible with client(Width|Height)\n    var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n    var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n    var res = {\n        borderLeft: borderLeft,\n        borderRight: borderRight,\n        borderTop: borderTop,\n        borderBottom: borderBottom,\n        scrollbarBottom: scrollbarBottom,\n        scrollbarLeft: 0,\n        scrollbarRight: 0\n    };\n    if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n        res.scrollbarLeft = scrollbarLeftRight;\n    }\n    else {\n        res.scrollbarRight = scrollbarLeftRight;\n    }\n    if (getPadding) {\n        res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n        res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n        res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n        res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n    }\n    return res;\n}\nfunction computeInnerRect(el, goWithinPadding) {\n    if (goWithinPadding === void 0) { goWithinPadding = false; }\n    var outerRect = computeRect(el);\n    var edges = computeEdges(el, goWithinPadding);\n    var res = {\n        left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n        right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n        top: outerRect.top + edges.borderTop,\n        bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n    };\n    if (goWithinPadding) {\n        res.left += edges.paddingLeft;\n        res.right -= edges.paddingRight;\n        res.top += edges.paddingTop;\n        res.bottom -= edges.paddingBottom;\n    }\n    return res;\n}\nfunction computeRect(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        right: rect.right + window.pageXOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n}\nfunction computeViewportRect() {\n    return {\n        left: window.pageXOffset,\n        right: window.pageXOffset + document.documentElement.clientWidth,\n        top: window.pageYOffset,\n        bottom: window.pageYOffset + document.documentElement.clientHeight\n    };\n}\nfunction computeHeightAndMargins(el) {\n    return el.getBoundingClientRect().height + computeVMargins(el);\n}\nfunction computeVMargins(el) {\n    var computed = window.getComputedStyle(el);\n    return parseInt(computed.marginTop, 10) +\n        parseInt(computed.marginBottom, 10);\n}\n// does not return window\nfunction getClippingParents(el) {\n    var parents = [];\n    while (el instanceof HTMLElement) { // will stop when gets to document or null\n        var computedStyle = window.getComputedStyle(el);\n        if (computedStyle.position === 'fixed') {\n            break;\n        }\n        if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n            parents.push(el);\n        }\n        el = el.parentNode;\n    }\n    return parents;\n}\nfunction computeClippingRect(el) {\n    return getClippingParents(el)\n        .map(function (el) {\n        return computeInnerRect(el);\n    })\n        .concat(computeViewportRect())\n        .reduce(function (rect0, rect1) {\n        return intersectRects(rect0, rect1) || rect1; // should always intersect\n    });\n}\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n    ev.preventDefault();\n}\n// Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\nfunction listenBySelector(container, eventType, selector, handler) {\n    function realHandler(ev) {\n        var matchedChild = elementClosest(ev.target, selector);\n        if (matchedChild) {\n            handler.call(matchedChild, ev, matchedChild);\n        }\n    }\n    container.addEventListener(eventType, realHandler);\n    return function () {\n        container.removeEventListener(eventType, realHandler);\n    };\n}\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n    var currentMatchedChild;\n    return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n        if (matchedChild !== currentMatchedChild) {\n            currentMatchedChild = matchedChild;\n            onMouseEnter(ev, matchedChild);\n            var realOnMouseLeave_1 = function (ev) {\n                currentMatchedChild = null;\n                onMouseLeave(ev, matchedChild);\n                matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n            };\n            // listen to the next mouseleave, and then unattach\n            matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n        }\n    });\n}\n// Animation\n// ----------------------------------------------------------------------------------------------------------------\nvar transitionEventNames = [\n    'webkitTransitionEnd',\n    'otransitionend',\n    'oTransitionEnd',\n    'msTransitionEnd',\n    'transitionend'\n];\n// triggered only when the next single subsequent transition finishes\nfunction whenTransitionDone(el, callback) {\n    var realCallback = function (ev) {\n        callback(ev);\n        transitionEventNames.forEach(function (eventName) {\n            el.removeEventListener(eventName, realCallback);\n        });\n    };\n    transitionEventNames.forEach(function (eventName) {\n        el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n    });\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n// Adding\nfunction addWeeks(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n * 7;\n    return arrayToUtcDate(a);\n}\nfunction addDays(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n;\n    return arrayToUtcDate(a);\n}\nfunction addMs(m, n) {\n    var a = dateToUtcArray(m);\n    a[6] += n;\n    return arrayToUtcDate(a);\n}\n// Diffing (all return floats)\nfunction diffWeeks(m0, m1) {\n    return diffDays(m0, m1) / 7;\n}\nfunction diffDays(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\nfunction diffHours(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\nfunction diffMinutes(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\nfunction diffSeconds(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / 1000;\n}\nfunction diffDayAndTime(m0, m1) {\n    var m0day = startOfDay(m0);\n    var m1day = startOfDay(m1);\n    return {\n        years: 0,\n        months: 0,\n        days: Math.round(diffDays(m0day, m1day)),\n        milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf())\n    };\n}\n// Diffing Whole Units\nfunction diffWholeWeeks(m0, m1) {\n    var d = diffWholeDays(m0, m1);\n    if (d !== null && d % 7 === 0) {\n        return d / 7;\n    }\n    return null;\n}\nfunction diffWholeDays(m0, m1) {\n    if (timeAsMs(m0) === timeAsMs(m1)) {\n        return Math.round(diffDays(m0, m1));\n    }\n    return null;\n}\n// Start-Of\nfunction startOfDay(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate()\n    ]);\n}\nfunction startOfHour(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours()\n    ]);\n}\nfunction startOfMinute(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes()\n    ]);\n}\nfunction startOfSecond(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n        m.getUTCSeconds()\n    ]);\n}\n// Week Computation\nfunction weekOfYear(marker, dow, doy) {\n    var y = marker.getUTCFullYear();\n    var w = weekOfGivenYear(marker, y, dow, doy);\n    if (w < 1) {\n        return weekOfGivenYear(marker, y - 1, dow, doy);\n    }\n    var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n    if (nextW >= 1) {\n        return Math.min(w, nextW);\n    }\n    return w;\n}\nfunction weekOfGivenYear(marker, year, dow, doy) {\n    var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n    var dayStart = startOfDay(marker);\n    var days = Math.round(diffDays(firstWeekStart, dayStart));\n    return Math.floor(days / 7) + 1; // zero-indexed\n}\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n    var fwd = 7 + dow - doy;\n    // first-week day local weekday -- which local weekday is fwd\n    var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n    return -fwdlw + fwd - 1;\n}\n// Array Conversion\nfunction dateToLocalArray(date) {\n    return [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    ];\n}\nfunction arrayToLocalDate(a) {\n    return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n    a[3] || 0, a[4] || 0, a[5] || 0);\n}\nfunction dateToUtcArray(date) {\n    return [\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds(),\n        date.getUTCMilliseconds()\n    ];\n}\nfunction arrayToUtcDate(a) {\n    // according to web standards (and Safari), a month index is required.\n    // massage if only given a year.\n    if (a.length === 1) {\n        a = a.concat([0]);\n    }\n    return new Date(Date.UTC.apply(Date, a));\n}\n// Other Utils\nfunction isValidDate(m) {\n    return !isNaN(m.valueOf());\n}\nfunction timeAsMs(m) {\n    return m.getUTCHours() * 1000 * 60 * 60 +\n        m.getUTCMinutes() * 1000 * 60 +\n        m.getUTCSeconds() * 1000 +\n        m.getUTCMilliseconds();\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n// Parsing and Creation\nfunction createDuration(input, unit) {\n    var _a;\n    if (typeof input === 'string') {\n        return parseString(input);\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return normalizeObject(input);\n    }\n    else if (typeof input === 'number') {\n        return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n    }\n    else {\n        return null;\n    }\n}\nfunction parseString(s) {\n    var m = PARSE_RE.exec(s);\n    if (m) {\n        var sign = m[1] ? -1 : 1;\n        return {\n            years: 0,\n            months: 0,\n            days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n            milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                (m[6] ? parseInt(m[6], 10) : 0) // ms\n            )\n        };\n    }\n    return null;\n}\nfunction normalizeObject(obj) {\n    return {\n        years: obj.years || obj.year || 0,\n        months: obj.months || obj.month || 0,\n        days: (obj.days || obj.day || 0) +\n            getWeeksFromInput(obj) * 7,\n        milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n            (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n            (obj.seconds || obj.second || 0) * 1000 + // seconds\n            (obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n    };\n}\nfunction getWeeksFromInput(obj) {\n    return obj.weeks || obj.week || 0;\n}\n// Equality\nfunction durationsEqual(d0, d1) {\n    return d0.years === d1.years &&\n        d0.months === d1.months &&\n        d0.days === d1.days &&\n        d0.milliseconds === d1.milliseconds;\n}\nfunction isSingleDay(dur) {\n    return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n}\n// Simple Math\nfunction addDurations(d0, d1) {\n    return {\n        years: d0.years + d1.years,\n        months: d0.months + d1.months,\n        days: d0.days + d1.days,\n        milliseconds: d0.milliseconds + d1.milliseconds\n    };\n}\nfunction subtractDurations(d1, d0) {\n    return {\n        years: d1.years - d0.years,\n        months: d1.months - d0.months,\n        days: d1.days - d0.days,\n        milliseconds: d1.milliseconds - d0.milliseconds\n    };\n}\nfunction multiplyDuration(d, n) {\n    return {\n        years: d.years * n,\n        months: d.months * n,\n        days: d.days * n,\n        milliseconds: d.milliseconds * n\n    };\n}\n// Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\nfunction asRoughYears(dur) {\n    return asRoughDays(dur) / 365;\n}\nfunction asRoughMonths(dur) {\n    return asRoughDays(dur) / 30;\n}\nfunction asRoughDays(dur) {\n    return asRoughMs(dur) / 864e5;\n}\nfunction asRoughMinutes(dur) {\n    return asRoughMs(dur) / (1000 * 60);\n}\nfunction asRoughSeconds(dur) {\n    return asRoughMs(dur) / 1000;\n}\nfunction asRoughMs(dur) {\n    return dur.years * (365 * 864e5) +\n        dur.months * (30 * 864e5) +\n        dur.days * 864e5 +\n        dur.milliseconds;\n}\n// Advanced Math\nfunction wholeDivideDurations(numerator, denominator) {\n    var res = null;\n    for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n        var unit = INTERNAL_UNITS[i];\n        if (denominator[unit]) {\n            var localRes = numerator[unit] / denominator[unit];\n            if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                return null;\n            }\n            res = localRes;\n        }\n        else if (numerator[unit]) {\n            // needs to divide by something but can't!\n            return null;\n        }\n    }\n    return res;\n}\nfunction greatestDurationDenominator(dur, dontReturnWeeks) {\n    var ms = dur.milliseconds;\n    if (ms) {\n        if (ms % 1000 !== 0) {\n            return { unit: 'millisecond', value: ms };\n        }\n        if (ms % (1000 * 60) !== 0) {\n            return { unit: 'second', value: ms / 1000 };\n        }\n        if (ms % (1000 * 60 * 60) !== 0) {\n            return { unit: 'minute', value: ms / (1000 * 60) };\n        }\n        if (ms) {\n            return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n        }\n    }\n    if (dur.days) {\n        if (!dontReturnWeeks && dur.days % 7 === 0) {\n            return { unit: 'week', value: dur.days / 7 };\n        }\n        return { unit: 'day', value: dur.days };\n    }\n    if (dur.months) {\n        return { unit: 'month', value: dur.months };\n    }\n    if (dur.years) {\n        return { unit: 'year', value: dur.years };\n    }\n    return { unit: 'millisecond', value: 0 };\n}\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEl, scrollbarWidths) {\n    if (scrollbarWidths.left) {\n        applyStyle(rowEl, {\n            borderLeftWidth: 1,\n            marginLeft: scrollbarWidths.left - 1\n        });\n    }\n    if (scrollbarWidths.right) {\n        applyStyle(rowEl, {\n            borderRightWidth: 1,\n            marginRight: scrollbarWidths.right - 1\n        });\n    }\n}\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEl) {\n    applyStyle(rowEl, {\n        marginLeft: '',\n        marginRight: '',\n        borderLeftWidth: '',\n        borderRightWidth: ''\n    });\n}\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n    document.body.classList.add('fc-not-allowed');\n}\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n    document.body.classList.remove('fc-not-allowed');\n}\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n    // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n    // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n    var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n    var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n    var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n    var flexOffsets = []; // amount of vertical space it takes up\n    var flexHeights = []; // actual css height\n    var usedHeight = 0;\n    undistributeHeight(els); // give all elements their natural height\n    // find elements that are below the recommended height (expandable).\n    // important to query for heights in a single first pass (to avoid reflow oscillation).\n    els.forEach(function (el, i) {\n        var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n        var naturalHeight = el.getBoundingClientRect().height;\n        var naturalOffset = naturalHeight + computeVMargins(el);\n        if (naturalOffset < minOffset) {\n            flexEls.push(el);\n            flexOffsets.push(naturalOffset);\n            flexHeights.push(naturalHeight);\n        }\n        else {\n            // this element stretches past recommended height (non-expandable). mark the space as occupied.\n            usedHeight += naturalOffset;\n        }\n    });\n    // readjust the recommended height to only consider the height available to non-maxed-out rows.\n    if (shouldRedistribute) {\n        availableHeight -= usedHeight;\n        minOffset1 = Math.floor(availableHeight / flexEls.length);\n        minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n    }\n    // assign heights to all expandable elements\n    flexEls.forEach(function (el, i) {\n        var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n        var naturalOffset = flexOffsets[i];\n        var naturalHeight = flexHeights[i];\n        var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n        if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n            el.style.height = newHeight + 'px';\n        }\n    });\n}\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n    els.forEach(function (el) {\n        el.style.height = '';\n    });\n}\n// Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n    var maxInnerWidth = 0;\n    els.forEach(function (el) {\n        var innerEl = el.firstChild; // hopefully an element\n        if (innerEl instanceof HTMLElement) {\n            var innerWidth_1 = innerEl.getBoundingClientRect().width;\n            if (innerWidth_1 > maxInnerWidth) {\n                maxInnerWidth = innerWidth_1;\n            }\n        }\n    });\n    maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n    els.forEach(function (el) {\n        el.style.width = maxInnerWidth + 'px';\n    });\n    return maxInnerWidth;\n}\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n    // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n    var reflowStyleProps = {\n        position: 'relative',\n        left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n    };\n    applyStyle(outerEl, reflowStyleProps);\n    applyStyle(innerEl, reflowStyleProps);\n    var diff = // grab the dimensions\n     outerEl.getBoundingClientRect().height -\n        innerEl.getBoundingClientRect().height;\n    // undo hack\n    var resetStyleProps = { position: '', left: '' };\n    applyStyle(outerEl, resetStyleProps);\n    applyStyle(innerEl, resetStyleProps);\n    return diff;\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventSelection(el) {\n    el.classList.add('fc-unselectable');\n    el.addEventListener('selectstart', preventDefault);\n}\nfunction allowSelection(el) {\n    el.classList.remove('fc-unselectable');\n    el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventContextMenu(el) {\n    el.addEventListener('contextmenu', preventDefault);\n}\nfunction allowContextMenu(el) {\n    el.removeEventListener('contextmenu', preventDefault);\n}\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\nfunction parseFieldSpecs(input) {\n    var specs = [];\n    var tokens = [];\n    var i;\n    var token;\n    if (typeof input === 'string') {\n        tokens = input.split(/\\s*,\\s*/);\n    }\n    else if (typeof input === 'function') {\n        tokens = [input];\n    }\n    else if (Array.isArray(input)) {\n        tokens = input;\n    }\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        if (typeof token === 'string') {\n            specs.push(token.charAt(0) === '-' ?\n                { field: token.substring(1), order: -1 } :\n                { field: token, order: 1 });\n        }\n        else if (typeof token === 'function') {\n            specs.push({ func: token });\n        }\n    }\n    return specs;\n}\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n    var i;\n    var cmp;\n    for (i = 0; i < fieldSpecs.length; i++) {\n        cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n        if (cmp) {\n            return cmp;\n        }\n    }\n    return 0;\n}\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n    if (fieldSpec.func) {\n        return fieldSpec.func(obj0, obj1);\n    }\n    return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n        * (fieldSpec.order || 1);\n}\nfunction flexibleCompare(a, b) {\n    if (!a && !b) {\n        return 0;\n    }\n    if (b == null) {\n        return -1;\n    }\n    if (a == null) {\n        return 1;\n    }\n    if (typeof a === 'string' || typeof b === 'string') {\n        return String(a).localeCompare(String(b));\n    }\n    return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction capitaliseFirstLetter(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction padStart(val, len) {\n    var s = String(val);\n    return '000'.substr(0, len - s.length) + s;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction compareNumbers(a, b) {\n    return a - b;\n}\nfunction isInt(n) {\n    return n % 1 === 0;\n}\n/* Weird Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction applyAll(functions, thisObj, args) {\n    if (typeof functions === 'function') { // supplied a single function\n        functions = [functions];\n    }\n    if (functions) {\n        var i = void 0;\n        var ret = void 0;\n        for (i = 0; i < functions.length; i++) {\n            ret = functions[i].apply(thisObj, args) || ret;\n        }\n        return ret;\n    }\n}\nfunction firstDefined() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i++) {\n        if (args[i] !== undefined) {\n            return args[i];\n        }\n    }\n}\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait) {\n    var timeout;\n    var args;\n    var context;\n    var timestamp;\n    var result;\n    var later = function () {\n        var last = new Date().valueOf() - timestamp;\n        if (last < wait) {\n            timeout = setTimeout(later, wait - last);\n        }\n        else {\n            timeout = null;\n            result = func.apply(context, args);\n            context = args = null;\n        }\n    };\n    return function () {\n        context = this;\n        args = arguments;\n        timestamp = new Date().valueOf();\n        if (!timeout) {\n            timeout = setTimeout(later, wait);\n        }\n        return result;\n    };\n}\n// Number and Boolean are only types that defaults or not computed for\n// TODO: write more comments\nfunction refineProps(rawProps, processors, defaults, leftoverProps) {\n    if (defaults === void 0) { defaults = {}; }\n    var refined = {};\n    for (var key in processors) {\n        var processor = processors[key];\n        if (rawProps[key] !== undefined) {\n            // found\n            if (processor === Function) {\n                refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n            }\n            else if (processor) { // a refining function?\n                refined[key] = processor(rawProps[key]);\n            }\n            else {\n                refined[key] = rawProps[key];\n            }\n        }\n        else if (defaults[key] !== undefined) {\n            // there's an explicit default\n            refined[key] = defaults[key];\n        }\n        else {\n            // must compute a default\n            if (processor === String) {\n                refined[key] = ''; // empty string is default for String\n            }\n            else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n                refined[key] = null; // assign null for other non-custom processor funcs\n            }\n            else {\n                refined[key] = processor(null); // run the custom processor func\n            }\n        }\n    }\n    if (leftoverProps) {\n        for (var key in rawProps) {\n            if (processors[key] === undefined) {\n                leftoverProps[key] = rawProps[key];\n            }\n        }\n    }\n    return refined;\n}\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\nfunction computeAlignedDayRange(timedRange) {\n    var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n    var start = startOfDay(timedRange.start);\n    var end = addDays(start, dayCnt);\n    return { start: start, end: end };\n}\n// given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n    if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n    var startDay = null;\n    var endDay = null;\n    if (timedRange.end) {\n        endDay = startOfDay(timedRange.end);\n        var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n        // If the end time is actually inclusively part of the next day and is equal to or\n        // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n        // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n        if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n            endDay = addDays(endDay, 1);\n        }\n    }\n    if (timedRange.start) {\n        startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n        // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n        if (endDay && endDay <= startDay) {\n            endDay = addDays(startDay, 1);\n        }\n    }\n    return { start: startDay, end: endDay };\n}\n// spans from one day into another?\nfunction isMultiDayRange(range) {\n    var visibleRange = computeVisibleDayRange(range);\n    return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n    if (largeUnit === 'year') {\n        return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n    }\n    else if (largeUnit === 'month') {\n        return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n    }\n    else {\n        return diffDayAndTime(date0, date1); // returns a duration\n    }\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n    for (var i = 0; i < recurringTypes.length; i++) {\n        var localLeftovers = {};\n        var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n        if (parsed) {\n            var allDay = localLeftovers.allDay;\n            delete localLeftovers.allDay; // remove from leftovers\n            if (allDay == null) {\n                allDay = allDayDefault;\n                if (allDay == null) {\n                    allDay = parsed.allDayGuess;\n                    if (allDay == null) {\n                        allDay = false;\n                    }\n                }\n            }\n            __assign(leftovers, localLeftovers);\n            return {\n                allDay: allDay,\n                duration: parsed.duration,\n                typeData: parsed.typeData,\n                typeId: i\n            };\n        }\n    }\n    return null;\n}\n/*\nEvent MUST have a recurringDef\n*/\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n    var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n    var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n        start: dateEnv.subtract(framingRange.start, duration),\n        end: framingRange.end\n    }, dateEnv);\n    // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n    if (eventDef.allDay) {\n        markers = markers.map(startOfDay);\n    }\n    return markers;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n    var dest = {};\n    var i;\n    var name;\n    var complexObjs;\n    var j;\n    var val;\n    var props;\n    if (complexProps) {\n        for (i = 0; i < complexProps.length; i++) {\n            name = complexProps[i];\n            complexObjs = [];\n            // collect the trailing object values, stopping when a non-object is discovered\n            for (j = propObjs.length - 1; j >= 0; j--) {\n                val = propObjs[j][name];\n                if (typeof val === 'object' && val) { // non-null object\n                    complexObjs.unshift(val);\n                }\n                else if (val !== undefined) {\n                    dest[name] = val; // if there were no objects, this value will be used\n                    break;\n                }\n            }\n            // if the trailing values were objects, use the merged value\n            if (complexObjs.length) {\n                dest[name] = mergeProps(complexObjs);\n            }\n        }\n    }\n    // copy values into the destination, going from last to first\n    for (i = propObjs.length - 1; i >= 0; i--) {\n        props = propObjs[i];\n        for (name in props) {\n            if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n                dest[name] = props[name];\n            }\n        }\n    }\n    return dest;\n}\nfunction filterHash(hash, func) {\n    var filtered = {};\n    for (var key in hash) {\n        if (func(hash[key], key)) {\n            filtered[key] = hash[key];\n        }\n    }\n    return filtered;\n}\nfunction mapHash(hash, func) {\n    var newHash = {};\n    for (var key in hash) {\n        newHash[key] = func(hash[key], key);\n    }\n    return newHash;\n}\nfunction arrayToHash(a) {\n    var hash = {};\n    for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n        var item = a_1[_i];\n        hash[item] = true;\n    }\n    return hash;\n}\nfunction hashValuesToArray(obj) {\n    var a = [];\n    for (var key in obj) {\n        a.push(obj[key]);\n    }\n    return a;\n}\nfunction isPropsEqual(obj0, obj1) {\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                return false;\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n    var eventStore = createEmptyEventStore();\n    for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n        var rawEvent = rawEvents_1[_i];\n        var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n        if (tuple) {\n            eventTupleToStore(tuple, eventStore);\n        }\n    }\n    return eventStore;\n}\nfunction eventTupleToStore(tuple, eventStore) {\n    if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n    eventStore.defs[tuple.def.defId] = tuple.def;\n    if (tuple.instance) {\n        eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n    }\n    return eventStore;\n}\nfunction expandRecurring(eventStore, framingRange, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var defs = eventStore.defs, instances = eventStore.instances;\n    // remove existing recurring instances\n    instances = filterHash(instances, function (instance) {\n        return !defs[instance.defId].recurringDef;\n    });\n    for (var defId in defs) {\n        var def = defs[defId];\n        if (def.recurringDef) {\n            var duration = def.recurringDef.duration;\n            if (!duration) {\n                duration = def.allDay ?\n                    calendar.defaultAllDayEventDuration :\n                    calendar.defaultTimedEventDuration;\n            }\n            var starts = expandRecurringRanges(def, duration, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n            for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                var start = starts_1[_i];\n                var instance = createEventInstance(defId, {\n                    start: start,\n                    end: dateEnv.add(start, duration)\n                });\n                instances[instance.instanceId] = instance;\n            }\n        }\n    }\n    return { defs: defs, instances: instances };\n}\n// retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\nfunction getRelevantEvents(eventStore, instanceId) {\n    var instance = eventStore.instances[instanceId];\n    if (instance) {\n        var def_1 = eventStore.defs[instance.defId];\n        // get events/instances with same group\n        var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n            return isEventDefsGrouped(def_1, lookDef);\n        });\n        // add the original\n        // TODO: wish we could use eventTupleToStore or something like it\n        newStore.defs[def_1.defId] = def_1;\n        newStore.instances[instance.instanceId] = instance;\n        return newStore;\n    }\n    return createEmptyEventStore();\n}\nfunction isEventDefsGrouped(def0, def1) {\n    return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\nfunction transformRawEvents(rawEvents, eventSource, calendar) {\n    var calEachTransform = calendar.opt('eventDataTransform');\n    var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n    if (sourceEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n    }\n    if (calEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n    }\n    return rawEvents;\n}\nfunction transformEachRawEvent(rawEvents, func) {\n    var refinedEvents;\n    if (!func) {\n        refinedEvents = rawEvents;\n    }\n    else {\n        refinedEvents = [];\n        for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n            var rawEvent = rawEvents_2[_i];\n            var refinedEvent = func(rawEvent);\n            if (refinedEvent) {\n                refinedEvents.push(refinedEvent);\n            }\n            else if (refinedEvent == null) {\n                refinedEvents.push(rawEvent);\n            } // if a different falsy value, do nothing\n        }\n    }\n    return refinedEvents;\n}\nfunction createEmptyEventStore() {\n    return { defs: {}, instances: {} };\n}\nfunction mergeEventStores(store0, store1) {\n    return {\n        defs: __assign({}, store0.defs, store1.defs),\n        instances: __assign({}, store0.instances, store1.instances)\n    };\n}\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n    var defs = filterHash(eventStore.defs, filterFunc);\n    var instances = filterHash(eventStore.instances, function (instance) {\n        return defs[instance.defId]; // still exists?\n    });\n    return { defs: defs, instances: instances };\n}\n\nfunction parseRange(input, dateEnv) {\n    var start = null;\n    var end = null;\n    if (input.start) {\n        start = dateEnv.createMarker(input.start);\n    }\n    if (input.end) {\n        end = dateEnv.createMarker(input.end);\n    }\n    if (!start && !end) {\n        return null;\n    }\n    if (start && end && end < start) {\n        return null;\n    }\n    return { start: start, end: end };\n}\n// SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\nfunction invertRanges(ranges, constraintRange) {\n    var invertedRanges = [];\n    var start = constraintRange.start; // the end of the previous range. the start of the new range\n    var i;\n    var dateRange;\n    // ranges need to be in order. required for our date-walking algorithm\n    ranges.sort(compareRanges);\n    for (i = 0; i < ranges.length; i++) {\n        dateRange = ranges[i];\n        // add the span of time before the event (if there is any)\n        if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: dateRange.start });\n        }\n        if (dateRange.end > start) {\n            start = dateRange.end;\n        }\n    }\n    // add the span of time after the last event (if there is any)\n    if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n        invertedRanges.push({ start: start, end: constraintRange.end });\n    }\n    return invertedRanges;\n}\nfunction compareRanges(range0, range1) {\n    return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\nfunction intersectRanges(range0, range1) {\n    var start = range0.start;\n    var end = range0.end;\n    var newRange = null;\n    if (range1.start !== null) {\n        if (start === null) {\n            start = range1.start;\n        }\n        else {\n            start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n        }\n    }\n    if (range1.end != null) {\n        if (end === null) {\n            end = range1.end;\n        }\n        else {\n            end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n        }\n    }\n    if (start === null || end === null || start < end) {\n        newRange = { start: start, end: end };\n    }\n    return newRange;\n}\nfunction rangesEqual(range0, range1) {\n    return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n        (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\nfunction rangesIntersect(range0, range1) {\n    return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n        (range0.start === null || range1.end === null || range0.start < range1.end);\n}\nfunction rangeContainsRange(outerRange, innerRange) {\n    return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n        (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n}\nfunction rangeContainsMarker(range, date) {\n    return (range.start === null || date >= range.start) &&\n        (range.end === null || date < range.end);\n}\n// If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\nfunction constrainMarkerToRange(date, range) {\n    if (range.start != null && date < range.start) {\n        return range.start;\n    }\n    if (range.end != null && date >= range.end) {\n        return new Date(range.end.valueOf() - 1);\n    }\n    return date;\n}\n\nfunction removeExact(array, exactVal) {\n    var removeCnt = 0;\n    var i = 0;\n    while (i < array.length) {\n        if (array[i] === exactVal) {\n            array.splice(i, 1);\n            removeCnt++;\n        }\n        else {\n            i++;\n        }\n    }\n    return removeCnt;\n}\nfunction isArraysEqual(a0, a1) {\n    var len = a0.length;\n    var i;\n    if (len !== a1.length) { // not array? or not same length?\n        return false;\n    }\n    for (i = 0; i < len; i++) {\n        if (a0[i] !== a1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoize(workerFunc) {\n    var args;\n    var res;\n    return function () {\n        if (!args || !isArraysEqual(args, arguments)) {\n            args = arguments;\n            res = workerFunc.apply(this, arguments);\n        }\n        return res;\n    };\n}\n/*\nalways executes the workerFunc, but if the result is equal to the previous result,\nreturn the previous result instead.\n*/\nfunction memoizeOutput(workerFunc, equalityFunc) {\n    var cachedRes = null;\n    return function () {\n        var newRes = workerFunc.apply(this, arguments);\n        if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n            cachedRes = newRes;\n        }\n        return cachedRes;\n    };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n    week: 3,\n    separator: 0,\n    omitZeroMinute: 0,\n    meridiem: 0,\n    omitCommas: 0\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n    timeZoneName: 7,\n    era: 6,\n    year: 5,\n    month: 4,\n    day: 2,\n    weekday: 2,\n    hour: 1,\n    minute: 1,\n    second: 1\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\nvar COMMA_RE = /,/g; // we need re for globalness\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\nvar UTC_RE = /UTC|GMT/;\nvar NativeFormatter = /** @class */ (function () {\n    function NativeFormatter(formatSettings) {\n        var standardDateProps = {};\n        var extendedSettings = {};\n        var severity = 0;\n        for (var name_1 in formatSettings) {\n            if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                extendedSettings[name_1] = formatSettings[name_1];\n                severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n            }\n            else {\n                standardDateProps[name_1] = formatSettings[name_1];\n                if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n                    severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                }\n            }\n        }\n        this.standardDateProps = standardDateProps;\n        this.extendedSettings = extendedSettings;\n        this.severity = severity;\n        this.buildFormattingFunc = memoize(buildFormattingFunc);\n    }\n    NativeFormatter.prototype.format = function (date, context) {\n        return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n    };\n    NativeFormatter.prototype.formatRange = function (start, end, context) {\n        var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n        var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n        if (!diffSeverity) {\n            return this.format(start, context);\n        }\n        var biggestUnitForPartial = diffSeverity;\n        if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n            (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n            (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n            (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n            biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n        }\n        var full0 = this.format(start, context);\n        var full1 = this.format(end, context);\n        if (full0 === full1) {\n            return full0;\n        }\n        var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n        var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n        var partial0 = partialFormattingFunc(start);\n        var partial1 = partialFormattingFunc(end);\n        var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n        var separator = extendedSettings.separator || '';\n        if (insertion) {\n            return insertion.before + partial0 + separator + partial1 + insertion.after;\n        }\n        return full0 + separator + full1;\n    };\n    NativeFormatter.prototype.getLargestUnit = function () {\n        switch (this.severity) {\n            case 7:\n            case 6:\n            case 5:\n                return 'year';\n            case 4:\n                return 'month';\n            case 3:\n                return 'week';\n            default:\n                return 'day';\n        }\n    };\n    return NativeFormatter;\n}());\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n    var standardDatePropCnt = Object.keys(standardDateProps).length;\n    if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n        return function (date) {\n            return formatTimeZoneOffset(date.timeZoneOffset);\n        };\n    }\n    if (standardDatePropCnt === 0 && extendedSettings.week) {\n        return function (date) {\n            return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n        };\n    }\n    return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n    standardDateProps = __assign({}, standardDateProps); // copy\n    extendedSettings = __assign({}, extendedSettings); // copy\n    sanitizeSettings(standardDateProps, extendedSettings);\n    standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n    var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n    var zeroFormat; // needed?\n    if (extendedSettings.omitZeroMinute) {\n        var zeroProps = __assign({}, standardDateProps);\n        delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n        zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n    }\n    return function (date) {\n        var marker = date.marker;\n        var format;\n        if (zeroFormat && !marker.getUTCMinutes()) {\n            format = zeroFormat;\n        }\n        else {\n            format = normalFormat;\n        }\n        var s = format.format(marker);\n        return postProcess(s, date, standardDateProps, extendedSettings, context);\n    };\n}\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n    // deal with a browser inconsistency where formatting the timezone\n    // requires that the hour/minute be present.\n    if (standardDateProps.timeZoneName) {\n        if (!standardDateProps.hour) {\n            standardDateProps.hour = '2-digit';\n        }\n        if (!standardDateProps.minute) {\n            standardDateProps.minute = '2-digit';\n        }\n    }\n    // only support short timezone names\n    if (standardDateProps.timeZoneName === 'long') {\n        standardDateProps.timeZoneName = 'short';\n    }\n    // if requesting to display seconds, MUST display minutes\n    if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n        delete extendedSettings.omitZeroMinute;\n    }\n}\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n    s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n    if (standardDateProps.timeZoneName === 'short') {\n        s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n            'UTC' : // important to normalize for IE, which does \"GMT\"\n            formatTimeZoneOffset(date.timeZoneOffset));\n    }\n    if (extendedSettings.omitCommas) {\n        s = s.replace(COMMA_RE, '').trim();\n    }\n    if (extendedSettings.omitZeroMinute) {\n        s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n    }\n    // ^ do anything that might create adjacent spaces before this point,\n    // because MERIDIEM_RE likes to eat up loading spaces\n    if (extendedSettings.meridiem === false) {\n        s = s.replace(MERIDIEM_RE, '').trim();\n    }\n    else if (extendedSettings.meridiem === 'narrow') { // a/p\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase();\n        });\n    }\n    else if (extendedSettings.meridiem === 'short') { // am/pm\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase() + 'm';\n        });\n    }\n    else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n        s = s.replace(MERIDIEM_RE, function (m0) {\n            return m0.toLocaleLowerCase();\n        });\n    }\n    s = s.replace(MULTI_SPACE_RE, ' ');\n    s = s.trim();\n    return s;\n}\nfunction injectTzoStr(s, tzoStr) {\n    var replaced = false;\n    s = s.replace(UTC_RE, function () {\n        replaced = true;\n        return tzoStr;\n    });\n    // IE11 doesn't include UTC/GMT in the original string, so append to end\n    if (!replaced) {\n        s += ' ' + tzoStr;\n    }\n    return s;\n}\nfunction formatWeekNumber(num, weekLabel, locale, display) {\n    var parts = [];\n    if (display === 'narrow') {\n        parts.push(weekLabel);\n    }\n    else if (display === 'short') {\n        parts.push(weekLabel, ' ');\n    }\n    // otherwise, considered 'numeric'\n    parts.push(locale.simpleNumberFormat.format(num));\n    if (locale.options.isRtl) { // TODO: use control characters instead?\n        parts.reverse();\n    }\n    return parts.join('');\n}\n// Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n    if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n        return 5;\n    }\n    if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n        return 4;\n    }\n    if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n        return 2;\n    }\n    if (timeAsMs(d0) !== timeAsMs(d1)) {\n        return 1;\n    }\n    return 0;\n}\nfunction computePartialFormattingOptions(options, biggestUnit) {\n    var partialOptions = {};\n    for (var name_2 in options) {\n        if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n            STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n            partialOptions[name_2] = options[name_2];\n        }\n    }\n    return partialOptions;\n}\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n    var i0 = 0;\n    while (i0 < full0.length) {\n        var found0 = full0.indexOf(partial0, i0);\n        if (found0 === -1) {\n            break;\n        }\n        var before0 = full0.substr(0, found0);\n        i0 = found0 + partial0.length;\n        var after0 = full0.substr(i0);\n        var i1 = 0;\n        while (i1 < full1.length) {\n            var found1 = full1.indexOf(partial1, i1);\n            if (found1 === -1) {\n                break;\n            }\n            var before1 = full1.substr(0, found1);\n            i1 = found1 + partial1.length;\n            var after1 = full1.substr(i1);\n            if (before0 === before1 && after0 === after1) {\n                return {\n                    before: before0,\n                    after: after0\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\nvar CmdFormatter = /** @class */ (function () {\n    function CmdFormatter(cmdStr, separator) {\n        this.cmdStr = cmdStr;\n        this.separator = separator;\n    }\n    CmdFormatter.prototype.format = function (date, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n    };\n    CmdFormatter.prototype.formatRange = function (start, end, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n    };\n    return CmdFormatter;\n}());\n\nvar FuncFormatter = /** @class */ (function () {\n    function FuncFormatter(func) {\n        this.func = func;\n    }\n    FuncFormatter.prototype.format = function (date, context) {\n        return this.func(createVerboseFormattingArg(date, null, context));\n    };\n    FuncFormatter.prototype.formatRange = function (start, end, context) {\n        return this.func(createVerboseFormattingArg(start, end, context));\n    };\n    return FuncFormatter;\n}());\n\n// Formatter Object Creation\nfunction createFormatter(input, defaultSeparator) {\n    if (typeof input === 'object' && input) { // non-null object\n        if (typeof defaultSeparator === 'string') {\n            input = __assign({ separator: defaultSeparator }, input);\n        }\n        return new NativeFormatter(input);\n    }\n    else if (typeof input === 'string') {\n        return new CmdFormatter(input, defaultSeparator);\n    }\n    else if (typeof input === 'function') {\n        return new FuncFormatter(input);\n    }\n}\n// String Utils\n// timeZoneOffset is in minutes\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n    if (stripZeroTime === void 0) { stripZeroTime = false; }\n    var s = marker.toISOString();\n    s = s.replace('.000', '');\n    if (stripZeroTime) {\n        s = s.replace('T00:00:00Z', '');\n    }\n    if (s.length > 10) { // time part wasn't stripped, can add timezone info\n        if (timeZoneOffset == null) {\n            s = s.replace('Z', '');\n        }\n        else if (timeZoneOffset !== 0) {\n            s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n        }\n        // otherwise, its UTC-0 and we want to keep the Z\n    }\n    return s;\n}\nfunction formatIsoTimeString(marker) {\n    return padStart(marker.getUTCHours(), 2) + ':' +\n        padStart(marker.getUTCMinutes(), 2) + ':' +\n        padStart(marker.getUTCSeconds(), 2);\n}\nfunction formatTimeZoneOffset(minutes, doIso) {\n    if (doIso === void 0) { doIso = false; }\n    var sign = minutes < 0 ? '-' : '+';\n    var abs = Math.abs(minutes);\n    var hours = Math.floor(abs / 60);\n    var mins = Math.round(abs % 60);\n    if (doIso) {\n        return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n    }\n    else {\n        return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n    }\n}\n// Arg Utils\nfunction createVerboseFormattingArg(start, end, context, separator) {\n    var startInfo = expandZonedMarker(start, context.calendarSystem);\n    var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n    return {\n        date: startInfo,\n        start: startInfo,\n        end: endInfo,\n        timeZone: context.timeZone,\n        localeCodes: context.locale.codes,\n        separator: separator\n    };\n}\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n    var a = calendarSystem.markerToArray(dateInfo.marker);\n    return {\n        marker: dateInfo.marker,\n        timeZoneOffset: dateInfo.timeZoneOffset,\n        array: a,\n        year: a[0],\n        month: a[1],\n        day: a[2],\n        hour: a[3],\n        minute: a[4],\n        second: a[5],\n        millisecond: a[6]\n    };\n}\n\nvar EventSourceApi = /** @class */ (function () {\n    function EventSourceApi(calendar, internalEventSource) {\n        this.calendar = calendar;\n        this.internalEventSource = internalEventSource;\n    }\n    EventSourceApi.prototype.remove = function () {\n        this.calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: this.internalEventSource.sourceId\n        });\n    };\n    EventSourceApi.prototype.refetch = function () {\n        this.calendar.dispatch({\n            type: 'FETCH_EVENT_SOURCES',\n            sourceIds: [this.internalEventSource.sourceId]\n        });\n    };\n    Object.defineProperty(EventSourceApi.prototype, \"id\", {\n        get: function () {\n            return this.internalEventSource.publicId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"url\", {\n        // only relevant to json-feed event sources\n        get: function () {\n            return this.internalEventSource.meta.url;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventSourceApi;\n}());\n\nvar EventApi = /** @class */ (function () {\n    function EventApi(calendar, def, instance) {\n        this._calendar = calendar;\n        this._def = def;\n        this._instance = instance || null;\n    }\n    /*\n    TODO: make event struct more responsible for this\n    */\n    EventApi.prototype.setProp = function (name, val) {\n        var _a, _b;\n        if (name in DATE_PROPS) ;\n        else if (name in NON_DATE_PROPS) {\n            if (typeof NON_DATE_PROPS[name] === 'function') {\n                val = NON_DATE_PROPS[name](val);\n            }\n            this.mutate({\n                standardProps: (_a = {}, _a[name] = val, _a)\n            });\n        }\n        else if (name in UNSCOPED_EVENT_UI_PROPS) {\n            var ui = void 0;\n            if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n                val = UNSCOPED_EVENT_UI_PROPS[name](val);\n            }\n            if (name === 'color') {\n                ui = { backgroundColor: val, borderColor: val };\n            }\n            else if (name === 'editable') {\n                ui = { startEditable: val, durationEditable: val };\n            }\n            else {\n                ui = (_b = {}, _b[name] = val, _b);\n            }\n            this.mutate({\n                standardProps: { ui: ui }\n            });\n        }\n    };\n    EventApi.prototype.setExtendedProp = function (name, val) {\n        var _a;\n        this.mutate({\n            extendedProps: (_a = {}, _a[name] = val, _a)\n        });\n    };\n    EventApi.prototype.setStart = function (startInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var start = dateEnv.createMarker(startInput);\n        if (start && this._instance) { // TODO: warning if parsed bad\n            var instanceRange = this._instance.range;\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n            if (options.maintainDuration) {\n                this.mutate({ datesDelta: startDelta });\n            }\n            else {\n                this.mutate({ startDelta: startDelta });\n            }\n        }\n    };\n    EventApi.prototype.setEnd = function (endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var end;\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) {\n                return; // TODO: warning if parsed bad\n            }\n        }\n        if (this._instance) {\n            if (end) {\n                var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                this.mutate({ endDelta: endDelta });\n            }\n            else {\n                this.mutate({ standardProps: { hasEnd: false } });\n            }\n        }\n    };\n    EventApi.prototype.setDates = function (startInput, endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var standardProps = { allDay: options.allDay };\n        var start = dateEnv.createMarker(startInput);\n        var end;\n        if (!start) {\n            return; // TODO: warning if parsed bad\n        }\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) { // TODO: warning if parsed bad\n                return;\n            }\n        }\n        if (this._instance) {\n            var instanceRange = this._instance.range;\n            // when computing the diff for an event being converted to all-day,\n            // compute diff off of the all-day values the way event-mutation does.\n            if (options.allDay === true) {\n                instanceRange = computeAlignedDayRange(instanceRange);\n            }\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n            if (end) {\n                var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                if (durationsEqual(startDelta, endDelta)) {\n                    this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n                }\n                else {\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n            }\n            else { // means \"clear the end\"\n                standardProps.hasEnd = false;\n                this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n            }\n        }\n    };\n    EventApi.prototype.moveStart = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ startDelta: delta });\n        }\n    };\n    EventApi.prototype.moveEnd = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ endDelta: delta });\n        }\n    };\n    EventApi.prototype.moveDates = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ datesDelta: delta });\n        }\n    };\n    EventApi.prototype.setAllDay = function (allDay, options) {\n        if (options === void 0) { options = {}; }\n        var standardProps = { allDay: allDay };\n        var maintainDuration = options.maintainDuration;\n        if (maintainDuration == null) {\n            maintainDuration = this._calendar.opt('allDayMaintainDuration');\n        }\n        if (this._def.allDay !== allDay) {\n            standardProps.hasEnd = maintainDuration;\n        }\n        this.mutate({ standardProps: standardProps });\n    };\n    EventApi.prototype.formatRange = function (formatInput) {\n        var dateEnv = this._calendar.dateEnv;\n        var instance = this._instance;\n        var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n        if (this._def.hasEnd) {\n            return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                forcedStartTzo: instance.forcedStartTzo,\n                forcedEndTzo: instance.forcedEndTzo\n            });\n        }\n        else {\n            return dateEnv.format(instance.range.start, formatter, {\n                forcedTzo: instance.forcedStartTzo\n            });\n        }\n    };\n    EventApi.prototype.mutate = function (mutation) {\n        var def = this._def;\n        var instance = this._instance;\n        if (instance) {\n            this._calendar.dispatch({\n                type: 'MUTATE_EVENTS',\n                instanceId: instance.instanceId,\n                mutation: mutation,\n                fromApi: true\n            });\n            var eventStore = this._calendar.state.eventStore;\n            this._def = eventStore.defs[def.defId];\n            this._instance = eventStore.instances[instance.instanceId];\n        }\n    };\n    EventApi.prototype.remove = function () {\n        this._calendar.dispatch({\n            type: 'REMOVE_EVENT_DEF',\n            defId: this._def.defId\n        });\n    };\n    Object.defineProperty(EventApi.prototype, \"source\", {\n        get: function () {\n            var sourceId = this._def.sourceId;\n            if (sourceId) {\n                return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"start\", {\n        get: function () {\n            return this._instance ?\n                this._calendar.dateEnv.toDate(this._instance.range.start) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"end\", {\n        get: function () {\n            return (this._instance && this._def.hasEnd) ?\n                this._calendar.dateEnv.toDate(this._instance.range.end) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"id\", {\n        // computable props that all access the def\n        // TODO: find a TypeScript-compatible way to do this at scale\n        get: function () { return this._def.publicId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"groupId\", {\n        get: function () { return this._def.groupId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allDay\", {\n        get: function () { return this._def.allDay; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"title\", {\n        get: function () { return this._def.title; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"url\", {\n        get: function () { return this._def.url; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"rendering\", {\n        get: function () { return this._def.rendering; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startEditable\", {\n        get: function () { return this._def.ui.startEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n        get: function () { return this._def.ui.durationEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"constraint\", {\n        get: function () { return this._def.ui.constraints[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"overlap\", {\n        get: function () { return this._def.ui.overlap; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allow\", {\n        get: function () { return this._def.ui.allows[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n        get: function () { return this._def.ui.backgroundColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"borderColor\", {\n        get: function () { return this._def.ui.borderColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"textColor\", {\n        get: function () { return this._def.ui.textColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"classNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._def.ui.classNames; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n        get: function () { return this._def.extendedProps; },\n        enumerable: true,\n        configurable: true\n    });\n    return EventApi;\n}());\n\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n    var inverseBgByGroupId = {};\n    var inverseBgByDefId = {};\n    var defByGroupId = {};\n    var bgRanges = [];\n    var fgRanges = [];\n    var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        if (def.rendering === 'inverse-background') {\n            if (def.groupId) {\n                inverseBgByGroupId[def.groupId] = [];\n                if (!defByGroupId[def.groupId]) {\n                    defByGroupId[def.groupId] = def;\n                }\n            }\n            else {\n                inverseBgByDefId[defId] = [];\n            }\n        }\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = eventStore.defs[instance.defId];\n        var ui = eventUis[def.defId];\n        var origRange = instance.range;\n        var normalRange = (!def.allDay && nextDayThreshold) ?\n            computeVisibleDayRange(origRange, nextDayThreshold) :\n            origRange;\n        var slicedRange = intersectRanges(normalRange, framingRange);\n        if (slicedRange) {\n            if (def.rendering === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId].push(slicedRange);\n                }\n                else {\n                    inverseBgByDefId[instance.defId].push(slicedRange);\n                }\n            }\n            else {\n                (def.rendering === 'background' ? bgRanges : fgRanges).push({\n                    def: def,\n                    ui: ui,\n                    instance: instance,\n                    range: slicedRange,\n                    isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                    isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n                });\n            }\n        }\n    }\n    for (var groupId in inverseBgByGroupId) { // BY GROUP\n        var ranges = inverseBgByGroupId[groupId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n            var invertedRange = invertedRanges_1[_i];\n            var def = defByGroupId[groupId];\n            var ui = eventUis[def.defId];\n            bgRanges.push({\n                def: def,\n                ui: ui,\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    for (var defId in inverseBgByDefId) {\n        var ranges = inverseBgByDefId[defId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n            var invertedRange = invertedRanges_2[_a];\n            bgRanges.push({\n                def: eventStore.defs[defId],\n                ui: eventUis[defId],\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    return { bg: bgRanges, fg: fgRanges };\n}\nfunction hasBgRendering(def) {\n    return def.rendering === 'background' || def.rendering === 'inverse-background';\n}\nfunction filterSegsViaEls(context, segs, isMirror) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventRender')) {\n        segs = segs.filter(function (seg) {\n            var custom = calendar.publiclyTrigger('eventRender', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirror,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    // TODO: include seg.range once all components consistently generate it\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n            if (custom === false) { // means don't render at all\n                return false;\n            }\n            else if (custom && custom !== true) {\n                seg.el = custom;\n            }\n            return true;\n        });\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        setElSeg(seg.el, seg);\n    }\n    return segs;\n}\nfunction setElSeg(el, seg) {\n    el.fcSeg = seg;\n}\nfunction getElSeg(el) {\n    return el.fcSeg || null;\n}\n// event ui computation\nfunction compileEventUis(eventDefs, eventUiBases) {\n    return mapHash(eventDefs, function (eventDef) {\n        return compileEventUi(eventDef, eventUiBases);\n    });\n}\nfunction compileEventUi(eventDef, eventUiBases) {\n    var uis = [];\n    if (eventUiBases['']) {\n        uis.push(eventUiBases['']);\n    }\n    if (eventUiBases[eventDef.defId]) {\n        uis.push(eventUiBases[eventDef.defId]);\n    }\n    uis.push(eventDef.ui);\n    return combineEventUis(uis);\n}\n// triggers\nfunction triggerRenderedSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventPositioned')) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            calendar.publiclyTriggerAfterSizing('eventPositioned', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n    if (!calendar.state.eventSourceLoadingLevel) { // avoid initial empty state while pending\n        calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n    }\n}\nfunction triggerWillRemoveSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n        var seg = segs_3[_i];\n        calendar.trigger('eventElRemove', seg.el);\n    }\n    if (calendar.hasPublicHandlers('eventDestroy')) {\n        for (var _a = 0, segs_4 = segs; _a < segs_4.length; _a++) {\n            var seg = segs_4[_a];\n            calendar.publiclyTrigger('eventDestroy', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n}\n// is-interactable\nfunction computeEventDraggable(context, eventDef, eventUi) {\n    var calendar = context.calendar, view = context.view;\n    var transformers = calendar.pluginSystem.hooks.isDraggableTransformers;\n    var val = eventUi.startEditable;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        val = transformer(val, eventDef, eventUi, view);\n    }\n    return val;\n}\nfunction computeEventStartResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable && context.options.eventResizableFromStart;\n}\nfunction computeEventEndResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable;\n}\n\n// applies the mutation to ALL defs/instances within the event store\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n    var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n    var dest = createEmptyEventStore();\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = dest.defs[instance.defId]; // important to grab the newly modified def\n        dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n    }\n    return dest;\n}\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n    var standardProps = mutation.standardProps || {};\n    // if hasEnd has not been specified, guess a good value based on deltas.\n    // if duration will change, there's no way the default duration will persist,\n    // and thus, we need to mark the event as having a real end\n    if (standardProps.hasEnd == null &&\n        eventConfig.durationEditable &&\n        (mutation.startDelta || mutation.endDelta)) {\n        standardProps.hasEnd = true; // TODO: is this mutation okay?\n    }\n    var copy = __assign({}, eventDef, standardProps, { ui: __assign({}, eventDef.ui, standardProps.ui) });\n    if (mutation.extendedProps) {\n        copy.extendedProps = __assign({}, copy.extendedProps, mutation.extendedProps);\n    }\n    for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n        var applier = appliers_1[_i];\n        applier(copy, mutation, calendar);\n    }\n    if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n        copy.hasEnd = true;\n    }\n    return copy;\n}\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n    var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n    var copy = __assign({}, eventInstance);\n    if (forceAllDay) {\n        copy.range = computeAlignedDayRange(copy.range);\n    }\n    if (mutation.datesDelta && eventConfig.startEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.datesDelta),\n            end: dateEnv.add(copy.range.end, mutation.datesDelta)\n        };\n    }\n    if (mutation.startDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.startDelta),\n            end: copy.range.end\n        };\n    }\n    if (mutation.endDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: copy.range.start,\n            end: dateEnv.add(copy.range.end, mutation.endDelta)\n        };\n    }\n    if (clearEnd) {\n        copy.range = {\n            start: copy.range.start,\n            end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n        };\n    }\n    // in case event was all-day but the supplied deltas were not\n    // better util for this?\n    if (eventDef.allDay) {\n        copy.range = {\n            start: startOfDay(copy.range.start),\n            end: startOfDay(copy.range.end)\n        };\n    }\n    // handle invalid durations\n    if (copy.range.end < copy.range.start) {\n        copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n    }\n    return copy;\n}\n\nfunction reduceEventStore (eventStore, action, eventSources, dateProfile, calendar) {\n    switch (action.type) {\n        case 'RECEIVE_EVENTS': // raw\n            return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n        case 'ADD_EVENTS': // already parsed, but not expanded\n            return addEvent(eventStore, action.eventStore, // new ones\n            dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'MERGE_EVENTS': // already parsed and expanded\n            return mergeEventStores(eventStore, action.eventStore);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventStore;\n            }\n        case 'CHANGE_TIMEZONE':\n            return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n        case 'MUTATE_EVENTS':\n            return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n        case 'REMOVE_EVENT_INSTANCES':\n            return excludeInstances(eventStore, action.instances);\n        case 'REMOVE_EVENT_DEF':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return eventDef.defId !== action.defId;\n            });\n        case 'REMOVE_EVENT_SOURCE':\n            return excludeEventsBySourceId(eventStore, action.sourceId);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return !eventDef.sourceId; // only keep events with no source id\n            });\n        case 'REMOVE_ALL_EVENTS':\n            return createEmptyEventStore();\n        case 'RESET_EVENTS':\n            return {\n                defs: eventStore.defs,\n                instances: eventStore.instances\n            };\n        default:\n            return eventStore;\n    }\n}\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n    ) {\n        var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n        if (fetchRange) {\n            subset = expandRecurring(subset, fetchRange, calendar);\n        }\n        return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n    return eventStore;\n}\nfunction addEvent(eventStore, subset, expandRange, calendar) {\n    if (expandRange) {\n        subset = expandRecurring(subset, expandRange, calendar);\n    }\n    return mergeEventStores(eventStore, subset);\n}\nfunction rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n    var defs = eventStore.defs;\n    var instances = mapHash(eventStore.instances, function (instance) {\n        var def = defs[instance.defId];\n        if (def.allDay || def.recurringDef) {\n            return instance; // isn't dependent on timezone\n        }\n        else {\n            return __assign({}, instance, { range: {\n                    start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                    end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n                }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n        }\n    });\n    return { defs: defs, instances: instances };\n}\nfunction applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n    var relevant = getRelevantEvents(eventStore, instanceId);\n    var eventConfigBase = fromApi ?\n        { '': {\n                startEditable: true,\n                durationEditable: true,\n                constraints: [],\n                overlap: null,\n                allows: [],\n                backgroundColor: '',\n                borderColor: '',\n                textColor: '',\n                classNames: []\n            } } :\n        calendar.eventUiBases;\n    relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n    return mergeEventStores(eventStore, relevant);\n}\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n    return filterEventStoreDefs(eventStore, function (eventDef) {\n        return eventDef.sourceId !== sourceId;\n    });\n}\n// QUESTION: why not just return instances? do a general object-property-exclusion util\nfunction excludeInstances(eventStore, removals) {\n    return {\n        defs: eventStore.defs,\n        instances: filterHash(eventStore.instances, function (instance) {\n            return !removals[instance.instanceId];\n        })\n    };\n}\n\n// high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionValid(interaction, calendar) {\n    return isNewPropsValid({ eventDrag: interaction }, calendar); // HACK: the eventDrag props is used for ALL interactions\n}\nfunction isDateSelectionValid(dateSelection, calendar) {\n    return isNewPropsValid({ dateSelection: dateSelection }, calendar);\n}\nfunction isNewPropsValid(newProps, calendar) {\n    var view = calendar.view;\n    var props = __assign({ businessHours: view ? view.props.businessHours : createEmptyEventStore(), dateSelection: '', eventStore: calendar.state.eventStore, eventUiBases: calendar.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n    return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n}\nfunction isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n    if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    return true;\n}\n// Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n    var subjectEventStore = interaction.mutatedEvents;\n    var subjectDefs = subjectEventStore.defs;\n    var subjectInstances = subjectEventStore.instances;\n    var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n        state.eventUiBases :\n        { '': calendar.selectionConfig } // if not a real event, validate as a selection\n    );\n    if (filterConfig) {\n        subjectConfigs = mapHash(subjectConfigs, filterConfig);\n    }\n    var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n    var otherDefs = otherEventStore.defs;\n    var otherInstances = otherEventStore.instances;\n    var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n    for (var subjectInstanceId in subjectInstances) {\n        var subjectInstance = subjectInstances[subjectInstanceId];\n        var subjectRange = subjectInstance.range;\n        var subjectConfig = subjectConfigs[subjectInstance.defId];\n        var subjectDef = subjectDefs[subjectInstance.defId];\n        // constraint\n        if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n            return false;\n        }\n        // overlap\n        var overlapFunc = calendar.opt('eventOverlap');\n        if (typeof overlapFunc !== 'function') {\n            overlapFunc = null;\n        }\n        for (var otherInstanceId in otherInstances) {\n            var otherInstance = otherInstances[otherInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(subjectRange, otherInstance.range)) {\n                var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                if (otherOverlap === false && interaction.isEvent) {\n                    return false;\n                }\n                if (subjectConfig.overlap === false) {\n                    return false;\n                }\n                if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n                new EventApi(calendar, subjectDef, subjectInstance) // moving event\n                )) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        var calendarEventStore = calendar.state.eventStore; // need global-to-calendar, not local to component (splittable)state\n        for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n            var subjectAllow = _a[_i];\n            var subjectDateSpan = __assign({}, dateSpanMeta, { range: subjectInstance.range, allDay: subjectDef.allDay });\n            var origDef = calendarEventStore.defs[subjectDef.defId];\n            var origInstance = calendarEventStore.instances[subjectInstanceId];\n            var eventApi = void 0;\n            if (origDef) { // was previously in the calendar\n                eventApi = new EventApi(calendar, origDef, origInstance);\n            }\n            else { // was an external event\n                eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n            }\n            if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n// Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var relevantEventStore = state.eventStore;\n    var relevantDefs = relevantEventStore.defs;\n    var relevantInstances = relevantEventStore.instances;\n    var selection = state.dateSelection;\n    var selectionRange = selection.range;\n    var selectionConfig = calendar.selectionConfig;\n    if (filterConfig) {\n        selectionConfig = filterConfig(selectionConfig);\n    }\n    // constraint\n    if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n        return false;\n    }\n    // overlap\n    var overlapFunc = calendar.opt('selectOverlap');\n    if (typeof overlapFunc !== 'function') {\n        overlapFunc = null;\n    }\n    for (var relevantInstanceId in relevantInstances) {\n        var relevantInstance = relevantInstances[relevantInstanceId];\n        // intersect! evaluate\n        if (rangesIntersect(selectionRange, relevantInstance.range)) {\n            if (selectionConfig.overlap === false) {\n                return false;\n            }\n            if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n                return false;\n            }\n        }\n    }\n    // allow (a function)\n    for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n        var selectionAllow = _a[_i];\n        var fullDateSpan = __assign({}, dateSpanMeta, selection);\n        if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n            return false;\n        }\n    }\n    return true;\n}\n// Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n    for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n        var constraint = constraints_1[_i];\n        if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncalendar // for expanding businesshours\n) {\n    if (constraint === 'businessHours') {\n        return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n    }\n    else if (typeof constraint === 'string') { // an group ID\n        return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n            return eventDef.groupId === constraint;\n        }));\n    }\n    else if (typeof constraint === 'object' && constraint) { // non-null object\n        return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n    }\n    return []; // if it's false\n}\n// TODO: move to event-store file?\nfunction eventStoreToRanges(eventStore) {\n    var instances = eventStore.instances;\n    var ranges = [];\n    for (var instanceId in instances) {\n        ranges.push(instances[instanceId].range);\n    }\n    return ranges;\n}\n// TODO: move to geom file?\nfunction anyRangesContainRange(outerRanges, innerRange) {\n    for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n        var outerRange = outerRanges_1[_i];\n        if (rangeContainsRange(outerRange, innerRange)) {\n            return true;\n        }\n    }\n    return false;\n}\n// Parsing\n// ------------------------------------------------------------------------------------------------------------------------\nfunction normalizeConstraint(input, calendar) {\n    if (Array.isArray(input)) {\n        return parseEvents(input, '', calendar, true); // allowOpenRange=true\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return parseEvents([input], '', calendar, true); // allowOpenRange=true\n    }\n    else if (input != null) {\n        return String(input);\n    }\n    else {\n        return null;\n    }\n}\n\nfunction htmlEscape(s) {\n    return (s + '').replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/'/g, '&#039;')\n        .replace(/\"/g, '&quot;')\n        .replace(/\\n/g, '<br />');\n}\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n    var statements = [];\n    for (var name_1 in cssProps) {\n        var val = cssProps[name_1];\n        if (val != null && val !== '') {\n            statements.push(name_1 + ':' + val);\n        }\n    }\n    return statements.join(';');\n}\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n    var parts = [];\n    for (var name_2 in attrs) {\n        var val = attrs[name_2];\n        if (val != null) {\n            parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n        }\n    }\n    return parts.join(' ');\n}\nfunction parseClassName(raw) {\n    if (Array.isArray(raw)) {\n        return raw;\n    }\n    else if (typeof raw === 'string') {\n        return raw.split(/\\s+/);\n    }\n    else {\n        return [];\n    }\n}\n\nvar UNSCOPED_EVENT_UI_PROPS = {\n    editable: Boolean,\n    startEditable: Boolean,\n    durationEditable: Boolean,\n    constraint: null,\n    overlap: null,\n    allow: null,\n    className: parseClassName,\n    classNames: parseClassName,\n    color: String,\n    backgroundColor: String,\n    borderColor: String,\n    textColor: String\n};\nfunction processUnscopedUiProps(rawProps, calendar, leftovers) {\n    var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n    var constraint = normalizeConstraint(props.constraint, calendar);\n    return {\n        startEditable: props.startEditable != null ? props.startEditable : props.editable,\n        durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n        constraints: constraint != null ? [constraint] : [],\n        overlap: props.overlap,\n        allows: props.allow != null ? [props.allow] : [],\n        backgroundColor: props.backgroundColor || props.color,\n        borderColor: props.borderColor || props.color,\n        textColor: props.textColor,\n        classNames: props.classNames.concat(props.className)\n    };\n}\nfunction processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n    var rawUnscoped = {};\n    var wasFound = {};\n    for (var key in UNSCOPED_EVENT_UI_PROPS) {\n        var scopedKey = prefix + capitaliseFirstLetter(key);\n        rawUnscoped[key] = rawScoped[scopedKey];\n        wasFound[scopedKey] = true;\n    }\n    if (prefix === 'event') {\n        rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n    }\n    if (leftovers) {\n        for (var key in rawScoped) {\n            if (!wasFound[key]) {\n                leftovers[key] = rawScoped[key];\n            }\n        }\n    }\n    return processUnscopedUiProps(rawUnscoped, calendar);\n}\nvar EMPTY_EVENT_UI = {\n    startEditable: null,\n    durationEditable: null,\n    constraints: [],\n    overlap: null,\n    allows: [],\n    backgroundColor: '',\n    borderColor: '',\n    textColor: '',\n    classNames: []\n};\n// prevent against problems with <2 args!\nfunction combineEventUis(uis) {\n    return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\nfunction combineTwoEventUis(item0, item1) {\n    return {\n        startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n        durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n        constraints: item0.constraints.concat(item1.constraints),\n        overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n        allows: item0.allows.concat(item1.allows),\n        backgroundColor: item1.backgroundColor || item0.backgroundColor,\n        borderColor: item1.borderColor || item0.borderColor,\n        textColor: item1.textColor || item0.textColor,\n        classNames: item0.classNames.concat(item1.classNames)\n    };\n}\n\nvar NON_DATE_PROPS = {\n    id: String,\n    groupId: String,\n    title: String,\n    url: String,\n    rendering: String,\n    extendedProps: null\n};\nvar DATE_PROPS = {\n    start: null,\n    date: null,\n    end: null,\n    allDay: null\n};\nvar uid = 0;\nfunction parseEvent(raw, sourceId, calendar, allowOpenRange) {\n    var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n    var leftovers0 = {};\n    var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n    allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n    );\n    if (recurringRes) {\n        var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n        def.recurringDef = {\n            typeId: recurringRes.typeId,\n            typeData: recurringRes.typeData,\n            duration: recurringRes.duration\n        };\n        return { def: def, instance: null };\n    }\n    else {\n        var leftovers1 = {};\n        var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n        if (singleRes) {\n            var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n            var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n            return { def: def, instance: instance };\n        }\n    }\n    return null;\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\nThe EventNonDateInput has been normalized (id => publicId, etc).\n*/\nfunction parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n    var leftovers = {};\n    var def = pluckNonDateProps(raw, calendar, leftovers);\n    def.defId = String(uid++);\n    def.sourceId = sourceId;\n    def.allDay = allDay;\n    def.hasEnd = hasEnd;\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n        var eventDefParser = _a[_i];\n        var newLeftovers = {};\n        eventDefParser(def, leftovers, newLeftovers);\n        leftovers = newLeftovers;\n    }\n    def.extendedProps = __assign(leftovers, def.extendedProps || {});\n    // help out EventApi from having user modify props\n    Object.freeze(def.ui.classNames);\n    Object.freeze(def.extendedProps);\n    return def;\n}\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n    return {\n        instanceId: String(uid++),\n        defId: defId,\n        range: range,\n        forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n        forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n    };\n}\nfunction parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n    var props = pluckDateProps(raw, leftovers);\n    var allDay = props.allDay;\n    var startMeta;\n    var startMarker = null;\n    var hasEnd = false;\n    var endMeta;\n    var endMarker = null;\n    startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n    if (startMeta) {\n        startMarker = startMeta.marker;\n    }\n    else if (!allowOpenRange) {\n        return null;\n    }\n    if (props.end != null) {\n        endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n    }\n    if (allDay == null) {\n        if (allDayDefault != null) {\n            allDay = allDayDefault;\n        }\n        else {\n            // fall back to the date props LAST\n            allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n    }\n    if (allDay && startMarker) {\n        startMarker = startOfDay(startMarker);\n    }\n    if (endMeta) {\n        endMarker = endMeta.marker;\n        if (allDay) {\n            endMarker = startOfDay(endMarker);\n        }\n        if (startMarker && endMarker <= startMarker) {\n            endMarker = null;\n        }\n    }\n    if (endMarker) {\n        hasEnd = true;\n    }\n    else if (!allowOpenRange) {\n        hasEnd = calendar.opt('forceEventDuration') || false;\n        endMarker = calendar.dateEnv.add(startMarker, allDay ?\n            calendar.defaultAllDayEventDuration :\n            calendar.defaultTimedEventDuration);\n    }\n    return {\n        allDay: allDay,\n        hasEnd: hasEnd,\n        range: { start: startMarker, end: endMarker },\n        forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n        forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n    };\n}\nfunction pluckDateProps(raw, leftovers) {\n    var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n    props.start = (props.start !== null) ? props.start : props.date;\n    delete props.date;\n    return props;\n}\nfunction pluckNonDateProps(raw, calendar, leftovers) {\n    var preLeftovers = {};\n    var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n    var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n    props.publicId = props.id;\n    delete props.id;\n    props.ui = ui;\n    return props;\n}\nfunction computeIsAllDayDefault(sourceId, calendar) {\n    var res = null;\n    if (sourceId) {\n        var source = calendar.state.eventSources[sourceId];\n        res = source.allDayDefault;\n    }\n    if (res == null) {\n        res = calendar.opt('allDayDefault');\n    }\n    return res;\n}\n\nvar DEF_DEFAULTS = {\n    startTime: '09:00',\n    endTime: '17:00',\n    daysOfWeek: [1, 2, 3, 4, 5],\n    rendering: 'inverse-background',\n    classNames: 'fc-nonbusiness',\n    groupId: '_businessHours' // so multiple defs get grouped\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\nfunction parseBusinessHours(input, calendar) {\n    return parseEvents(refineInputs(input), '', calendar);\n}\nfunction refineInputs(input) {\n    var rawDefs;\n    if (input === true) {\n        rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n    }\n    else if (Array.isArray(input)) {\n        // if specifying an array, every sub-definition NEEDS a day-of-week\n        rawDefs = input.filter(function (rawDef) {\n            return rawDef.daysOfWeek;\n        });\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        rawDefs = [input];\n    }\n    else { // is probably false\n        rawDefs = [];\n    }\n    rawDefs = rawDefs.map(function (rawDef) {\n        return __assign({}, DEF_DEFAULTS, rawDef);\n    });\n    return rawDefs;\n}\n\nfunction memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n    if (dependencies === void 0) { dependencies = []; }\n    var dependents = [];\n    var thisContext;\n    var prevArgs;\n    function unrender() {\n        if (prevArgs) {\n            for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n                var dependent = dependents_1[_i];\n                dependent.unrender();\n            }\n            if (unrenderFunc) {\n                unrenderFunc.apply(thisContext, prevArgs);\n            }\n            prevArgs = null;\n        }\n    }\n    function res() {\n        if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n            unrender();\n            thisContext = this;\n            prevArgs = arguments;\n            renderFunc.apply(this, arguments);\n        }\n    }\n    res.dependents = dependents;\n    res.unrender = unrender;\n    for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n        var dependency = dependencies_1[_i];\n        dependency.dependents.push(res);\n    }\n    return res;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\nvar Splitter = /** @class */ (function () {\n    function Splitter() {\n        this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n        this.splitDateSelection = memoize(this._splitDateSpan);\n        this.splitEventStore = memoize(this._splitEventStore);\n        this.splitIndividualUi = memoize(this._splitIndividualUi);\n        this.splitEventDrag = memoize(this._splitInteraction);\n        this.splitEventResize = memoize(this._splitInteraction);\n        this.eventUiBuilders = {}; // TODO: typescript protection\n    }\n    Splitter.prototype.splitProps = function (props) {\n        var _this = this;\n        var keyInfos = this.getKeyInfo(props);\n        var defKeys = this.getKeysForEventDefs(props.eventStore);\n        var dateSelections = this.splitDateSelection(props.dateSelection);\n        var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n        var eventStores = this.splitEventStore(props.eventStore, defKeys);\n        var eventDrags = this.splitEventDrag(props.eventDrag);\n        var eventResizes = this.splitEventResize(props.eventResize);\n        var splitProps = {};\n        this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n            return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n        });\n        for (var key in keyInfos) {\n            var keyInfo = keyInfos[key];\n            var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n            var buildEventUi = this.eventUiBuilders[key];\n            splitProps[key] = {\n                businessHours: keyInfo.businessHours || props.businessHours,\n                dateSelection: dateSelections[key] || null,\n                eventStore: eventStore,\n                eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                eventDrag: eventDrags[key] || null,\n                eventResize: eventResizes[key] || null\n            };\n        }\n        return splitProps;\n    };\n    Splitter.prototype._splitDateSpan = function (dateSpan) {\n        var dateSpans = {};\n        if (dateSpan) {\n            var keys = this.getKeysForDateSpan(dateSpan);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                dateSpans[key] = dateSpan;\n            }\n        }\n        return dateSpans;\n    };\n    Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n        var _this = this;\n        return mapHash(eventStore.defs, function (eventDef) {\n            return _this.getKeysForEventDef(eventDef);\n        });\n    };\n    Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n        var defs = eventStore.defs, instances = eventStore.instances;\n        var splitStores = {};\n        for (var defId in defs) {\n            for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (!splitStores[key]) {\n                    splitStores[key] = createEmptyEventStore();\n                }\n                splitStores[key].defs[defId] = defs[defId];\n            }\n        }\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                var key = _c[_b];\n                if (splitStores[key]) { // must have already been created\n                    splitStores[key].instances[instanceId] = instance;\n                }\n            }\n        }\n        return splitStores;\n    };\n    Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n        var splitHashes = {};\n        for (var defId in eventUiBases) {\n            if (defId) { // not the '' key\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitHashes[key]) {\n                        splitHashes[key] = {};\n                    }\n                    splitHashes[key][defId] = eventUiBases[defId];\n                }\n            }\n        }\n        return splitHashes;\n    };\n    Splitter.prototype._splitInteraction = function (interaction) {\n        var splitStates = {};\n        if (interaction) {\n            var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n            );\n            // can't rely on defKeys because event data is mutated\n            var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n            var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n            var populate = function (key) {\n                if (!splitStates[key]) {\n                    splitStates[key] = {\n                        affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                        mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                        isEvent: interaction.isEvent,\n                        origSeg: interaction.origSeg\n                    };\n                }\n            };\n            for (var key in affectedStores_1) {\n                populate(key);\n            }\n            for (var key in mutatedStores_1) {\n                populate(key);\n            }\n        }\n        return splitStates;\n    };\n    return Splitter;\n}());\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n    var baseParts = [];\n    if (allUi) {\n        baseParts.push(allUi);\n    }\n    if (eventUiForKey) {\n        baseParts.push(eventUiForKey);\n    }\n    var stuff = {\n        '': combineEventUis(baseParts)\n    };\n    if (individualUi) {\n        __assign(stuff, individualUi);\n    }\n    return stuff;\n}\n\n// Generates HTML for an anchor to another view into the calendar.\n// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n// `gotoOptions` can either be a DateMarker, or an object with the form:\n// { date, type, forceOff }\n// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\nfunction buildGotoAnchorHtml(allOptions, dateEnv, gotoOptions, attrs, innerHtml) {\n    var date;\n    var type;\n    var forceOff;\n    var finalOptions;\n    if (gotoOptions instanceof Date) {\n        date = gotoOptions; // a single date-like input\n    }\n    else {\n        date = gotoOptions.date;\n        type = gotoOptions.type;\n        forceOff = gotoOptions.forceOff;\n    }\n    finalOptions = {\n        date: dateEnv.formatIso(date, { omitTime: true }),\n        type: type || 'day'\n    };\n    if (typeof attrs === 'string') {\n        innerHtml = attrs;\n        attrs = null;\n    }\n    attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n    innerHtml = innerHtml || '';\n    if (!forceOff && allOptions.navLinks) {\n        return '<a' + attrs +\n            ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n            innerHtml +\n            '</a>';\n    }\n    else {\n        return '<span' + attrs + '>' +\n            innerHtml +\n            '</span>';\n    }\n}\nfunction getAllDayHtml(allOptions) {\n    return allOptions.allDayHtml || htmlEscape(allOptions.allDayText);\n}\n// Computes HTML classNames for a single-day element\nfunction getDayClasses(date, dateProfile, context, noThemeHighlight) {\n    var calendar = context.calendar, options = context.options, theme = context.theme, dateEnv = context.dateEnv;\n    var classes = [];\n    var todayStart;\n    var todayEnd;\n    if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n        classes.push('fc-disabled-day');\n    }\n    else {\n        classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n        if (options.monthMode &&\n            dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n            classes.push('fc-other-month');\n        }\n        todayStart = startOfDay(calendar.getNow());\n        todayEnd = addDays(todayStart, 1);\n        if (date < todayStart) {\n            classes.push('fc-past');\n        }\n        else if (date >= todayEnd) {\n            classes.push('fc-future');\n        }\n        else {\n            classes.push('fc-today');\n            if (noThemeHighlight !== true) {\n                classes.push(theme.getClass('today'));\n            }\n        }\n    }\n    return classes;\n}\n\n// given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\nfunction unpromisify(func, success, failure) {\n    // guard against success/failure callbacks being called more than once\n    // and guard against a promise AND callback being used together.\n    var isResolved = false;\n    var wrappedSuccess = function () {\n        if (!isResolved) {\n            isResolved = true;\n            success.apply(this, arguments);\n        }\n    };\n    var wrappedFailure = function () {\n        if (!isResolved) {\n            isResolved = true;\n            if (failure) {\n                failure.apply(this, arguments);\n            }\n        }\n    };\n    var res = func(wrappedSuccess, wrappedFailure);\n    if (res && typeof res.then === 'function') {\n        res.then(wrappedSuccess, wrappedFailure);\n    }\n}\n\nvar Mixin = /** @class */ (function () {\n    function Mixin() {\n    }\n    // mix into a CLASS\n    Mixin.mixInto = function (destClass) {\n        this.mixIntoObj(destClass.prototype);\n    };\n    // mix into ANY object\n    Mixin.mixIntoObj = function (destObj) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            if (!destObj[name]) { // if destination doesn't already define it\n                destObj[name] = _this.prototype[name];\n            }\n        });\n    };\n    /*\n    will override existing methods\n    TODO: remove! not used anymore\n    */\n    Mixin.mixOver = function (destClass) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            destClass.prototype[name] = _this.prototype[name];\n        });\n    };\n    return Mixin;\n}());\n\n/*\nUSAGE:\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\nin class:\n  on: EmitterInterface['on']\n  one: EmitterInterface['one']\n  off: EmitterInterface['off']\n  trigger: EmitterInterface['trigger']\n  triggerWith: EmitterInterface['triggerWith']\n  hasHandlers: EmitterInterface['hasHandlers']\nafter class:\n  EmitterMixin.mixInto(TheClass)\n*/\nvar EmitterMixin = /** @class */ (function (_super) {\n    __extends(EmitterMixin, _super);\n    function EmitterMixin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmitterMixin.prototype.on = function (type, handler) {\n        addToHash(this._handlers || (this._handlers = {}), type, handler);\n        return this; // for chaining\n    };\n    // todo: add comments\n    EmitterMixin.prototype.one = function (type, handler) {\n        addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.off = function (type, handler) {\n        if (this._handlers) {\n            removeFromHash(this._handlers, type, handler);\n        }\n        if (this._oneHandlers) {\n            removeFromHash(this._oneHandlers, type, handler);\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.triggerWith(type, this, args);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.triggerWith = function (type, context, args) {\n        if (this._handlers) {\n            applyAll(this._handlers[type], context, args);\n        }\n        if (this._oneHandlers) {\n            applyAll(this._oneHandlers[type], context, args);\n            delete this._oneHandlers[type]; // will never fire again\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.hasHandlers = function (type) {\n        return (this._handlers && this._handlers[type] && this._handlers[type].length) ||\n            (this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length);\n    };\n    return EmitterMixin;\n}(Mixin));\nfunction addToHash(hash, type, handler) {\n    (hash[type] || (hash[type] = []))\n        .push(handler);\n}\nfunction removeFromHash(hash, type, handler) {\n    if (handler) {\n        if (hash[type]) {\n            hash[type] = hash[type].filter(function (func) {\n                return func !== handler;\n            });\n        }\n    }\n    else {\n        delete hash[type]; // remove all handler funcs for this type\n    }\n}\n\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\nvar PositionCache = /** @class */ (function () {\n    function PositionCache(originEl, els, isHorizontal, isVertical) {\n        this.originEl = originEl;\n        this.els = els;\n        this.isHorizontal = isHorizontal;\n        this.isVertical = isVertical;\n    }\n    // Queries the els for coordinates and stores them.\n    // Call this method before using and of the get* methods below.\n    PositionCache.prototype.build = function () {\n        var originEl = this.originEl;\n        var originClientRect = this.originClientRect =\n            originEl.getBoundingClientRect(); // relative to viewport top-left\n        if (this.isHorizontal) {\n            this.buildElHorizontals(originClientRect.left);\n        }\n        if (this.isVertical) {\n            this.buildElVerticals(originClientRect.top);\n        }\n    };\n    // Populates the left/right internal coordinate arrays\n    PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n        var lefts = [];\n        var rights = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            lefts.push(rect.left - originClientLeft);\n            rights.push(rect.right - originClientLeft);\n        }\n        this.lefts = lefts;\n        this.rights = rights;\n    };\n    // Populates the top/bottom internal coordinate arrays\n    PositionCache.prototype.buildElVerticals = function (originClientTop) {\n        var tops = [];\n        var bottoms = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            tops.push(rect.top - originClientTop);\n            bottoms.push(rect.bottom - originClientTop);\n        }\n        this.tops = tops;\n        this.bottoms = bottoms;\n    };\n    // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.leftToIndex = function (leftPosition) {\n        var lefts = this.lefts;\n        var rights = this.rights;\n        var len = lefts.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                return i;\n            }\n        }\n    };\n    // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.topToIndex = function (topPosition) {\n        var tops = this.tops;\n        var bottoms = this.bottoms;\n        var len = tops.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                return i;\n            }\n        }\n    };\n    // Gets the width of the element at the given index\n    PositionCache.prototype.getWidth = function (leftIndex) {\n        return this.rights[leftIndex] - this.lefts[leftIndex];\n    };\n    // Gets the height of the element at the given index\n    PositionCache.prototype.getHeight = function (topIndex) {\n        return this.bottoms[topIndex] - this.tops[topIndex];\n    };\n    return PositionCache;\n}());\n\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\nvar ScrollController = /** @class */ (function () {\n    function ScrollController() {\n    }\n    ScrollController.prototype.getMaxScrollTop = function () {\n        return this.getScrollHeight() - this.getClientHeight();\n    };\n    ScrollController.prototype.getMaxScrollLeft = function () {\n        return this.getScrollWidth() - this.getClientWidth();\n    };\n    ScrollController.prototype.canScrollVertically = function () {\n        return this.getMaxScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollHorizontally = function () {\n        return this.getMaxScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollUp = function () {\n        return this.getScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollDown = function () {\n        return this.getScrollTop() < this.getMaxScrollTop();\n    };\n    ScrollController.prototype.canScrollLeft = function () {\n        return this.getScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollRight = function () {\n        return this.getScrollLeft() < this.getMaxScrollLeft();\n    };\n    return ScrollController;\n}());\nvar ElementScrollController = /** @class */ (function (_super) {\n    __extends(ElementScrollController, _super);\n    function ElementScrollController(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    ElementScrollController.prototype.getScrollTop = function () {\n        return this.el.scrollTop;\n    };\n    ElementScrollController.prototype.getScrollLeft = function () {\n        return this.el.scrollLeft;\n    };\n    ElementScrollController.prototype.setScrollTop = function (top) {\n        this.el.scrollTop = top;\n    };\n    ElementScrollController.prototype.setScrollLeft = function (left) {\n        this.el.scrollLeft = left;\n    };\n    ElementScrollController.prototype.getScrollWidth = function () {\n        return this.el.scrollWidth;\n    };\n    ElementScrollController.prototype.getScrollHeight = function () {\n        return this.el.scrollHeight;\n    };\n    ElementScrollController.prototype.getClientHeight = function () {\n        return this.el.clientHeight;\n    };\n    ElementScrollController.prototype.getClientWidth = function () {\n        return this.el.clientWidth;\n    };\n    return ElementScrollController;\n}(ScrollController));\nvar WindowScrollController = /** @class */ (function (_super) {\n    __extends(WindowScrollController, _super);\n    function WindowScrollController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WindowScrollController.prototype.getScrollTop = function () {\n        return window.pageYOffset;\n    };\n    WindowScrollController.prototype.getScrollLeft = function () {\n        return window.pageXOffset;\n    };\n    WindowScrollController.prototype.setScrollTop = function (n) {\n        window.scroll(window.pageXOffset, n);\n    };\n    WindowScrollController.prototype.setScrollLeft = function (n) {\n        window.scroll(n, window.pageYOffset);\n    };\n    WindowScrollController.prototype.getScrollWidth = function () {\n        return document.documentElement.scrollWidth;\n    };\n    WindowScrollController.prototype.getScrollHeight = function () {\n        return document.documentElement.scrollHeight;\n    };\n    WindowScrollController.prototype.getClientHeight = function () {\n        return document.documentElement.clientHeight;\n    };\n    WindowScrollController.prototype.getClientWidth = function () {\n        return document.documentElement.clientWidth;\n    };\n    return WindowScrollController;\n}(ScrollController));\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar ScrollComponent = /** @class */ (function (_super) {\n    __extends(ScrollComponent, _super);\n    function ScrollComponent(overflowX, overflowY) {\n        var _this = _super.call(this, createElement('div', {\n            className: 'fc-scroller'\n        })) || this;\n        _this.overflowX = overflowX;\n        _this.overflowY = overflowY;\n        _this.applyOverflow();\n        return _this;\n    }\n    // sets to natural height, unlocks overflow\n    ScrollComponent.prototype.clear = function () {\n        this.setHeight('auto');\n        this.applyOverflow();\n    };\n    ScrollComponent.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    // Overflow\n    // -----------------------------------------------------------------------------------------------------------------\n    ScrollComponent.prototype.applyOverflow = function () {\n        applyStyle(this.el, {\n            overflowX: this.overflowX,\n            overflowY: this.overflowY\n        });\n    };\n    // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n    // Useful for preserving scrollbar widths regardless of future resizes.\n    // Can pass in scrollbarWidths for optimization.\n    ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n        var overflowX = this.overflowX;\n        var overflowY = this.overflowY;\n        scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n        if (overflowX === 'auto') {\n            overflowX = (scrollbarWidths.bottom || // horizontal scrollbars?\n                this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        if (overflowY === 'auto') {\n            overflowY = (scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n                this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        applyStyle(this.el, { overflowX: overflowX, overflowY: overflowY });\n    };\n    ScrollComponent.prototype.setHeight = function (height) {\n        applyStyleProp(this.el, 'height', height);\n    };\n    ScrollComponent.prototype.getScrollbarWidths = function () {\n        var edges = computeEdges(this.el);\n        return {\n            left: edges.scrollbarLeft,\n            right: edges.scrollbarRight,\n            bottom: edges.scrollbarBottom\n        };\n    };\n    return ScrollComponent;\n}(ElementScrollController));\n\nvar Theme = /** @class */ (function () {\n    function Theme(calendarOptions) {\n        this.calendarOptions = calendarOptions;\n        this.processIconOverride();\n    }\n    Theme.prototype.processIconOverride = function () {\n        if (this.iconOverrideOption) {\n            this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n        }\n    };\n    Theme.prototype.setIconOverride = function (iconOverrideHash) {\n        var iconClassesCopy;\n        var buttonName;\n        if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n            iconClassesCopy = __assign({}, this.iconClasses);\n            for (buttonName in iconOverrideHash) {\n                iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n            }\n            this.iconClasses = iconClassesCopy;\n        }\n        else if (iconOverrideHash === false) {\n            this.iconClasses = {};\n        }\n    };\n    Theme.prototype.applyIconOverridePrefix = function (className) {\n        var prefix = this.iconOverridePrefix;\n        if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n            className = prefix + className;\n        }\n        return className;\n    };\n    Theme.prototype.getClass = function (key) {\n        return this.classes[key] || '';\n    };\n    Theme.prototype.getIconClass = function (buttonName) {\n        var className = this.iconClasses[buttonName];\n        if (className) {\n            return this.baseIconClass + ' ' + className;\n        }\n        return '';\n    };\n    Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n        var className;\n        if (this.iconOverrideCustomButtonOption) {\n            className = customButtonProps[this.iconOverrideCustomButtonOption];\n            if (className) {\n                return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n            }\n        }\n        return '';\n    };\n    return Theme;\n}());\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\n\nvar guid = 0;\nvar ComponentContext = /** @class */ (function () {\n    function ComponentContext(calendar, theme, dateEnv, options, view) {\n        this.calendar = calendar;\n        this.theme = theme;\n        this.dateEnv = dateEnv;\n        this.options = options;\n        this.view = view;\n        this.isRtl = options.dir === 'rtl';\n        this.eventOrderSpecs = parseFieldSpecs(options.eventOrder);\n        this.nextDayThreshold = createDuration(options.nextDayThreshold);\n    }\n    ComponentContext.prototype.extend = function (options, view) {\n        return new ComponentContext(this.calendar, this.theme, this.dateEnv, options || this.options, view || this.view);\n    };\n    return ComponentContext;\n}());\nvar Component = /** @class */ (function () {\n    function Component() {\n        this.everRendered = false;\n        this.uid = String(guid++);\n    }\n    Component.addEqualityFuncs = function (newFuncs) {\n        this.prototype.equalityFuncs = __assign({}, this.prototype.equalityFuncs, newFuncs);\n    };\n    Component.prototype.receiveProps = function (props, context) {\n        this.receiveContext(context);\n        var _a = recycleProps(this.props || {}, props, this.equalityFuncs), anyChanges = _a.anyChanges, comboProps = _a.comboProps;\n        this.props = comboProps;\n        if (anyChanges) {\n            if (this.everRendered) {\n                this.beforeUpdate();\n            }\n            this.render(comboProps, context);\n            if (this.everRendered) {\n                this.afterUpdate();\n            }\n        }\n        this.everRendered = true;\n    };\n    Component.prototype.receiveContext = function (context) {\n        var oldContext = this.context;\n        this.context = context;\n        if (!oldContext) {\n            this.firstContext(context);\n        }\n    };\n    Component.prototype.render = function (props, context) {\n    };\n    Component.prototype.firstContext = function (context) {\n    };\n    Component.prototype.beforeUpdate = function () {\n    };\n    Component.prototype.afterUpdate = function () {\n    };\n    // after destroy is called, this component won't ever be used again\n    Component.prototype.destroy = function () {\n    };\n    return Component;\n}());\nComponent.prototype.equalityFuncs = {};\n/*\nReuses old values when equal. If anything is unequal, returns newProps as-is.\nGreat for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n*/\nfunction recycleProps(oldProps, newProps, equalityFuncs) {\n    var comboProps = {}; // some old, some new\n    var anyChanges = false;\n    for (var key in newProps) {\n        if (key in oldProps && (oldProps[key] === newProps[key] ||\n            (equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key])))) {\n            // equal to old? use old prop\n            comboProps[key] = oldProps[key];\n        }\n        else {\n            comboProps[key] = newProps[key];\n            anyChanges = true;\n        }\n    }\n    for (var key in oldProps) {\n        if (!(key in newProps)) {\n            anyChanges = true;\n            break;\n        }\n    }\n    return { anyChanges: anyChanges, comboProps: comboProps };\n}\n\n/*\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\nvar DateComponent = /** @class */ (function (_super) {\n    __extends(DateComponent, _super);\n    function DateComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    DateComponent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        removeElement(this.el);\n    };\n    // Hit System\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.buildPositionCaches = function () {\n    };\n    DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        return null; // this should be abstract\n    };\n    // Validation\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isInteractionValid = function (interaction) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        var instances = interaction.mutatedEvents.instances;\n        if (dateProfile) { // HACK for DayTile\n            for (var instanceId in instances) {\n                if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n                    return false;\n                }\n            }\n        }\n        return isInteractionValid(interaction, calendar);\n    };\n    DateComponent.prototype.isDateSelectionValid = function (selection) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        if (dateProfile && // HACK for DayTile\n            !rangeContainsRange(dateProfile.validRange, selection.range)) {\n            return false;\n        }\n        return isDateSelectionValid(selection, calendar);\n    };\n    // Pointer Interaction Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isValidSegDownEl = function (el) {\n        return !this.props.eventDrag && // HACK\n            !this.props.eventResize && // HACK\n            !elementClosest(el, '.fc-mirror') &&\n            (this.isPopover() || !this.isInPopover(el));\n        // ^above line ensures we don't detect a seg interaction within a nested component.\n        // it's a HACK because it only supports a popover as the nested component.\n    };\n    DateComponent.prototype.isValidDateDownEl = function (el) {\n        var segEl = elementClosest(el, this.fgSegSelector);\n        return (!segEl || segEl.classList.contains('fc-mirror')) &&\n            !elementClosest(el, '.fc-more') && // a \"more..\" link\n            !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n            !this.isInPopover(el);\n    };\n    DateComponent.prototype.isPopover = function () {\n        return this.el.classList.contains('fc-popover');\n    };\n    DateComponent.prototype.isInPopover = function (el) {\n        return Boolean(elementClosest(el, '.fc-popover'));\n    };\n    return DateComponent;\n}(Component));\nDateComponent.prototype.fgSegSelector = '.fc-event-container > *';\nDateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\n\nvar uid$1 = 0;\nfunction createPlugin(input) {\n    return {\n        id: String(uid$1++),\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        eventDefParsers: input.eventDefParsers || [],\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n        viewContainerModifiers: input.viewContainerModifiers || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        defaultView: input.defaultView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {}\n    };\n}\nvar PluginSystem = /** @class */ (function () {\n    function PluginSystem() {\n        this.hooks = {\n            reducers: [],\n            eventDefParsers: [],\n            isDraggableTransformers: [],\n            eventDragMutationMassagers: [],\n            eventDefMutationAppliers: [],\n            dateSelectionTransformers: [],\n            datePointTransforms: [],\n            dateSpanTransforms: [],\n            views: {},\n            viewPropsTransformers: [],\n            isPropsValid: null,\n            externalDefTransforms: [],\n            eventResizeJoinTransforms: [],\n            viewContainerModifiers: [],\n            eventDropTransformers: [],\n            componentInteractions: [],\n            calendarInteractions: [],\n            themeClasses: {},\n            eventSourceDefs: [],\n            cmdFormatter: null,\n            recurringTypes: [],\n            namedTimeZonedImpl: null,\n            defaultView: '',\n            elementDraggingImpl: null,\n            optionChangeHandlers: {}\n        };\n        this.addedHash = {};\n    }\n    PluginSystem.prototype.add = function (plugin) {\n        if (!this.addedHash[plugin.id]) {\n            this.addedHash[plugin.id] = true;\n            for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n                var dep = _a[_i];\n                this.add(dep);\n            }\n            this.hooks = combineHooks(this.hooks, plugin);\n        }\n    };\n    return PluginSystem;\n}());\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: __assign({}, hooks0.views, hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n        viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: __assign({}, hooks0.themeClasses, hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        defaultView: hooks0.defaultView || hooks1.defaultView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: __assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n    };\n}\n\nvar eventSourceDef = {\n    ignoreRange: true,\n    parseMeta: function (raw) {\n        if (Array.isArray(raw)) { // short form\n            return raw;\n        }\n        else if (Array.isArray(raw.events)) {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success) {\n        success({\n            rawEvents: arg.eventSource.meta\n        });\n    }\n};\nvar ArrayEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef]\n});\n\nvar eventSourceDef$1 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'function') { // short form\n            return raw;\n        }\n        else if (typeof raw.events === 'function') {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.calendar.dateEnv;\n        var func = arg.eventSource.meta;\n        unpromisify(func.bind(null, {\n            start: dateEnv.toDate(arg.range.start),\n            end: dateEnv.toDate(arg.range.end),\n            startStr: dateEnv.formatIso(arg.range.start),\n            endStr: dateEnv.formatIso(arg.range.end),\n            timeZone: dateEnv.timeZone\n        }), function (rawEvents) {\n            success({ rawEvents: rawEvents }); // needs an object response\n        }, failure // send errorObj directly to failure callback\n        );\n    }\n};\nvar FuncEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$1]\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n    method = method.toUpperCase();\n    var body = null;\n    if (method === 'GET') {\n        url = injectQueryStringParams(url, params);\n    }\n    else {\n        body = encodeParams(params);\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    if (method !== 'GET') {\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            try {\n                var res = JSON.parse(xhr.responseText);\n                successCallback(res, xhr);\n            }\n            catch (err) {\n                failureCallback('Failure parsing JSON', xhr);\n            }\n        }\n        else {\n            failureCallback('Request failed', xhr);\n        }\n    };\n    xhr.onerror = function () {\n        failureCallback('Request failed', xhr);\n    };\n    xhr.send(body);\n}\nfunction injectQueryStringParams(url, params) {\n    return url +\n        (url.indexOf('?') === -1 ? '?' : '&') +\n        encodeParams(params);\n}\nfunction encodeParams(params) {\n    var parts = [];\n    for (var key in params) {\n        parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n    }\n    return parts.join('&');\n}\n\nvar eventSourceDef$2 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'string') { // short form\n            raw = { url: raw };\n        }\n        else if (!raw || typeof raw !== 'object' || !raw.url) {\n            return null;\n        }\n        return {\n            url: raw.url,\n            method: (raw.method || 'GET').toUpperCase(),\n            extraParams: raw.extraParams,\n            startParam: raw.startParam,\n            endParam: raw.endParam,\n            timeZoneParam: raw.timeZoneParam\n        };\n    },\n    fetch: function (arg, success, failure) {\n        var meta = arg.eventSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n        requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n            success({ rawEvents: rawEvents, xhr: xhr });\n        }, function (errorMessage, xhr) {\n            failure({ message: errorMessage, xhr: xhr });\n        });\n    }\n};\nvar JsonFeedEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$2]\n});\nfunction buildRequestParams(meta, range, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = calendar.opt('startParam');\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = calendar.opt('endParam');\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = calendar.opt('timeZoneParam');\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nvar recurring = {\n    parse: function (rawEvent, leftoverProps, dateEnv) {\n        var createMarker = dateEnv.createMarker.bind(dateEnv);\n        var processors = {\n            daysOfWeek: null,\n            startTime: createDuration,\n            endTime: createDuration,\n            startRecur: createMarker,\n            endRecur: createMarker\n        };\n        var props = refineProps(rawEvent, processors, {}, leftoverProps);\n        var anyValid = false;\n        for (var propName in props) {\n            if (props[propName] != null) {\n                anyValid = true;\n                break;\n            }\n        }\n        if (anyValid) {\n            var duration = null;\n            if ('duration' in leftoverProps) {\n                duration = createDuration(leftoverProps.duration);\n                delete leftoverProps.duration;\n            }\n            if (!duration && props.startTime && props.endTime) {\n                duration = subtractDurations(props.endTime, props.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!props.startTime && !props.endTime),\n                duration: duration,\n                typeData: props // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand: function (typeData, framingRange, dateEnv) {\n        var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        else {\n            return [];\n        }\n    }\n};\nvar SimpleRecurrencePlugin = createPlugin({\n    recurringTypes: [recurring]\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    var dayMarker = startOfDay(framingRange.start);\n    var endMarker = framingRange.end;\n    var instanceStarts = [];\n    while (dayMarker < endMarker) {\n        var instanceStart \n        // if everyday, or this particular day-of-week\n        = void 0;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nvar DefaultOptionChangeHandlers = createPlugin({\n    optionChangeHandlers: {\n        events: function (events, calendar, deepEqual) {\n            handleEventSources([events], calendar, deepEqual);\n        },\n        eventSources: handleEventSources,\n        plugins: handlePlugins\n    }\n});\nfunction handleEventSources(inputs, calendar, deepEqual) {\n    var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n    var newInputs = [];\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        var inputFound = false;\n        for (var i = 0; i < unfoundSources.length; i++) {\n            if (deepEqual(unfoundSources[i]._raw, input)) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n        var unfoundSource = unfoundSources_1[_a];\n        calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId\n        });\n    }\n    for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n        var newInput = newInputs_1[_b];\n        calendar.addEventSource(newInput);\n    }\n}\n// shortcoming: won't remove plugins\nfunction handlePlugins(inputs, calendar) {\n    calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n}\n\nvar config = {}; // TODO: make these options\nvar globalDefaults = {\n    defaultRangeSeparator: ' - ',\n    titleRangeSeparator: ' \\u2013 ',\n    defaultTimedEventDuration: '01:00:00',\n    defaultAllDayEventDuration: { day: 1 },\n    forceEventDuration: false,\n    nextDayThreshold: '00:00:00',\n    // display\n    columnHeader: true,\n    defaultView: '',\n    aspectRatio: 1.35,\n    header: {\n        left: 'title',\n        center: '',\n        right: 'today prev,next'\n    },\n    weekends: true,\n    weekNumbers: false,\n    weekNumberCalculation: 'local',\n    editable: false,\n    // nowIndicator: false,\n    scrollTime: '06:00:00',\n    minTime: '00:00:00',\n    maxTime: '24:00:00',\n    showNonCurrentDates: true,\n    // event ajax\n    lazyFetching: true,\n    startParam: 'start',\n    endParam: 'end',\n    timeZoneParam: 'timeZone',\n    timeZone: 'local',\n    // allDayDefault: undefined,\n    // locale\n    locales: [],\n    locale: '',\n    // dir: will get this from the default locale\n    // buttonIcons: null,\n    // allows setting a min-height to the event segment to prevent short events overlapping each other\n    timeGridEventMinHeight: 0,\n    themeSystem: 'standard',\n    // eventResizableFromStart: false,\n    dragRevertDuration: 500,\n    dragScroll: true,\n    allDayMaintainDuration: false,\n    // selectable: false,\n    unselectAuto: true,\n    // selectMinDistance: 0,\n    dropAccept: '*',\n    eventOrder: 'start,-duration,allDay,title',\n    // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n    // rerenderDelay: null,\n    eventLimit: false,\n    eventLimitClick: 'popover',\n    dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n    handleWindowResize: true,\n    windowResizeDelay: 100,\n    longPressDelay: 1000,\n    eventDragMinDistance: 5 // only applies to mouse\n};\nvar rtlDefaults = {\n    header: {\n        left: 'next,prev today',\n        center: '',\n        right: 'title'\n    },\n    buttonIcons: {\n        // TODO: make RTL support the responibility of the theme\n        prev: 'fc-icon-chevron-right',\n        next: 'fc-icon-chevron-left',\n        prevYear: 'fc-icon-chevrons-right',\n        nextYear: 'fc-icon-chevrons-left'\n    }\n};\nvar complexOptions = [\n    'header',\n    'footer',\n    'buttonText',\n    'buttonIcons'\n];\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n    return mergeProps(optionObjs, complexOptions);\n}\n// TODO: move this stuff to a \"plugin\"-related file...\nvar INTERNAL_PLUGINS = [\n    ArrayEventSourcePlugin,\n    FuncEventSourcePlugin,\n    JsonFeedEventSourcePlugin,\n    SimpleRecurrencePlugin,\n    DefaultOptionChangeHandlers\n];\nfunction refinePluginDefs(pluginInputs) {\n    var plugins = [];\n    for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n        var pluginInput = pluginInputs_1[_i];\n        if (typeof pluginInput === 'string') {\n            var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n            if (!window[globalName]) {\n                console.warn('Plugin file not loaded for ' + pluginInput);\n            }\n            else {\n                plugins.push(window[globalName].default); // is an ES6 module\n            }\n        }\n        else {\n            plugins.push(pluginInput);\n        }\n    }\n    return INTERNAL_PLUGINS.concat(plugins);\n}\n\nvar RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4 // 4 days need to be within the year to be considered the first week\n    },\n    dir: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list'\n    },\n    weekLabel: 'W',\n    allDayText: 'all-day',\n    eventLimitText: 'more',\n    noEventsMessage: 'No events to display'\n};\nfunction parseRawLocales(explicitRawLocales) {\n    var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n    var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n    var allRawLocales = globalArray.concat(// globalArray is low prio\n    hashValuesToArray(globalObject), // medium prio\n    explicitRawLocales // highest prio\n    );\n    var rawLocaleMap = {\n        en: RAW_EN_LOCALE // necessary?\n    };\n    for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n        var rawLocale = allRawLocales_1[_i];\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode: defaultCode\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    else {\n        return queryLocale(inputSingular, available);\n    }\n}\nfunction queryLocale(codeArg, available) {\n    var codes = [].concat(codeArg || []); // will convert to array\n    var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (var i = 0; i < codes.length; i++) {\n        var parts = codes[i].toLocaleLowerCase().split('-');\n        for (var j = parts.length; j > 0; j--) {\n            var simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    var week = merged.week;\n    delete merged.week;\n    return {\n        codeArg: codeArg,\n        codes: codes,\n        week: week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged\n    };\n}\n\nvar OptionsManager = /** @class */ (function () {\n    function OptionsManager(overrides) {\n        this.overrides = __assign({}, overrides); // make a copy\n        this.dynamicOverrides = {};\n        this.compute();\n    }\n    OptionsManager.prototype.mutate = function (updates, removals, isDynamic) {\n        if (!Object.keys(updates).length && !removals.length) {\n            return;\n        }\n        var overrideHash = isDynamic ? this.dynamicOverrides : this.overrides;\n        __assign(overrideHash, updates);\n        for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n            var propName = removals_1[_i];\n            delete overrideHash[propName];\n        }\n        this.compute();\n    };\n    // Computes the flattened options hash for the calendar and assigns to `this.options`.\n    // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n    OptionsManager.prototype.compute = function () {\n        // TODO: not a very efficient system\n        var locales = firstDefined(// explicit locale option given?\n        this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n        var locale = firstDefined(// explicit locales option given?\n        this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n        var available = parseRawLocales(locales);\n        var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n        var dir = firstDefined(// based on options computed so far, is direction RTL?\n        this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n        var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n        this.dirDefaults = dirDefaults;\n        this.localeDefaults = localeDefaults;\n        this.computed = mergeOptions([\n            globalDefaults,\n            dirDefaults,\n            localeDefaults,\n            this.overrides,\n            this.dynamicOverrides\n        ]);\n    };\n    return OptionsManager;\n}());\n\nvar calendarSystemClassMap = {};\nfunction registerCalendarSystem(name, theClass) {\n    calendarSystemClassMap[name] = theClass;\n}\nfunction createCalendarSystem(name) {\n    return new calendarSystemClassMap[name]();\n}\nvar GregorianCalendarSystem = /** @class */ (function () {\n    function GregorianCalendarSystem() {\n    }\n    GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n        return d.getUTCFullYear();\n    };\n    GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n        return d.getUTCMonth();\n    };\n    GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n        return d.getUTCDate();\n    };\n    GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n        return arrayToUtcDate(arr);\n    };\n    GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n        return dateToUtcArray(marker);\n    };\n    return GregorianCalendarSystem;\n}());\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\n\nvar ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\nfunction parse(str) {\n    var m = ISO_RE.exec(str);\n    if (m) {\n        var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n        if (isValidDate(marker)) {\n            var timeZoneOffset = null;\n            if (m[13]) {\n                timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                    Number(m[18] || 0));\n            }\n            return {\n                marker: marker,\n                isTimeUnspecified: !m[6],\n                timeZoneOffset: timeZoneOffset\n            };\n        }\n    }\n    return null;\n}\n\nvar DateEnv = /** @class */ (function () {\n    function DateEnv(settings) {\n        var timeZone = this.timeZone = settings.timeZone;\n        var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n        if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n            this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n        }\n        this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n        this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n        this.locale = settings.locale;\n        this.weekDow = settings.locale.week.dow;\n        this.weekDoy = settings.locale.week.doy;\n        if (settings.weekNumberCalculation === 'ISO') {\n            this.weekDow = 1;\n            this.weekDoy = 4;\n        }\n        if (typeof settings.firstDay === 'number') {\n            this.weekDow = settings.firstDay;\n        }\n        if (typeof settings.weekNumberCalculation === 'function') {\n            this.weekNumberFunc = settings.weekNumberCalculation;\n        }\n        this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n        this.cmdFormatter = settings.cmdFormatter;\n    }\n    // Creating / Parsing\n    DateEnv.prototype.createMarker = function (input) {\n        var meta = this.createMarkerMeta(input);\n        if (meta === null) {\n            return null;\n        }\n        return meta.marker;\n    };\n    DateEnv.prototype.createNowMarker = function () {\n        if (this.canComputeOffset) {\n            return this.timestampToMarker(new Date().valueOf());\n        }\n        else {\n            // if we can't compute the current date val for a timezone,\n            // better to give the current local date vals than UTC\n            return arrayToUtcDate(dateToLocalArray(new Date()));\n        }\n    };\n    DateEnv.prototype.createMarkerMeta = function (input) {\n        if (typeof input === 'string') {\n            return this.parse(input);\n        }\n        var marker = null;\n        if (typeof input === 'number') {\n            marker = this.timestampToMarker(input);\n        }\n        else if (input instanceof Date) {\n            input = input.valueOf();\n            if (!isNaN(input)) {\n                marker = this.timestampToMarker(input);\n            }\n        }\n        else if (Array.isArray(input)) {\n            marker = arrayToUtcDate(input);\n        }\n        if (marker === null || !isValidDate(marker)) {\n            return null;\n        }\n        return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n    };\n    DateEnv.prototype.parse = function (s) {\n        var parts = parse(s);\n        if (parts === null) {\n            return null;\n        }\n        var marker = parts.marker;\n        var forcedTzo = null;\n        if (parts.timeZoneOffset !== null) {\n            if (this.canComputeOffset) {\n                marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n            }\n            else {\n                forcedTzo = parts.timeZoneOffset;\n            }\n        }\n        return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n    };\n    // Accessors\n    DateEnv.prototype.getYear = function (marker) {\n        return this.calendarSystem.getMarkerYear(marker);\n    };\n    DateEnv.prototype.getMonth = function (marker) {\n        return this.calendarSystem.getMarkerMonth(marker);\n    };\n    // Adding / Subtracting\n    DateEnv.prototype.add = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += dur.years;\n        a[1] += dur.months;\n        a[2] += dur.days;\n        a[6] += dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.subtract = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] -= dur.years;\n        a[1] -= dur.months;\n        a[2] -= dur.days;\n        a[6] -= dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addYears = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addMonths = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[1] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    // Diffing Whole Units\n    DateEnv.prototype.diffWholeYears = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n            calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n            return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n        }\n        return null;\n    };\n    DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n            return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n        }\n        return null;\n    };\n    // Range / Duration\n    DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n        var n = this.diffWholeYears(m0, m1);\n        if (n !== null) {\n            return { unit: 'year', value: n };\n        }\n        n = this.diffWholeMonths(m0, m1);\n        if (n !== null) {\n            return { unit: 'month', value: n };\n        }\n        n = diffWholeWeeks(m0, m1);\n        if (n !== null) {\n            return { unit: 'week', value: n };\n        }\n        n = diffWholeDays(m0, m1);\n        if (n !== null) {\n            return { unit: 'day', value: n };\n        }\n        n = diffHours(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'hour', value: n };\n        }\n        n = diffMinutes(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'minute', value: n };\n        }\n        n = diffSeconds(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'second', value: n };\n        }\n        return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n    };\n    DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n        // TODO: can use greatestWholeUnit\n        var diff;\n        if (d.years) {\n            diff = this.diffWholeYears(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughYears(d);\n            }\n        }\n        if (d.months) {\n            diff = this.diffWholeMonths(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughMonths(d);\n            }\n        }\n        if (d.days) {\n            diff = diffWholeDays(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughDays(d);\n            }\n        }\n        return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n    };\n    // Start-Of\n    DateEnv.prototype.startOf = function (m, unit) {\n        if (unit === 'year') {\n            return this.startOfYear(m);\n        }\n        else if (unit === 'month') {\n            return this.startOfMonth(m);\n        }\n        else if (unit === 'week') {\n            return this.startOfWeek(m);\n        }\n        else if (unit === 'day') {\n            return startOfDay(m);\n        }\n        else if (unit === 'hour') {\n            return startOfHour(m);\n        }\n        else if (unit === 'minute') {\n            return startOfMinute(m);\n        }\n        else if (unit === 'second') {\n            return startOfSecond(m);\n        }\n    };\n    DateEnv.prototype.startOfYear = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m)\n        ]);\n    };\n    DateEnv.prototype.startOfMonth = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m)\n        ]);\n    };\n    DateEnv.prototype.startOfWeek = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n            m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7)\n        ]);\n    };\n    // Week Number\n    DateEnv.prototype.computeWeekNumber = function (marker) {\n        if (this.weekNumberFunc) {\n            return this.weekNumberFunc(this.toDate(marker));\n        }\n        else {\n            return weekOfYear(marker, this.weekDow, this.weekDoy);\n        }\n    };\n    // TODO: choke on timeZoneName: long\n    DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        return formatter.format({\n            marker: marker,\n            timeZoneOffset: dateOptions.forcedTzo != null ?\n                dateOptions.forcedTzo :\n                this.offsetForMarker(marker)\n        }, this);\n    };\n    DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        if (dateOptions.isEndExclusive) {\n            end = addMs(end, -1);\n        }\n        return formatter.formatRange({\n            marker: start,\n            timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                dateOptions.forcedStartTzo :\n                this.offsetForMarker(start)\n        }, {\n            marker: end,\n            timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                dateOptions.forcedEndTzo :\n                this.offsetForMarker(end)\n        }, this);\n    };\n    DateEnv.prototype.formatIso = function (marker, extraOptions) {\n        if (extraOptions === void 0) { extraOptions = {}; }\n        var timeZoneOffset = null;\n        if (!extraOptions.omitTimeZoneOffset) {\n            if (extraOptions.forcedTzo != null) {\n                timeZoneOffset = extraOptions.forcedTzo;\n            }\n            else {\n                timeZoneOffset = this.offsetForMarker(marker);\n            }\n        }\n        return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n    };\n    // TimeZone\n    DateEnv.prototype.timestampToMarker = function (ms) {\n        if (this.timeZone === 'local') {\n            return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n        }\n        else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n            return new Date(ms);\n        }\n        else {\n            return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n        }\n    };\n    DateEnv.prototype.offsetForMarker = function (m) {\n        if (this.timeZone === 'local') {\n            return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n        }\n        else if (this.timeZone === 'UTC') {\n            return 0;\n        }\n        else if (this.namedTimeZoneImpl) {\n            return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n        }\n        return null;\n    };\n    // Conversion\n    DateEnv.prototype.toDate = function (m, forcedTzo) {\n        if (this.timeZone === 'local') {\n            return arrayToLocalDate(dateToUtcArray(m));\n        }\n        else if (this.timeZone === 'UTC') {\n            return new Date(m.valueOf()); // make sure it's a copy\n        }\n        else if (!this.namedTimeZoneImpl) {\n            return new Date(m.valueOf() - (forcedTzo || 0));\n        }\n        else {\n            return new Date(m.valueOf() -\n                this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n            );\n        }\n    };\n    return DateEnv;\n}());\n\nvar SIMPLE_SOURCE_PROPS = {\n    id: String,\n    allDayDefault: Boolean,\n    eventDataTransform: Function,\n    success: Function,\n    failure: Function\n};\nvar uid$2 = 0;\nfunction doesSourceNeedRange(eventSource, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\nfunction parseEventSource(raw, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(raw);\n        if (meta) {\n            var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n            res._raw = raw;\n            return res;\n        }\n    }\n    return null;\n}\nfunction parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n    var leftovers0 = {};\n    var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n    var leftovers1 = {};\n    var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n    props.isFetching = false;\n    props.latestFetchId = '';\n    props.fetchRange = null;\n    props.publicId = String(raw.id || '');\n    props.sourceId = String(uid$2++);\n    props.sourceDefId = sourceDefId;\n    props.meta = meta;\n    props.ui = ui;\n    props.extendedProps = leftovers1;\n    return props;\n}\n\nfunction reduceEventSources (eventSources, action, dateProfile, calendar) {\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventSources;\n            }\n        case 'FETCH_EVENT_SOURCES':\n        case 'CHANGE_TIMEZONE':\n            return fetchSourcesByIds(eventSources, action.sourceIds ?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nvar uid$3 = 0;\nfunction addSources(eventSourceHash, sources, fetchRange, calendar) {\n    var hash = {};\n    for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n        var source = sources_1[_i];\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, calendar);\n    }\n    return __assign({}, eventSourceHash, hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, function (eventSource) {\n        return eventSource.sourceId !== sourceId;\n    });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, calendar) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n        return isSourceDirty(eventSource, fetchRange, calendar);\n    }), fetchRange, calendar);\n}\nfunction isSourceDirty(eventSource, fetchRange, calendar) {\n    if (!doesSourceNeedRange(eventSource, calendar)) {\n        return !eventSource.latestFetchId;\n    }\n    else {\n        return !calendar.opt('lazyFetching') ||\n            !eventSource.fetchRange ||\n            eventSource.isFetching || // always cancel outdated in-progress fetches\n            fetchRange.start < eventSource.fetchRange.start ||\n            fetchRange.end > eventSource.fetchRange.end;\n    }\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n    var nextSources = {};\n    for (var sourceId in prevSources) {\n        var source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, calendar) {\n    var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n    var fetchId = String(uid$3++);\n    sourceDef.fetch({\n        eventSource: eventSource,\n        calendar: calendar,\n        range: fetchRange\n    }, function (res) {\n        var rawEvents = res.rawEvents;\n        var calSuccess = calendar.opt('eventSourceSuccess');\n        var calSuccessRes;\n        var sourceSuccessRes;\n        if (eventSource.success) {\n            sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n        }\n        if (calSuccess) {\n            calSuccessRes = calSuccess(rawEvents, res.xhr);\n        }\n        rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n        calendar.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawEvents: rawEvents\n        });\n    }, function (error) {\n        var callFailure = calendar.opt('eventSourceFailure');\n        console.warn(error.message, error);\n        if (eventSource.failure) {\n            eventSource.failure(error);\n        }\n        if (callFailure) {\n            callFailure(error);\n        }\n        calendar.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error\n        });\n    });\n    return __assign({}, eventSource, { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    var _a;\n    var eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return __assign({}, sourceHash, (_a = {}, _a[sourceId] = __assign({}, eventSource, { isFetching: false, fetchRange: fetchRange // also serves as a marker that at least one fetch has completed\n         }), _a));\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, calendar) {\n    return filterHash(eventSources, function (eventSource) {\n        return doesSourceNeedRange(eventSource, calendar);\n    });\n}\n\nvar DateProfileGenerator = /** @class */ (function () {\n    function DateProfileGenerator(viewSpec, calendar) {\n        this.viewSpec = viewSpec;\n        this.options = viewSpec.options;\n        this.dateEnv = calendar.dateEnv;\n        this.calendar = calendar;\n        this.initHiddenDays();\n    }\n    /* Date Range Computation\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n    DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(prevDate, -1);\n    };\n    // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n    DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(nextDate, 1);\n    };\n    // Builds a structure holding dates/ranges for rendering around the given date.\n    // Optional direction param indicates whether the date is being incremented/decremented\n    // from its previous value. decremented = -1, incremented = 1 (default).\n    DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n        if (forceToValid === void 0) { forceToValid = false; }\n        var validRange;\n        var minTime = null;\n        var maxTime = null;\n        var currentInfo;\n        var isRangeAllDay;\n        var renderRange;\n        var activeRange;\n        var isValid;\n        validRange = this.buildValidRange();\n        validRange = this.trimHiddenDays(validRange);\n        if (forceToValid) {\n            currentDate = constrainMarkerToRange(currentDate, validRange);\n        }\n        currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n        isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n        renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n        renderRange = this.trimHiddenDays(renderRange);\n        activeRange = renderRange;\n        if (!this.options.showNonCurrentDates) {\n            activeRange = intersectRanges(activeRange, currentInfo.range);\n        }\n        minTime = createDuration(this.options.minTime);\n        maxTime = createDuration(this.options.maxTime);\n        activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n        activeRange = intersectRanges(activeRange, validRange); // might return null\n        // it's invalid if the originally requested date is not contained,\n        // or if the range is completely outside of the valid range.\n        isValid = rangesIntersect(currentInfo.range, validRange);\n        return {\n            // constraint for where prev/next operations can go and where events can be dragged/resized to.\n            // an object with optional start and end properties.\n            validRange: validRange,\n            // range the view is formally responsible for.\n            // for example, a month view might have 1st-31st, excluding padded dates\n            currentRange: currentInfo.range,\n            // name of largest unit being displayed, like \"month\" or \"week\"\n            currentRangeUnit: currentInfo.unit,\n            isRangeAllDay: isRangeAllDay,\n            // dates that display events and accept drag-n-drop\n            // will be `null` if no dates accept events\n            activeRange: activeRange,\n            // date range with a rendered skeleton\n            // includes not-active days that need some sort of DOM\n            renderRange: renderRange,\n            // Duration object that denotes the first visible time of any given day\n            minTime: minTime,\n            // Duration object that denotes the exclusive visible end time of any given day\n            maxTime: maxTime,\n            isValid: isValid,\n            // how far the current date will move for a prev/next operation\n            dateIncrement: this.buildDateIncrement(currentInfo.duration)\n            // pass a fallback (might be null) ^\n        };\n    };\n    // Builds an object with optional start/end properties.\n    // Indicates the minimum/maximum dates to display.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildValidRange = function () {\n        return this.getRangeOption('validRange', this.calendar.getNow()) ||\n            { start: null, end: null }; // completely open-ended\n    };\n    // Builds a structure with info about the \"current\" range, the range that is\n    // highlighted as being the current month for example.\n    // See build() for a description of `direction`.\n    // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n    DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n        var _a = this, viewSpec = _a.viewSpec, dateEnv = _a.dateEnv;\n        var duration = null;\n        var unit = null;\n        var range = null;\n        var dayCount;\n        if (viewSpec.duration) {\n            duration = viewSpec.duration;\n            unit = viewSpec.durationUnit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        else if ((dayCount = this.options.dayCount)) {\n            unit = 'day';\n            range = this.buildRangeFromDayCount(date, direction, dayCount);\n        }\n        else if ((range = this.buildCustomVisibleRange(date))) {\n            unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n        }\n        else {\n            duration = this.getFallbackDuration();\n            unit = greatestDurationDenominator(duration).unit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        return { duration: duration, unit: unit, range: range };\n    };\n    DateProfileGenerator.prototype.getFallbackDuration = function () {\n        return createDuration({ day: 1 });\n    };\n    // Returns a new activeRange to have time values (un-ambiguate)\n    // minTime or maxTime causes the range to expand.\n    DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n        var dateEnv = this.dateEnv;\n        var start = range.start;\n        var end = range.end;\n        if (this.viewSpec.class.prototype.usesMinMaxTime) {\n            // expand active range if minTime is negative (why not when positive?)\n            if (asRoughDays(minTime) < 0) {\n                start = startOfDay(start); // necessary?\n                start = dateEnv.add(start, minTime);\n            }\n            // expand active range if maxTime is beyond one day (why not when positive?)\n            if (asRoughDays(maxTime) > 1) {\n                end = startOfDay(end); // necessary?\n                end = addDays(end, -1);\n                end = dateEnv.add(end, maxTime);\n            }\n        }\n        return { start: start, end: end };\n    };\n    // Builds the \"current\" range when it is specified as an explicit duration.\n    // `unit` is the already-computed greatestDurationDenominator unit of duration.\n    DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n        var dateEnv = this.dateEnv;\n        var alignment = this.options.dateAlignment;\n        var dateIncrementInput;\n        var dateIncrementDuration;\n        var start;\n        var end;\n        var res;\n        // compute what the alignment should be\n        if (!alignment) {\n            dateIncrementInput = this.options.dateIncrement;\n            if (dateIncrementInput) {\n                dateIncrementDuration = createDuration(dateIncrementInput);\n                // use the smaller of the two units\n                if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n                    alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n                }\n                else {\n                    alignment = unit;\n                }\n            }\n            else {\n                alignment = unit;\n            }\n        }\n        // if the view displays a single day or smaller\n        if (asRoughDays(duration) <= 1) {\n            if (this.isHiddenDay(start)) {\n                start = this.skipHiddenDays(start, direction);\n                start = startOfDay(start);\n            }\n        }\n        function computeRes() {\n            start = dateEnv.startOf(date, alignment);\n            end = dateEnv.add(start, duration);\n            res = { start: start, end: end };\n        }\n        computeRes();\n        // if range is completely enveloped by hidden days, go past the hidden days\n        if (!this.trimHiddenDays(res)) {\n            date = this.skipHiddenDays(date, direction);\n            computeRes();\n        }\n        return res;\n    };\n    // Builds the \"current\" range when a dayCount is specified.\n    DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n        var dateEnv = this.dateEnv;\n        var customAlignment = this.options.dateAlignment;\n        var runningCount = 0;\n        var start = date;\n        var end;\n        if (customAlignment) {\n            start = dateEnv.startOf(start, customAlignment);\n        }\n        start = startOfDay(start);\n        start = this.skipHiddenDays(start, direction);\n        end = start;\n        do {\n            end = addDays(end, 1);\n            if (!this.isHiddenDay(end)) {\n                runningCount++;\n            }\n        } while (runningCount < dayCount);\n        return { start: start, end: end };\n    };\n    // Builds a normalized range object for the \"visible\" range,\n    // which is a way to define the currentRange and activeRange at the same time.\n    DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n        var dateEnv = this.dateEnv;\n        var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n        if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n            return null;\n        }\n        return visibleRange;\n    };\n    // Computes the range that will represent the element/cells for *rendering*,\n    // but which may have voided days/times.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        return currentRange;\n    };\n    // Compute the duration value that should be added/substracted to the current date\n    // when a prev/next operation happens.\n    DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n        var dateIncrementInput = this.options.dateIncrement;\n        var customAlignment;\n        if (dateIncrementInput) {\n            return createDuration(dateIncrementInput);\n        }\n        else if ((customAlignment = this.options.dateAlignment)) {\n            return createDuration(1, customAlignment);\n        }\n        else if (fallback) {\n            return fallback;\n        }\n        else {\n            return createDuration({ days: 1 });\n        }\n    };\n    // Arguments after name will be forwarded to a hypothetical function value\n    // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n    // Always clone your objects if you fear mutation.\n    DateProfileGenerator.prototype.getRangeOption = function (name) {\n        var otherArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            otherArgs[_i - 1] = arguments[_i];\n        }\n        var val = this.options[name];\n        if (typeof val === 'function') {\n            val = val.apply(null, otherArgs);\n        }\n        if (val) {\n            val = parseRange(val, this.dateEnv);\n        }\n        if (val) {\n            val = computeVisibleDayRange(val);\n        }\n        return val;\n    };\n    /* Hidden Days\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Initializes internal variables related to calculating hidden days-of-week\n    DateProfileGenerator.prototype.initHiddenDays = function () {\n        var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n        var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n        var dayCnt = 0;\n        var i;\n        if (this.options.weekends === false) {\n            hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n        }\n        for (i = 0; i < 7; i++) {\n            if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                dayCnt++;\n            }\n        }\n        if (!dayCnt) {\n            throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n        }\n        this.isHiddenDayHash = isHiddenDayHash;\n    };\n    // Remove days from the beginning and end of the range that are computed as hidden.\n    // If the whole range is trimmed off, returns null\n    DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n        var start = range.start;\n        var end = range.end;\n        if (start) {\n            start = this.skipHiddenDays(start);\n        }\n        if (end) {\n            end = this.skipHiddenDays(end, -1, true);\n        }\n        if (start == null || end == null || start < end) {\n            return { start: start, end: end };\n        }\n        return null;\n    };\n    // Is the current day hidden?\n    // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n    DateProfileGenerator.prototype.isHiddenDay = function (day) {\n        if (day instanceof Date) {\n            day = day.getUTCDay();\n        }\n        return this.isHiddenDayHash[day];\n    };\n    // Incrementing the current day until it is no longer a hidden day, returning a copy.\n    // DOES NOT CONSIDER validRange!\n    // If the initial value of `date` is not a hidden day, don't do anything.\n    // Pass `isExclusive` as `true` if you are dealing with an end date.\n    // `inc` defaults to `1` (increment one day forward each time)\n    DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n        if (inc === void 0) { inc = 1; }\n        if (isExclusive === void 0) { isExclusive = false; }\n        while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n            date = addDays(date, inc);\n        }\n        return date;\n    };\n    return DateProfileGenerator;\n}());\n// TODO: find a way to avoid comparing DateProfiles. it's tedious\nfunction isDateProfilesEqual(p0, p1) {\n    return rangesEqual(p0.validRange, p1.validRange) &&\n        rangesEqual(p0.activeRange, p1.activeRange) &&\n        rangesEqual(p0.renderRange, p1.renderRange) &&\n        durationsEqual(p0.minTime, p1.minTime) &&\n        durationsEqual(p0.maxTime, p1.maxTime);\n    /*\n    TODO: compare more?\n      currentRange: DateRange\n      currentRangeUnit: string\n      isRangeAllDay: boolean\n      isValid: boolean\n      dateIncrement: Duration\n    */\n}\n\nfunction reduce (state, action, calendar) {\n    var viewType = reduceViewType(state.viewType, action);\n    var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n    var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n    var nextState = __assign({}, state, { viewType: viewType,\n        dateProfile: dateProfile, currentDate: reduceCurrentDate(state.currentDate, action, dateProfile), eventSources: eventSources, eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar), dateSelection: reduceDateSelection(state.dateSelection, action, calendar), eventSelection: reduceSelectedEvent(state.eventSelection, action), eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar), eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar), eventSourceLoadingLevel: computeLoadingLevel(eventSources), loadingLevel: computeLoadingLevel(eventSources) });\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n        var reducerFunc = _a[_i];\n        nextState = reducerFunc(nextState, action, calendar);\n    }\n    // console.log(action.type, nextState)\n    return nextState;\n}\nfunction reduceViewType(currentViewType, action) {\n    switch (action.type) {\n        case 'SET_VIEW_TYPE':\n            return action.viewType;\n        default:\n            return currentViewType;\n    }\n}\nfunction reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n    var newDateProfile;\n    switch (action.type) {\n        case 'PREV':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n            break;\n        case 'NEXT':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n            break;\n        case 'SET_DATE':\n            if (!currentDateProfile.activeRange ||\n                !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n                newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n                );\n            }\n            break;\n        case 'SET_VIEW_TYPE':\n            var generator = calendar.dateProfileGenerators[viewType];\n            if (!generator) {\n                throw new Error(viewType ?\n                    'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' :\n                    'No available FullCalendar view plugins.');\n            }\n            newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n            );\n            break;\n    }\n    if (newDateProfile &&\n        newDateProfile.isValid &&\n        !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n        return newDateProfile;\n    }\n    else {\n        return currentDateProfile;\n    }\n}\nfunction reduceCurrentDate(currentDate, action, dateProfile) {\n    switch (action.type) {\n        case 'PREV':\n        case 'NEXT':\n            if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return currentDate;\n            }\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            var newDate = action.dateMarker || currentDate;\n            if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return newDate;\n            }\n        default:\n            return currentDate;\n    }\n}\nfunction reduceDateSelection(currentSelection, action, calendar) {\n    switch (action.type) {\n        case 'SELECT_DATES':\n            return action.selection;\n        case 'UNSELECT_DATES':\n            return null;\n        default:\n            return currentSelection;\n    }\n}\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        case 'UNSELECT_EVENT':\n            return '';\n        default:\n            return currentInstanceId;\n    }\n}\nfunction reduceEventDrag(currentDrag, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_DRAG':\n            var newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n                origSeg: newDrag.origSeg\n            };\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        default:\n            return currentDrag;\n    }\n}\nfunction reduceEventResize(currentResize, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_RESIZE':\n            var newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n                origSeg: newResize.origSeg\n            };\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        default:\n            return currentResize;\n    }\n}\nfunction computeLoadingLevel(eventSources) {\n    var cnt = 0;\n    for (var sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            cnt++;\n        }\n    }\n    return cnt;\n}\n\nvar STANDARD_PROPS = {\n    start: null,\n    end: null,\n    allDay: Boolean\n};\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n    var span = parseOpenDateSpan(raw, dateEnv);\n    var range = span.range;\n    if (!range.start) {\n        return null;\n    }\n    if (!range.end) {\n        if (defaultDuration == null) {\n            return null;\n        }\n        else {\n            range.end = dateEnv.add(range.start, defaultDuration);\n        }\n    }\n    return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\nfunction parseOpenDateSpan(raw, dateEnv) {\n    var leftovers = {};\n    var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n    var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n    var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n    var allDay = standardProps.allDay;\n    if (allDay == null) {\n        allDay = (startMeta && startMeta.isTimeUnspecified) &&\n            (!endMeta || endMeta.isTimeUnspecified);\n    }\n    // use this leftover object as the selection object\n    leftovers.range = {\n        start: startMeta ? startMeta.marker : null,\n        end: endMeta ? endMeta.marker : null\n    };\n    leftovers.allDay = allDay;\n    return leftovers;\n}\nfunction isDateSpansEqual(span0, span1) {\n    return rangesEqual(span0.range, span1.range) &&\n        span0.allDay === span1.allDay &&\n        isSpanPropsEqual(span0, span1);\n}\n// the NON-DATE-RELATED props\nfunction isSpanPropsEqual(span0, span1) {\n    for (var propName in span1) {\n        if (propName !== 'range' && propName !== 'allDay') {\n            if (span0[propName] !== span1[propName]) {\n                return false;\n            }\n        }\n    }\n    // are there any props that span0 has that span1 DOESN'T have?\n    // both have range/allDay, so no need to special-case.\n    for (var propName in span0) {\n        if (!(propName in span1)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction buildDateSpanApi(span, dateEnv) {\n    return {\n        start: dateEnv.toDate(span.range.start),\n        end: dateEnv.toDate(span.range.end),\n        startStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        endStr: dateEnv.formatIso(span.range.end, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction fabricateEventRange(dateSpan, eventUiBases, calendar) {\n    var def = parseEventDef({ editable: false }, '', // sourceId\n    dateSpan.allDay, true, // hasEnd\n    calendar);\n    return {\n        def: def,\n        ui: compileEventUi(def, eventUiBases),\n        instance: createEventInstance(def.defId, dateSpan.range),\n        range: dateSpan.range,\n        isStart: true,\n        isEnd: true\n    };\n}\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    var hash = {};\n    var viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    var defaultConfig = defaultConfigs[viewType];\n    var overrideConfig = overrideConfigs[viewType];\n    var queryProp = function (name) {\n        return (defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n            ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null);\n    };\n    var theClass = queryProp('class');\n    var superType = queryProp('superType');\n    if (!superType && theClass) {\n        superType =\n            findViewNameBySubclass(theClass, overrideConfigs) ||\n                findViewNameBySubclass(theClass, defaultConfigs);\n    }\n    var superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theClass && superDef) {\n        theClass = superDef.class;\n    }\n    if (!theClass) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        class: theClass,\n        defaults: __assign({}, (superDef ? superDef.defaults : {}), (defaultConfig ? defaultConfig.options : {})),\n        overrides: __assign({}, (superDef ? superDef.overrides : {}), (overrideConfig ? overrideConfig.options : {}))\n    };\n}\nfunction findViewNameBySubclass(viewSubclass, configs) {\n    var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n    for (var viewType in configs) {\n        var parsed = configs[viewType];\n        // need DIRECT subclass, so instanceof won't do it\n        if (parsed.class && parsed.class.prototype === superProto) {\n            return viewType;\n        }\n    }\n    return '';\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nvar VIEW_DEF_PROPS = {\n    type: String,\n    class: null\n};\nfunction parseViewConfig(input) {\n    if (typeof input === 'function') {\n        input = { class: input };\n    }\n    var options = {};\n    var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n    return {\n        superType: props.type,\n        class: props.class,\n        options: options\n    };\n}\n\nfunction buildViewSpecs(defaultInputs, optionsManager) {\n    var defaultConfigs = parseViewConfigs(defaultInputs);\n    var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n    var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, function (viewDef) {\n        return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n    });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n    var durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        optionsManager.dynamicOverrides.duration ||\n        optionsManager.overrides.duration;\n    var duration = null;\n    var durationUnit = '';\n    var singleUnit = '';\n    var singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDuration(durationInput);\n        if (duration) { // valid?\n            var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n            }\n        }\n    }\n    var queryButtonText = function (options) {\n        var buttonTextMap = options.buttonText || {};\n        var buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n    };\n    return {\n        type: viewDef.type,\n        class: viewDef.class,\n        duration: duration,\n        durationUnit: durationUnit,\n        singleUnit: singleUnit,\n        options: __assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n        buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) ||\n            queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(optionsManager.localeDefaults) ||\n            queryButtonText(optionsManager.dirDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(globalDefaults) ||\n            viewDef.type // fall back to given view name\n    };\n}\n\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    function Toolbar(extraClassName) {\n        var _this = _super.call(this) || this;\n        _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n        _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n        _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n        _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n        _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n        _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n        _this.el = createElement('div', { className: 'fc-toolbar ' + extraClassName });\n        return _this;\n    }\n    Toolbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderLayout.unrender(); // should unrender everything else\n        removeElement(this.el);\n    };\n    Toolbar.prototype.render = function (props) {\n        this._renderLayout(props.layout);\n        this._updateTitle(props.title);\n        this._updateActiveButton(props.activeButton);\n        this._updateToday(props.isTodayEnabled);\n        this._updatePrev(props.isPrevEnabled);\n        this._updateNext(props.isNextEnabled);\n    };\n    Toolbar.prototype.renderLayout = function (layout) {\n        var el = this.el;\n        this.viewsWithButtons = [];\n        appendToElement(el, this.renderSection('left', layout.left));\n        appendToElement(el, this.renderSection('center', layout.center));\n        appendToElement(el, this.renderSection('right', layout.right));\n    };\n    Toolbar.prototype.unrenderLayout = function () {\n        this.el.innerHTML = '';\n    };\n    Toolbar.prototype.renderSection = function (position, buttonStr) {\n        var _this = this;\n        var _a = this.context, theme = _a.theme, calendar = _a.calendar;\n        var optionsManager = calendar.optionsManager;\n        var viewSpecs = calendar.viewSpecs;\n        var sectionEl = createElement('div', { className: 'fc-' + position });\n        var calendarCustomButtons = optionsManager.computed.customButtons || {};\n        var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n        var calendarButtonText = optionsManager.computed.buttonText || {};\n        if (buttonStr) {\n            buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n                var groupChildren = [];\n                var isOnlyButtons = true;\n                var groupEl;\n                buttonGroupStr.split(',').forEach(function (buttonName, j) {\n                    var customButtonProps;\n                    var viewSpec;\n                    var buttonClick;\n                    var buttonIcon; // only one of these will be set\n                    var buttonText; // \"\n                    var buttonInnerHtml;\n                    var buttonClasses;\n                    var buttonEl;\n                    var buttonAriaAttr;\n                    if (buttonName === 'title') {\n                        groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n                        isOnlyButtons = false;\n                    }\n                    else {\n                        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n                            buttonClick = function (ev) {\n                                if (customButtonProps.click) {\n                                    customButtonProps.click.call(buttonEl, ev);\n                                }\n                            };\n                            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = customButtonProps.text);\n                        }\n                        else if ((viewSpec = viewSpecs[buttonName])) {\n                            _this.viewsWithButtons.push(buttonName);\n                            buttonClick = function () {\n                                calendar.changeView(buttonName);\n                            };\n                            (buttonText = viewSpec.buttonTextOverride) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = viewSpec.buttonTextDefault);\n                        }\n                        else if (calendar[buttonName]) { // a calendar method\n                            buttonClick = function () {\n                                calendar[buttonName]();\n                            };\n                            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = calendarButtonText[buttonName]);\n                            //            ^ everything else is considered default\n                        }\n                        if (buttonClick) {\n                            buttonClasses = [\n                                'fc-' + buttonName + '-button',\n                                theme.getClass('button')\n                            ];\n                            if (buttonText) {\n                                buttonInnerHtml = htmlEscape(buttonText);\n                                buttonAriaAttr = '';\n                            }\n                            else if (buttonIcon) {\n                                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n                            }\n                            buttonEl = htmlToElement(// type=\"button\" so that it doesn't submit a form\n                            '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\n                                buttonAriaAttr +\n                                '>' + buttonInnerHtml + '</button>');\n                            buttonEl.addEventListener('click', buttonClick);\n                            groupChildren.push(buttonEl);\n                        }\n                    }\n                });\n                if (groupChildren.length > 1) {\n                    groupEl = document.createElement('div');\n                    var buttonGroupClassName = theme.getClass('buttonGroup');\n                    if (isOnlyButtons && buttonGroupClassName) {\n                        groupEl.classList.add(buttonGroupClassName);\n                    }\n                    appendToElement(groupEl, groupChildren);\n                    sectionEl.appendChild(groupEl);\n                }\n                else {\n                    appendToElement(sectionEl, groupChildren); // 1 or 0 children\n                }\n            });\n        }\n        return sectionEl;\n    };\n    Toolbar.prototype.updateToday = function (isTodayEnabled) {\n        this.toggleButtonEnabled('today', isTodayEnabled);\n    };\n    Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n        this.toggleButtonEnabled('prev', isPrevEnabled);\n    };\n    Toolbar.prototype.updateNext = function (isNextEnabled) {\n        this.toggleButtonEnabled('next', isNextEnabled);\n    };\n    Toolbar.prototype.updateTitle = function (text) {\n        findElements(this.el, 'h2').forEach(function (titleEl) {\n            titleEl.innerText = text;\n        });\n    };\n    Toolbar.prototype.updateActiveButton = function (buttonName) {\n        var theme = this.context.theme;\n        var className = theme.getClass('buttonActive');\n        findElements(this.el, 'button').forEach(function (buttonEl) {\n            if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n                buttonEl.classList.add(className);\n            }\n            else {\n                buttonEl.classList.remove(className);\n            }\n        });\n    };\n    Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n        findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n            buttonEl.disabled = !bool;\n        });\n    };\n    return Toolbar;\n}(Component));\n\nvar CalendarComponent = /** @class */ (function (_super) {\n    __extends(CalendarComponent, _super);\n    function CalendarComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.elClassNames = [];\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.renderToolbars = memoizeRendering(_this._renderToolbars, _this._unrenderToolbars, [_this.renderSkeleton]);\n        _this.buildComponentContext = memoize(buildComponentContext);\n        _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        _this.el = el;\n        _this.computeTitle = memoize(computeTitle);\n        _this.parseBusinessHours = memoize(function (input) {\n            return parseBusinessHours(input, _this.context.calendar);\n        });\n        return _this;\n    }\n    CalendarComponent.prototype.render = function (props, context) {\n        this.freezeHeight();\n        var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n        this.renderSkeleton(context);\n        this.renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, title);\n        this.renderView(props, title);\n        this.updateSize();\n        this.thawHeight();\n    };\n    CalendarComponent.prototype.destroy = function () {\n        if (this.header) {\n            this.header.destroy();\n        }\n        if (this.footer) {\n            this.footer.destroy();\n        }\n        this.renderSkeleton.unrender(); // will call destroyView\n        _super.prototype.destroy.call(this);\n    };\n    CalendarComponent.prototype._renderSkeleton = function (context) {\n        this.updateElClassNames(context);\n        prependToElement(this.el, this.contentEl = createElement('div', { className: 'fc-view-container' }));\n        var calendar = context.calendar;\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n            var modifyViewContainer = _a[_i];\n            modifyViewContainer(this.contentEl, calendar);\n        }\n    };\n    CalendarComponent.prototype._unrenderSkeleton = function () {\n        // weird to have this here\n        if (this.view) {\n            this.savedScroll = this.view.queryScroll();\n            this.view.destroy();\n            this.view = null;\n        }\n        removeElement(this.contentEl);\n        this.removeElClassNames();\n    };\n    CalendarComponent.prototype.removeElClassNames = function () {\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.remove(className);\n        }\n        this.elClassNames = [];\n    };\n    CalendarComponent.prototype.updateElClassNames = function (context) {\n        this.removeElClassNames();\n        var theme = context.theme, options = context.options;\n        this.elClassNames = [\n            'fc',\n            'fc-' + options.dir,\n            theme.getClass('widget')\n        ];\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.add(className);\n        }\n    };\n    CalendarComponent.prototype._renderToolbars = function (viewSpec, dateProfile, currentDate, title) {\n        var _a = this, context = _a.context, header = _a.header, footer = _a.footer;\n        var options = context.options, calendar = context.calendar;\n        var headerLayout = options.header;\n        var footerLayout = options.footer;\n        var dateProfileGenerator = this.props.dateProfileGenerator;\n        var now = calendar.getNow();\n        var todayInfo = dateProfileGenerator.build(now);\n        var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n        var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n        var toolbarProps = {\n            title: title,\n            activeButton: viewSpec.type,\n            isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n            isPrevEnabled: prevInfo.isValid,\n            isNextEnabled: nextInfo.isValid\n        };\n        if (headerLayout) {\n            if (!header) {\n                header = this.header = new Toolbar('fc-header-toolbar');\n                prependToElement(this.el, header.el);\n            }\n            header.receiveProps(__assign({ layout: headerLayout }, toolbarProps), context);\n        }\n        else if (header) {\n            header.destroy();\n            header = this.header = null;\n        }\n        if (footerLayout) {\n            if (!footer) {\n                footer = this.footer = new Toolbar('fc-footer-toolbar');\n                appendToElement(this.el, footer.el);\n            }\n            footer.receiveProps(__assign({ layout: footerLayout }, toolbarProps), context);\n        }\n        else if (footer) {\n            footer.destroy();\n            footer = this.footer = null;\n        }\n    };\n    CalendarComponent.prototype._unrenderToolbars = function () {\n        if (this.header) {\n            this.header.destroy();\n            this.header = null;\n        }\n        if (this.footer) {\n            this.footer.destroy();\n            this.footer = null;\n        }\n    };\n    CalendarComponent.prototype.renderView = function (props, title) {\n        var view = this.view;\n        var _a = this.context, calendar = _a.calendar, options = _a.options;\n        var viewSpec = props.viewSpec, dateProfileGenerator = props.dateProfileGenerator;\n        if (!view || view.viewSpec !== viewSpec) {\n            if (view) {\n                view.destroy();\n            }\n            view = this.view = new viewSpec['class'](viewSpec, this.contentEl);\n            if (this.savedScroll) {\n                view.addScroll(this.savedScroll, true);\n                this.savedScroll = null;\n            }\n        }\n        view.title = title; // for the API\n        var viewProps = {\n            dateProfileGenerator: dateProfileGenerator,\n            dateProfile: props.dateProfile,\n            businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize\n        };\n        var transformers = this.buildViewPropTransformers(calendar.pluginSystem.hooks.viewPropsTransformers);\n        for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n            var transformer = transformers_1[_i];\n            __assign(viewProps, transformer.transform(viewProps, viewSpec, props, options));\n        }\n        view.receiveProps(viewProps, this.buildComponentContext(this.context, viewSpec, view));\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.updateSize = function (isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var view = this.view;\n        if (!view) {\n            return; // why?\n        }\n        if (isResize || this.isHeightAuto == null) {\n            this.computeHeightVars();\n        }\n        view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n        view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n        view.popScroll(isResize);\n    };\n    CalendarComponent.prototype.computeHeightVars = function () {\n        var calendar = this.context.calendar; // yuck. need to handle dynamic options\n        var heightInput = calendar.opt('height');\n        var contentHeightInput = calendar.opt('contentHeight');\n        this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n        if (typeof contentHeightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = contentHeightInput;\n        }\n        else if (typeof contentHeightInput === 'function') { // exists and is a function\n            this.viewHeight = contentHeightInput();\n        }\n        else if (typeof heightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = heightInput - this.queryToolbarsHeight();\n        }\n        else if (typeof heightInput === 'function') { // exists and is a function\n            this.viewHeight = heightInput() - this.queryToolbarsHeight();\n        }\n        else if (heightInput === 'parent') { // set to height of parent element\n            var parentEl = this.el.parentNode;\n            this.viewHeight = parentEl.getBoundingClientRect().height - this.queryToolbarsHeight();\n        }\n        else {\n            this.viewHeight = Math.round(this.contentEl.getBoundingClientRect().width /\n                Math.max(calendar.opt('aspectRatio'), .5));\n        }\n    };\n    CalendarComponent.prototype.queryToolbarsHeight = function () {\n        var height = 0;\n        if (this.header) {\n            height += computeHeightAndMargins(this.header.el);\n        }\n        if (this.footer) {\n            height += computeHeightAndMargins(this.footer.el);\n        }\n        return height;\n    };\n    // Height \"Freezing\"\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.freezeHeight = function () {\n        applyStyle(this.el, {\n            height: this.el.getBoundingClientRect().height,\n            overflow: 'hidden'\n        });\n    };\n    CalendarComponent.prototype.thawHeight = function () {\n        applyStyle(this.el, {\n            height: '',\n            overflow: ''\n        });\n    };\n    return CalendarComponent;\n}(Component));\n// Title and Date Formatting\n// -----------------------------------------------------------------------------------------------------------------\n// Computes what the title at the top of the calendar should be for this view\nfunction computeTitle(dateProfile, viewOptions) {\n    var range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return this.context.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), { isEndExclusive: dateProfile.isRangeAllDay });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction computeTitleFormat(dateProfile) {\n    var currentRangeUnit = dateProfile.currentRangeUnit;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    else if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    else {\n        var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n        if (days !== null && days > 1) {\n            // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n            return { year: 'numeric', month: 'short', day: 'numeric' };\n        }\n        else {\n            // one day. longer, like \"September 9 2014\"\n            return { year: 'numeric', month: 'long', day: 'numeric' };\n        }\n    }\n}\n// build a context scoped to the view\nfunction buildComponentContext(context, viewSpec, view) {\n    return context.extend(viewSpec.options, view);\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map(function (theClass) {\n        return new theClass();\n    });\n}\n\nvar Interaction = /** @class */ (function () {\n    function Interaction(settings) {\n        this.component = settings.component;\n    }\n    Interaction.prototype.destroy = function () {\n    };\n    return Interaction;\n}());\nfunction parseInteractionSettings(component, input) {\n    return {\n        component: component,\n        el: input.el,\n        useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n    };\n}\nfunction interactionSettingsToStore(settings) {\n    var _a;\n    return _a = {},\n        _a[settings.component.uid] = settings,\n        _a;\n}\n// global state\nvar interactionSettingsStore = {};\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /** @class */ (function (_super) {\n    __extends(EventClicking, _super);\n    function EventClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handleSegClick = function (ev, segEl) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n                var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                calendar.publiclyTrigger('eventClick', [\n                    {\n                        el: segEl,\n                        event: new EventApi(component.context.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        var component = settings.component;\n        _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n        return _this;\n    }\n    return EventClicking;\n}(Interaction));\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /** @class */ (function (_super) {\n    __extends(EventHovering, _super);\n    function EventHovering(settings) {\n        var _this = _super.call(this, settings) || this;\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        _this.handleEventElRemove = function (el) {\n            if (el === _this.currentSegEl) {\n                _this.handleSegLeave(null, _this.currentSegEl);\n            }\n        };\n        _this.handleSegEnter = function (ev, segEl) {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                segEl.classList.add('fc-allow-mouse-resize');\n                _this.currentSegEl = segEl;\n                _this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        _this.handleSegLeave = function (ev, segEl) {\n            if (_this.currentSegEl) {\n                segEl.classList.remove('fc-allow-mouse-resize');\n                _this.currentSegEl = null;\n                _this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        var component = settings.component;\n        _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n        // how to make sure component already has context?\n        component.context.calendar.on('eventElRemove', _this.handleEventElRemove);\n        return _this;\n    }\n    EventHovering.prototype.destroy = function () {\n        this.removeHoverListeners();\n        this.component.context.calendar.off('eventElRemove', this.handleEventElRemove);\n    };\n    EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n        var component = this.component;\n        var _a = component.context, calendar = _a.calendar, view = _a.view;\n        var seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            calendar.publiclyTrigger(publicEvName, [\n                {\n                    el: segEl,\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: view\n                }\n            ]);\n        }\n    };\n    return EventHovering;\n}(Interaction));\n\nvar StandardTheme = /** @class */ (function (_super) {\n    __extends(StandardTheme, _super);\n    function StandardTheme() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return StandardTheme;\n}(Theme));\nStandardTheme.prototype.classes = {\n    widget: 'fc-unthemed',\n    widgetHeader: 'fc-widget-header',\n    widgetContent: 'fc-widget-content',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n    popoverHeader: 'fc-widget-header',\n    popoverContent: 'fc-widget-content',\n    // day grid\n    headerRow: 'fc-widget-header',\n    dayRow: 'fc-widget-content',\n    // list view\n    listView: 'fc-widget-content'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons';\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nvar Calendar = /** @class */ (function () {\n    function Calendar(el, overrides) {\n        var _this = this;\n        this.buildComponentContext = memoize(buildComponentContext$1);\n        this.parseRawLocales = memoize(parseRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildDateEnv = memoize(buildDateEnv);\n        this.buildTheme = memoize(buildTheme);\n        this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n        this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n        this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.interactionsStore = {};\n        this.actionQueue = [];\n        this.isReducing = false;\n        // isDisplaying: boolean = false // installed in DOM? accepting renders?\n        this.needsRerender = false; // needs a render?\n        this.isRendering = false; // currently in the executeRender function?\n        this.renderingPauseDepth = 0;\n        this.buildDelayedRerender = memoize(buildDelayedRerender);\n        this.afterSizingTriggers = {};\n        this.isViewUpdated = false;\n        this.isDatesUpdated = false;\n        this.isEventsUpdated = false;\n        this.el = el;\n        this.optionsManager = new OptionsManager(overrides || {});\n        this.pluginSystem = new PluginSystem();\n        // only do once. don't do in handleOptions. because can't remove plugins\n        this.addPluginInputs(this.optionsManager.computed.plugins || []);\n        this.handleOptions(this.optionsManager.computed);\n        this.publiclyTrigger('_init'); // for tests\n        this.hydrate();\n        this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions\n            .map(function (calendarInteractionClass) {\n            return new calendarInteractionClass(_this);\n        });\n    }\n    Calendar.prototype.addPluginInputs = function (pluginInputs) {\n        var pluginDefs = refinePluginDefs(pluginInputs);\n        for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n            var pluginDef = pluginDefs_1[_i];\n            this.pluginSystem.add(pluginDef);\n        }\n    };\n    Object.defineProperty(Calendar.prototype, \"view\", {\n        // public API\n        get: function () {\n            return this.component ? this.component.view : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Public API for rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.render = function () {\n        if (!this.component) {\n            this.component = new CalendarComponent(this.el);\n            this.renderableEventStore = createEmptyEventStore();\n            this.bindHandlers();\n            this.executeRender();\n        }\n        else {\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.destroy = function () {\n        if (this.component) {\n            this.unbindHandlers();\n            this.component.destroy(); // don't null-out. in case API needs access\n            this.component = null; // umm ???\n            for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n                var interaction = _a[_i];\n                interaction.destroy();\n            }\n            this.publiclyTrigger('_destroyed');\n        }\n    };\n    // Handlers\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.bindHandlers = function () {\n        var _this = this;\n        // event delegation for nav links\n        this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n            var gotoOptions = anchorEl.getAttribute('data-goto');\n            gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n            var dateEnv = _this.dateEnv;\n            var dateMarker = dateEnv.createMarker(gotoOptions.date);\n            var viewType = gotoOptions.type;\n            // property like \"navLinkDayClick\". might be a string or a function\n            var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n            if (typeof customAction === 'function') {\n                customAction(dateEnv.toDate(dateMarker), ev);\n            }\n            else {\n                if (typeof customAction === 'string') {\n                    viewType = customAction;\n                }\n                _this.zoomTo(dateMarker, viewType);\n            }\n        });\n        if (this.opt('handleWindowResize')) {\n            window.addEventListener('resize', this.windowResizeProxy = debounce(// prevents rapid calls\n            this.windowResize.bind(this), this.opt('windowResizeDelay')));\n        }\n    };\n    Calendar.prototype.unbindHandlers = function () {\n        this.removeNavLinkListener();\n        if (this.windowResizeProxy) {\n            window.removeEventListener('resize', this.windowResizeProxy);\n            this.windowResizeProxy = null;\n        }\n    };\n    // Dispatcher\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hydrate = function () {\n        var _this = this;\n        this.state = this.buildInitialState();\n        var rawSources = this.opt('eventSources') || [];\n        var singleRawSource = this.opt('events');\n        var sources = []; // parsed\n        if (singleRawSource) {\n            rawSources.unshift(singleRawSource);\n        }\n        for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n            var rawSource = rawSources_1[_i];\n            var source = parseEventSource(rawSource, this);\n            if (source) {\n                sources.push(source);\n            }\n        }\n        this.batchRendering(function () {\n            _this.dispatch({ type: 'INIT' }); // pass in sources here?\n            _this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: sources });\n            _this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n            });\n        });\n    };\n    Calendar.prototype.buildInitialState = function () {\n        return {\n            viewType: null,\n            loadingLevel: 0,\n            eventSourceLoadingLevel: 0,\n            currentDate: this.getInitialDate(),\n            dateProfile: null,\n            eventSources: {},\n            eventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null\n        };\n    };\n    Calendar.prototype.dispatch = function (action) {\n        this.actionQueue.push(action);\n        if (!this.isReducing) {\n            this.isReducing = true;\n            var oldState = this.state;\n            while (this.actionQueue.length) {\n                this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n            }\n            var newState = this.state;\n            this.isReducing = false;\n            if (!oldState.loadingLevel && newState.loadingLevel) {\n                this.publiclyTrigger('loading', [true]);\n            }\n            else if (oldState.loadingLevel && !newState.loadingLevel) {\n                this.publiclyTrigger('loading', [false]);\n            }\n            var view = this.component && this.component.view;\n            if (oldState.eventStore !== newState.eventStore) {\n                if (oldState.eventStore) {\n                    this.isEventsUpdated = true;\n                }\n            }\n            if (oldState.dateProfile !== newState.dateProfile) {\n                if (oldState.dateProfile && view) { // why would view be null!?\n                    this.publiclyTrigger('datesDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isDatesUpdated = true;\n            }\n            if (oldState.viewType !== newState.viewType) {\n                if (oldState.viewType && view) { // why would view be null!?\n                    this.publiclyTrigger('viewSkeletonDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isViewUpdated = true;\n            }\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.reduce = function (state, action, calendar) {\n        return reduce(state, action, calendar);\n    };\n    // Render Queue\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.requestRerender = function () {\n        this.needsRerender = true;\n        this.delayedRerender(); // will call a debounced-version of tryRerender\n    };\n    Calendar.prototype.tryRerender = function () {\n        if (this.component && // must be accepting renders\n            this.needsRerender && // indicates that a rerender was requested\n            !this.renderingPauseDepth && // not paused\n            !this.isRendering // not currently in the render loop\n        ) {\n            this.executeRender();\n        }\n    };\n    Calendar.prototype.batchRendering = function (func) {\n        this.renderingPauseDepth++;\n        func();\n        this.renderingPauseDepth--;\n        if (this.needsRerender) {\n            this.requestRerender();\n        }\n    };\n    // Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.executeRender = function () {\n        // clear these BEFORE the render so that new values will accumulate during render\n        this.needsRerender = false;\n        this.isRendering = true;\n        this.renderComponent();\n        this.isRendering = false;\n        // received a rerender request while rendering\n        if (this.needsRerender) {\n            this.delayedRerender();\n        }\n    };\n    /*\n    don't call this directly. use executeRender instead\n    */\n    Calendar.prototype.renderComponent = function () {\n        var _a = this, state = _a.state, component = _a.component;\n        var viewType = state.viewType;\n        var viewSpec = this.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n        }\n        // if event sources are still loading and progressive rendering hasn't been enabled,\n        // keep rendering the last fully loaded set of events\n        var renderableEventStore = this.renderableEventStore =\n            (state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering')) ?\n                this.renderableEventStore :\n                state.eventStore;\n        var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n        var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n        var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        component.receiveProps(__assign({}, state, { viewSpec: viewSpec, dateProfileGenerator: this.dateProfileGenerators[viewType], dateProfile: state.dateProfile, eventStore: renderableEventStore, eventUiBases: eventUiBases, dateSelection: state.dateSelection, eventSelection: state.eventSelection, eventDrag: state.eventDrag, eventResize: state.eventResize }), this.buildComponentContext(this.theme, this.dateEnv, this.optionsManager.computed));\n        if (this.isViewUpdated) {\n            this.isViewUpdated = false;\n            this.publiclyTrigger('viewSkeletonRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isDatesUpdated) {\n            this.isDatesUpdated = false;\n            this.publiclyTrigger('datesRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isEventsUpdated) {\n            this.isEventsUpdated = false;\n        }\n        this.releaseAfterSizingTriggers();\n    };\n    // Options\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.setOption = function (name, val) {\n        var _a;\n        this.mutateOptions((_a = {}, _a[name] = val, _a), [], true);\n    };\n    Calendar.prototype.getOption = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.opt = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.viewOpt = function (name) {\n        return this.viewOpts()[name];\n    };\n    Calendar.prototype.viewOpts = function () {\n        return this.viewSpecs[this.state.viewType].options;\n    };\n    /*\n    handles option changes (like a diff)\n    */\n    Calendar.prototype.mutateOptions = function (updates, removals, isDynamic, deepEqual) {\n        var _this = this;\n        var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n        var normalUpdates = {};\n        var specialUpdates = {};\n        var oldDateEnv = this.dateEnv; // do this before handleOptions\n        var isTimeZoneDirty = false;\n        var isSizeDirty = false;\n        var anyDifficultOptions = Boolean(removals.length);\n        for (var name_1 in updates) {\n            if (changeHandlers[name_1]) {\n                specialUpdates[name_1] = updates[name_1];\n            }\n            else {\n                normalUpdates[name_1] = updates[name_1];\n            }\n        }\n        for (var name_2 in normalUpdates) {\n            if (/^(height|contentHeight|aspectRatio)$/.test(name_2)) {\n                isSizeDirty = true;\n            }\n            else if (/^(defaultDate|defaultView)$/.test(name_2)) ;\n            else {\n                anyDifficultOptions = true;\n                if (name_2 === 'timeZone') {\n                    isTimeZoneDirty = true;\n                }\n            }\n        }\n        this.optionsManager.mutate(normalUpdates, removals, isDynamic);\n        if (anyDifficultOptions) {\n            this.handleOptions(this.optionsManager.computed);\n        }\n        this.batchRendering(function () {\n            if (anyDifficultOptions) {\n                if (isTimeZoneDirty) {\n                    _this.dispatch({\n                        type: 'CHANGE_TIMEZONE',\n                        oldDateEnv: oldDateEnv\n                    });\n                }\n                /* HACK\n                has the same effect as calling this.requestRerender()\n                but recomputes the state's dateProfile\n                */\n                _this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: _this.state.viewType\n                });\n            }\n            else if (isSizeDirty) {\n                _this.updateSize();\n            }\n            // special updates\n            if (deepEqual) {\n                for (var name_3 in specialUpdates) {\n                    changeHandlers[name_3](specialUpdates[name_3], _this, deepEqual);\n                }\n            }\n        });\n    };\n    /*\n    rebuilds things based off of a complete set of refined options\n    */\n    Calendar.prototype.handleOptions = function (options) {\n        var _this = this;\n        var pluginHooks = this.pluginSystem.hooks;\n        this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n        this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n        this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n        this.theme = this.buildTheme(options);\n        var available = this.parseRawLocales(options.locales);\n        this.availableRawLocales = available.map;\n        var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n        this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n        this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n        // ineffecient to do every time?\n        this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager);\n        // ineffecient to do every time?\n        this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n            return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n        });\n    };\n    Calendar.prototype.getAvailableLocaleCodes = function () {\n        return Object.keys(this.availableRawLocales);\n    };\n    Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n        return processScopedUiProps('select', rawOpts, this);\n    };\n    Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n        if (rawOpts.editable) { // so 'editable' affected events\n            rawOpts = __assign({}, rawOpts, { eventEditable: true });\n        }\n        return processScopedUiProps('event', rawOpts, this);\n    };\n    // Trigger\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hasPublicHandlers = function (name) {\n        return this.hasHandlers(name) ||\n            this.opt(name); // handler specified in options\n    };\n    Calendar.prototype.publiclyTrigger = function (name, args) {\n        var optHandler = this.opt(name);\n        this.triggerWith(name, this, args);\n        if (optHandler) {\n            return optHandler.apply(this, args);\n        }\n    };\n    Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n    };\n    Calendar.prototype.releaseAfterSizingTriggers = function () {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        for (var name_4 in afterSizingTriggers) {\n            for (var _i = 0, _a = afterSizingTriggers[name_4]; _i < _a.length; _i++) {\n                var args = _a[_i];\n                this.publiclyTrigger(name_4, args);\n            }\n        }\n        this.afterSizingTriggers = {};\n    };\n    // View\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a boolean about whether the view is okay to instantiate at some point\n    Calendar.prototype.isValidViewType = function (viewType) {\n        return Boolean(this.viewSpecs[viewType]);\n    };\n    Calendar.prototype.changeView = function (viewType, dateOrRange) {\n        var dateMarker = null;\n        if (dateOrRange) {\n            if (dateOrRange.start && dateOrRange.end) { // a range\n                this.optionsManager.mutate({ visibleRange: dateOrRange }, []); // will not rerender\n                this.handleOptions(this.optionsManager.computed); // ...but yuck\n            }\n            else { // a date\n                dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n            }\n        }\n        this.unselect();\n        this.dispatch({\n            type: 'SET_VIEW_TYPE',\n            viewType: viewType,\n            dateMarker: dateMarker\n        });\n    };\n    // Forces navigation to a view for the given date.\n    // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n    // needs to change\n    Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n        var spec;\n        viewType = viewType || 'day'; // day is default zoom\n        spec = this.viewSpecs[viewType] ||\n            this.getUnitViewSpec(viewType);\n        this.unselect();\n        if (spec) {\n            this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: spec.type,\n                dateMarker: dateMarker\n            });\n        }\n        else {\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: dateMarker\n            });\n        }\n    };\n    // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n    // Preference is given to views that have corresponding buttons.\n    Calendar.prototype.getUnitViewSpec = function (unit) {\n        var component = this.component;\n        var viewTypes = [];\n        var i;\n        var spec;\n        // put views that have buttons first. there will be duplicates, but oh\n        if (component.header) {\n            viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n        }\n        if (component.footer) {\n            viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n        }\n        for (var viewType in this.viewSpecs) {\n            viewTypes.push(viewType);\n        }\n        for (i = 0; i < viewTypes.length; i++) {\n            spec = this.viewSpecs[viewTypes[i]];\n            if (spec) {\n                if (spec.singleUnit === unit) {\n                    return spec;\n                }\n            }\n        }\n    };\n    // Current Date\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getInitialDate = function () {\n        var defaultDateInput = this.opt('defaultDate');\n        // compute the initial ambig-timezone date\n        if (defaultDateInput != null) {\n            return this.dateEnv.createMarker(defaultDateInput);\n        }\n        else {\n            return this.getNow(); // getNow already returns unzoned\n        }\n    };\n    Calendar.prototype.prev = function () {\n        this.unselect();\n        this.dispatch({ type: 'PREV' });\n    };\n    Calendar.prototype.next = function () {\n        this.unselect();\n        this.dispatch({ type: 'NEXT' });\n    };\n    Calendar.prototype.prevYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n        });\n    };\n    Calendar.prototype.nextYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n        });\n    };\n    Calendar.prototype.today = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.getNow()\n        });\n    };\n    Calendar.prototype.gotoDate = function (zonedDateInput) {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.createMarker(zonedDateInput)\n        });\n    };\n    Calendar.prototype.incrementDate = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // else, warn about invalid input?\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n            });\n        }\n    };\n    // for external API\n    Calendar.prototype.getDate = function () {\n        return this.dateEnv.toDate(this.state.currentDate);\n    };\n    // Date Formatting Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.formatDate = function (d, formatter) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n    };\n    // `settings` is for formatter AND isEndExclusive\n    Calendar.prototype.formatRange = function (d0, d1, settings) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n    };\n    Calendar.prototype.formatIso = function (d, omitTime) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.windowResize = function (ev) {\n        if (!this.isHandlingWindowResize &&\n            this.component && // why?\n            ev.target === window // not a jqui resize event\n        ) {\n            this.isHandlingWindowResize = true;\n            this.updateSize();\n            this.publiclyTrigger('windowResize', [this.view]);\n            this.isHandlingWindowResize = false;\n        }\n    };\n    Calendar.prototype.updateSize = function () {\n        if (this.component) { // when?\n            this.component.updateSize(true);\n        }\n    };\n    // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n        var settings = parseInteractionSettings(component, settingsInput);\n        var DEFAULT_INTERACTIONS = [\n            EventClicking,\n            EventHovering\n        ];\n        var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n        var interactions = interactionClasses.map(function (interactionClass) {\n            return new interactionClass(settings);\n        });\n        this.interactionsStore[component.uid] = interactions;\n        interactionSettingsStore[component.uid] = settings;\n    };\n    Calendar.prototype.unregisterInteractiveComponent = function (component) {\n        for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener.destroy();\n        }\n        delete this.interactionsStore[component.uid];\n        delete interactionSettingsStore[component.uid];\n    };\n    // Date Selection / Event Selection / DayClick\n    // -----------------------------------------------------------------------------------------------------------------\n    // this public method receives start/end dates in any format, with any timezone\n    // NOTE: args were changed from v3\n    Calendar.prototype.select = function (dateOrObj, endDate) {\n        var selectionInput;\n        if (endDate == null) {\n            if (dateOrObj.start != null) {\n                selectionInput = dateOrObj;\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: null\n                };\n            }\n        }\n        else {\n            selectionInput = {\n                start: dateOrObj,\n                end: endDate\n            };\n        }\n        var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({ days: 1 }) // TODO: cache this?\n        );\n        if (selection) { // throw parse error otherwise?\n            this.dispatch({ type: 'SELECT_DATES', selection: selection });\n            this.triggerDateSelect(selection);\n        }\n    };\n    // public method\n    Calendar.prototype.unselect = function (pev) {\n        if (this.state.dateSelection) {\n            this.dispatch({ type: 'UNSELECT_DATES' });\n            this.triggerDateUnselect(pev);\n        }\n    };\n    Calendar.prototype.triggerDateSelect = function (selection, pev) {\n        var arg = __assign({}, this.buildDateSpanApi(selection), { jsEvent: pev ? pev.origEvent : null, view: this.view });\n        this.publiclyTrigger('select', [arg]);\n    };\n    Calendar.prototype.triggerDateUnselect = function (pev) {\n        this.publiclyTrigger('unselect', [\n            {\n                jsEvent: pev ? pev.origEvent : null,\n                view: this.view\n            }\n        ]);\n    };\n    // TODO: receive pev?\n    Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n        var arg = __assign({}, this.buildDatePointApi(dateSpan), { dayEl: dayEl, jsEvent: ev, // Is this always a mouse event? See #4655\n            view: view });\n        this.publiclyTrigger('dateClick', [arg]);\n    };\n    Calendar.prototype.buildDatePointApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    // Date Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n    Calendar.prototype.getNow = function () {\n        var now = this.opt('now');\n        if (typeof now === 'function') {\n            now = now();\n        }\n        if (now == null) {\n            return this.dateEnv.createNowMarker();\n        }\n        return this.dateEnv.createMarker(now);\n    };\n    // Event-Date Utilities\n    // -----------------------------------------------------------------------------------------------------------------\n    // Given an event's allDay status and start date, return what its fallback end date should be.\n    // TODO: rename to computeDefaultEventEnd\n    Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n        var end = marker;\n        if (allDay) {\n            end = startOfDay(end);\n            end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n        }\n        else {\n            end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n        }\n        return end;\n    };\n    // Public Events API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n        if (eventInput instanceof EventApi) {\n            var def = eventInput._def;\n            var instance = eventInput._instance;\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventStore.defs[def.defId]) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore({ def: def, instance: instance }) // TODO: better util for two args?\n                });\n            }\n            return eventInput;\n        }\n        var sourceId;\n        if (sourceInput instanceof EventSourceApi) {\n            sourceId = sourceInput.internalEventSource.sourceId;\n        }\n        else if (sourceInput != null) {\n            var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n            if (!sourceApi) {\n                console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n                return null;\n            }\n            else {\n                sourceId = sourceApi.internalEventSource.sourceId;\n            }\n        }\n        var tuple = parseEvent(eventInput, sourceId, this);\n        if (tuple) {\n            this.dispatch({\n                type: 'ADD_EVENTS',\n                eventStore: eventTupleToStore(tuple)\n            });\n            return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n        }\n        return null;\n    };\n    // TODO: optimize\n    Calendar.prototype.getEventById = function (id) {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        id = String(id);\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.publicId === id) {\n                if (def.recurringDef) {\n                    return new EventApi(this, def, null);\n                }\n                else {\n                    for (var instanceId in instances) {\n                        var instance = instances[instanceId];\n                        if (instance.defId === def.defId) {\n                            return new EventApi(this, def, instance);\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.getEvents = function () {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        var eventApis = [];\n        for (var id in instances) {\n            var instance = instances[id];\n            var def = defs[instance.defId];\n            eventApis.push(new EventApi(this, def, instance));\n        }\n        return eventApis;\n    };\n    Calendar.prototype.removeAllEvents = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n    };\n    Calendar.prototype.rerenderEvents = function () {\n        this.dispatch({ type: 'RESET_EVENTS' });\n    };\n    // Public Event Sources API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getEventSources = function () {\n        var sourceHash = this.state.eventSources;\n        var sourceApis = [];\n        for (var internalId in sourceHash) {\n            sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n        }\n        return sourceApis;\n    };\n    Calendar.prototype.getEventSourceById = function (id) {\n        var sourceHash = this.state.eventSources;\n        id = String(id);\n        for (var sourceId in sourceHash) {\n            if (sourceHash[sourceId].publicId === id) {\n                return new EventSourceApi(this, sourceHash[sourceId]);\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.addEventSource = function (sourceInput) {\n        if (sourceInput instanceof EventSourceApi) {\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                this.dispatch({\n                    type: 'ADD_EVENT_SOURCES',\n                    sources: [sourceInput.internalEventSource]\n                });\n            }\n            return sourceInput;\n        }\n        var eventSource = parseEventSource(sourceInput, this);\n        if (eventSource) { // TODO: error otherwise?\n            this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n            return new EventSourceApi(this, eventSource);\n        }\n        return null;\n    };\n    Calendar.prototype.removeAllEventSources = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n    };\n    Calendar.prototype.refetchEvents = function () {\n        this.dispatch({ type: 'FETCH_EVENT_SOURCES' });\n    };\n    // Scroll\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.scrollToTime = function (timeInput) {\n        var duration = createDuration(timeInput);\n        if (duration) {\n            this.component.view.scrollToDuration(duration);\n        }\n    };\n    return Calendar;\n}());\nEmitterMixin.mixInto(Calendar);\n// for memoizers\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildComponentContext$1(theme, dateEnv, options) {\n    return new ComponentContext(this, theme, dateEnv, options, null);\n}\nfunction buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone: timeZone,\n        namedTimeZoneImpl: namedTimeZoneImpl,\n        locale: locale,\n        weekNumberCalculation: weekNumberCalculation,\n        firstDay: firstDay,\n        weekLabel: weekLabel,\n        cmdFormatter: cmdFormatter\n    });\n}\nfunction buildTheme(calendarOptions) {\n    var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n    return new themeClass(calendarOptions);\n}\nfunction buildDelayedRerender(wait) {\n    var func = this.tryRerender.bind(this);\n    if (wait != null) {\n        func = debounce(func, wait);\n    }\n    return func;\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, function (eventSource) {\n        return eventSource.ui;\n    });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    var eventUiBases = { '': eventUiSingleBase };\n    for (var defId in eventDefs) {\n        var def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\n\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(viewSpec, parentEl) {\n        var _this = _super.call(this, createElement('div', { className: 'fc-view fc-' + viewSpec.type + '-view' })) || this;\n        _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n        _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n        _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n        _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n        _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n        _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n        _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n        _this.viewSpec = viewSpec;\n        _this.type = viewSpec.type;\n        parentEl.appendChild(_this.el);\n        _this.initialize();\n        return _this;\n    }\n    View.prototype.initialize = function () {\n    };\n    Object.defineProperty(View.prototype, \"activeStart\", {\n        // Date Setting/Unsetting\n        // -----------------------------------------------------------------------------------------------------------------\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"activeEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentStart\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // General Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.render = function (props, context) {\n        this.renderDatesMem(props.dateProfile);\n        this.renderBusinessHoursMem(props.businessHours);\n        this.renderDateSelectionMem(props.dateSelection);\n        this.renderEventsMem(props.eventStore);\n        this.renderEventSelectionMem(props.eventSelection);\n        this.renderEventDragMem(props.eventDrag);\n        this.renderEventResizeMem(props.eventResize);\n    };\n    View.prototype.beforeUpdate = function () {\n        this.addScroll(this.queryScroll());\n    };\n    View.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderDatesMem.unrender(); // should unrender everything else\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        var calendar = this.context.calendar;\n        if (isResize) {\n            this.addScroll(this.queryScroll()); // NOTE: same code as in beforeUpdate\n        }\n        if (isResize || // HACKS...\n            calendar.isViewUpdated ||\n            calendar.isDatesUpdated ||\n            calendar.isEventsUpdated) {\n            // sort of the catch-all sizing\n            // anything that might cause dimension changes\n            this.updateBaseSize(isResize, viewHeight, isAuto);\n        }\n        // NOTE: popScroll is called by CalendarComponent\n    };\n    View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    };\n    // Date Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDatesWrap = function (dateProfile) {\n        this.renderDates(dateProfile);\n        this.addScroll({\n            duration: createDuration(this.context.options.scrollTime)\n        });\n    };\n    View.prototype.unrenderDatesWrap = function () {\n        this.stopNowIndicator();\n        this.unrenderDates();\n    };\n    View.prototype.renderDates = function (dateProfile) { };\n    View.prototype.unrenderDates = function () { };\n    // Business Hours\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderBusinessHours = function (businessHours) { };\n    View.prototype.unrenderBusinessHours = function () { };\n    // Date Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.renderDateSelection(selection);\n        }\n    };\n    View.prototype.unrenderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.unrenderDateSelection(selection);\n        }\n    };\n    View.prototype.renderDateSelection = function (selection) { };\n    View.prototype.unrenderDateSelection = function (selection) { };\n    // Event Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEvents = function (eventStore) { };\n    View.prototype.unrenderEvents = function () { };\n    // util for subclasses\n    View.prototype.sliceEvents = function (eventStore, allDay) {\n        var props = this.props;\n        return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.context.nextDayThreshold : null).fg;\n    };\n    // Event Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.renderEventSelection(instanceId);\n        }\n    };\n    View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.unrenderEventSelection(instanceId);\n        }\n    };\n    View.prototype.renderEventSelection = function (instanceId) { };\n    View.prototype.unrenderEventSelection = function (instanceId) { };\n    // Event Drag\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventDragWrap = function (state) {\n        if (state) {\n            this.renderEventDrag(state);\n        }\n    };\n    View.prototype.unrenderEventDragWrap = function (state) {\n        if (state) {\n            this.unrenderEventDrag(state);\n        }\n    };\n    View.prototype.renderEventDrag = function (state) { };\n    View.prototype.unrenderEventDrag = function (state) { };\n    // Event Resize\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventResizeWrap = function (state) {\n        if (state) {\n            this.renderEventResize(state);\n        }\n    };\n    View.prototype.unrenderEventResizeWrap = function (state) {\n        if (state) {\n            this.unrenderEventResize(state);\n        }\n    };\n    View.prototype.renderEventResize = function (state) { };\n    View.prototype.unrenderEventResize = function (state) { };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Immediately render the current time indicator and begins re-rendering it at an interval,\n    // which is defined by this.getNowIndicatorUnit().\n    // TODO: somehow do this for the current whole day's background too\n    // USAGE: must be called manually from subclasses' render methods! don't need to call stopNowIndicator tho\n    View.prototype.startNowIndicator = function (dateProfile, dateProfileGenerator) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, dateEnv = _a.dateEnv, options = _a.options;\n        var unit;\n        var update;\n        var delay; // ms wait value\n        if (options.nowIndicator && !this.initialNowDate) {\n            unit = this.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n            if (unit) {\n                update = this.updateNowIndicator.bind(this);\n                this.initialNowDate = calendar.getNow();\n                this.initialNowQueriedMs = new Date().valueOf();\n                // wait until the beginning of the next interval\n                delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf();\n                // TODO: maybe always use setTimeout, waiting until start of next unit\n                this.nowIndicatorTimeoutID = setTimeout(function () {\n                    _this.nowIndicatorTimeoutID = null;\n                    update();\n                    if (unit === 'second') {\n                        delay = 1000; // every second\n                    }\n                    else {\n                        delay = 1000 * 60; // otherwise, every minute\n                    }\n                    _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n                }, delay);\n            }\n            // rendering will be initiated in updateSize\n        }\n    };\n    // rerenders the now indicator, computing the new current time from the amount of time that has passed\n    // since the initial getNow call.\n    View.prototype.updateNowIndicator = function () {\n        if (this.props.dateProfile && // a way to determine if dates were rendered yet\n            this.initialNowDate // activated before?\n        ) {\n            this.unrenderNowIndicator(); // won't unrender if unnecessary\n            this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n            this.isNowIndicatorRendered = true;\n        }\n    };\n    // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n    // Won't cause side effects if indicator isn't rendered.\n    View.prototype.stopNowIndicator = function () {\n        if (this.nowIndicatorTimeoutID) {\n            clearTimeout(this.nowIndicatorTimeoutID);\n            this.nowIndicatorTimeoutID = null;\n        }\n        if (this.nowIndicatorIntervalID) {\n            clearInterval(this.nowIndicatorIntervalID);\n            this.nowIndicatorIntervalID = null;\n        }\n        if (this.isNowIndicatorRendered) {\n            this.unrenderNowIndicator();\n            this.isNowIndicatorRendered = false;\n        }\n    };\n    View.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        // subclasses should implement\n    };\n    // Renders a current time indicator at the given datetime\n    View.prototype.renderNowIndicator = function (date) {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    // Undoes the rendering actions from renderNowIndicator\n    View.prototype.unrenderNowIndicator = function () {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    /* Scroller\n    ------------------------------------------------------------------------------------------------------------------*/\n    View.prototype.addScroll = function (scroll, isForced) {\n        if (isForced) {\n            scroll.isForced = isForced;\n        }\n        __assign(this.queuedScroll || (this.queuedScroll = {}), scroll);\n    };\n    View.prototype.popScroll = function (isResize) {\n        this.applyQueuedScroll(isResize);\n        this.queuedScroll = null;\n    };\n    View.prototype.applyQueuedScroll = function (isResize) {\n        if (this.queuedScroll) {\n            this.applyScroll(this.queuedScroll, isResize);\n        }\n    };\n    View.prototype.queryScroll = function () {\n        var scroll = {};\n        if (this.props.dateProfile) { // dates rendered yet?\n            __assign(scroll, this.queryDateScroll());\n        }\n        return scroll;\n    };\n    View.prototype.applyScroll = function (scroll, isResize) {\n        var duration = scroll.duration, isForced = scroll.isForced;\n        if (duration != null && !isForced) {\n            delete scroll.duration;\n            if (this.props.dateProfile) { // dates rendered yet?\n                __assign(scroll, this.computeDateScroll(duration));\n            }\n        }\n        if (this.props.dateProfile) { // dates rendered yet?\n            this.applyDateScroll(scroll);\n        }\n    };\n    View.prototype.computeDateScroll = function (duration) {\n        return {}; // subclasses must implement\n    };\n    View.prototype.queryDateScroll = function () {\n        return {}; // subclasses must implement\n    };\n    View.prototype.applyDateScroll = function (scroll) {\n        // subclasses must implement\n    };\n    // for API\n    View.prototype.scrollToDuration = function (duration) {\n        this.applyScroll({ duration: duration }, false);\n    };\n    return View;\n}(DateComponent));\nEmitterMixin.mixInto(View);\nView.prototype.usesMinMaxTime = false;\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\nvar FgEventRenderer = /** @class */ (function () {\n    function FgEventRenderer() {\n        this.segs = [];\n        this.isSizeDirty = false;\n    }\n    FgEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        this.context = context;\n        this.rangeUpdated(); // called too frequently :(\n        // render an `.el` on each seg\n        // returns a subset of the segs. segs that were actually rendered\n        segs = this.renderSegEls(segs, mirrorInfo);\n        this.segs = segs;\n        this.attachSegs(segs, mirrorInfo);\n        this.isSizeDirty = true;\n        triggerRenderedSegs(this.context, this.segs, Boolean(mirrorInfo));\n    };\n    FgEventRenderer.prototype.unrender = function (context, _segs, mirrorInfo) {\n        triggerWillRemoveSegs(this.context, this.segs, Boolean(mirrorInfo));\n        this.detachSegs(this.segs);\n        this.segs = [];\n    };\n    // Updates values that rely on options and also relate to range\n    FgEventRenderer.prototype.rangeUpdated = function () {\n        var options = this.context.options;\n        var displayEventTime;\n        var displayEventEnd;\n        this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n        displayEventTime = options.displayEventTime;\n        if (displayEventTime == null) {\n            displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n        }\n        displayEventEnd = options.displayEventEnd;\n        if (displayEventEnd == null) {\n            displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n        }\n        this.displayEventTime = displayEventTime;\n        this.displayEventEnd = displayEventEnd;\n    };\n    // Renders and assigns an `el` property for each foreground event segment.\n    // Only returns segments that successfully rendered.\n    FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n        var html = '';\n        var i;\n        if (segs.length) { // don't build an empty html string\n            // build a large concatenation of event segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(segs[i], mirrorInfo);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            segs = filterSegsViaEls(this.context, segs, Boolean(mirrorInfo));\n        }\n        return segs;\n    };\n    // Generic utility for generating the HTML classNames for an event segment's element\n    FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n        var classes = [\n            'fc-event',\n            seg.isStart ? 'fc-start' : 'fc-not-start',\n            seg.isEnd ? 'fc-end' : 'fc-not-end'\n        ].concat(seg.eventRange.ui.classNames);\n        if (isDraggable) {\n            classes.push('fc-draggable');\n        }\n        if (isResizable) {\n            classes.push('fc-resizable');\n        }\n        if (mirrorInfo) {\n            classes.push('fc-mirror');\n            if (mirrorInfo.isDragging) {\n                classes.push('fc-dragging');\n            }\n            if (mirrorInfo.isResizing) {\n                classes.push('fc-resizing');\n            }\n        }\n        return classes;\n    };\n    // Compute the text that should be displayed on an event's element.\n    // `range` can be the Event object itself, or something range-like, with at least a `start`.\n    // If event times are disabled, or the event has no time, will return a blank string.\n    // If not specified, formatter will default to the eventTimeFormat setting,\n    // and displayEnd will default to the displayEventEnd setting.\n    FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n        var def = eventRange.def, instance = eventRange.instance;\n        return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n    };\n    FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n        var dateEnv = this.context.dateEnv;\n        if (formatter == null) {\n            formatter = this.eventTimeFormat;\n        }\n        if (displayEnd == null) {\n            displayEnd = this.displayEventEnd;\n        }\n        if (this.displayEventTime && !allDay) {\n            if (displayEnd && end) {\n                return dateEnv.formatRange(start, end, formatter, {\n                    forcedStartTzo: forcedStartTzo,\n                    forcedEndTzo: forcedEndTzo\n                });\n            }\n            else {\n                return dateEnv.format(start, formatter, {\n                    forcedTzo: forcedStartTzo\n                });\n            }\n        }\n        return '';\n    };\n    FgEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true\n        };\n    };\n    FgEventRenderer.prototype.computeDisplayEventTime = function () {\n        return true;\n    };\n    FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Utility for generating event skin-related CSS properties\n    FgEventRenderer.prototype.getSkinCss = function (ui) {\n        return {\n            'background-color': ui.backgroundColor,\n            'border-color': ui.borderColor,\n            color: ui.textColor\n        };\n    };\n    FgEventRenderer.prototype.sortEventSegs = function (segs) {\n        var specs = this.context.eventOrderSpecs;\n        var objs = segs.map(buildSegCompareObj);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    FgEventRenderer.prototype.computeSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.computeSegSizes(this.segs);\n        }\n    };\n    FgEventRenderer.prototype.assignSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.assignSegSizes(this.segs);\n            this.isSizeDirty = false;\n        }\n    };\n    FgEventRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FgEventRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    // Manipulation on rendered segs\n    FgEventRenderer.prototype.hideByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.showByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = '';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                var eventInstance = seg.eventRange.instance;\n                if (eventInstance && eventInstance.instanceId === instanceId &&\n                    seg.el // necessary?\n                ) {\n                    seg.el.classList.add('fc-selected');\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (seg.el) { // necessary?\n                    seg.el.classList.remove('fc-selected');\n                }\n            }\n        }\n    };\n    return FgEventRenderer;\n}());\n// returns a object with all primitive props that can be compared\nfunction buildSegCompareObj(seg) {\n    var eventDef = seg.eventRange.def;\n    var range = seg.eventRange.instance.range;\n    var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n    var end = range.end ? range.end.valueOf() : 0; // \"\n    return __assign({}, eventDef.extendedProps, eventDef, { id: eventDef.publicId, start: start,\n        end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg // for later retrieval\n     });\n}\n\n/*\nTODO: when refactoring this class, make a new FillRenderer instance for each `type`\n*/\nvar FillRenderer = /** @class */ (function () {\n    function FillRenderer() {\n        this.fillSegTag = 'div';\n        this.dirtySizeFlags = {};\n        this.containerElsByType = {};\n        this.segsByType = {};\n    }\n    FillRenderer.prototype.getSegsByType = function (type) {\n        return this.segsByType[type] || [];\n    };\n    FillRenderer.prototype.renderSegs = function (type, context, segs) {\n        var _a;\n        this.context = context;\n        var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n        var containerEls = this.attachSegs(type, renderedSegs);\n        if (containerEls) {\n            (_a = (this.containerElsByType[type] || (this.containerElsByType[type] = []))).push.apply(_a, containerEls);\n        }\n        this.segsByType[type] = renderedSegs;\n        if (type === 'bgEvent') {\n            triggerRenderedSegs(context, renderedSegs, false); // isMirror=false\n        }\n        this.dirtySizeFlags[type] = true;\n    };\n    // Unrenders a specific type of fill that is currently rendered on the grid\n    FillRenderer.prototype.unrender = function (type, context) {\n        var segs = this.segsByType[type];\n        if (segs) {\n            if (type === 'bgEvent') {\n                triggerWillRemoveSegs(context, segs, false); // isMirror=false\n            }\n            this.detachSegs(type, segs);\n        }\n    };\n    // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n    // Only returns segments that successfully rendered.\n    FillRenderer.prototype.renderSegEls = function (type, segs) {\n        var _this = this;\n        var html = '';\n        var i;\n        if (segs.length) {\n            // build a large concatenation of segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(type, segs[i]);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            if (type === 'bgEvent') {\n                segs = filterSegsViaEls(this.context, segs, false // isMirror. background events can never be mirror elements\n                );\n            }\n            // correct element type? (would be bad if a non-TD were inserted into a table for example)\n            segs = segs.filter(function (seg) {\n                return elementMatches(seg.el, _this.fillSegTag);\n            });\n        }\n        return segs;\n    };\n    // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n    FillRenderer.prototype.renderSegHtml = function (type, seg) {\n        var css = null;\n        var classNames = [];\n        if (type !== 'highlight' && type !== 'businessHours') {\n            css = {\n                'background-color': seg.eventRange.ui.backgroundColor\n            };\n        }\n        if (type !== 'highlight') {\n            classNames = classNames.concat(seg.eventRange.ui.classNames);\n        }\n        if (type === 'businessHours') {\n            classNames.push('fc-bgevent');\n        }\n        else {\n            classNames.push('fc-' + type.toLowerCase());\n        }\n        return '<' + this.fillSegTag +\n            (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') +\n            (css ? ' style=\"' + cssToStr(css) + '\"' : '') +\n            '></' + this.fillSegTag + '>';\n    };\n    FillRenderer.prototype.detachSegs = function (type, segs) {\n        var containerEls = this.containerElsByType[type];\n        if (containerEls) {\n            containerEls.forEach(removeElement);\n            delete this.containerElsByType[type];\n        }\n    };\n    FillRenderer.prototype.computeSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.computeSegSizes(this.segsByType[type]);\n            }\n        }\n    };\n    FillRenderer.prototype.assignSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.assignSegSizes(this.segsByType[type]);\n            }\n        }\n        this.dirtySizeFlags = {};\n    };\n    FillRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FillRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    return FillRenderer;\n}());\n\nvar NamedTimeZoneImpl = /** @class */ (function () {\n    function NamedTimeZoneImpl(timeZoneName) {\n        this.timeZoneName = timeZoneName;\n    }\n    return NamedTimeZoneImpl;\n}());\n\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\nvar ElementDragging = /** @class */ (function () {\n    function ElementDragging(el) {\n        this.emitter = new EmitterMixin();\n    }\n    ElementDragging.prototype.destroy = function () {\n    };\n    ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        // optional\n    };\n    return ElementDragging;\n}());\n\nfunction formatDate(dateInput, settings) {\n    if (settings === void 0) { settings = {}; }\n    var dateEnv = buildDateEnv$1(settings);\n    var formatter = createFormatter(settings);\n    var dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo\n    });\n}\nfunction formatRange(startInput, endInput, settings // mixture of env and formatter settings\n) {\n    var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n    var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n    var startMeta = dateEnv.createMarkerMeta(startInput);\n    var endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: settings.isEndExclusive\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv$1(settings) {\n    var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    // ensure required settings\n    settings = __assign({ timeZone: globalDefaults.timeZone, calendarSystem: 'gregory' }, settings, { locale: locale });\n    return new DateEnv(settings);\n}\n\nvar DRAG_META_PROPS = {\n    startTime: createDuration,\n    duration: createDuration,\n    create: Boolean,\n    sourceId: String\n};\nvar DRAG_META_DEFAULTS = {\n    create: true\n};\nfunction parseDragMeta(raw) {\n    var leftoverProps = {};\n    var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n    refined.leftoverProps = leftoverProps;\n    return refined;\n}\n\n// Computes a default column header formatting string if `colFormat` is not explicitly defined\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n    // if more than one week row, or if there are a lot of columns with not much space,\n    // put just the day numbers will be in each cell\n    if (!datesRepDistinctDays || dayCnt > 10) {\n        return { weekday: 'short' }; // \"Sat\"\n    }\n    else if (dayCnt > 1) {\n        return { weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }; // \"Sat 11/12\"\n    }\n    else {\n        return { weekday: 'long' }; // \"Saturday\"\n    }\n}\nfunction renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme, options = context.options;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n    var classNames = [\n        'fc-day-header',\n        theme.getClass('widgetHeader')\n    ];\n    var innerHtml;\n    if (typeof options.columnHeaderHtml === 'function') {\n        innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n    }\n    else if (typeof options.columnHeaderText === 'function') {\n        innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n    }\n    else {\n        innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n    }\n    // if only one row of days, the classNames on the header can represent the specific days beneath\n    if (datesRepDistinctDays) {\n        classNames = classNames.concat(\n        // includes the day-of-week class\n        // noThemeHighlight=true (don't highlight the header)\n        getDayClasses(dateMarker, dateProfile, context, true));\n    }\n    else {\n        classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n    }\n    return '' +\n        '<th class=\"' + classNames.join(' ') + '\"' +\n        ((isDateValid && datesRepDistinctDays) ?\n            ' data-date=\"' + dateEnv.formatIso(dateMarker, { omitTime: true }) + '\"' :\n            '') +\n        (colspan > 1 ?\n            ' colspan=\"' + colspan + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '>' +\n        (isDateValid ?\n            // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n            buildGotoAnchorHtml(options, dateEnv, { date: dateMarker, forceOff: !datesRepDistinctDays || colCnt === 1 }, innerHtml) :\n            // if not valid, display text, but no link\n            innerHtml) +\n        '</th>';\n}\n\nvar DayHeader = /** @class */ (function (_super) {\n    __extends(DayHeader, _super);\n    function DayHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    DayHeader.prototype.render = function (props, context) {\n        var dates = props.dates, datesRepDistinctDays = props.datesRepDistinctDays;\n        var parts = [];\n        this.renderSkeleton(context);\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        var colHeadFormat = createFormatter(context.options.columnHeaderFormat ||\n            computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, context));\n        }\n        if (context.isRtl) {\n            parts.reverse();\n        }\n        this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n    };\n    DayHeader.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    DayHeader.prototype._renderSkeleton = function (context) {\n        var theme = context.theme;\n        var parentEl = this.parentEl;\n        parentEl.innerHTML = ''; // because might be nbsp\n        parentEl.appendChild(this.el = htmlToElement('<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<thead></thead>' +\n            '</table>' +\n            '</div>'));\n        this.thead = this.el.querySelector('thead');\n    };\n    DayHeader.prototype._unrenderSkeleton = function () {\n        removeElement(this.el);\n    };\n    return DayHeader;\n}(Component));\n\nvar DaySeries = /** @class */ (function () {\n    function DaySeries(range, dateProfileGenerator) {\n        var date = range.start;\n        var end = range.end;\n        var indices = [];\n        var dates = [];\n        var dayIndex = -1;\n        while (date < end) { // loop each day from start to end\n            if (dateProfileGenerator.isHiddenDay(date)) {\n                indices.push(dayIndex + 0.5); // mark that it's between indices\n            }\n            else {\n                dayIndex++;\n                indices.push(dayIndex);\n                dates.push(date);\n            }\n            date = addDays(date, 1);\n        }\n        this.dates = dates;\n        this.indices = indices;\n        this.cnt = dates.length;\n    }\n    DaySeries.prototype.sliceRange = function (range) {\n        var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n        var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n        var clippedFirstIndex = Math.max(0, firstIndex);\n        var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n        // deal with in-between indices\n        clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n        clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n        if (clippedFirstIndex <= clippedLastIndex) {\n            return {\n                firstIndex: clippedFirstIndex,\n                lastIndex: clippedLastIndex,\n                isStart: firstIndex === clippedFirstIndex,\n                isEnd: lastIndex === clippedLastIndex\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n    // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n    // If before the first offset, returns a negative number.\n    // If after the last offset, returns an offset past the last cell offset.\n    // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n    DaySeries.prototype.getDateDayIndex = function (date) {\n        var indices = this.indices;\n        var dayOffset = Math.floor(diffDays(this.dates[0], date));\n        if (dayOffset < 0) {\n            return indices[0] - 1;\n        }\n        else if (dayOffset >= indices.length) {\n            return indices[indices.length - 1] + 1;\n        }\n        else {\n            return indices[dayOffset];\n        }\n    };\n    return DaySeries;\n}());\n\nvar DayTable = /** @class */ (function () {\n    function DayTable(daySeries, breakOnWeeks) {\n        var dates = daySeries.dates;\n        var daysPerRow;\n        var firstDay;\n        var rowCnt;\n        if (breakOnWeeks) {\n            // count columns until the day-of-week repeats\n            firstDay = dates[0].getUTCDay();\n            for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n                if (dates[daysPerRow].getUTCDay() === firstDay) {\n                    break;\n                }\n            }\n            rowCnt = Math.ceil(dates.length / daysPerRow);\n        }\n        else {\n            rowCnt = 1;\n            daysPerRow = dates.length;\n        }\n        this.rowCnt = rowCnt;\n        this.colCnt = daysPerRow;\n        this.daySeries = daySeries;\n        this.cells = this.buildCells();\n        this.headerDates = this.buildHeaderDates();\n    }\n    DayTable.prototype.buildCells = function () {\n        var rows = [];\n        for (var row = 0; row < this.rowCnt; row++) {\n            var cells = [];\n            for (var col = 0; col < this.colCnt; col++) {\n                cells.push(this.buildCell(row, col));\n            }\n            rows.push(cells);\n        }\n        return rows;\n    };\n    DayTable.prototype.buildCell = function (row, col) {\n        return {\n            date: this.daySeries.dates[row * this.colCnt + col]\n        };\n    };\n    DayTable.prototype.buildHeaderDates = function () {\n        var dates = [];\n        for (var col = 0; col < this.colCnt; col++) {\n            dates.push(this.cells[0][col].date);\n        }\n        return dates;\n    };\n    DayTable.prototype.sliceRange = function (range) {\n        var colCnt = this.colCnt;\n        var seriesSeg = this.daySeries.sliceRange(range);\n        var segs = [];\n        if (seriesSeg) {\n            var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n            var index = firstIndex;\n            while (index <= lastIndex) {\n                var row = Math.floor(index / colCnt);\n                var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                segs.push({\n                    row: row,\n                    firstCol: index % colCnt,\n                    lastCol: (nextIndex - 1) % colCnt,\n                    isStart: seriesSeg.isStart && index === firstIndex,\n                    isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex\n                });\n                index = nextIndex;\n            }\n        }\n        return segs;\n    };\n    return DayTable;\n}());\n\nvar Slicer = /** @class */ (function () {\n    function Slicer() {\n        this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n        this.sliceDateSelection = memoize(this._sliceDateSpan);\n        this.sliceEventStore = memoize(this._sliceEventStore);\n        this.sliceEventDrag = memoize(this._sliceInteraction);\n        this.sliceEventResize = memoize(this._sliceInteraction);\n    }\n    Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        var eventUiBases = props.eventUiBases;\n        var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n        return {\n            dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n            businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, calendar, component].concat(extraArgs)),\n            fgEventSegs: eventSegs.fg,\n            bgEventSegs: eventSegs.bg,\n            eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventSelection: props.eventSelection\n        }; // TODO: give interactionSegs?\n    };\n    Slicer.prototype.sliceNowDate = function (// does not memoize\n    date, component) {\n        var extraArgs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            extraArgs[_i - 2] = arguments[_i];\n        }\n        return this._sliceDateSpan.apply(this, [{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n            {},\n            component].concat(extraArgs));\n    };\n    Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!businessHours) {\n            return [];\n        }\n        return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), calendar),\n            {},\n            dateProfile,\n            nextDayThreshold,\n            component].concat(extraArgs)).bg;\n    };\n    Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (eventStore) {\n            var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n                fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n            };\n        }\n        else {\n            return { bg: [], fg: [] };\n        }\n    };\n    Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!interaction) {\n            return null;\n        }\n        var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n        return {\n            segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n            affectedInstances: interaction.affectedEvents.instances,\n            isEvent: interaction.isEvent,\n            sourceSeg: interaction.origSeg\n        };\n    };\n    Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n        var extraArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            extraArgs[_i - 3] = arguments[_i];\n        }\n        if (!dateSpan) {\n            return [];\n        }\n        var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.context.calendar);\n        var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n        for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n            var seg = segs_1[_a];\n            seg.component = component;\n            seg.eventRange = eventRange;\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n    extraArgs) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n    extraArgs) {\n        var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            seg.component = component;\n            seg.eventRange = eventRange;\n            seg.isStart = eventRange.isStart && seg.isStart;\n            seg.isEnd = eventRange.isEnd && seg.isEnd;\n        }\n        return segs;\n    };\n    return Slicer;\n}());\n/*\nfor incorporating minTime/maxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n    var range = dateProfile.activeRange;\n    if (isComponentAllDay) {\n        return range;\n    }\n    return {\n        start: addMs(range.start, dateProfile.minTime.milliseconds),\n        end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n    };\n}\n\n// exports\n// --------------------------------------------------------------------------------------------------\nvar version = '4.4.2';\n\nexport { Calendar, Component, ComponentContext, DateComponent, DateEnv, DateProfileGenerator, DayHeader, DaySeries, DayTable, ElementDragging, ElementScrollController, EmitterMixin, EventApi, FgEventRenderer, FillRenderer, Interaction, Mixin, NamedTimeZoneImpl, PositionCache, ScrollComponent, ScrollController, Slicer, Splitter, Theme, View, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, appendToElement, applyAll, applyMutationToEventStore, applyStyle, applyStyleProp, asRoughMinutes, asRoughMs, asRoughSeconds, buildGotoAnchorHtml, buildSegCompareObj, capitaliseFirstLetter, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compensateScroll, computeClippingRect, computeEdges, computeEventDraggable, computeEventEndResizable, computeEventStartResizable, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeVisibleDayRange, config, constrainPoint, createDuration, createElement, createEmptyEventStore, createEventInstance, createFormatter, createPlugin, cssToStr, debounce, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, distributeHeight, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findChildren, findElements, flexibleCompare, forceClassName, formatDate, formatIsoTimeString, formatRange, getAllDayHtml, getClippingParents, getDayClasses, getElSeg, getRectCenter, getRelevantEvents, globalDefaults, greatestDurationDenominator, hasBgRendering, htmlEscape, htmlToElement, insertAfterElement, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, isArraysEqual, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isSingleDay, isValidDate, listenBySelector, mapHash, matchCellWidths, memoize, memoizeOutput, memoizeRendering, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, prependToElement, preventContextMenu, preventDefault, preventSelection, processScopedUiProps, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineProps, removeElement, removeExact, renderDateCell, requestJson, sliceEventStore, startOfDay, subtractInnerElHeight, translateRect, uncompensateScroll, undistributeHeight, unpromisify, version, whenTransitionDone, wholeDivideDurations };\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Calendar } from './calendar.model';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\nimport { throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class CalendarService {\r\n    private readonly API_URL = 'assets/data/calendar.json';\r\n    httpOptions = {\r\n        headers: new HttpHeaders({\r\n            'Content-Type': 'application/json'\r\n        })\r\n    }\r\n    dataChange: BehaviorSubject<Calendar[]> = new BehaviorSubject<Calendar[]>(\r\n        []\r\n    );\r\n    // Temporarily stores data from dialogs\r\n    dialogData: any;\r\n    constructor(private httpClient: HttpClient) { }\r\n    get data(): Calendar[] {\r\n        return this.dataChange.value;\r\n    }\r\n    getDialogData() {\r\n        return this.dialogData;\r\n    }\r\n    getAllCalendars(): Observable<Calendar[]> {\r\n        return this.httpClient.get<Calendar[]>(this.API_URL)\r\n            .pipe(\r\n                catchError(this.errorHandler)\r\n            )\r\n    }\r\n\r\n    addUpdateCalendar(calendar: Calendar): void {\r\n        this.dialogData = calendar;\r\n    }\r\n    deleteCalendar(calendar: Calendar): void {\r\n        this.dialogData = calendar;\r\n    }\r\n    errorHandler(error) {\r\n        let errorMessage = '';\r\n        if (error.error instanceof ErrorEvent) {\r\n            // Get client-side error\r\n            errorMessage = error.error.message;\r\n        } else {\r\n            // Get server-side error\r\n            errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n        }\r\n        console.log(errorMessage);\r\n        return throwError(errorMessage);\r\n    }\r\n}\r\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { CalendarService } from '../../calendar.service';\r\nimport {\r\n  FormControl,\r\n  Validators,\r\n  FormGroup,\r\n  FormBuilder\r\n} from '@angular/forms';\r\nimport { Calendar } from '../../calendar.model';\r\nimport { formatDate } from '@angular/common';\r\n@Component({\r\n  selector: 'app-form-dialog',\r\n  templateUrl: './form-dialog.component.html',\r\n  styleUrls: ['./form-dialog.component.sass']\r\n})\r\nexport class FormDialogComponent {\r\n  action: string;\r\n  dialogTitle: string;\r\n  calendarForm: FormGroup;\r\n  calendar: Calendar;\r\n  showDeleteBtn = false;\r\n  constructor(\r\n    public dialogRef: MatDialogRef<FormDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public calendarService: CalendarService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    // Set the defaults\r\n    this.action = data.action;\r\n    if (this.action === 'edit') {\r\n      this.dialogTitle = data.calendar.title;\r\n      this.calendar = data.calendar;\r\n      this.showDeleteBtn = true;\r\n    } else {\r\n      this.dialogTitle = 'New Event';\r\n      this.calendar = new Calendar({});\r\n      this.showDeleteBtn = false;\r\n    }\r\n\r\n    this.calendarForm = this.createContactForm();\r\n  }\r\n  formControl = new FormControl('', [\r\n    Validators.required\r\n    // Validators.email,\r\n  ]);\r\n  getErrorMessage() {\r\n    return this.formControl.hasError('required')\r\n      ? 'Required field'\r\n      : this.formControl.hasError('email')\r\n        ? 'Not a valid email'\r\n        : '';\r\n  }\r\n  createContactForm(): FormGroup {\r\n    return this.fb.group({\r\n      id: [this.calendar.id],\r\n      title: [\r\n        this.calendar.title,\r\n        [Validators.required]\r\n      ],\r\n      category: [this.calendar.category],\r\n      startDate: [this.calendar.startDate,\r\n      [Validators.required]\r\n      ],\r\n      endDate: [this.calendar.endDate,\r\n      [Validators.required]\r\n      ],\r\n      details: [\r\n        this.calendar.details],\r\n    });\r\n  }\r\n  submit() {\r\n    // emppty stuff\r\n  }\r\n  deleteEvent() {\r\n    this.calendarService.deleteCalendar(this.calendarForm.getRawValue());\r\n    this.dialogRef.close('delete');\r\n  }\r\n  onNoClick(): void {\r\n    this.dialogRef.close();\r\n  }\r\n  public confirmAdd(): void {\r\n    this.calendarService.addUpdateCalendar(this.calendarForm.getRawValue());\r\n    this.dialogRef.close('submit');\r\n  }\r\n}\r\n","<div class=\"addContainer\">\r\n  <div class=\"modalHeader\">\r\n    <div class=\"editRowModal\">\r\n      <div class=\"modalHeader clearfix\">\r\n        <div class=\"modal-about\">\r\n          <div class=\"font-weight-bold p-t-5 font-17\">\r\n            {{dialogTitle}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button mat-icon-button (click)=\"dialogRef.close()\" aria-label=\"Close dialog\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div mat-dialog-content>\r\n    <form class=\"register-form m-4\" [formGroup]=\"calendarForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 \">\r\n          <mat-form-field class=\"example-full-width mb-3\" appearance=\"outline\">\r\n            <mat-label>Title</mat-label>\r\n            <input matInput formControlName=\"title\" required>\r\n            <mat-icon matSuffix>turned_in_not</mat-icon>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 \">\r\n          <mat-form-field class=\"example-full-width mb-3\" appearance=\"outline\">\r\n            <mat-label>Category</mat-label>\r\n            <mat-select formControlName=\"category\" required>\r\n              <mat-option [value]=\"'work'\">\r\n                Work\r\n              </mat-option>\r\n              <mat-option [value]=\"'personal'\">\r\n                Personal\r\n              </mat-option>\r\n              <mat-option [value]=\"'important'\">\r\n                Important\r\n              </mat-option>\r\n              <mat-option [value]=\"'travel'\">\r\n                Travel\r\n              </mat-option>\r\n              <mat-option [value]=\"'friends'\">\r\n                Friends\r\n              </mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 \">\r\n          <mat-form-field class=\"example-full-width mb-3\" appearance=\"outline\">\r\n            <mat-label>Start date</mat-label>\r\n            <input matInput formControlName=\"startDate\" [owlDateTimeTrigger]=\"startDate\" [owlDateTime]=\"startDate\"\r\n              placeholder=\"Choose a date\" required>\r\n            <mat-icon matSuffix [owlDateTimeTrigger]=\"startDate\" class=\"date-icon\">today</mat-icon>\r\n            <owl-date-time #startDate></owl-date-time>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 \">\r\n          <mat-form-field class=\"example-full-width mb-3\" appearance=\"outline\">\r\n            <mat-label>End date</mat-label>\r\n            <input matInput formControlName=\"endDate\" [owlDateTimeTrigger]=\"endDate\" [owlDateTime]=\"endDate\"\r\n              placeholder=\"Choose a date\" required>\r\n            <mat-icon matSuffix [owlDateTimeTrigger]=\"endDate\" class=\"date-icon\">today</mat-icon>\r\n            <owl-date-time #endDate></owl-date-time>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12\">\r\n          <mat-form-field class=\"example-full-width mb-3\" appearance=\"outline\">\r\n            <mat-label>Event Details</mat-label>\r\n            <textarea matInput formControlName=\"details\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-10 col-lg-10 col-md-12 col-sm-12\">\r\n          <div class=\"example-button-row\">\r\n            <button mat-raised-button color=\"primary\" [type]=\"submit\" [disabled]=\"!calendarForm.valid\"\r\n              (click)=\"confirmAdd()\">Save</button>\r\n            <button mat-raised-button color=\"warn\" (click)=\"dialogRef.close()\" tabindex=\"-1\">Cancel</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-xl-2 col-lg-2 col-md-12 col-sm-12\">\r\n          <div class=\"example-button-row\" *ngIf=\"showDeleteBtn\">\r\n            <button mat-mini-fab aria-label color=\"warn\" (click)=\"deleteEvent()\">\r\n              <mat-icon class=\"font-20\">delete</mat-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n","/*!\nFullCalendar Day Grid Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, memoize, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DayGridDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n    function DayGridDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.options.monthMode &&\n            this.options.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return DayGridDateProfileGenerator;\n}(DateProfileGenerator));\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\nvar Popover = /** @class */ (function () {\n    function Popover(options) {\n        var _this = this;\n        this.isHidden = true;\n        this.margin = 10; // the space required between the popover and the edges of the scroll container\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        this.documentMousedown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            if (_this.el && !_this.el.contains(ev.target)) {\n                _this.hide();\n            }\n        };\n        this.options = options;\n    }\n    // Shows the popover on the specified position. Renders it if not already\n    Popover.prototype.show = function () {\n        if (this.isHidden) {\n            if (!this.el) {\n                this.render();\n            }\n            this.el.style.display = '';\n            this.position();\n            this.isHidden = false;\n            this.trigger('show');\n        }\n    };\n    // Hides the popover, through CSS, but does not remove it from the DOM\n    Popover.prototype.hide = function () {\n        if (!this.isHidden) {\n            this.el.style.display = 'none';\n            this.isHidden = true;\n            this.trigger('hide');\n        }\n    };\n    // Creates `this.el` and renders content inside of it\n    Popover.prototype.render = function () {\n        var _this = this;\n        var options = this.options;\n        var el = this.el = createElement('div', {\n            className: 'fc-popover ' + (options.className || ''),\n            style: {\n                top: '0',\n                left: '0'\n            }\n        });\n        if (typeof options.content === 'function') {\n            options.content(el);\n        }\n        options.parentEl.appendChild(el);\n        // when a click happens on anything inside with a 'fc-close' className, hide the popover\n        listenBySelector(el, 'click', '.fc-close', function (ev) {\n            _this.hide();\n        });\n        if (options.autoHide) {\n            document.addEventListener('mousedown', this.documentMousedown);\n        }\n    };\n    // Hides and unregisters any handlers\n    Popover.prototype.destroy = function () {\n        this.hide();\n        if (this.el) {\n            removeElement(this.el);\n            this.el = null;\n        }\n        document.removeEventListener('mousedown', this.documentMousedown);\n    };\n    // Positions the popover optimally, using the top/left/right options\n    Popover.prototype.position = function () {\n        var options = this.options;\n        var el = this.el;\n        var elDims = el.getBoundingClientRect(); // only used for width,height\n        var origin = computeRect(el.offsetParent);\n        var clippingRect = computeClippingRect(options.parentEl);\n        var top; // the \"position\" (not \"offset\") values for the popover\n        var left; //\n        // compute top and left\n        top = options.top || 0;\n        if (options.left !== undefined) {\n            left = options.left;\n        }\n        else if (options.right !== undefined) {\n            left = options.right - elDims.width; // derive the left value from the right value\n        }\n        else {\n            left = 0;\n        }\n        // constrain to the view port. if constrained by two edges, give precedence to top/left\n        top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n        top = Math.max(top, clippingRect.top + this.margin);\n        left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n        left = Math.max(left, clippingRect.left + this.margin);\n        applyStyle(el, {\n            top: top - origin.top,\n            left: left - origin.left\n        });\n    };\n    // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n    Popover.prototype.trigger = function (name) {\n        if (this.options[name]) {\n            this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n    };\n    return Popover;\n}());\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\nvar SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n    function SimpleDayGridEventRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Builds the HTML to be used for the default element for an individual segment\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = allDay && seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = allDay && seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeHtml = '';\n        var timeText;\n        var titleHtml;\n        classes.unshift('fc-day-grid-event', 'fc-h-event');\n        // Only display a timed events time if it is the starting segment\n        if (seg.isStart) {\n            timeText = this.getTimeText(eventRange);\n            if (timeText) {\n                timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n            }\n        }\n        titleHtml =\n            '<span class=\"fc-title\">' +\n                (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                '</span>';\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (context.options.dir === 'rtl' ?\n                titleHtml + ' ' + timeHtml : // put a natural space in between\n                timeHtml + ' ' + titleHtml //\n            ) +\n            '</div>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n    return SimpleDayGridEventRenderer;\n}(FgEventRenderer));\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\nvar DayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(DayGridEventRenderer, _super);\n    function DayGridEventRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    // Renders the given foreground event segments onto the grid\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // append to each row's content skeleton\n        this.dayGrid.rowEls.forEach(function (rowNode, i) {\n            rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n        });\n        // removes the \"more..\" events popover\n        if (!mirrorInfo) {\n            this.dayGrid.removeSegPopover();\n        }\n    };\n    // Unrenders all currently rendered foreground event segments\n    DayGridEventRenderer.prototype.detachSegs = function () {\n        var rowStructs = this.rowStructs || [];\n        var rowStruct;\n        while ((rowStruct = rowStructs.pop())) {\n            removeElement(rowStruct.tbodyEl);\n        }\n        this.rowStructs = null;\n    };\n    // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n        var rowStructs = [];\n        var segRows;\n        var row;\n        segRows = this.groupSegRows(segs); // group into nested arrays\n        // iterate each row of segment groupings\n        for (row = 0; row < segRows.length; row++) {\n            rowStructs.push(this.renderSegRow(row, segRows[row]));\n        }\n        return rowStructs;\n    };\n    // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n        var isRtl = this.context.isRtl;\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt;\n        var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n        var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n        var tbody = document.createElement('tbody');\n        var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n        var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n        var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n        var i;\n        var levelSegs;\n        var col;\n        var tr;\n        var j;\n        var seg;\n        var td;\n        // populates empty cells from the current column (`col`) to `endCol`\n        function emptyCellsUntil(endCol) {\n            while (col < endCol) {\n                // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                td = (loneCellMatrix[i - 1] || [])[col];\n                if (td) {\n                    td.rowSpan = (td.rowSpan || 1) + 1;\n                }\n                else {\n                    td = document.createElement('td');\n                    tr.appendChild(td);\n                }\n                cellMatrix[i][col] = td;\n                loneCellMatrix[i][col] = td;\n                col++;\n            }\n        }\n        for (i = 0; i < levelCnt; i++) { // iterate through all levels\n            levelSegs = segLevels[i];\n            col = 0;\n            tr = document.createElement('tr');\n            segMatrix.push([]);\n            cellMatrix.push([]);\n            loneCellMatrix.push([]);\n            // levelCnt might be 1 even though there are no actual levels. protect against this.\n            // this single empty row is useful for styling.\n            if (levelSegs) {\n                for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                    seg = levelSegs[j];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol);\n                    // create a container that occupies or more columns. append the event element.\n                    td = createElement('td', { className: 'fc-event-container' }, seg.el);\n                    if (leftCol !== rightCol) {\n                        td.colSpan = rightCol - leftCol + 1;\n                    }\n                    else { // a single-column segment\n                        loneCellMatrix[i][col] = td;\n                    }\n                    while (col <= rightCol) {\n                        cellMatrix[i][col] = td;\n                        segMatrix[i][col] = seg;\n                        col++;\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            emptyCellsUntil(colCnt); // finish off the row\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (isRtl) {\n                    appendToElement(tr, introHtml);\n                }\n                else {\n                    prependToElement(tr, introHtml);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        return {\n            row: row,\n            tbodyEl: tbody,\n            cellMatrix: cellMatrix,\n            segMatrix: segMatrix,\n            segLevels: segLevels,\n            segs: rowSegs\n        };\n    };\n    // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n        var isRtl = this.context.isRtl;\n        var colCnt = this.dayGrid.colCnt;\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        // Give preference to elements with certain criteria, so they have\n        // a chance to be closer to the top.\n        segs = this.sortEventSegs(segs);\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n            for (j = 0; j < levels.length; j++) {\n                if (!isDaySegCollision(seg, levels[j])) {\n                    break;\n                }\n            }\n            // `j` now holds the desired subrow index\n            seg.level = j;\n            seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n            seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n            ;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        // order segments left-to-right. very important if calendar is RTL\n        for (j = 0; j < levels.length; j++) {\n            levels[j].sort(compareDaySegCols);\n        }\n        return levels;\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n        var segRows = [];\n        var i;\n        for (i = 0; i < this.dayGrid.rowCnt; i++) {\n            segRows.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segRows[segs[i].row].push(segs[i]);\n        }\n        return segRows;\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n    return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer));\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n    for (i = 0; i < otherSegs.length; i++) {\n        otherSeg = otherSegs[i];\n        if (otherSeg.firstCol <= seg.lastCol &&\n            otherSeg.lastCol >= seg.firstCol) {\n            return true;\n        }\n    }\n    return false;\n}\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n    function DayGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var sourceSeg = mirrorInfo.sourceSeg;\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // inject each new event skeleton into each associated row\n        this.dayGrid.rowEls.forEach(function (rowNode, row) {\n            var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n            var skeletonTopEl;\n            var skeletonTop;\n            // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n            if (sourceSeg && sourceSeg.row === row) {\n                skeletonTopEl = sourceSeg.el;\n            }\n            else {\n                skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                if (!skeletonTopEl) { // when no events\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                }\n            }\n            skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                rowNode.getBoundingClientRect().top; // the offsetParent origin\n            skeletonEl.style.top = skeletonTop + 'px';\n            skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n            rowNode.appendChild(skeletonEl);\n        });\n    };\n    return DayGridMirrorRenderer;\n}(DayGridEventRenderer));\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\nvar DayGridFillRenderer = /** @class */ (function (_super) {\n    __extends(DayGridFillRenderer, _super);\n    function DayGridFillRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.fillSegTag = 'td'; // override the default tag name\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    DayGridFillRenderer.prototype.renderSegs = function (type, context, segs) {\n        // don't render timed background events\n        if (type === 'bgEvent') {\n            segs = segs.filter(function (seg) {\n                return seg.eventRange.def.allDay;\n            });\n        }\n        _super.prototype.renderSegs.call(this, type, context, segs);\n    };\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var els = [];\n        var i;\n        var seg;\n        var skeletonEl;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            skeletonEl = this.renderFillRow(type, seg);\n            this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n            els.push(skeletonEl);\n        }\n        return els;\n    };\n    // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n        var dayGrid = this.dayGrid;\n        var isRtl = this.context.isRtl;\n        var colCnt = dayGrid.colCnt;\n        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n        var startCol = leftCol;\n        var endCol = rightCol + 1;\n        var className;\n        var skeletonEl;\n        var trEl;\n        if (type === 'businessHours') {\n            className = 'bgevent';\n        }\n        else {\n            className = type.toLowerCase();\n        }\n        skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n            '<table><tr></tr></table>' +\n            '</div>');\n        trEl = skeletonEl.getElementsByTagName('tr')[0];\n        if (startCol > 0) {\n            appendToElement(trEl, \n            // will create (startCol + 1) td's\n            new Array(startCol + 1).join(EMPTY_CELL_HTML));\n        }\n        seg.el.colSpan = endCol - startCol;\n        trEl.appendChild(seg.el);\n        if (endCol < colCnt) {\n            appendToElement(trEl, \n            // will create (colCnt - endCol) td's\n            new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n        }\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n        if (introHtml) {\n            if (isRtl) {\n                appendToElement(trEl, introHtml);\n            }\n            else {\n                prependToElement(trEl, introHtml);\n            }\n        }\n        return skeletonEl;\n    };\n    return DayGridFillRenderer;\n}(FillRenderer));\n\nvar DayTile = /** @class */ (function (_super) {\n    __extends(DayTile, _super);\n    function DayTile(el) {\n        var _this = _super.call(this, el) || this;\n        var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n        var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        return _this;\n    }\n    DayTile.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.el,\n            useEventCenter: false\n        });\n    };\n    DayTile.prototype.render = function (props, context) {\n        this.renderFrame(props.date);\n        this.renderFgEvents(context, props.fgSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDragInstances);\n        this.renderEventResize(props.eventResizeInstances);\n    };\n    DayTile.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderFrame.unrender(); // should unrender everything else\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    DayTile.prototype._renderFrame = function (date) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n        var title = dateEnv.format(date, createFormatter(options.dayPopoverFormat) // TODO: cache\n        );\n        this.el.innerHTML =\n            '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                '<span class=\"fc-title\">' +\n                htmlEscape(title) +\n                '</span>' +\n                '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                '</div>' +\n                '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                '<div class=\"fc-event-container\"></div>' +\n                '</div>';\n        this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var date = this.props.date; // HACK\n        if (positionLeft < elWidth && positionTop < elHeight) {\n            return {\n                component: this,\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) }\n                },\n                dayEl: this.el,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight\n                },\n                layer: 1\n            };\n        }\n    };\n    return DayTile;\n}(DateComponent));\nvar DayTileEventRenderer = /** @class */ (function (_super) {\n    __extends(DayTileEventRenderer, _super);\n    function DayTileEventRenderer(dayTile) {\n        var _this = _super.call(this) || this;\n        _this.dayTile = dayTile;\n        return _this;\n    }\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            this.dayTile.segContainerEl.appendChild(seg.el);\n        }\n    };\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer));\n\nvar DayBgRow = /** @class */ (function () {\n    function DayBgRow(context) {\n        this.context = context;\n    }\n    DayBgRow.prototype.renderHtml = function (props) {\n        var parts = [];\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n        }\n        if (!props.cells.length) {\n            parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n        }\n        if (this.context.options.dir === 'rtl') {\n            parts.reverse();\n        }\n        return '<tr>' + parts.join('') + '</tr>';\n    };\n    return DayBgRow;\n}());\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n    var classes = getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' +\n        (isDateValid ?\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' });\nvar DayGrid = /** @class */ (function (_super) {\n    __extends(DayGrid, _super);\n    function DayGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n        _this.isCellSizesDirty = false;\n        _this.renderProps = renderProps;\n        var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n        _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n        var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n        return _this;\n    }\n    DayGrid.prototype.render = function (props, context) {\n        var cells = props.cells;\n        this.rowCnt = cells.length;\n        this.colCnt = cells[0].length;\n        this.renderCells(cells, props.isRigid);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(context, props.dateSelectionSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n        if (this.segPopoverTile) {\n            this.updateSegPopoverTile();\n        }\n    };\n    DayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderCells.unrender(); // will unrender everything else\n    };\n    DayGrid.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n        var ownProps = this.props;\n        this.segPopoverTile.receiveProps({\n            date: date || this.segPopoverTile.props.date,\n            fgSegs: segs || this.segPopoverTile.props.fgSegs,\n            eventSelection: ownProps.eventSelection,\n            eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n            eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n        }, this.context);\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, dateEnv = _a.dateEnv;\n        var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n        var html = '';\n        var row;\n        var col;\n        for (row = 0; row < rowCnt; row++) {\n            html += this.renderDayRowHtml(row, isRigid);\n        }\n        this.el.innerHTML = html;\n        this.rowEls = findElements(this.el, '.fc-row');\n        this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        if (isRtl) {\n            this.cellEls.reverse();\n        }\n        this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n        );\n        this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n        true, false // horizontal\n        );\n        // trigger dayRender with each cell's element\n        for (row = 0; row < rowCnt; row++) {\n            for (col = 0; col < colCnt; col++) {\n                calendar.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[row][col].date),\n                        el: this.getCellEl(row, col),\n                        view: view\n                    }\n                ]);\n            }\n        }\n        this.isCellSizesDirty = true;\n    };\n    DayGrid.prototype._unrenderCells = function () {\n        this.removeSegPopover();\n    };\n    // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n        var theme = this.context.theme;\n        var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n        if (isRigid) {\n            classes.push('fc-rigid');\n        }\n        var bgRow = new DayBgRow(this.context);\n        return '' +\n            '<div class=\"' + classes.join(' ') + '\">' +\n            '<div class=\"fc-bg\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            bgRow.renderHtml({\n                cells: this.props.cells[row],\n                dateProfile: this.props.dateProfile,\n                renderIntroHtml: this.renderProps.renderBgIntroHtml\n            }) +\n            '</table>' +\n            '</div>' +\n            '<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            (this.getIsNumbersVisible() ?\n                '<thead>' +\n                    this.renderNumberTrHtml(row) +\n                    '</thead>' :\n                '') +\n            '</table>' +\n            '</div>' +\n            '</div>';\n    };\n    DayGrid.prototype.getIsNumbersVisible = function () {\n        return this.getIsDayNumbersVisible() ||\n            this.renderProps.cellWeekNumbersVisible ||\n            this.renderProps.colWeekNumbersVisible;\n    };\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n        return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n        var isRtl = this.context.isRtl;\n        var intro = this.renderProps.renderNumberIntroHtml(row, this);\n        return '' +\n            '<tr>' +\n            (isRtl ? '' : intro) +\n            this.renderNumberCellsHtml(row) +\n            (isRtl ? intro : '') +\n            '</tr>';\n    };\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n        var htmls = [];\n        var col;\n        var date;\n        for (col = 0; col < this.colCnt; col++) {\n            date = this.props.cells[row][col].date;\n            htmls.push(this.renderNumberCellHtml(date));\n        }\n        if (this.context.isRtl) {\n            htmls.reverse();\n        }\n        return htmls.join('');\n    };\n    // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options;\n        var html = '';\n        var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n        var classes;\n        var weekCalcFirstDow;\n        if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n            // no numbers in day cell (week number must be along the side)\n            return '<td></td>'; //  will create an empty space above events :(\n        }\n        classes = getDayClasses(date, this.props.dateProfile, this.context);\n        classes.unshift('fc-day-top');\n        if (this.renderProps.cellWeekNumbersVisible) {\n            weekCalcFirstDow = dateEnv.weekDow;\n        }\n        html += '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            '>';\n        if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n            html += buildGotoAnchorHtml(options, dateEnv, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n            );\n        }\n        if (isDayNumberVisible) {\n            html += buildGotoAnchorHtml(options, dateEnv, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n            );\n        }\n        html += '</td>';\n        return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.updateSize = function (isResize) {\n        var calendar = this.context.calendar;\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize ||\n            this.isCellSizesDirty ||\n            calendar.isEventsUpdated // hack\n        ) {\n            this.buildPositionCaches();\n            this.isCellSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    DayGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildRowPositions();\n    };\n    DayGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    DayGrid.prototype.buildRowPositions = function () {\n        this.rowPositions.build();\n        this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row]\n                }\n            };\n        }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n    DayGrid.prototype.getCellEl = function (row, col) {\n        return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n        }\n    };\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    DayGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.removeSegPopover = function () {\n        if (this.segPopover) {\n            this.segPopover.hide(); // in handler, will call segPopover's removeElement\n        }\n    };\n    // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n    DayGrid.prototype.limitRows = function (levelLimit) {\n        var rowStructs = this.eventRenderer.rowStructs || [];\n        var row; // row #\n        var rowLevelLimit;\n        for (row = 0; row < rowStructs.length; row++) {\n            this.unlimitRow(row);\n            if (!levelLimit) {\n                rowLevelLimit = false;\n            }\n            else if (typeof levelLimit === 'number') {\n                rowLevelLimit = levelLimit;\n            }\n            else {\n                rowLevelLimit = this.computeRowLevelLimit(row);\n            }\n            if (rowLevelLimit !== false) {\n                this.limitRow(row, rowLevelLimit);\n            }\n        }\n    };\n    // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n        var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n        var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n        var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n        var i;\n        var trEl;\n        // Reveal one level <tr> at a time and stop when we find one out of bounds\n        for (i = 0; i < trEls.length; i++) {\n            trEl = trEls[i];\n            trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n            if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                return i;\n            }\n        }\n        return false; // should not limit at all\n    };\n    // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n        var _this = this;\n        var colCnt = this.colCnt;\n        var isRtl = this.context.isRtl;\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n        var col = 0; // col #, left-to-right (not chronologically)\n        var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n        var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n        var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n        var i;\n        var seg;\n        var segsBelow; // array of segment objects below `seg` in the current `col`\n        var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n        var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n        var td;\n        var rowSpan;\n        var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n        var j;\n        var moreTd;\n        var moreWrap;\n        var moreLink;\n        // Iterates through empty level cells and places \"more\" links inside if need be\n        var emptyCellsUntil = function (endCol) {\n            while (col < endCol) {\n                segsBelow = _this.getCellSegs(row, col, levelLimit);\n                if (segsBelow.length) {\n                    td = cellMatrix[levelLimit - 1][col];\n                    moreLink = _this.renderMoreLink(row, col, segsBelow);\n                    moreWrap = createElement('div', null, moreLink);\n                    td.appendChild(moreWrap);\n                    moreNodes.push(moreWrap);\n                }\n                col++;\n            }\n        };\n        if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n            levelSegs = rowStruct.segLevels[levelLimit - 1];\n            cellMatrix = rowStruct.cellMatrix;\n            limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n            limitedNodes.forEach(function (node) {\n                node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n            });\n            // iterate though segments in the last allowable level\n            for (i = 0; i < levelSegs.length; i++) {\n                seg = levelSegs[i];\n                var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                emptyCellsUntil(leftCol); // process empty cells before the segment\n                // determine *all* segments below `seg` that occupy the same columns\n                colSegsBelow = [];\n                totalSegsBelow = 0;\n                while (col <= rightCol) {\n                    segsBelow = this.getCellSegs(row, col, levelLimit);\n                    colSegsBelow.push(segsBelow);\n                    totalSegsBelow += segsBelow.length;\n                    col++;\n                }\n                if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                    td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                    rowSpan = td.rowSpan || 1;\n                    segMoreNodes = [];\n                    // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                    for (j = 0; j < colSegsBelow.length; j++) {\n                        moreTd = createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                        segsBelow = colSegsBelow[j];\n                        moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                        );\n                        moreWrap = createElement('div', null, moreLink);\n                        moreTd.appendChild(moreWrap);\n                        segMoreNodes.push(moreTd);\n                        moreNodes.push(moreTd);\n                    }\n                    td.classList.add('fc-limited');\n                    insertAfterElement(td, segMoreNodes);\n                    limitedNodes.push(td);\n                }\n            }\n            emptyCellsUntil(this.colCnt); // finish off the level\n            rowStruct.moreEls = moreNodes; // for easy undoing later\n            rowStruct.limitedEls = limitedNodes; // for easy undoing later\n        }\n    };\n    // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n    DayGrid.prototype.unlimitRow = function (row) {\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        if (rowStruct.moreEls) {\n            rowStruct.moreEls.forEach(removeElement);\n            rowStruct.moreEls = null;\n        }\n        if (rowStruct.limitedEls) {\n            rowStruct.limitedEls.forEach(function (limitedEl) {\n                limitedEl.classList.remove('fc-limited');\n            });\n            rowStruct.limitedEls = null;\n        }\n    };\n    // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, dateEnv = _a.dateEnv, options = _a.options, isRtl = _a.isRtl;\n        var a = createElement('a', { className: 'fc-more' });\n        a.innerText = this.getMoreLinkText(hiddenSegs.length);\n        a.addEventListener('click', function (ev) {\n            var clickOption = options.eventLimitClick;\n            var _col = isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var date = _this.props.cells[row][_col].date;\n            var moreEl = ev.currentTarget;\n            var dayEl = _this.getCellEl(row, col);\n            var allSegs = _this.getCellSegs(row, col);\n            // rescope the segments to be within the cell's date\n            var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n            var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n            if (typeof clickOption === 'function') {\n                // the returned value can be an atomic option\n                clickOption = calendar.publiclyTrigger('eventLimitClick', [\n                    {\n                        date: dateEnv.toDate(date),\n                        allDay: true,\n                        dayEl: dayEl,\n                        moreEl: moreEl,\n                        segs: reslicedAllSegs,\n                        hiddenSegs: reslicedHiddenSegs,\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n            }\n            if (clickOption === 'popover') {\n                _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                calendar.zoomTo(date, clickOption);\n            }\n        });\n        return a;\n    };\n    // Reveals the popover that displays all events within a cell\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, isRtl = _a.isRtl;\n        var _col = isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n        var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n        var topEl; // the element we want to match the top coordinate of\n        var options;\n        if (this.rowCnt === 1) {\n            topEl = view.el; // will cause the popover to cover any sort of header\n        }\n        else {\n            topEl = this.rowEls[row]; // will align with top of row\n        }\n        options = {\n            className: 'fc-more-popover ' + theme.getClass('popover'),\n            parentEl: view.el,\n            top: computeRect(topEl).top,\n            autoHide: true,\n            content: function (el) {\n                _this.segPopoverTile = new DayTile(el);\n                _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n            },\n            hide: function () {\n                _this.segPopoverTile.destroy();\n                _this.segPopoverTile = null;\n                _this.segPopover.destroy();\n                _this.segPopover = null;\n            }\n        };\n        // Determine horizontal coordinate.\n        // We use the moreWrap instead of the <td> to avoid border confusion.\n        if (isRtl) {\n            options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n        }\n        else {\n            options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n        }\n        this.segPopover = new Popover(options);\n        this.segPopover.show();\n        calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    };\n    // Given the events within an array of segment objects, reslice them to be in a single day\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n        var dayStart = dayDate;\n        var dayEnd = addDays(dayStart, 1);\n        var dayRange = { start: dayStart, end: dayEnd };\n        var newSegs = [];\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            var eventRange = seg.eventRange;\n            var origRange = eventRange.range;\n            var slicedRange = intersectRanges(origRange, dayRange);\n            if (slicedRange) {\n                newSegs.push(__assign({}, seg, { eventRange: {\n                        def: eventRange.def,\n                        ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                        instance: eventRange.instance,\n                        range: slicedRange\n                    }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n            }\n        }\n        return newSegs;\n    };\n    // Generates the text that should be inside a \"more\" link, given the number of events it represents\n    DayGrid.prototype.getMoreLinkText = function (num) {\n        var opt = this.context.options.eventLimitText;\n        if (typeof opt === 'function') {\n            return opt(num);\n        }\n        else {\n            return '+' + num + ' ' + opt;\n        }\n    };\n    // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n        var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n        var level = startLevel || 0;\n        var segs = [];\n        var seg;\n        while (level < segMatrix.length) {\n            seg = segMatrix[level][col];\n            if (seg) {\n                segs.push(seg);\n            }\n            level++;\n        }\n        return segs;\n    };\n    return DayGrid;\n}(DateComponent));\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({ week: 'numeric' });\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar AbstractDayGridView = /** @class */ (function (_super) {\n    __extends(AbstractDayGridView, _super);\n    function AbstractDayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    htmlEscape(options.weekLabel) +\n                    '</span>' +\n                    '</th>';\n            }\n            return '';\n        };\n        /* Day Grid Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n        _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n            var _a = _this.context, options = _a.options, dateEnv = _a.dateEnv;\n            var weekStart = dayGrid.props.cells[row][0].date;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                    ) +\n                    '</td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before the day bg cells for each day-row\n        _this.renderDayGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before every other type of row generated by DayGrid.\n        // Affects mirror-skeleton and highlight-skeleton rows.\n        _this.renderDayGridIntroHtml = function () {\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        return _this;\n    }\n    AbstractDayGridView.prototype._processOptions = function (options) {\n        if (options.weekNumbers) {\n            if (options.weekNumbersWithinDays) {\n                this.cellWeekNumbersVisible = true;\n                this.colWeekNumbersVisible = false;\n            }\n            else {\n                this.cellWeekNumbersVisible = false;\n                this.colWeekNumbersVisible = true;\n            }\n        }\n        else {\n            this.colWeekNumbersVisible = false;\n            this.cellWeekNumbersVisible = false;\n        }\n    };\n    AbstractDayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.processOptions(context.options);\n        this.renderSkeleton(context);\n    };\n    AbstractDayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractDayGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-dayGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var dayGridContainerEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n        dayGridContainerEl.classList.add('fc-day-grid-container');\n        var dayGridEl = createElement('div', { className: 'fc-day-grid' });\n        dayGridContainerEl.appendChild(dayGridEl);\n        this.dayGrid = new DayGrid(dayGridEl, {\n            renderNumberIntroHtml: this.renderDayGridNumberIntroHtml,\n            renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n            renderIntroHtml: this.renderDayGridIntroHtml,\n            colWeekNumbersVisible: this.colWeekNumbersVisible,\n            cellWeekNumbersVisible: this.cellWeekNumbersVisible\n        });\n    };\n    AbstractDayGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-dayGrid-view');\n        this.dayGrid.destroy();\n        this.scroller.destroy();\n    };\n    // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n    AbstractDayGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    // Generates an HTML attribute string for setting the width of the week number column, if it is known\n    AbstractDayGridView.prototype.weekNumberStyleAttr = function () {\n        if (this.weekNumberWidth != null) {\n            return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n        }\n        return '';\n    };\n    // Determines whether each row should have a constant height\n    AbstractDayGridView.prototype.hasRigidRows = function () {\n        var eventLimit = this.context.options.eventLimit;\n        return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.dayGrid.updateSize(isResize);\n    };\n    // Refreshes the horizontal dimensions of the view\n    AbstractDayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var dayGrid = this.dayGrid;\n        var eventLimit = this.context.options.eventLimit;\n        var headRowEl = this.header ? this.header.el : null; // HACK\n        var scrollerHeight;\n        var scrollbarWidths;\n        // hack to give the view some height prior to dayGrid's columns being rendered\n        // TODO: separate setting height from scroller VS dayGrid.\n        if (!dayGrid.rowEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        if (this.colWeekNumbersVisible) {\n            // Make sure all week number cells running down the side have the same width.\n            this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n        }\n        // reset all heights to be natural\n        this.scroller.clear();\n        if (headRowEl) {\n            uncompensateScroll(headRowEl);\n        }\n        dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n        // is the event limit a constant level number?\n        if (eventLimit && typeof eventLimit === 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n        }\n        // distribute the height to the rows\n        // (viewHeight is a \"recommended\" value if isAuto)\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.setGridHeight(scrollerHeight, isAuto);\n        // is the event limit dynamically calculated?\n        if (eventLimit && typeof eventLimit !== 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                if (headRowEl) {\n                    compensateScroll(headRowEl, scrollbarWidths);\n                }\n                // doing the scrollbar compensation might have created text overflow which created more height. redo\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractDayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    // Sets the height of just the DayGrid component in this view\n    AbstractDayGridView.prototype.setGridHeight = function (height, isAuto) {\n        if (this.context.options.monthMode) {\n            // if auto, make the height of each row the height that it would be if there were 6 weeks\n            if (isAuto) {\n                height *= this.dayGrid.rowCnt / 6;\n            }\n            distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n        }\n        else {\n            if (isAuto) {\n                undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n            }\n            else {\n                distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n            }\n        }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.computeDateScroll = function (duration) {\n        return { top: 0 };\n    };\n    AbstractDayGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractDayGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    return AbstractDayGridView;\n}(View));\nAbstractDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid = /** @class */ (function (_super) {\n    __extends(SimpleDayGrid, _super);\n    function SimpleDayGrid(dayGrid) {\n        var _this = _super.call(this, dayGrid.el) || this;\n        _this.slicer = new DayGridSlicer();\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    SimpleDayGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, { el: this.dayGrid.el });\n    };\n    SimpleDayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleDayGrid.prototype.render = function (props, context) {\n        var dayGrid = this.dayGrid;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        dayGrid.receiveContext(context); // hack because context is used in sliceProps\n        dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, context.calendar, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }), context);\n    };\n    SimpleDayGrid.prototype.buildPositionCaches = function () {\n        this.dayGrid.buildPositionCaches();\n    };\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.dayGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleDayGrid;\n}(DateComponent));\nvar DayGridSlicer = /** @class */ (function (_super) {\n    __extends(DayGridSlicer, _super);\n    function DayGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n        return dayTable.sliceRange(dateRange);\n    };\n    return DayGridSlicer;\n}(Slicer));\n\nvar DayGridView = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    DayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // will call _renderSkeleton/_unrenderSkeleton\n        var dateProfile = this.props.dateProfile;\n        var dayTable = this.dayTable =\n            this.buildDayTable(dateProfile, props.dateProfileGenerator);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: dayTable.rowCnt === 1,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleDayGrid.receiveProps({\n            dateProfile: dateProfile,\n            dayTable: dayTable,\n            businessHours: props.businessHours,\n            dateSelection: props.dateSelection,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isRigid: this.hasRigidRows(),\n            nextDayThreshold: this.context.nextDayThreshold\n        }, context);\n    };\n    DayGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n    };\n    DayGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleDayGrid.destroy();\n    };\n    return DayGridView;\n}(AbstractDayGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n        dayGrid: DayGridView,\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 }\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 }\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true\n        }\n    }\n});\n\nexport default main;\nexport { AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };\n","import { formatDate } from '@angular/common';\r\nexport class Calendar {\r\n    id: number;\r\n    title: string;\r\n    category: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    details: string;\r\n\r\n    constructor(calendar) {\r\n        {\r\n            this.id = calendar.id || this.getRandomID();\r\n            this.title = calendar.title || '';\r\n            this.category = calendar.category || '';\r\n            this.startDate = formatDate(new Date(), 'yyyy-MM-dd', 'en') || '';\r\n            this.endDate = formatDate(new Date(), 'yyyy-MM-dd', 'en') || '';\r\n            this.details = calendar.details || '';\r\n        }\r\n    }\r\n    public getRandomID(): string {\r\n        const S4 = () => {\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        };\r\n        return S4() + S4();\r\n    }\r\n}\r\n","/*!\nFullCalendar Time Grid Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { createFormatter, removeElement, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, isMultiDayRange, htmlEscape, compareByFieldSpecs, applyStyle, FgEventRenderer, buildSegCompareObj, FillRenderer, memoize, memoizeRendering, createDuration, wholeDivideDurations, findElements, PositionCache, startOfDay, asRoughMs, formatIsoTimeString, addDurations, htmlToElement, createElement, multiplyDuration, DateComponent, hasBgRendering, Splitter, diffDays, buildGotoAnchorHtml, getAllDayHtml, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, View, intersectRanges, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\nimport { DayBgRow, DayGrid, SimpleDayGrid } from '@fullcalendar/daygrid';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/*\nOnly handles foreground segs.\nDoes not own rendering. Use for low-level util methods by TimeGrid.\n*/\nvar TimeGridEventRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridEventRenderer, _super);\n    function TimeGridEventRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        _super.prototype.renderSegs.call(this, context, segs, mirrorInfo);\n        // TODO: dont do every time. memoize\n        this.fullTimeFormat = createFormatter({\n            hour: 'numeric',\n            minute: '2-digit',\n            separator: this.context.options.defaultRangeSeparator\n        });\n    };\n    // Given an array of foreground segments, render a DOM element for each, computes position,\n    // and attaches to the column inner-container elements.\n    TimeGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var segsByCol = this.timeGrid.groupSegsByCol(segs);\n        // order the segs within each column\n        // TODO: have groupSegsByCol do this?\n        for (var col = 0; col < segsByCol.length; col++) {\n            segsByCol[col] = this.sortEventSegs(segsByCol[col]);\n        }\n        this.segsByCol = segsByCol;\n        this.timeGrid.attachSegsByCol(segsByCol, this.timeGrid.fgContainerEls);\n    };\n    TimeGridEventRenderer.prototype.detachSegs = function (segs) {\n        segs.forEach(function (seg) {\n            removeElement(seg.el);\n        });\n        this.segsByCol = null;\n    };\n    TimeGridEventRenderer.prototype.computeSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.computeSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.computeSegHorizontals(segsByCol[col]); // compute horizontal coordinates, z-index's, and reorder the array\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.assignSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.assignSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.assignSegCss(segsByCol[col]);\n            }\n        }\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    TimeGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            meridiem: false\n        };\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    TimeGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Renders the HTML for a single event segment's default rendering\n    TimeGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(this.context, eventDef, eventUi);\n        var isResizableFromStart = seg.isStart && computeEventStartResizable(this.context, eventDef, eventUi);\n        var isResizableFromEnd = seg.isEnd && computeEventEndResizable(this.context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeText;\n        var fullTimeText; // more verbose time text. for the print stylesheet\n        var startTimeText; // just the start time text\n        classes.unshift('fc-time-grid-event');\n        // if the event appears to span more than one day...\n        if (isMultiDayRange(eventRange.range)) {\n            // Don't display time text on segments that run entirely through a day.\n            // That would appear as midnight-midnight and would look dumb.\n            // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n            if (seg.isStart || seg.isEnd) {\n                var unzonedStart = seg.start;\n                var unzonedEnd = seg.end;\n                timeText = this._getTimeText(unzonedStart, unzonedEnd, allDay); // TODO: give the timezones\n                fullTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, this.fullTimeFormat);\n                startTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, null, false); // displayEnd=false\n            }\n        }\n        else {\n            // Display the normal time text for the *event's* times\n            timeText = this.getTimeText(eventRange);\n            fullTimeText = this.getTimeText(eventRange, this.fullTimeFormat);\n            startTimeText = this.getTimeText(eventRange, null, false); // displayEnd=false\n        }\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (timeText ?\n                '<div class=\"fc-time\"' +\n                    ' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n                    ' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n                    '>' +\n                    '<span>' + htmlEscape(timeText) + '</span>' +\n                    '</div>' :\n                '') +\n            (eventDef.title ?\n                '<div class=\"fc-title\">' +\n                    htmlEscape(eventDef.title) +\n                    '</div>' :\n                '') +\n            '</div>' +\n            /* TODO: write CSS for this\n            (isResizableFromStart ?\n              '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n              ''\n              ) +\n            */\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n    // Assumed the segs are already ordered.\n    // NOTE: Also reorders the given array by date!\n    TimeGridEventRenderer.prototype.computeSegHorizontals = function (segs) {\n        var levels;\n        var level0;\n        var i;\n        levels = buildSlotSegLevels(segs);\n        computeForwardSlotSegs(levels);\n        if ((level0 = levels[0])) {\n            for (i = 0; i < level0.length; i++) {\n                computeSlotSegPressures(level0[i]);\n            }\n            for (i = 0; i < level0.length; i++) {\n                this.computeSegForwardBack(level0[i], 0, 0);\n            }\n        }\n    };\n    // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n    // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n    // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n    //\n    // The segment might be part of a \"series\", which means consecutive segments with the same pressure\n    // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n    // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n    // coordinate of the first segment in the series.\n    TimeGridEventRenderer.prototype.computeSegForwardBack = function (seg, seriesBackwardPressure, seriesBackwardCoord) {\n        var forwardSegs = seg.forwardSegs;\n        var i;\n        if (seg.forwardCoord === undefined) { // not already computed\n            if (!forwardSegs.length) {\n                // if there are no forward segments, this segment should butt up against the edge\n                seg.forwardCoord = 1;\n            }\n            else {\n                // sort highest pressure first\n                this.sortForwardSegs(forwardSegs);\n                // this segment's forwardCoord will be calculated from the backwardCoord of the\n                // highest-pressure forward segment.\n                this.computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n                seg.forwardCoord = forwardSegs[0].backwardCoord;\n            }\n            // calculate the backwardCoord from the forwardCoord. consider the series\n            seg.backwardCoord = seg.forwardCoord -\n                (seg.forwardCoord - seriesBackwardCoord) / // available width for series\n                    (seriesBackwardPressure + 1); // # of segments in the series\n            // use this segment's coordinates to computed the coordinates of the less-pressurized\n            // forward segments\n            for (i = 0; i < forwardSegs.length; i++) {\n                this.computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.sortForwardSegs = function (forwardSegs) {\n        var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n        var specs = [\n            // put higher-pressure first\n            { field: 'forwardPressure', order: -1 },\n            // put segments that are closer to initial edge first (and favor ones with no coords yet)\n            { field: 'backwardCoord', order: 1 }\n        ].concat(this.context.eventOrderSpecs);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    // Given foreground event segments that have already had their position coordinates computed,\n    // assigns position-related CSS values to their elements.\n    TimeGridEventRenderer.prototype.assignSegCss = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            applyStyle(seg.el, this.generateSegCss(seg));\n            if (seg.level > 0) {\n                seg.el.classList.add('fc-time-grid-event-inset');\n            }\n            // if the event is short that the title will be cut off,\n            // attach a className that condenses the title into the time area.\n            if (seg.eventRange.def.title && seg.bottom - seg.top < 30) {\n                seg.el.classList.add('fc-short'); // TODO: \"condensed\" is a better name\n            }\n        }\n    };\n    // Generates an object with CSS properties/values that should be applied to an event segment element.\n    // Contains important positioning-related properties that should be applied to any event element, customized or not.\n    TimeGridEventRenderer.prototype.generateSegCss = function (seg) {\n        var shouldOverlap = this.context.options.slotEventOverlap;\n        var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n        var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n        var props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n        var isRtl = this.context.isRtl;\n        var left; // amount of space from left edge, a fraction of the total width\n        var right; // amount of space from right edge, a fraction of the total width\n        if (shouldOverlap) {\n            // double the width, but don't go beyond the maximum forward coordinate (1.0)\n            forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n        }\n        if (isRtl) {\n            left = 1 - forwardCoord;\n            right = backwardCoord;\n        }\n        else {\n            left = backwardCoord;\n            right = 1 - forwardCoord;\n        }\n        props.zIndex = seg.level + 1; // convert from 0-base to 1-based\n        props.left = left * 100 + '%';\n        props.right = right * 100 + '%';\n        if (shouldOverlap && seg.forwardPressure) {\n            // add padding to the edge so that forward stacked events don't cover the resizer's icon\n            props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n        }\n        return props;\n    };\n    return TimeGridEventRenderer;\n}(FgEventRenderer));\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n    var levels = [];\n    var i;\n    var seg;\n    var j;\n    for (i = 0; i < segs.length; i++) {\n        seg = segs[i];\n        // go through all the levels and stop on the first level where there are no collisions\n        for (j = 0; j < levels.length; j++) {\n            if (!computeSlotSegCollisions(seg, levels[j]).length) {\n                break;\n            }\n        }\n        seg.level = j;\n        (levels[j] || (levels[j] = [])).push(seg);\n    }\n    return levels;\n}\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n    var i;\n    var level;\n    var j;\n    var seg;\n    var k;\n    for (i = 0; i < levels.length; i++) {\n        level = levels[i];\n        for (j = 0; j < level.length; j++) {\n            seg = level[j];\n            seg.forwardSegs = [];\n            for (k = i + 1; k < levels.length; k++) {\n                computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n            }\n        }\n    }\n}\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n    var forwardSegs = seg.forwardSegs;\n    var forwardPressure = 0;\n    var i;\n    var forwardSeg;\n    if (seg.forwardPressure === undefined) { // not already computed\n        for (i = 0; i < forwardSegs.length; i++) {\n            forwardSeg = forwardSegs[i];\n            // figure out the child's maximum forward path\n            computeSlotSegPressures(forwardSeg);\n            // either use the existing maximum, or use the child's forward pressure\n            // plus one (for the forwardSeg itself)\n            forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n        }\n        seg.forwardPressure = forwardPressure;\n    }\n}\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n    if (results === void 0) { results = []; }\n    for (var i = 0; i < otherSegs.length; i++) {\n        if (isSlotSegCollision(seg, otherSegs[i])) {\n            results.push(otherSegs[i]);\n        }\n    }\n    return results;\n}\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n    return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\nfunction buildTimeGridSegCompareObj(seg) {\n    var obj = buildSegCompareObj(seg);\n    obj.forwardPressure = seg.forwardPressure;\n    obj.backwardCoord = seg.backwardCoord;\n    return obj;\n}\n\nvar TimeGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridMirrorRenderer, _super);\n    function TimeGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        this.segsByCol = this.timeGrid.groupSegsByCol(segs);\n        this.timeGrid.attachSegsByCol(this.segsByCol, this.timeGrid.mirrorContainerEls);\n        this.sourceSeg = mirrorInfo.sourceSeg;\n    };\n    TimeGridMirrorRenderer.prototype.generateSegCss = function (seg) {\n        var props = _super.prototype.generateSegCss.call(this, seg);\n        var sourceSeg = this.sourceSeg;\n        if (sourceSeg && sourceSeg.col === seg.col) {\n            var sourceSegProps = _super.prototype.generateSegCss.call(this, sourceSeg);\n            props.left = sourceSegProps.left;\n            props.right = sourceSegProps.right;\n            props.marginLeft = sourceSegProps.marginLeft;\n            props.marginRight = sourceSegProps.marginRight;\n        }\n        return props;\n    };\n    return TimeGridMirrorRenderer;\n}(TimeGridEventRenderer));\n\nvar TimeGridFillRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridFillRenderer, _super);\n    function TimeGridFillRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var timeGrid = this.timeGrid;\n        var containerEls;\n        // TODO: more efficient lookup\n        if (type === 'bgEvent') {\n            containerEls = timeGrid.bgContainerEls;\n        }\n        else if (type === 'businessHours') {\n            containerEls = timeGrid.businessContainerEls;\n        }\n        else if (type === 'highlight') {\n            containerEls = timeGrid.highlightContainerEls;\n        }\n        timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n        return segs.map(function (seg) {\n            return seg.el;\n        });\n    };\n    TimeGridFillRenderer.prototype.computeSegSizes = function (segs) {\n        this.timeGrid.computeSegVerticals(segs);\n    };\n    TimeGridFillRenderer.prototype.assignSegSizes = function (segs) {\n        this.timeGrid.assignSegVerticals(segs);\n    };\n    return TimeGridFillRenderer;\n}(FillRenderer));\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { seconds: 30 },\n    { seconds: 15 }\n];\nvar TimeGrid = /** @class */ (function (_super) {\n    __extends(TimeGrid, _super);\n    function TimeGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.isSlatSizesDirty = false;\n        _this.isColSizesDirty = false;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton);\n        _this.renderSlats = memoizeRendering(_this._renderSlats, null, [_this.renderSkeleton]);\n        _this.renderColumns = memoizeRendering(_this._renderColumns, _this._unrenderColumns, [_this.renderSkeleton]);\n        _this.renderProps = renderProps;\n        var renderColumns = _this.renderColumns;\n        var eventRenderer = _this.eventRenderer = new TimeGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new TimeGridFillRenderer(_this);\n        _this.mirrorRenderer = new TimeGridMirrorRenderer(_this);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderColumns]);\n        _this.renderDateSelection = memoizeRendering(_this._renderDateSelection, _this._unrenderDateSelection, [renderColumns]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderColumns]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderColumns]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderColumns]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderColumns]);\n        return _this;\n    }\n    /* Options\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Parses various options into properties of this object\n    // MUST have context already set\n    TimeGrid.prototype._processOptions = function (options) {\n        var slotDuration = options.slotDuration, snapDuration = options.snapDuration;\n        var snapsPerSlot;\n        var input;\n        slotDuration = createDuration(slotDuration);\n        snapDuration = snapDuration ? createDuration(snapDuration) : slotDuration;\n        snapsPerSlot = wholeDivideDurations(slotDuration, snapDuration);\n        if (snapsPerSlot === null) {\n            snapDuration = slotDuration;\n            snapsPerSlot = 1;\n            // TODO: say warning?\n        }\n        this.slotDuration = slotDuration;\n        this.snapDuration = snapDuration;\n        this.snapsPerSlot = snapsPerSlot;\n        // might be an array value (for TimelineView).\n        // if so, getting the most granular entry (the last one probably).\n        input = options.slotLabelFormat;\n        if (Array.isArray(input)) {\n            input = input[input.length - 1];\n        }\n        this.labelFormat = createFormatter(input || {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'short'\n        });\n        input = options.slotLabelInterval;\n        this.labelInterval = input ?\n            createDuration(input) :\n            this.computeLabelInterval(slotDuration);\n    };\n    // Computes an automatic value for slotLabelInterval\n    TimeGrid.prototype.computeLabelInterval = function (slotDuration) {\n        var i;\n        var labelInterval;\n        var slotsPerLabel;\n        // find the smallest stock label interval that results in more than one slots-per-label\n        for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n            labelInterval = createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);\n            slotsPerLabel = wholeDivideDurations(labelInterval, slotDuration);\n            if (slotsPerLabel !== null && slotsPerLabel > 1) {\n                return labelInterval;\n            }\n        }\n        return slotDuration; // fall back\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.render = function (props, context) {\n        this.processOptions(context.options);\n        var cells = props.cells;\n        this.colCnt = cells.length;\n        this.renderSkeleton(context.theme);\n        this.renderSlats(props.dateProfile);\n        this.renderColumns(props.cells, props.dateProfile);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(props.dateSelectionSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n    };\n    TimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        // should unrender everything else too\n        this.renderSlats.unrender();\n        this.renderColumns.unrender();\n        this.renderSkeleton.unrender();\n    };\n    TimeGrid.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize || this.isSlatSizesDirty) {\n            this.buildSlatPositions();\n            this.isSlatSizesDirty = false;\n        }\n        if (isResize || this.isColSizesDirty) {\n            this.buildColPositions();\n            this.isColSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    TimeGrid.prototype._renderSkeleton = function (theme) {\n        var el = this.el;\n        el.innerHTML =\n            '<div class=\"fc-bg\"></div>' +\n                '<div class=\"fc-slats\"></div>' +\n                '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" style=\"display:none\" />';\n        this.rootBgContainerEl = el.querySelector('.fc-bg');\n        this.slatContainerEl = el.querySelector('.fc-slats');\n        this.bottomRuleEl = el.querySelector('.fc-divider');\n    };\n    TimeGrid.prototype._renderSlats = function (dateProfile) {\n        var theme = this.context.theme;\n        this.slatContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                this.renderSlatRowHtml(dateProfile) +\n                '</table>';\n        this.slatEls = findElements(this.slatContainerEl, 'tr');\n        this.slatPositions = new PositionCache(this.el, this.slatEls, false, true // vertical\n        );\n        this.isSlatSizesDirty = true;\n    };\n    // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n    TimeGrid.prototype.renderSlatRowHtml = function (dateProfile) {\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme, isRtl = _a.isRtl;\n        var html = '';\n        var dayStart = startOfDay(dateProfile.renderRange.start);\n        var slotTime = dateProfile.minTime;\n        var slotIterator = createDuration(0);\n        var slotDate; // will be on the view's first day, but we only care about its time\n        var isLabeled;\n        var axisHtml;\n        // Calculate the time for each slot\n        while (asRoughMs(slotTime) < asRoughMs(dateProfile.maxTime)) {\n            slotDate = dateEnv.add(dayStart, slotTime);\n            isLabeled = wholeDivideDurations(slotIterator, this.labelInterval) !== null;\n            axisHtml =\n                '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\">' +\n                    (isLabeled ?\n                        '<span>' + // for matchCellWidths\n                            htmlEscape(dateEnv.format(slotDate, this.labelFormat)) +\n                            '</span>' :\n                        '') +\n                    '</td>';\n            html +=\n                '<tr data-time=\"' + formatIsoTimeString(slotDate) + '\"' +\n                    (isLabeled ? '' : ' class=\"fc-minor\"') +\n                    '>' +\n                    (!isRtl ? axisHtml : '') +\n                    '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                    (isRtl ? axisHtml : '') +\n                    '</tr>';\n            slotTime = addDurations(slotTime, this.slotDuration);\n            slotIterator = addDurations(slotIterator, this.slotDuration);\n        }\n        return html;\n    };\n    TimeGrid.prototype._renderColumns = function (cells, dateProfile) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, theme = _a.theme, dateEnv = _a.dateEnv;\n        var bgRow = new DayBgRow(this.context);\n        this.rootBgContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: cells,\n                    dateProfile: dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>';\n        this.colEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        for (var col = 0; col < this.colCnt; col++) {\n            calendar.publiclyTrigger('dayRender', [\n                {\n                    date: dateEnv.toDate(cells[col].date),\n                    el: this.colEls[col],\n                    view: view\n                }\n            ]);\n        }\n        if (isRtl) {\n            this.colEls.reverse();\n        }\n        this.colPositions = new PositionCache(this.el, this.colEls, true, // horizontal\n        false);\n        this.renderContentSkeleton();\n        this.isColSizesDirty = true;\n    };\n    TimeGrid.prototype._unrenderColumns = function () {\n        this.unrenderContentSkeleton();\n    };\n    /* Content Skeleton\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders the DOM that the view's content will live in\n    TimeGrid.prototype.renderContentSkeleton = function () {\n        var isRtl = this.context.isRtl;\n        var parts = [];\n        var skeletonEl;\n        parts.push(this.renderProps.renderIntroHtml());\n        for (var i = 0; i < this.colCnt; i++) {\n            parts.push('<td>' +\n                '<div class=\"fc-content-col\">' +\n                '<div class=\"fc-event-container fc-mirror-container\"></div>' +\n                '<div class=\"fc-event-container\"></div>' +\n                '<div class=\"fc-highlight-container\"></div>' +\n                '<div class=\"fc-bgevent-container\"></div>' +\n                '<div class=\"fc-business-container\"></div>' +\n                '</div>' +\n                '</td>');\n        }\n        if (isRtl) {\n            parts.reverse();\n        }\n        skeletonEl = this.contentSkeletonEl = htmlToElement('<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            '<tr>' + parts.join('') + '</tr>' +\n            '</table>' +\n            '</div>');\n        this.colContainerEls = findElements(skeletonEl, '.fc-content-col');\n        this.mirrorContainerEls = findElements(skeletonEl, '.fc-mirror-container');\n        this.fgContainerEls = findElements(skeletonEl, '.fc-event-container:not(.fc-mirror-container)');\n        this.bgContainerEls = findElements(skeletonEl, '.fc-bgevent-container');\n        this.highlightContainerEls = findElements(skeletonEl, '.fc-highlight-container');\n        this.businessContainerEls = findElements(skeletonEl, '.fc-business-container');\n        if (isRtl) {\n            this.colContainerEls.reverse();\n            this.mirrorContainerEls.reverse();\n            this.fgContainerEls.reverse();\n            this.bgContainerEls.reverse();\n            this.highlightContainerEls.reverse();\n            this.businessContainerEls.reverse();\n        }\n        this.el.appendChild(skeletonEl);\n    };\n    TimeGrid.prototype.unrenderContentSkeleton = function () {\n        removeElement(this.contentSkeletonEl);\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n    TimeGrid.prototype.groupSegsByCol = function (segs) {\n        var segsByCol = [];\n        var i;\n        for (i = 0; i < this.colCnt; i++) {\n            segsByCol.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segsByCol[segs[i].col].push(segs[i]);\n        }\n        return segsByCol;\n    };\n    // Given segments grouped by column, insert the segments' elements into a parallel array of container\n    // elements, each living within a column.\n    TimeGrid.prototype.attachSegsByCol = function (segsByCol, containerEls) {\n        var col;\n        var segs;\n        var i;\n        for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n            segs = segsByCol[col];\n            for (i = 0; i < segs.length; i++) {\n                containerEls[col].appendChild(segs[i].el);\n            }\n        }\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getNowIndicatorUnit = function () {\n        return 'minute'; // will refresh on the minute\n    };\n    TimeGrid.prototype.renderNowIndicator = function (segs, date) {\n        // HACK: if date columns not ready for some reason (scheduler)\n        if (!this.colContainerEls) {\n            return;\n        }\n        var top = this.computeDateTop(date);\n        var nodes = [];\n        var i;\n        // render lines within the columns\n        for (i = 0; i < segs.length; i++) {\n            var lineEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-line' });\n            lineEl.style.top = top + 'px';\n            this.colContainerEls[segs[i].col].appendChild(lineEl);\n            nodes.push(lineEl);\n        }\n        // render an arrow over the axis\n        if (segs.length > 0) { // is the current time in view?\n            var arrowEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-arrow' });\n            arrowEl.style.top = top + 'px';\n            this.contentSkeletonEl.appendChild(arrowEl);\n            nodes.push(arrowEl);\n        }\n        this.nowIndicatorEls = nodes;\n    };\n    TimeGrid.prototype.unrenderNowIndicator = function () {\n        if (this.nowIndicatorEls) {\n            this.nowIndicatorEls.forEach(removeElement);\n            this.nowIndicatorEls = null;\n        }\n    };\n    /* Coordinates\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getTotalSlatHeight = function () {\n        return this.slatContainerEl.getBoundingClientRect().height;\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n    // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n    TimeGrid.prototype.computeDateTop = function (when, startOfDayDate) {\n        if (!startOfDayDate) {\n            startOfDayDate = startOfDay(when);\n        }\n        return this.computeTimeTop(createDuration(when.valueOf() - startOfDayDate.valueOf()));\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n    TimeGrid.prototype.computeTimeTop = function (duration) {\n        var len = this.slatEls.length;\n        var dateProfile = this.props.dateProfile;\n        var slatCoverage = (duration.milliseconds - asRoughMs(dateProfile.minTime)) / asRoughMs(this.slotDuration); // floating-point value of # of slots covered\n        var slatIndex;\n        var slatRemainder;\n        // compute a floating-point number for how many slats should be progressed through.\n        // from 0 to number of slats (inclusive)\n        // constrained because minTime/maxTime might be customized.\n        slatCoverage = Math.max(0, slatCoverage);\n        slatCoverage = Math.min(len, slatCoverage);\n        // an integer index of the furthest whole slat\n        // from 0 to number slats (*exclusive*, so len-1)\n        slatIndex = Math.floor(slatCoverage);\n        slatIndex = Math.min(slatIndex, len - 1);\n        // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n        // could be 1.0 if slatCoverage is covering *all* the slots\n        slatRemainder = slatCoverage - slatIndex;\n        return this.slatPositions.tops[slatIndex] +\n            this.slatPositions.getHeight(slatIndex) * slatRemainder;\n    };\n    // For each segment in an array, computes and assigns its top and bottom properties\n    TimeGrid.prototype.computeSegVerticals = function (segs) {\n        var options = this.context.options;\n        var eventMinHeight = options.timeGridEventMinHeight;\n        var i;\n        var seg;\n        var dayDate;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            dayDate = this.props.cells[seg.col].date;\n            seg.top = this.computeDateTop(seg.start, dayDate);\n            seg.bottom = Math.max(seg.top + eventMinHeight, this.computeDateTop(seg.end, dayDate));\n        }\n    };\n    // Given segments that already have their top/bottom properties computed, applies those values to\n    // the segments' elements.\n    TimeGrid.prototype.assignSegVerticals = function (segs) {\n        var i;\n        var seg;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            applyStyle(seg.el, this.generateSegVerticalCss(seg));\n        }\n    };\n    // Generates an object with CSS properties for the top/bottom coordinates of a segment element\n    TimeGrid.prototype.generateSegVerticalCss = function (seg) {\n        return {\n            top: seg.top,\n            bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n        };\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildSlatPositions();\n    };\n    TimeGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    TimeGrid.prototype.buildSlatPositions = function () {\n        this.slatPositions.build();\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.positionToHit = function (positionLeft, positionTop) {\n        var dateEnv = this.context.dateEnv;\n        var _a = this, snapsPerSlot = _a.snapsPerSlot, slatPositions = _a.slatPositions, colPositions = _a.colPositions;\n        var colIndex = colPositions.leftToIndex(positionLeft);\n        var slatIndex = slatPositions.topToIndex(positionTop);\n        if (colIndex != null && slatIndex != null) {\n            var slatTop = slatPositions.tops[slatIndex];\n            var slatHeight = slatPositions.getHeight(slatIndex);\n            var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n            var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n            var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n            var dayDate = this.props.cells[colIndex].date;\n            var time = addDurations(this.props.dateProfile.minTime, multiplyDuration(this.snapDuration, snapIndex));\n            var start = dateEnv.add(dayDate, time);\n            var end = dateEnv.add(start, this.snapDuration);\n            return {\n                col: colIndex,\n                dateSpan: {\n                    range: { start: start, end: end },\n                    allDay: false\n                },\n                dayEl: this.colEls[colIndex],\n                relativeRect: {\n                    left: colPositions.lefts[colIndex],\n                    right: colPositions.rights[colIndex],\n                    top: slatTop,\n                    bottom: slatTop + slatHeight\n                }\n            };\n        }\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimeGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* Selection\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n    TimeGrid.prototype._renderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.renderSegs(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.unrender(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    return TimeGrid;\n}(DateComponent));\n\nvar AllDaySplitter = /** @class */ (function (_super) {\n    __extends(AllDaySplitter, _super);\n    function AllDaySplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AllDaySplitter.prototype.getKeyInfo = function () {\n        return {\n            allDay: {},\n            timed: {}\n        };\n    };\n    AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        if (dateSpan.allDay) {\n            return ['allDay'];\n        }\n        else {\n            return ['timed'];\n        }\n    };\n    AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n        if (!eventDef.allDay) {\n            return ['timed'];\n        }\n        else if (hasBgRendering(eventDef)) {\n            return ['timed', 'allDay'];\n        }\n        else {\n            return ['allDay'];\n        }\n    };\n    return AllDaySplitter;\n}(Splitter));\n\nvar TIMEGRID_ALL_DAY_EVENT_LIMIT = 5;\nvar WEEK_HEADER_FORMAT = createFormatter({ week: 'short' });\n/* An abstract class for all timegrid-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\nvar AbstractTimeGridView = /** @class */ (function (_super) {\n    __extends(AbstractTimeGridView, _super);\n    function AbstractTimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitter = new AllDaySplitter();\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n            var range = _this.props.dateProfile.renderRange;\n            var dayCnt = diffDays(range.start, range.end);\n            var weekText;\n            if (options.weekNumbers) {\n                weekText = dateEnv.format(range.start, WEEK_HEADER_FORMAT);\n                return '' +\n                    '<th class=\"fc-axis fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: range.start, type: 'week', forceOff: dayCnt > 1 }, htmlEscape(weekText) // inner HTML\n                    ) +\n                    '</th>';\n            }\n            else {\n                return '<th class=\"fc-axis ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '></th>';\n            }\n        };\n        /* Time Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n        _this.renderTimeGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            return '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderTimeGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        /* Day Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the all-day cells\n        _this.renderDayGridBgIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            return '' +\n                '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '>' +\n                '<span>' + // needed for matchCellWidths\n                getAllDayHtml(options) +\n                '</span>' +\n                '</td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderDayGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        return _this;\n    }\n    AbstractTimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.renderSkeleton(context);\n    };\n    AbstractTimeGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractTimeGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-timeGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var timeGridWrapEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);\n        timeGridWrapEl.classList.add('fc-time-grid-container');\n        var timeGridEl = createElement('div', { className: 'fc-time-grid' });\n        timeGridWrapEl.appendChild(timeGridEl);\n        this.timeGrid = new TimeGrid(timeGridEl, {\n            renderBgIntroHtml: this.renderTimeGridBgIntroHtml,\n            renderIntroHtml: this.renderTimeGridIntroHtml\n        });\n        if (context.options.allDaySlot) { // should we display the \"all-day\" area?\n            this.dayGrid = new DayGrid(// the all-day subcomponent of this view\n            this.el.querySelector('.fc-day-grid'), {\n                renderNumberIntroHtml: this.renderDayGridIntroHtml,\n                renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n                renderIntroHtml: this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: false,\n                cellWeekNumbersVisible: false\n            });\n            // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n            var dividerEl = this.el.querySelector('.fc-divider');\n            this.dayGrid.bottomCoordPadding = dividerEl.getBoundingClientRect().height;\n        }\n    };\n    AbstractTimeGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-timeGrid-view');\n        this.timeGrid.destroy();\n        if (this.dayGrid) {\n            this.dayGrid.destroy();\n        }\n        this.scroller.destroy();\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds the HTML skeleton for the view.\n    // The day-grid and time-grid components will render inside containers defined by this HTML.\n    AbstractTimeGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\">' +\n            (options.allDaySlot ?\n                '<div class=\"fc-day-grid\"></div>' +\n                    '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" />' :\n                '') +\n            '</td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.getNowIndicatorUnit = function () {\n        return this.timeGrid.getNowIndicatorUnit();\n    };\n    // subclasses should implement\n    // renderNowIndicator(date: DateMarker) {\n    // }\n    AbstractTimeGridView.prototype.unrenderNowIndicator = function () {\n        this.timeGrid.unrenderNowIndicator();\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.timeGrid.updateSize(isResize);\n        if (this.dayGrid) {\n            this.dayGrid.updateSize(isResize);\n        }\n    };\n    // Adjusts the vertical dimensions of the view to the specified values\n    AbstractTimeGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var _this = this;\n        var eventLimit;\n        var scrollerHeight;\n        var scrollbarWidths;\n        // make all axis cells line up\n        this.axisWidth = matchCellWidths(findElements(this.el, '.fc-axis'));\n        // hack to give the view some height prior to timeGrid's columns being rendered\n        // TODO: separate setting height from scroller VS timeGrid.\n        if (!this.timeGrid.colEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        // set of fake row elements that must compensate when scroller has scrollbars\n        var noScrollRowEls = findElements(this.el, '.fc-row').filter(function (node) {\n            return !_this.scroller.el.contains(node);\n        });\n        // reset all dimensions back to the original state\n        this.timeGrid.bottomRuleEl.style.display = 'none'; // will be shown later if this <hr> is necessary\n        this.scroller.clear(); // sets height to 'auto' and clears overflow\n        noScrollRowEls.forEach(uncompensateScroll);\n        // limit number of events in the all-day area\n        if (this.dayGrid) {\n            this.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            eventLimit = this.context.options.eventLimit;\n            if (eventLimit && typeof eventLimit !== 'number') {\n                eventLimit = TIMEGRID_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n            }\n            if (eventLimit) {\n                this.dayGrid.limitRows(eventLimit);\n            }\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                // make the all-day and header rows lines up\n                noScrollRowEls.forEach(function (rowEl) {\n                    compensateScroll(rowEl, scrollbarWidths);\n                });\n                // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n                // and reapply the desired height to the scroller.\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n            // if there's any space below the slats, show the horizontal rule.\n            // this won't cause any new overflow, because lockOverflow already called.\n            if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n                this.timeGrid.bottomRuleEl.style.display = '';\n            }\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractTimeGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Computes the initial pre-configured scroll state prior to allowing the user to change it\n    AbstractTimeGridView.prototype.computeDateScroll = function (duration) {\n        var top = this.timeGrid.computeTimeTop(duration);\n        // zoom can give weird floating-point values. rather scroll a little bit further\n        top = Math.ceil(top);\n        if (top) {\n            top++; // to overcome top border that slots beyond the first have. looks better\n        }\n        return { top: top };\n    };\n    AbstractTimeGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractTimeGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    // Generates an HTML attribute string for setting the width of the axis, if it is known\n    AbstractTimeGridView.prototype.axisStyleAttr = function () {\n        if (this.axisWidth != null) {\n            return 'style=\"width:' + this.axisWidth + 'px\"';\n        }\n        return '';\n    };\n    return AbstractTimeGridView;\n}(View));\nAbstractTimeGridView.prototype.usesMinMaxTime = true; // indicates that minTime/maxTime affects rendering\n\nvar SimpleTimeGrid = /** @class */ (function (_super) {\n    __extends(SimpleTimeGrid, _super);\n    function SimpleTimeGrid(timeGrid) {\n        var _this = _super.call(this, timeGrid.el) || this;\n        _this.buildDayRanges = memoize(buildDayRanges);\n        _this.slicer = new TimeGridSlicer();\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    SimpleTimeGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.timeGrid.el\n        });\n    };\n    SimpleTimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleTimeGrid.prototype.render = function (props, context) {\n        var dateEnv = this.context.dateEnv;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        var dayRanges = this.dayRanges = this.buildDayRanges(dayTable, dateProfile, dateEnv);\n        var timeGrid = this.timeGrid;\n        timeGrid.receiveContext(context); // hack because context is used in sliceProps\n        timeGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, null, context.calendar, timeGrid, dayRanges), { dateProfile: dateProfile, cells: dayTable.cells[0] }), context);\n    };\n    SimpleTimeGrid.prototype.renderNowIndicator = function (date) {\n        this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date, this.timeGrid, this.dayRanges), date);\n    };\n    SimpleTimeGrid.prototype.buildPositionCaches = function () {\n        this.timeGrid.buildPositionCaches();\n    };\n    SimpleTimeGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.timeGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.timeGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleTimeGrid;\n}(DateComponent));\nfunction buildDayRanges(dayTable, dateProfile, dateEnv) {\n    var ranges = [];\n    for (var _i = 0, _a = dayTable.headerDates; _i < _a.length; _i++) {\n        var date = _a[_i];\n        ranges.push({\n            start: dateEnv.add(date, dateProfile.minTime),\n            end: dateEnv.add(date, dateProfile.maxTime)\n        });\n    }\n    return ranges;\n}\nvar TimeGridSlicer = /** @class */ (function (_super) {\n    __extends(TimeGridSlicer, _super);\n    function TimeGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridSlicer.prototype.sliceRange = function (range, dayRanges) {\n        var segs = [];\n        for (var col = 0; col < dayRanges.length; col++) {\n            var segRange = intersectRanges(range, dayRanges[col]);\n            if (segRange) {\n                segs.push({\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                    col: col\n                });\n            }\n        }\n        return segs;\n    };\n    return TimeGridSlicer;\n}(Slicer));\n\nvar TimeGridView = /** @class */ (function (_super) {\n    __extends(TimeGridView, _super);\n    function TimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    TimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // for flags for updateSize. also _renderSkeleton/_unrenderSkeleton\n        var _a = this.props, dateProfile = _a.dateProfile, dateProfileGenerator = _a.dateProfileGenerator;\n        var nextDayThreshold = context.nextDayThreshold;\n        var dayTable = this.buildDayTable(dateProfile, dateProfileGenerator);\n        var splitProps = this.splitter.splitProps(props);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: true,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleTimeGrid.receiveProps(__assign({}, splitProps['timed'], { dateProfile: dateProfile,\n            dayTable: dayTable }), context);\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.receiveProps(__assign({}, splitProps['allDay'], { dateProfile: dateProfile,\n                dayTable: dayTable,\n                nextDayThreshold: nextDayThreshold, isRigid: false }), context);\n        }\n        this.startNowIndicator(dateProfile, dateProfileGenerator);\n    };\n    TimeGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleTimeGrid = new SimpleTimeGrid(this.timeGrid);\n        if (this.dayGrid) {\n            this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n        }\n    };\n    TimeGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleTimeGrid.destroy();\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.destroy();\n        }\n    };\n    TimeGridView.prototype.renderNowIndicator = function (date) {\n        this.simpleTimeGrid.renderNowIndicator(date);\n    };\n    return TimeGridView;\n}(AbstractTimeGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, false);\n}\n\nvar main = createPlugin({\n    defaultView: 'timeGridWeek',\n    views: {\n        timeGrid: {\n            class: TimeGridView,\n            allDaySlot: true,\n            slotDuration: '00:30:00',\n            slotEventOverlap: true // a bad name. confused with overlap/constraint system\n        },\n        timeGridDay: {\n            type: 'timeGrid',\n            duration: { days: 1 }\n        },\n        timeGridWeek: {\n            type: 'timeGrid',\n            duration: { weeks: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { AbstractTimeGridView, TimeGrid, TimeGridSlicer, TimeGridView, buildDayRanges, buildDayTable };\n"]}